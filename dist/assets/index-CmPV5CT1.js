const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TasksPage-IAvqk8t1.js","assets/proxy-NI_uQqll.js","assets/useTouchGestures-DTPpf8I6.js","assets/textarea-CLYlbfuL.js","assets/en-US-DSSwd-Ay.js","assets/endOfMonth-BNqLjwTF.js","assets/select-DWoYBqYA.js","assets/index-BVtwpD2P.js","assets/plus-lxv2YYA4.js","assets/DashboardPage-BiOWOiV7.js","assets/calendar-OdXi2JbI.js","assets/format-BmZa2Fkx.js","assets/trending-up-z4_qGM5z.js","assets/flame-C5BFthz_.js","assets/user-plus-BgeY3go9.js","assets/TeamChatPage-CwYU8xjR.js","assets/copy-jnsvgMHH.js","assets/MeetlyPage-kqU1neT9.js","assets/circle-alert-B94dV94b.js","assets/sparkles-Ck2RKWx7.js","assets/brain-CHZvHF1T.js","assets/shield-BP7UPRXv.js","assets/zap-BVQ1LK7P.js","assets/TimerPage-B00c81lW.js","assets/CalendarPage-BYzD1iI9.js","assets/NotesPage-HeIcGQMA.js","assets/AnalyticsPage-BGRkCECW.js","assets/ChatPage-BINNPgw0.js","assets/ProfilePage-DfpXoPo_.js"])))=>i.map(i=>d[i]);
var Z3=Object.defineProperty;var cI=t=>{throw TypeError(t)};var J3=(t,e,n)=>e in t?Z3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mt=(t,e,n)=>J3(t,typeof e!="symbol"?e+"":e,n),T_=(t,e,n)=>e.has(t)||cI("Cannot "+n);var Q=(t,e,n)=>(T_(t,e,"read from private field"),n?n.call(t):e.get(t)),rt=(t,e,n)=>e.has(t)?cI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),je=(t,e,n,r)=>(T_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Fn=(t,e,n)=>(T_(t,e,"access private method"),n);var Cp=(t,e,n,r)=>({set _(s){je(t,e,s,n)},get _(){return Q(t,e,r)}});function e6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const t6="modulepreload",n6=function(t){return"/"+t},uI={},wn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=n6(l),l in uI)return;uI[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":t6,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function rP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sP={exports:{}},Ey={},iP={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=Symbol.for("react.element"),r6=Symbol.for("react.portal"),s6=Symbol.for("react.fragment"),i6=Symbol.for("react.strict_mode"),o6=Symbol.for("react.profiler"),a6=Symbol.for("react.provider"),l6=Symbol.for("react.context"),c6=Symbol.for("react.forward_ref"),u6=Symbol.for("react.suspense"),d6=Symbol.for("react.memo"),h6=Symbol.for("react.lazy"),dI=Symbol.iterator;function f6(t){return t===null||typeof t!="object"?null:(t=dI&&t[dI]||t["@@iterator"],typeof t=="function"?t:null)}var oP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aP=Object.assign,lP={};function Mu(t,e,n){this.props=t,this.context=e,this.refs=lP,this.updater=n||oP}Mu.prototype.isReactComponent={};Mu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cP(){}cP.prototype=Mu.prototype;function Tb(t,e,n){this.props=t,this.context=e,this.refs=lP,this.updater=n||oP}var xb=Tb.prototype=new cP;xb.constructor=Tb;aP(xb,Mu.prototype);xb.isPureReactComponent=!0;var hI=Array.isArray,uP=Object.prototype.hasOwnProperty,Sb={current:null},dP={key:!0,ref:!0,__self:!0,__source:!0};function hP(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)uP.call(e,r)&&!dP.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:If,type:t,key:i,ref:o,props:s,_owner:Sb.current}}function p6(t,e){return{$$typeof:If,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cb(t){return typeof t=="object"&&t!==null&&t.$$typeof===If}function m6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fI=/\/+/g;function x_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?m6(""+t.key):e.toString(36)}function cm(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case If:case r6:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+x_(o,0):r,hI(s)?(n="",t!=null&&(n=t.replace(fI,"$&/")+"/"),cm(s,e,n,"",function(c){return c})):s!=null&&(Cb(s)&&(s=p6(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",hI(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+x_(i,a);o+=cm(i,e,n,l,s)}else if(l=f6(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+x_(i,a++),o+=cm(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ip(t,e,n){if(t==null)return t;var r=[],s=0;return cm(t,r,"","",function(i){return e.call(n,i,s++)}),r}function g6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ar={current:null},um={transition:null},y6={ReactCurrentDispatcher:ar,ReactCurrentBatchConfig:um,ReactCurrentOwner:Sb};function fP(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Ip,forEach:function(t,e,n){Ip(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ip(t,function(){e++}),e},toArray:function(t){return Ip(t,function(e){return e})||[]},only:function(t){if(!Cb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=Mu;qe.Fragment=s6;qe.Profiler=o6;qe.PureComponent=Tb;qe.StrictMode=i6;qe.Suspense=u6;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y6;qe.act=fP;qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aP({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Sb.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uP.call(e,l)&&!dP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:If,type:t.type,key:s,ref:i,props:r,_owner:o}};qe.createContext=function(t){return t={$$typeof:l6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:a6,_context:t},t.Consumer=t};qe.createElement=hP;qe.createFactory=function(t){var e=hP.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:c6,render:t}};qe.isValidElement=Cb;qe.lazy=function(t){return{$$typeof:h6,_payload:{_status:-1,_result:t},_init:g6}};qe.memo=function(t,e){return{$$typeof:d6,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=um.transition;um.transition={};try{t()}finally{um.transition=e}};qe.unstable_act=fP;qe.useCallback=function(t,e){return ar.current.useCallback(t,e)};qe.useContext=function(t){return ar.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return ar.current.useDeferredValue(t)};qe.useEffect=function(t,e){return ar.current.useEffect(t,e)};qe.useId=function(){return ar.current.useId()};qe.useImperativeHandle=function(t,e,n){return ar.current.useImperativeHandle(t,e,n)};qe.useInsertionEffect=function(t,e){return ar.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return ar.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return ar.current.useMemo(t,e)};qe.useReducer=function(t,e,n){return ar.current.useReducer(t,e,n)};qe.useRef=function(t){return ar.current.useRef(t)};qe.useState=function(t){return ar.current.useState(t)};qe.useSyncExternalStore=function(t,e,n){return ar.current.useSyncExternalStore(t,e,n)};qe.useTransition=function(){return ar.current.useTransition()};qe.version="18.3.1";iP.exports=qe;var g=iP.exports;const G=rP(g),Ib=e6({__proto__:null,default:G},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v6=g,_6=Symbol.for("react.element"),w6=Symbol.for("react.fragment"),E6=Object.prototype.hasOwnProperty,b6=v6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T6={key:!0,ref:!0,__self:!0,__source:!0};function pP(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)E6.call(e,r)&&!T6.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_6,type:t,key:i,ref:o,props:s,_owner:b6.current}}Ey.Fragment=w6;Ey.jsx=pP;Ey.jsxs=pP;sP.exports=Ey;var f=sP.exports,mP={exports:{}},Hr={},gP={exports:{}},yP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,j){var H=F.length;F.push(j);e:for(;0<H;){var te=H-1>>>1,J=F[te];if(0<s(J,j))F[te]=j,F[H]=J,H=te;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var j=F[0],H=F.pop();if(H!==j){F[0]=H;e:for(var te=0,J=F.length,se=J>>>1;te<se;){var de=2*(te+1)-1,be=F[de],Pe=de+1,ve=F[Pe];if(0>s(be,H))Pe<J&&0>s(ve,be)?(F[te]=ve,F[Pe]=H,te=Pe):(F[te]=be,F[de]=H,te=de);else if(Pe<J&&0>s(ve,H))F[te]=ve,F[Pe]=H,te=Pe;else break e}}return j}function s(F,j){var H=F.sortIndex-j.sortIndex;return H!==0?H:F.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,_=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=F)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function R(F){if(y=!1,x(F),!_)if(n(l)!==null)_=!0,B(O);else{var j=n(c);j!==null&&Y(R,j.startTime-F)}}function O(F,j){_=!1,y&&(y=!1,b(S),S=-1),m=!0;var H=p;try{for(x(j),h=n(l);h!==null&&(!(h.expirationTime>j)||F&&!P());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var J=te(h.expirationTime<=j);j=t.unstable_now(),typeof J=="function"?h.callback=J:h===n(l)&&r(l),x(j)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var de=n(c);de!==null&&Y(R,de.startTime-j),se=!1}return se}finally{h=null,p=H,m=!1}}var L=!1,k=null,S=-1,I=5,C=-1;function P(){return!(t.unstable_now()-C<I)}function D(){if(k!==null){var F=t.unstable_now();C=F;var j=!0;try{j=k(!0,F)}finally{j?A():(L=!1,k=null)}}else L=!1}var A;if(typeof E=="function")A=function(){E(D)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,$=q.port2;q.port1.onmessage=D,A=function(){$.postMessage(null)}}else A=function(){w(D,0)};function B(F){k=F,L||(L=!0,A())}function Y(F,j){S=w(function(){F(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,B(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var H=p;p=j;try{return F()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=p;p=F;try{return j()}finally{p=H}},t.unstable_scheduleCallback=function(F,j,H){var te=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?te+H:te):H=te,F){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=H+J,F={id:u++,callback:j,priorityLevel:F,startTime:H,expirationTime:J,sortIndex:-1},H>te?(F.sortIndex=H,e(c,F),n(l)===null&&F===n(c)&&(y?(b(S),S=-1):y=!0,Y(R,H-te))):(F.sortIndex=J,e(l,F),_||m||(_=!0,B(O))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var j=p;return function(){var H=p;p=j;try{return F.apply(this,arguments)}finally{p=H}}}})(yP);gP.exports=yP;var x6=gP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S6=g,zr=x6;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vP=new Set,xh={};function Vl(t,e){ru(t,e),ru(t+"Capture",e)}function ru(t,e){for(xh[t]=e,t=0;t<e.length;t++)vP.add(e[t])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kw=Object.prototype.hasOwnProperty,C6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pI={},mI={};function I6(t){return Kw.call(mI,t)?!0:Kw.call(pI,t)?!1:C6.test(t)?mI[t]=!0:(pI[t]=!0,!1)}function k6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function R6(t,e,n,r){if(e===null||typeof e>"u"||k6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nn[t]=new lr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nn[e]=new lr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nn[t]=new lr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nn[t]=new lr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nn[t]=new lr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nn[t]=new lr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nn[t]=new lr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nn[t]=new lr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nn[t]=new lr(t,5,!1,t.toLowerCase(),null,!1,!1)});var kb=/[\-:]([a-z])/g;function Rb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kb,Rb);Nn[e]=new lr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kb,Rb);Nn[e]=new lr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kb,Rb);Nn[e]=new lr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nn[t]=new lr(t,1,!1,t.toLowerCase(),null,!1,!1)});Nn.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nn[t]=new lr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ab(t,e,n,r){var s=Nn.hasOwnProperty(e)?Nn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(R6(e,n,s,r)&&(n=null),r||s===null?I6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var co=S6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kp=Symbol.for("react.element"),wc=Symbol.for("react.portal"),Ec=Symbol.for("react.fragment"),Nb=Symbol.for("react.strict_mode"),Qw=Symbol.for("react.profiler"),_P=Symbol.for("react.provider"),wP=Symbol.for("react.context"),Pb=Symbol.for("react.forward_ref"),Yw=Symbol.for("react.suspense"),Xw=Symbol.for("react.suspense_list"),Db=Symbol.for("react.memo"),To=Symbol.for("react.lazy"),EP=Symbol.for("react.offscreen"),gI=Symbol.iterator;function gd(t){return t===null||typeof t!="object"?null:(t=gI&&t[gI]||t["@@iterator"],typeof t=="function"?t:null)}var Dt=Object.assign,S_;function Md(t){if(S_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);S_=e&&e[1]||""}return`
`+S_+t}var C_=!1;function I_(t,e){if(!t||C_)return"";C_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{C_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Md(t):""}function A6(t){switch(t.tag){case 5:return Md(t.type);case 16:return Md("Lazy");case 13:return Md("Suspense");case 19:return Md("SuspenseList");case 0:case 2:case 15:return t=I_(t.type,!1),t;case 11:return t=I_(t.type.render,!1),t;case 1:return t=I_(t.type,!0),t;default:return""}}function Zw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ec:return"Fragment";case wc:return"Portal";case Qw:return"Profiler";case Nb:return"StrictMode";case Yw:return"Suspense";case Xw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wP:return(t.displayName||"Context")+".Consumer";case _P:return(t._context.displayName||"Context")+".Provider";case Pb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Db:return e=t.displayName||null,e!==null?e:Zw(t.type)||"Memo";case To:e=t._payload,t=t._init;try{return Zw(t(e))}catch{}}return null}function N6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zw(e);case 8:return e===Nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function P6(t){var e=bP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rp(t){t._valueTracker||(t._valueTracker=P6(t))}function TP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jw(t,e){var n=e.checked;return Dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xP(t,e){e=e.checked,e!=null&&Ab(t,"checked",e,!1)}function e0(t,e){xP(t,e);var n=oa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?t0(t,e.type,n):e.hasOwnProperty("defaultValue")&&t0(t,e.type,oa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function t0(t,e,n){(e!=="number"||Bm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ld=Array.isArray;function Dc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oa(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function n0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _I(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(Ld(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oa(n)}}function SP(t,e){var n=oa(e.value),r=oa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ap,IP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ap=Ap||document.createElement("div"),Ap.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ap.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D6=["Webkit","ms","Moz","O"];Object.keys(Qd).forEach(function(t){D6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qd[e]=Qd[t]})});function kP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qd.hasOwnProperty(t)&&Qd[t]?(""+e).trim():e+"px"}function RP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var O6=Dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function s0(t,e){if(e){if(O6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function i0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o0=null;function Ob(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var a0=null,Oc=null,Mc=null;function EI(t){if(t=Af(t)){if(typeof a0!="function")throw Error(re(280));var e=t.stateNode;e&&(e=Cy(e),a0(t.stateNode,t.type,e))}}function AP(t){Oc?Mc?Mc.push(t):Mc=[t]:Oc=t}function NP(){if(Oc){var t=Oc,e=Mc;if(Mc=Oc=null,EI(t),e)for(t=0;t<e.length;t++)EI(e[t])}}function PP(t,e){return t(e)}function DP(){}var k_=!1;function OP(t,e,n){if(k_)return t(e,n);k_=!0;try{return PP(t,e,n)}finally{k_=!1,(Oc!==null||Mc!==null)&&(DP(),NP())}}function Ch(t,e){var n=t.stateNode;if(n===null)return null;var r=Cy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var l0=!1;if(Qi)try{var yd={};Object.defineProperty(yd,"passive",{get:function(){l0=!0}}),window.addEventListener("test",yd,yd),window.removeEventListener("test",yd,yd)}catch{l0=!1}function M6(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Yd=!1,zm=null,Wm=!1,c0=null,L6={onError:function(t){Yd=!0,zm=t}};function j6(t,e,n,r,s,i,o,a,l){Yd=!1,zm=null,M6.apply(L6,arguments)}function F6(t,e,n,r,s,i,o,a,l){if(j6.apply(this,arguments),Yd){if(Yd){var c=zm;Yd=!1,zm=null}else throw Error(re(198));Wm||(Wm=!0,c0=c)}}function Ul(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function MP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bI(t){if(Ul(t)!==t)throw Error(re(188))}function V6(t){var e=t.alternate;if(!e){if(e=Ul(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return bI(s),t;if(i===r)return bI(s),e;i=i.sibling}throw Error(re(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function LP(t){return t=V6(t),t!==null?jP(t):null}function jP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jP(t);if(e!==null)return e;t=t.sibling}return null}var FP=zr.unstable_scheduleCallback,TI=zr.unstable_cancelCallback,U6=zr.unstable_shouldYield,$6=zr.unstable_requestPaint,Kt=zr.unstable_now,B6=zr.unstable_getCurrentPriorityLevel,Mb=zr.unstable_ImmediatePriority,VP=zr.unstable_UserBlockingPriority,qm=zr.unstable_NormalPriority,z6=zr.unstable_LowPriority,UP=zr.unstable_IdlePriority,by=null,si=null;function W6(t){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(by,t,void 0,(t.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:G6,q6=Math.log,H6=Math.LN2;function G6(t){return t>>>=0,t===0?32:31-(q6(t)/H6|0)|0}var Np=64,Pp=4194304;function jd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=jd(a):(i&=o,i!==0&&(r=jd(i)))}else o=n&~s,o!==0?r=jd(o):i!==0&&(r=jd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-As(e),s=1<<n,r|=t[n],e&=~s;return r}function K6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-As(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=K6(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function u0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $P(){var t=Np;return Np<<=1,!(Np&4194240)&&(Np=64),t}function R_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-As(e),t[e]=n}function Y6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-As(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-As(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ct=0;function BP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zP,jb,WP,qP,HP,d0=!1,Dp=[],Wo=null,qo=null,Ho=null,Ih=new Map,kh=new Map,Io=[],X6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xI(t,e){switch(t){case"focusin":case"focusout":Wo=null;break;case"dragenter":case"dragleave":qo=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":Ih.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kh.delete(e.pointerId)}}function vd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Af(e),e!==null&&jb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Z6(t,e,n,r,s){switch(e){case"focusin":return Wo=vd(Wo,t,e,n,r,s),!0;case"dragenter":return qo=vd(qo,t,e,n,r,s),!0;case"mouseover":return Ho=vd(Ho,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ih.set(i,vd(Ih.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,kh.set(i,vd(kh.get(i)||null,t,e,n,r,s)),!0}return!1}function GP(t){var e=Ka(t.target);if(e!==null){var n=Ul(e);if(n!==null){if(e=n.tag,e===13){if(e=MP(n),e!==null){t.blockedOn=e,HP(t.priority,function(){WP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=h0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);o0=r,n.target.dispatchEvent(r),o0=null}else return e=Af(n),e!==null&&jb(e),t.blockedOn=n,!1;e.shift()}return!0}function SI(t,e,n){dm(t)&&n.delete(e)}function J6(){d0=!1,Wo!==null&&dm(Wo)&&(Wo=null),qo!==null&&dm(qo)&&(qo=null),Ho!==null&&dm(Ho)&&(Ho=null),Ih.forEach(SI),kh.forEach(SI)}function _d(t,e){t.blockedOn===e&&(t.blockedOn=null,d0||(d0=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,J6)))}function Rh(t){function e(s){return _d(s,t)}if(0<Dp.length){_d(Dp[0],t);for(var n=1;n<Dp.length;n++){var r=Dp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wo!==null&&_d(Wo,t),qo!==null&&_d(qo,t),Ho!==null&&_d(Ho,t),Ih.forEach(e),kh.forEach(e),n=0;n<Io.length;n++)r=Io[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Io.length&&(n=Io[0],n.blockedOn===null);)GP(n),n.blockedOn===null&&Io.shift()}var Lc=co.ReactCurrentBatchConfig,Gm=!0;function e5(t,e,n,r){var s=ct,i=Lc.transition;Lc.transition=null;try{ct=1,Fb(t,e,n,r)}finally{ct=s,Lc.transition=i}}function t5(t,e,n,r){var s=ct,i=Lc.transition;Lc.transition=null;try{ct=4,Fb(t,e,n,r)}finally{ct=s,Lc.transition=i}}function Fb(t,e,n,r){if(Gm){var s=h0(t,e,n,r);if(s===null)V_(t,e,r,Km,n),xI(t,r);else if(Z6(s,t,e,n,r))r.stopPropagation();else if(xI(t,r),e&4&&-1<X6.indexOf(t)){for(;s!==null;){var i=Af(s);if(i!==null&&zP(i),i=h0(t,e,n,r),i===null&&V_(t,e,r,Km,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else V_(t,e,r,null,n)}}var Km=null;function h0(t,e,n,r){if(Km=null,t=Ob(r),t=Ka(t),t!==null)if(e=Ul(t),e===null)t=null;else if(n=e.tag,n===13){if(t=MP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Km=t,null}function KP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B6()){case Mb:return 1;case VP:return 4;case qm:case z6:return 16;case UP:return 536870912;default:return 16}default:return 16}}var Fo=null,Vb=null,hm=null;function QP(){if(hm)return hm;var t,e=Vb,n=e.length,r,s="value"in Fo?Fo.value:Fo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return hm=s.slice(t,1<r?1-r:void 0)}function fm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Op(){return!0}function CI(){return!1}function Gr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Op:CI,this.isPropagationStopped=CI,this}return Dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Op)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Op)},persist:function(){},isPersistent:Op}),e}var Lu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ub=Gr(Lu),Rf=Dt({},Lu,{view:0,detail:0}),n5=Gr(Rf),A_,N_,wd,Ty=Dt({},Rf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$b,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wd&&(wd&&t.type==="mousemove"?(A_=t.screenX-wd.screenX,N_=t.screenY-wd.screenY):N_=A_=0,wd=t),A_)},movementY:function(t){return"movementY"in t?t.movementY:N_}}),II=Gr(Ty),r5=Dt({},Ty,{dataTransfer:0}),s5=Gr(r5),i5=Dt({},Rf,{relatedTarget:0}),P_=Gr(i5),o5=Dt({},Lu,{animationName:0,elapsedTime:0,pseudoElement:0}),a5=Gr(o5),l5=Dt({},Lu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),c5=Gr(l5),u5=Dt({},Lu,{data:0}),kI=Gr(u5),d5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=f5[t])?!!e[t]:!1}function $b(){return p5}var m5=Dt({},Rf,{key:function(t){if(t.key){var e=d5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?h5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$b,charCode:function(t){return t.type==="keypress"?fm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),g5=Gr(m5),y5=Dt({},Ty,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RI=Gr(y5),v5=Dt({},Rf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$b}),_5=Gr(v5),w5=Dt({},Lu,{propertyName:0,elapsedTime:0,pseudoElement:0}),E5=Gr(w5),b5=Dt({},Ty,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),T5=Gr(b5),x5=[9,13,27,32],Bb=Qi&&"CompositionEvent"in window,Xd=null;Qi&&"documentMode"in document&&(Xd=document.documentMode);var S5=Qi&&"TextEvent"in window&&!Xd,YP=Qi&&(!Bb||Xd&&8<Xd&&11>=Xd),AI=" ",NI=!1;function XP(t,e){switch(t){case"keyup":return x5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bc=!1;function C5(t,e){switch(t){case"compositionend":return ZP(e);case"keypress":return e.which!==32?null:(NI=!0,AI);case"textInput":return t=e.data,t===AI&&NI?null:t;default:return null}}function I5(t,e){if(bc)return t==="compositionend"||!Bb&&XP(t,e)?(t=QP(),hm=Vb=Fo=null,bc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YP&&e.locale!=="ko"?null:e.data;default:return null}}var k5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k5[t.type]:e==="textarea"}function JP(t,e,n,r){AP(r),e=Qm(e,"onChange"),0<e.length&&(n=new Ub("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zd=null,Ah=null;function R5(t){uD(t,0)}function xy(t){var e=Sc(t);if(TP(e))return t}function A5(t,e){if(t==="change")return e}var eD=!1;if(Qi){var D_;if(Qi){var O_="oninput"in document;if(!O_){var DI=document.createElement("div");DI.setAttribute("oninput","return;"),O_=typeof DI.oninput=="function"}D_=O_}else D_=!1;eD=D_&&(!document.documentMode||9<document.documentMode)}function OI(){Zd&&(Zd.detachEvent("onpropertychange",tD),Ah=Zd=null)}function tD(t){if(t.propertyName==="value"&&xy(Ah)){var e=[];JP(e,Ah,t,Ob(t)),OP(R5,e)}}function N5(t,e,n){t==="focusin"?(OI(),Zd=e,Ah=n,Zd.attachEvent("onpropertychange",tD)):t==="focusout"&&OI()}function P5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xy(Ah)}function D5(t,e){if(t==="click")return xy(e)}function O5(t,e){if(t==="input"||t==="change")return xy(e)}function M5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ds=typeof Object.is=="function"?Object.is:M5;function Nh(t,e){if(Ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kw.call(e,s)||!Ds(t[s],e[s]))return!1}return!0}function MI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LI(t,e){var n=MI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=MI(n)}}function nD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rD(){for(var t=window,e=Bm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bm(t.document)}return e}function zb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function L5(t){var e=rD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nD(n.ownerDocument.documentElement,n)){if(r!==null&&zb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=LI(n,i);var o=LI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j5=Qi&&"documentMode"in document&&11>=document.documentMode,Tc=null,f0=null,Jd=null,p0=!1;function jI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;p0||Tc==null||Tc!==Bm(r)||(r=Tc,"selectionStart"in r&&zb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jd&&Nh(Jd,r)||(Jd=r,r=Qm(f0,"onSelect"),0<r.length&&(e=new Ub("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Tc)))}function Mp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xc={animationend:Mp("Animation","AnimationEnd"),animationiteration:Mp("Animation","AnimationIteration"),animationstart:Mp("Animation","AnimationStart"),transitionend:Mp("Transition","TransitionEnd")},M_={},sD={};Qi&&(sD=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function Sy(t){if(M_[t])return M_[t];if(!xc[t])return t;var e=xc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sD)return M_[t]=e[n];return t}var iD=Sy("animationend"),oD=Sy("animationiteration"),aD=Sy("animationstart"),lD=Sy("transitionend"),cD=new Map,FI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(t,e){cD.set(t,e),Vl(e,[t])}for(var L_=0;L_<FI.length;L_++){var j_=FI[L_],F5=j_.toLowerCase(),V5=j_[0].toUpperCase()+j_.slice(1);Ea(F5,"on"+V5)}Ea(iD,"onAnimationEnd");Ea(oD,"onAnimationIteration");Ea(aD,"onAnimationStart");Ea("dblclick","onDoubleClick");Ea("focusin","onFocus");Ea("focusout","onBlur");Ea(lD,"onTransitionEnd");ru("onMouseEnter",["mouseout","mouseover"]);ru("onMouseLeave",["mouseout","mouseover"]);ru("onPointerEnter",["pointerout","pointerover"]);ru("onPointerLeave",["pointerout","pointerover"]);Vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fd));function VI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,F6(r,e,void 0,t),t.currentTarget=null}function uD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;VI(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;VI(s,a,c),i=l}}}if(Wm)throw t=c0,Wm=!1,c0=null,t}function xt(t,e){var n=e[_0];n===void 0&&(n=e[_0]=new Set);var r=t+"__bubble";n.has(r)||(dD(e,t,2,!1),n.add(r))}function F_(t,e,n){var r=0;e&&(r|=4),dD(n,t,r,e)}var Lp="_reactListening"+Math.random().toString(36).slice(2);function Ph(t){if(!t[Lp]){t[Lp]=!0,vP.forEach(function(n){n!=="selectionchange"&&(U5.has(n)||F_(n,!1,t),F_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lp]||(e[Lp]=!0,F_("selectionchange",!1,e))}}function dD(t,e,n,r){switch(KP(e)){case 1:var s=e5;break;case 4:s=t5;break;default:s=Fb}n=s.bind(null,e,n,t),s=void 0,!l0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function V_(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ka(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}OP(function(){var c=i,u=Ob(n),h=[];e:{var p=cD.get(t);if(p!==void 0){var m=Ub,_=t;switch(t){case"keypress":if(fm(n)===0)break e;case"keydown":case"keyup":m=g5;break;case"focusin":_="focus",m=P_;break;case"focusout":_="blur",m=P_;break;case"beforeblur":case"afterblur":m=P_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=II;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=s5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_5;break;case iD:case oD:case aD:m=a5;break;case lD:m=E5;break;case"scroll":m=n5;break;case"wheel":m=T5;break;case"copy":case"cut":case"paste":m=c5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=RI}var y=(e&4)!==0,w=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var E=c,x;E!==null;){x=E;var R=x.stateNode;if(x.tag===5&&R!==null&&(x=R,b!==null&&(R=Ch(E,b),R!=null&&y.push(Dh(E,R,x)))),w)break;E=E.return}0<y.length&&(p=new m(p,_,null,n,u),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==o0&&(_=n.relatedTarget||n.fromElement)&&(Ka(_)||_[Yi]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?Ka(_):null,_!==null&&(w=Ul(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(y=II,R="onMouseLeave",b="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(y=RI,R="onPointerLeave",b="onPointerEnter",E="pointer"),w=m==null?p:Sc(m),x=_==null?p:Sc(_),p=new y(R,E+"leave",m,n,u),p.target=w,p.relatedTarget=x,R=null,Ka(u)===c&&(y=new y(b,E+"enter",_,n,u),y.target=x,y.relatedTarget=w,R=y),w=R,m&&_)t:{for(y=m,b=_,E=0,x=y;x;x=ic(x))E++;for(x=0,R=b;R;R=ic(R))x++;for(;0<E-x;)y=ic(y),E--;for(;0<x-E;)b=ic(b),x--;for(;E--;){if(y===b||b!==null&&y===b.alternate)break t;y=ic(y),b=ic(b)}y=null}else y=null;m!==null&&UI(h,p,m,y,!1),_!==null&&w!==null&&UI(h,w,_,y,!0)}}e:{if(p=c?Sc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=A5;else if(PI(p))if(eD)O=O5;else{O=P5;var L=N5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=D5);if(O&&(O=O(t,c))){JP(h,O,n,u);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&t0(p,"number",p.value)}switch(L=c?Sc(c):window,t){case"focusin":(PI(L)||L.contentEditable==="true")&&(Tc=L,f0=c,Jd=null);break;case"focusout":Jd=f0=Tc=null;break;case"mousedown":p0=!0;break;case"contextmenu":case"mouseup":case"dragend":p0=!1,jI(h,n,u);break;case"selectionchange":if(j5)break;case"keydown":case"keyup":jI(h,n,u)}var k;if(Bb)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else bc?XP(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(YP&&n.locale!=="ko"&&(bc||S!=="onCompositionStart"?S==="onCompositionEnd"&&bc&&(k=QP()):(Fo=u,Vb="value"in Fo?Fo.value:Fo.textContent,bc=!0)),L=Qm(c,S),0<L.length&&(S=new kI(S,t,null,n,u),h.push({event:S,listeners:L}),k?S.data=k:(k=ZP(n),k!==null&&(S.data=k)))),(k=S5?C5(t,n):I5(t,n))&&(c=Qm(c,"onBeforeInput"),0<c.length&&(u=new kI("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=k))}uD(h,e)})}function Dh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ch(t,n),i!=null&&r.unshift(Dh(t,i,s)),i=Ch(t,e),i!=null&&r.push(Dh(t,i,s))),t=t.return}return r}function ic(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function UI(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ch(n,i),l!=null&&o.unshift(Dh(n,l,a))):s||(l=Ch(n,i),l!=null&&o.push(Dh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $5=/\r\n?/g,B5=/\u0000|\uFFFD/g;function $I(t){return(typeof t=="string"?t:""+t).replace($5,`
`).replace(B5,"")}function jp(t,e,n){if(e=$I(e),$I(t)!==e&&n)throw Error(re(425))}function Ym(){}var m0=null,g0=null;function y0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v0=typeof setTimeout=="function"?setTimeout:void 0,z5=typeof clearTimeout=="function"?clearTimeout:void 0,BI=typeof Promise=="function"?Promise:void 0,W5=typeof queueMicrotask=="function"?queueMicrotask:typeof BI<"u"?function(t){return BI.resolve(null).then(t).catch(q5)}:v0;function q5(t){setTimeout(function(){throw t})}function U_(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Rh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Rh(e)}function Go(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ju=Math.random().toString(36).slice(2),Qs="__reactFiber$"+ju,Oh="__reactProps$"+ju,Yi="__reactContainer$"+ju,_0="__reactEvents$"+ju,H5="__reactListeners$"+ju,G5="__reactHandles$"+ju;function Ka(t){var e=t[Qs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yi]||n[Qs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zI(t);t!==null;){if(n=t[Qs])return n;t=zI(t)}return e}t=n,n=t.parentNode}return null}function Af(t){return t=t[Qs]||t[Yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Cy(t){return t[Oh]||null}var w0=[],Cc=-1;function ba(t){return{current:t}}function Ct(t){0>Cc||(t.current=w0[Cc],w0[Cc]=null,Cc--)}function _t(t,e){Cc++,w0[Cc]=t.current,t.current=e}var aa={},Kn=ba(aa),Sr=ba(!1),gl=aa;function su(t,e){var n=t.type.contextTypes;if(!n)return aa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Cr(t){return t=t.childContextTypes,t!=null}function Xm(){Ct(Sr),Ct(Kn)}function WI(t,e,n){if(Kn.current!==aa)throw Error(re(168));_t(Kn,e),_t(Sr,n)}function hD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(re(108,N6(t)||"Unknown",s));return Dt({},n,r)}function Zm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||aa,gl=Kn.current,_t(Kn,t),_t(Sr,Sr.current),!0}function qI(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=hD(t,e,gl),r.__reactInternalMemoizedMergedChildContext=t,Ct(Sr),Ct(Kn),_t(Kn,t)):Ct(Sr),_t(Sr,n)}var Di=null,Iy=!1,$_=!1;function fD(t){Di===null?Di=[t]:Di.push(t)}function K5(t){Iy=!0,fD(t)}function Ta(){if(!$_&&Di!==null){$_=!0;var t=0,e=ct;try{var n=Di;for(ct=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Di=null,Iy=!1}catch(s){throw Di!==null&&(Di=Di.slice(t+1)),FP(Mb,Ta),s}finally{ct=e,$_=!1}}return null}var Ic=[],kc=0,Jm=null,eg=0,Jr=[],es=0,yl=null,ji=1,Fi="";function ja(t,e){Ic[kc++]=eg,Ic[kc++]=Jm,Jm=t,eg=e}function pD(t,e,n){Jr[es++]=ji,Jr[es++]=Fi,Jr[es++]=yl,yl=t;var r=ji;t=Fi;var s=32-As(r)-1;r&=~(1<<s),n+=1;var i=32-As(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ji=1<<32-As(e)+s|n<<s|r,Fi=i+t}else ji=1<<i|n<<s|r,Fi=t}function Wb(t){t.return!==null&&(ja(t,1),pD(t,1,0))}function qb(t){for(;t===Jm;)Jm=Ic[--kc],Ic[kc]=null,eg=Ic[--kc],Ic[kc]=null;for(;t===yl;)yl=Jr[--es],Jr[es]=null,Fi=Jr[--es],Jr[es]=null,ji=Jr[--es],Jr[es]=null}var Vr=null,Lr=null,kt=!1,bs=null;function mD(t,e){var n=ns(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function HI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vr=t,Lr=Go(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vr=t,Lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yl!==null?{id:ji,overflow:Fi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ns(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vr=t,Lr=null,!0):!1;default:return!1}}function E0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function b0(t){if(kt){var e=Lr;if(e){var n=e;if(!HI(t,e)){if(E0(t))throw Error(re(418));e=Go(n.nextSibling);var r=Vr;e&&HI(t,e)?mD(r,n):(t.flags=t.flags&-4097|2,kt=!1,Vr=t)}}else{if(E0(t))throw Error(re(418));t.flags=t.flags&-4097|2,kt=!1,Vr=t}}}function GI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vr=t}function Fp(t){if(t!==Vr)return!1;if(!kt)return GI(t),kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!y0(t.type,t.memoizedProps)),e&&(e=Lr)){if(E0(t))throw gD(),Error(re(418));for(;e;)mD(t,e),e=Go(e.nextSibling)}if(GI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lr=Go(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lr=null}}else Lr=Vr?Go(t.stateNode.nextSibling):null;return!0}function gD(){for(var t=Lr;t;)t=Go(t.nextSibling)}function iu(){Lr=Vr=null,kt=!1}function Hb(t){bs===null?bs=[t]:bs.push(t)}var Q5=co.ReactCurrentBatchConfig;function Ed(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function Vp(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function KI(t){var e=t._init;return e(t._payload)}function yD(t){function e(b,E){if(t){var x=b.deletions;x===null?(b.deletions=[E],b.flags|=16):x.push(E)}}function n(b,E){if(!t)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function r(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function s(b,E){return b=Xo(b,E),b.index=0,b.sibling=null,b}function i(b,E,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<E?(b.flags|=2,E):x):(b.flags|=2,E)):(b.flags|=1048576,E)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,E,x,R){return E===null||E.tag!==6?(E=K_(x,b.mode,R),E.return=b,E):(E=s(E,x),E.return=b,E)}function l(b,E,x,R){var O=x.type;return O===Ec?u(b,E,x.props.children,R,x.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===To&&KI(O)===E.type)?(R=s(E,x.props),R.ref=Ed(b,E,x),R.return=b,R):(R=wm(x.type,x.key,x.props,null,b.mode,R),R.ref=Ed(b,E,x),R.return=b,R)}function c(b,E,x,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=Q_(x,b.mode,R),E.return=b,E):(E=s(E,x.children||[]),E.return=b,E)}function u(b,E,x,R,O){return E===null||E.tag!==7?(E=cl(x,b.mode,R,O),E.return=b,E):(E=s(E,x),E.return=b,E)}function h(b,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return E=K_(""+E,b.mode,x),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case kp:return x=wm(E.type,E.key,E.props,null,b.mode,x),x.ref=Ed(b,null,E),x.return=b,x;case wc:return E=Q_(E,b.mode,x),E.return=b,E;case To:var R=E._init;return h(b,R(E._payload),x)}if(Ld(E)||gd(E))return E=cl(E,b.mode,x,null),E.return=b,E;Vp(b,E)}return null}function p(b,E,x,R){var O=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return O!==null?null:a(b,E,""+x,R);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case kp:return x.key===O?l(b,E,x,R):null;case wc:return x.key===O?c(b,E,x,R):null;case To:return O=x._init,p(b,E,O(x._payload),R)}if(Ld(x)||gd(x))return O!==null?null:u(b,E,x,R,null);Vp(b,x)}return null}function m(b,E,x,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(x)||null,a(E,b,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case kp:return b=b.get(R.key===null?x:R.key)||null,l(E,b,R,O);case wc:return b=b.get(R.key===null?x:R.key)||null,c(E,b,R,O);case To:var L=R._init;return m(b,E,x,L(R._payload),O)}if(Ld(R)||gd(R))return b=b.get(x)||null,u(E,b,R,O,null);Vp(E,R)}return null}function _(b,E,x,R){for(var O=null,L=null,k=E,S=E=0,I=null;k!==null&&S<x.length;S++){k.index>S?(I=k,k=null):I=k.sibling;var C=p(b,k,x[S],R);if(C===null){k===null&&(k=I);break}t&&k&&C.alternate===null&&e(b,k),E=i(C,E,S),L===null?O=C:L.sibling=C,L=C,k=I}if(S===x.length)return n(b,k),kt&&ja(b,S),O;if(k===null){for(;S<x.length;S++)k=h(b,x[S],R),k!==null&&(E=i(k,E,S),L===null?O=k:L.sibling=k,L=k);return kt&&ja(b,S),O}for(k=r(b,k);S<x.length;S++)I=m(k,b,S,x[S],R),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?S:I.key),E=i(I,E,S),L===null?O=I:L.sibling=I,L=I);return t&&k.forEach(function(P){return e(b,P)}),kt&&ja(b,S),O}function y(b,E,x,R){var O=gd(x);if(typeof O!="function")throw Error(re(150));if(x=O.call(x),x==null)throw Error(re(151));for(var L=O=null,k=E,S=E=0,I=null,C=x.next();k!==null&&!C.done;S++,C=x.next()){k.index>S?(I=k,k=null):I=k.sibling;var P=p(b,k,C.value,R);if(P===null){k===null&&(k=I);break}t&&k&&P.alternate===null&&e(b,k),E=i(P,E,S),L===null?O=P:L.sibling=P,L=P,k=I}if(C.done)return n(b,k),kt&&ja(b,S),O;if(k===null){for(;!C.done;S++,C=x.next())C=h(b,C.value,R),C!==null&&(E=i(C,E,S),L===null?O=C:L.sibling=C,L=C);return kt&&ja(b,S),O}for(k=r(b,k);!C.done;S++,C=x.next())C=m(k,b,S,C.value,R),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?S:C.key),E=i(C,E,S),L===null?O=C:L.sibling=C,L=C);return t&&k.forEach(function(D){return e(b,D)}),kt&&ja(b,S),O}function w(b,E,x,R){if(typeof x=="object"&&x!==null&&x.type===Ec&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case kp:e:{for(var O=x.key,L=E;L!==null;){if(L.key===O){if(O=x.type,O===Ec){if(L.tag===7){n(b,L.sibling),E=s(L,x.props.children),E.return=b,b=E;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===To&&KI(O)===L.type){n(b,L.sibling),E=s(L,x.props),E.ref=Ed(b,L,x),E.return=b,b=E;break e}n(b,L);break}else e(b,L);L=L.sibling}x.type===Ec?(E=cl(x.props.children,b.mode,R,x.key),E.return=b,b=E):(R=wm(x.type,x.key,x.props,null,b.mode,R),R.ref=Ed(b,E,x),R.return=b,b=R)}return o(b);case wc:e:{for(L=x.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(b,E.sibling),E=s(E,x.children||[]),E.return=b,b=E;break e}else{n(b,E);break}else e(b,E);E=E.sibling}E=Q_(x,b.mode,R),E.return=b,b=E}return o(b);case To:return L=x._init,w(b,E,L(x._payload),R)}if(Ld(x))return _(b,E,x,R);if(gd(x))return y(b,E,x,R);Vp(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,E!==null&&E.tag===6?(n(b,E.sibling),E=s(E,x),E.return=b,b=E):(n(b,E),E=K_(x,b.mode,R),E.return=b,b=E),o(b)):n(b,E)}return w}var ou=yD(!0),vD=yD(!1),tg=ba(null),ng=null,Rc=null,Gb=null;function Kb(){Gb=Rc=ng=null}function Qb(t){var e=tg.current;Ct(tg),t._currentValue=e}function T0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jc(t,e){ng=t,Gb=Rc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Er=!0),t.firstContext=null)}function os(t){var e=t._currentValue;if(Gb!==t)if(t={context:t,memoizedValue:e,next:null},Rc===null){if(ng===null)throw Error(re(308));Rc=t,ng.dependencies={lanes:0,firstContext:t}}else Rc=Rc.next=t;return e}var Qa=null;function Yb(t){Qa===null?Qa=[t]:Qa.push(t)}function _D(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yb(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xi(t,r)}function Xi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xo=!1;function Xb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ko(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,et&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xi(t,n)}return s=r.interleaved,s===null?(e.next=e,Yb(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xi(t,n)}function pm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lb(t,n)}}function QI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rg(t,e,n,r){var s=t.updateQueue;xo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,y=a;switch(p=e,m=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){h=_.call(m,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,p=typeof _=="function"?_.call(m,h,p):_,p==null)break e;h=Dt({},h,p);break e;case 2:xo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_l|=o,t.lanes=o,t.memoizedState=h}}function YI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(re(191,s));s.call(r)}}}var Nf={},ii=ba(Nf),Mh=ba(Nf),Lh=ba(Nf);function Ya(t){if(t===Nf)throw Error(re(174));return t}function Zb(t,e){switch(_t(Lh,e),_t(Mh,t),_t(ii,Nf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:r0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=r0(e,t)}Ct(ii),_t(ii,e)}function au(){Ct(ii),Ct(Mh),Ct(Lh)}function ED(t){Ya(Lh.current);var e=Ya(ii.current),n=r0(e,t.type);e!==n&&(_t(Mh,t),_t(ii,n))}function Jb(t){Mh.current===t&&(Ct(ii),Ct(Mh))}var Rt=ba(0);function sg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var B_=[];function eT(){for(var t=0;t<B_.length;t++)B_[t]._workInProgressVersionPrimary=null;B_.length=0}var mm=co.ReactCurrentDispatcher,z_=co.ReactCurrentBatchConfig,vl=0,Pt=null,un=null,gn=null,ig=!1,eh=!1,jh=0,Y5=0;function Vn(){throw Error(re(321))}function tT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ds(t[n],e[n]))return!1;return!0}function nT(t,e,n,r,s,i){if(vl=i,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mm.current=t===null||t.memoizedState===null?e9:t9,t=n(r,s),eh){i=0;do{if(eh=!1,jh=0,25<=i)throw Error(re(301));i+=1,gn=un=null,e.updateQueue=null,mm.current=n9,t=n(r,s)}while(eh)}if(mm.current=og,e=un!==null&&un.next!==null,vl=0,gn=un=Pt=null,ig=!1,e)throw Error(re(300));return t}function rT(){var t=jh!==0;return jh=0,t}function zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Pt.memoizedState=gn=t:gn=gn.next=t,gn}function as(){if(un===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=un.next;var e=gn===null?Pt.memoizedState:gn.next;if(e!==null)gn=e,un=t;else{if(t===null)throw Error(re(310));un=t,t={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},gn===null?Pt.memoizedState=gn=t:gn=gn.next=t}return gn}function Fh(t,e){return typeof e=="function"?e(t):e}function W_(t){var e=as(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=un,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((vl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Pt.lanes|=u,_l|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Ds(r,e.memoizedState)||(Er=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pt.lanes|=i,_l|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function q_(t){var e=as(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ds(i,e.memoizedState)||(Er=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bD(){}function TD(t,e){var n=Pt,r=as(),s=e(),i=!Ds(r.memoizedState,s);if(i&&(r.memoizedState=s,Er=!0),r=r.queue,sT(CD.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gn!==null&&gn.memoizedState.tag&1){if(n.flags|=2048,Vh(9,SD.bind(null,n,r,s,e),void 0,null),En===null)throw Error(re(349));vl&30||xD(n,e,s)}return s}function xD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SD(t,e,n,r){e.value=n,e.getSnapshot=r,ID(e)&&kD(t)}function CD(t,e,n){return n(function(){ID(e)&&kD(t)})}function ID(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ds(t,n)}catch{return!0}}function kD(t){var e=Xi(t,1);e!==null&&Ns(e,t,1,-1)}function XI(t){var e=zs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fh,lastRenderedState:t},e.queue=t,t=t.dispatch=J5.bind(null,Pt,t),[e.memoizedState,t]}function Vh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RD(){return as().memoizedState}function gm(t,e,n,r){var s=zs();Pt.flags|=t,s.memoizedState=Vh(1|e,n,void 0,r===void 0?null:r)}function ky(t,e,n,r){var s=as();r=r===void 0?null:r;var i=void 0;if(un!==null){var o=un.memoizedState;if(i=o.destroy,r!==null&&tT(r,o.deps)){s.memoizedState=Vh(e,n,i,r);return}}Pt.flags|=t,s.memoizedState=Vh(1|e,n,i,r)}function ZI(t,e){return gm(8390656,8,t,e)}function sT(t,e){return ky(2048,8,t,e)}function AD(t,e){return ky(4,2,t,e)}function ND(t,e){return ky(4,4,t,e)}function PD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DD(t,e,n){return n=n!=null?n.concat([t]):null,ky(4,4,PD.bind(null,e,t),n)}function iT(){}function OD(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function MD(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function LD(t,e,n){return vl&21?(Ds(n,e)||(n=$P(),Pt.lanes|=n,_l|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Er=!0),t.memoizedState=n)}function X5(t,e){var n=ct;ct=n!==0&&4>n?n:4,t(!0);var r=z_.transition;z_.transition={};try{t(!1),e()}finally{ct=n,z_.transition=r}}function jD(){return as().memoizedState}function Z5(t,e,n){var r=Yo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FD(t))VD(e,n);else if(n=_D(t,e,n,r),n!==null){var s=nr();Ns(n,t,r,s),UD(n,e,r)}}function J5(t,e,n){var r=Yo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FD(t))VD(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ds(a,o)){var l=e.interleaved;l===null?(s.next=s,Yb(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=_D(t,e,s,r),n!==null&&(s=nr(),Ns(n,t,r,s),UD(n,e,r))}}function FD(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function VD(t,e){eh=ig=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function UD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lb(t,n)}}var og={readContext:os,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},e9={readContext:os,useCallback:function(t,e){return zs().memoizedState=[t,e===void 0?null:e],t},useContext:os,useEffect:ZI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gm(4194308,4,PD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gm(4194308,4,t,e)},useInsertionEffect:function(t,e){return gm(4,2,t,e)},useMemo:function(t,e){var n=zs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Z5.bind(null,Pt,t),[r.memoizedState,t]},useRef:function(t){var e=zs();return t={current:t},e.memoizedState=t},useState:XI,useDebugValue:iT,useDeferredValue:function(t){return zs().memoizedState=t},useTransition:function(){var t=XI(!1),e=t[0];return t=X5.bind(null,t[1]),zs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pt,s=zs();if(kt){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),En===null)throw Error(re(349));vl&30||xD(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ZI(CD.bind(null,r,i,t),[t]),r.flags|=2048,Vh(9,SD.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zs(),e=En.identifierPrefix;if(kt){var n=Fi,r=ji;n=(r&~(1<<32-As(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Y5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t9={readContext:os,useCallback:OD,useContext:os,useEffect:sT,useImperativeHandle:DD,useInsertionEffect:AD,useLayoutEffect:ND,useMemo:MD,useReducer:W_,useRef:RD,useState:function(){return W_(Fh)},useDebugValue:iT,useDeferredValue:function(t){var e=as();return LD(e,un.memoizedState,t)},useTransition:function(){var t=W_(Fh)[0],e=as().memoizedState;return[t,e]},useMutableSource:bD,useSyncExternalStore:TD,useId:jD,unstable_isNewReconciler:!1},n9={readContext:os,useCallback:OD,useContext:os,useEffect:sT,useImperativeHandle:DD,useInsertionEffect:AD,useLayoutEffect:ND,useMemo:MD,useReducer:q_,useRef:RD,useState:function(){return q_(Fh)},useDebugValue:iT,useDeferredValue:function(t){var e=as();return un===null?e.memoizedState=t:LD(e,un.memoizedState,t)},useTransition:function(){var t=q_(Fh)[0],e=as().memoizedState;return[t,e]},useMutableSource:bD,useSyncExternalStore:TD,useId:jD,unstable_isNewReconciler:!1};function ys(t,e){if(t&&t.defaultProps){e=Dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function x0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ry={isMounted:function(t){return(t=t._reactInternals)?Ul(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nr(),s=Yo(t),i=Wi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,s),e!==null&&(Ns(e,t,s,r),pm(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nr(),s=Yo(t),i=Wi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,s),e!==null&&(Ns(e,t,s,r),pm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nr(),r=Yo(t),s=Wi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ko(t,s,r),e!==null&&(Ns(e,t,r,n),pm(e,t,r))}};function JI(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Nh(n,r)||!Nh(s,i):!0}function $D(t,e,n){var r=!1,s=aa,i=e.contextType;return typeof i=="object"&&i!==null?i=os(i):(s=Cr(e)?gl:Kn.current,r=e.contextTypes,i=(r=r!=null)?su(t,s):aa),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ry,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function e1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ry.enqueueReplaceState(e,e.state,null)}function S0(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xb(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=os(i):(i=Cr(e)?gl:Kn.current,s.context=su(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(x0(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ry.enqueueReplaceState(s,s.state,null),rg(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lu(t,e){try{var n="",r=e;do n+=A6(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function H_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function C0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r9=typeof WeakMap=="function"?WeakMap:Map;function BD(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lg||(lg=!0,L0=r),C0(t,e)},n}function zD(t,e,n){n=Wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){C0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){C0(t,e),typeof r!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function t1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new r9;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=y9.bind(null,t,e,n),e.then(t,t))}function n1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function r1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,Ko(n,e,1))),n.lanes|=1),t)}var s9=co.ReactCurrentOwner,Er=!1;function Jn(t,e,n,r){e.child=t===null?vD(e,null,n,r):ou(e,t.child,n,r)}function s1(t,e,n,r,s){n=n.render;var i=e.ref;return jc(e,s),r=nT(t,e,n,r,i,s),n=rT(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zi(t,e,s)):(kt&&n&&Wb(e),e.flags|=1,Jn(t,e,r,s),e.child)}function i1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!fT(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,WD(t,e,i,r,s)):(t=wm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nh,n(o,r)&&t.ref===e.ref)return Zi(t,e,s)}return e.flags|=1,t=Xo(i,r),t.ref=e.ref,t.return=e,e.child=t}function WD(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Nh(i,r)&&t.ref===e.ref)if(Er=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Er=!0);else return e.lanes=t.lanes,Zi(t,e,s)}return I0(t,e,n,r,s)}function qD(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Nc,Dr),Dr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(Nc,Dr),Dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_t(Nc,Dr),Dr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_t(Nc,Dr),Dr|=r;return Jn(t,e,s,n),e.child}function HD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function I0(t,e,n,r,s){var i=Cr(n)?gl:Kn.current;return i=su(e,i),jc(e,s),n=nT(t,e,n,r,i,s),r=rT(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zi(t,e,s)):(kt&&r&&Wb(e),e.flags|=1,Jn(t,e,n,s),e.child)}function o1(t,e,n,r,s){if(Cr(n)){var i=!0;Zm(e)}else i=!1;if(jc(e,s),e.stateNode===null)ym(t,e),$D(e,n,r),S0(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=os(c):(c=Cr(n)?gl:Kn.current,c=su(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&e1(e,o,r,c),xo=!1;var p=e.memoizedState;o.state=p,rg(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Sr.current||xo?(typeof u=="function"&&(x0(e,n,u,r),l=e.memoizedState),(a=xo||JI(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wD(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ys(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=os(l):(l=Cr(n)?gl:Kn.current,l=su(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&e1(e,o,r,l),xo=!1,p=e.memoizedState,o.state=p,rg(e,r,o,s);var _=e.memoizedState;a!==h||p!==_||Sr.current||xo?(typeof m=="function"&&(x0(e,n,m,r),_=e.memoizedState),(c=xo||JI(e,n,c,r,p,_,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return k0(t,e,n,r,i,s)}function k0(t,e,n,r,s,i){HD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qI(e,n,!1),Zi(t,e,i);r=e.stateNode,s9.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ou(e,t.child,null,i),e.child=ou(e,null,a,i)):Jn(t,e,a,i),e.memoizedState=r.state,s&&qI(e,n,!0),e.child}function GD(t){var e=t.stateNode;e.pendingContext?WI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&WI(t,e.context,!1),Zb(t,e.containerInfo)}function a1(t,e,n,r,s){return iu(),Hb(s),e.flags|=256,Jn(t,e,n,r),e.child}var R0={dehydrated:null,treeContext:null,retryLane:0};function A0(t){return{baseLanes:t,cachePool:null,transitions:null}}function KD(t,e,n){var r=e.pendingProps,s=Rt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_t(Rt,s&1),t===null)return b0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Py(o,r,0,null),t=cl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=A0(n),e.memoizedState=R0,t):oT(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return i9(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Xo(a,i):(i=cl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?A0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=R0,r}return i=t.child,t=i.sibling,r=Xo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function oT(t,e){return e=Py({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Up(t,e,n,r){return r!==null&&Hb(r),ou(e,t.child,null,n),t=oT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i9(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=H_(Error(re(422))),Up(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Py({mode:"visible",children:r.children},s,0,null),i=cl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ou(e,t.child,null,o),e.child.memoizedState=A0(o),e.memoizedState=R0,i);if(!(e.mode&1))return Up(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(re(419)),r=H_(i,r,void 0),Up(t,e,o,r)}if(a=(o&t.childLanes)!==0,Er||a){if(r=En,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xi(t,s),Ns(r,t,s,-1))}return hT(),r=H_(Error(re(421))),Up(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=v9.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lr=Go(s.nextSibling),Vr=e,kt=!0,bs=null,t!==null&&(Jr[es++]=ji,Jr[es++]=Fi,Jr[es++]=yl,ji=t.id,Fi=t.overflow,yl=e),e=oT(e,r.children),e.flags|=4096,e)}function l1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),T0(t.return,e,n)}function G_(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function QD(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Jn(t,e,r.children,n),r=Rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l1(t,n,e);else if(t.tag===19)l1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_t(Rt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&sg(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),G_(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&sg(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}G_(e,!0,n,null,i);break;case"together":G_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ym(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_l|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=Xo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o9(t,e,n){switch(e.tag){case 3:GD(e),iu();break;case 5:ED(e);break;case 1:Cr(e.type)&&Zm(e);break;case 4:Zb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_t(tg,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_t(Rt,Rt.current&1),e.flags|=128,null):n&e.child.childLanes?KD(t,e,n):(_t(Rt,Rt.current&1),t=Zi(t,e,n),t!==null?t.sibling:null);_t(Rt,Rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QD(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_t(Rt,Rt.current),r)break;return null;case 22:case 23:return e.lanes=0,qD(t,e,n)}return Zi(t,e,n)}var YD,N0,XD,ZD;YD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};N0=function(){};XD=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ya(ii.current);var i=null;switch(n){case"input":s=Jw(t,s),r=Jw(t,r),i=[];break;case"select":s=Dt({},s,{value:void 0}),r=Dt({},r,{value:void 0}),i=[];break;case"textarea":s=n0(t,s),r=n0(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ym)}s0(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xh.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ZD=function(t,e,n,r){n!==r&&(e.flags|=4)};function bd(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function a9(t,e,n){var r=e.pendingProps;switch(qb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return Cr(e.type)&&Xm(),Un(e),null;case 3:return r=e.stateNode,au(),Ct(Sr),Ct(Kn),eT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bs!==null&&(V0(bs),bs=null))),N0(t,e),Un(e),null;case 5:Jb(e);var s=Ya(Lh.current);if(n=e.type,t!==null&&e.stateNode!=null)XD(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return Un(e),null}if(t=Ya(ii.current),Fp(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qs]=e,r[Oh]=i,t=(e.mode&1)!==0,n){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(s=0;s<Fd.length;s++)xt(Fd[s],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":yI(r,i),xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xt("invalid",r);break;case"textarea":_I(r,i),xt("invalid",r)}s0(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&jp(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jp(r.textContent,a,t),s=["children",""+a]):xh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xt("scroll",r)}switch(n){case"input":Rp(r),vI(r,i,!0);break;case"textarea":Rp(r),wI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ym)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qs]=e,t[Oh]=r,YD(t,e,!1,!1),e.stateNode=t;e:{switch(o=i0(n,r),n){case"dialog":xt("cancel",t),xt("close",t),s=r;break;case"iframe":case"object":case"embed":xt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fd.length;s++)xt(Fd[s],t);s=r;break;case"source":xt("error",t),s=r;break;case"img":case"image":case"link":xt("error",t),xt("load",t),s=r;break;case"details":xt("toggle",t),s=r;break;case"input":yI(t,r),s=Jw(t,r),xt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Dt({},r,{value:void 0}),xt("invalid",t);break;case"textarea":_I(t,r),s=n0(t,r),xt("invalid",t);break;default:s=r}s0(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?RP(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IP(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Sh(t,l):typeof l=="number"&&Sh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&xt("scroll",t):l!=null&&Ab(t,i,l,o))}switch(n){case"input":Rp(t),vI(t,r,!1);break;case"textarea":Rp(t),wI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oa(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Dc(t,!!r.multiple,i,!1):r.defaultValue!=null&&Dc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ym)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)ZD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=Ya(Lh.current),Ya(ii.current),Fp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qs]=e,(i=r.nodeValue!==n)&&(t=Vr,t!==null))switch(t.tag){case 3:jp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jp(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qs]=e,e.stateNode=r}return Un(e),null;case 13:if(Ct(Rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kt&&Lr!==null&&e.mode&1&&!(e.flags&128))gD(),iu(),e.flags|=98560,i=!1;else if(i=Fp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[Qs]=e}else iu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),i=!1}else bs!==null&&(V0(bs),bs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rt.current&1?dn===0&&(dn=3):hT())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return au(),N0(t,e),t===null&&Ph(e.stateNode.containerInfo),Un(e),null;case 10:return Qb(e.type._context),Un(e),null;case 17:return Cr(e.type)&&Xm(),Un(e),null;case 19:if(Ct(Rt),i=e.memoizedState,i===null)return Un(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)bd(i,!1);else{if(dn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sg(t),o!==null){for(e.flags|=128,bd(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(Rt,Rt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Kt()>cu&&(e.flags|=128,r=!0,bd(i,!1),e.lanes=4194304)}else{if(!r)if(t=sg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!kt)return Un(e),null}else 2*Kt()-i.renderingStartTime>cu&&n!==1073741824&&(e.flags|=128,r=!0,bd(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Kt(),e.sibling=null,n=Rt.current,_t(Rt,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return dT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dr&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function l9(t,e){switch(qb(e),e.tag){case 1:return Cr(e.type)&&Xm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return au(),Ct(Sr),Ct(Kn),eT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jb(e),null;case 13:if(Ct(Rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));iu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ct(Rt),null;case 4:return au(),null;case 10:return Qb(e.type._context),null;case 22:case 23:return dT(),null;case 24:return null;default:return null}}var $p=!1,Wn=!1,c9=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Ac(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vt(t,e,r)}else n.current=null}function P0(t,e,n){try{n()}catch(r){Vt(t,e,r)}}var c1=!1;function u9(t,e){if(m0=Gm,t=rD(),zb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++u===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(g0={focusedElem:t,selectionRange:n},Gm=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,w=_.memoizedState,b=e.stateNode,E=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:ys(e.type,y),w);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(R){Vt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return _=c1,c1=!1,_}function th(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&P0(e,n,i)}s=s.next}while(s!==r)}}function Ay(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function D0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JD(t){var e=t.alternate;e!==null&&(t.alternate=null,JD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qs],delete e[Oh],delete e[_0],delete e[H5],delete e[G5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eO(t){return t.tag===5||t.tag===3||t.tag===4}function u1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function O0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ym));else if(r!==4&&(t=t.child,t!==null))for(O0(t,e,n),t=t.sibling;t!==null;)O0(t,e,n),t=t.sibling}function M0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(M0(t,e,n),t=t.sibling;t!==null;)M0(t,e,n),t=t.sibling}var In=null,Es=!1;function yo(t,e,n){for(n=n.child;n!==null;)tO(t,e,n),n=n.sibling}function tO(t,e,n){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(by,n)}catch{}switch(n.tag){case 5:Wn||Ac(n,e);case 6:var r=In,s=Es;In=null,yo(t,e,n),In=r,Es=s,In!==null&&(Es?(t=In,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):In.removeChild(n.stateNode));break;case 18:In!==null&&(Es?(t=In,n=n.stateNode,t.nodeType===8?U_(t.parentNode,n):t.nodeType===1&&U_(t,n),Rh(t)):U_(In,n.stateNode));break;case 4:r=In,s=Es,In=n.stateNode.containerInfo,Es=!0,yo(t,e,n),In=r,Es=s;break;case 0:case 11:case 14:case 15:if(!Wn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&P0(n,e,o),s=s.next}while(s!==r)}yo(t,e,n);break;case 1:if(!Wn&&(Ac(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Vt(n,e,a)}yo(t,e,n);break;case 21:yo(t,e,n);break;case 22:n.mode&1?(Wn=(r=Wn)||n.memoizedState!==null,yo(t,e,n),Wn=r):yo(t,e,n);break;default:yo(t,e,n)}}function d1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c9),e.forEach(function(r){var s=_9.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ms(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:In=a.stateNode,Es=!1;break e;case 3:In=a.stateNode.containerInfo,Es=!0;break e;case 4:In=a.stateNode.containerInfo,Es=!0;break e}a=a.return}if(In===null)throw Error(re(160));tO(i,o,s),In=null,Es=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Vt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nO(e,t),e=e.sibling}function nO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ms(e,t),$s(t),r&4){try{th(3,t,t.return),Ay(3,t)}catch(y){Vt(t,t.return,y)}try{th(5,t,t.return)}catch(y){Vt(t,t.return,y)}}break;case 1:ms(e,t),$s(t),r&512&&n!==null&&Ac(n,n.return);break;case 5:if(ms(e,t),$s(t),r&512&&n!==null&&Ac(n,n.return),t.flags&32){var s=t.stateNode;try{Sh(s,"")}catch(y){Vt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&xP(s,i),i0(a,o);var c=i0(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?RP(s,h):u==="dangerouslySetInnerHTML"?IP(s,h):u==="children"?Sh(s,h):Ab(s,u,h,c)}switch(a){case"input":e0(s,i);break;case"textarea":SP(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Dc(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Dc(s,!!i.multiple,i.defaultValue,!0):Dc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oh]=i}catch(y){Vt(t,t.return,y)}}break;case 6:if(ms(e,t),$s(t),r&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Vt(t,t.return,y)}}break;case 3:if(ms(e,t),$s(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rh(e.containerInfo)}catch(y){Vt(t,t.return,y)}break;case 4:ms(e,t),$s(t);break;case 13:ms(e,t),$s(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cT=Kt())),r&4&&d1(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Wn=(c=Wn)||u,ms(e,t),Wn=c):ms(e,t),$s(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ye=t,u=t.child;u!==null;){for(h=ye=u;ye!==null;){switch(p=ye,m=p.child,p.tag){case 0:case 11:case 14:case 15:th(4,p,p.return);break;case 1:Ac(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){Vt(r,n,y)}}break;case 5:Ac(p,p.return);break;case 22:if(p.memoizedState!==null){f1(h);continue}}m!==null?(m.return=p,ye=m):f1(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kP("display",o))}catch(y){Vt(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Vt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(e,t),$s(t),r&4&&d1(t);break;case 21:break;default:ms(e,t),$s(t)}}function $s(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eO(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Sh(s,""),r.flags&=-33);var i=u1(t);M0(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=u1(t);O0(t,a,o);break;default:throw Error(re(161))}}catch(l){Vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d9(t,e,n){ye=t,rO(t)}function rO(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var s=ye,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$p;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Wn;a=$p;var c=Wn;if($p=o,(Wn=l)&&!c)for(ye=s;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?p1(s):l!==null?(l.return=o,ye=l):p1(s);for(;i!==null;)ye=i,rO(i),i=i.sibling;ye=s,$p=a,Wn=c}h1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ye=i):h1(t)}}function h1(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wn||Ay(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ys(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&YI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}YI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Rh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Wn||e.flags&512&&D0(e)}catch(p){Vt(e,e.return,p)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function f1(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function p1(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ay(4,e)}catch(l){Vt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Vt(e,s,l)}}var i=e.return;try{D0(e)}catch(l){Vt(e,i,l)}break;case 5:var o=e.return;try{D0(e)}catch(l){Vt(e,o,l)}}}catch(l){Vt(e,e.return,l)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var h9=Math.ceil,ag=co.ReactCurrentDispatcher,aT=co.ReactCurrentOwner,ss=co.ReactCurrentBatchConfig,et=0,En=null,rn=null,An=0,Dr=0,Nc=ba(0),dn=0,Uh=null,_l=0,Ny=0,lT=0,nh=null,_r=null,cT=0,cu=1/0,Ni=null,lg=!1,L0=null,Qo=null,Bp=!1,Vo=null,cg=0,rh=0,j0=null,vm=-1,_m=0;function nr(){return et&6?Kt():vm!==-1?vm:vm=Kt()}function Yo(t){return t.mode&1?et&2&&An!==0?An&-An:Q5.transition!==null?(_m===0&&(_m=$P()),_m):(t=ct,t!==0||(t=window.event,t=t===void 0?16:KP(t.type)),t):1}function Ns(t,e,n,r){if(50<rh)throw rh=0,j0=null,Error(re(185));kf(t,n,r),(!(et&2)||t!==En)&&(t===En&&(!(et&2)&&(Ny|=n),dn===4&&ko(t,An)),Ir(t,r),n===1&&et===0&&!(e.mode&1)&&(cu=Kt()+500,Iy&&Ta()))}function Ir(t,e){var n=t.callbackNode;Q6(t,e);var r=Hm(t,t===En?An:0);if(r===0)n!==null&&TI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&TI(n),e===1)t.tag===0?K5(m1.bind(null,t)):fD(m1.bind(null,t)),W5(function(){!(et&6)&&Ta()}),n=null;else{switch(BP(r)){case 1:n=Mb;break;case 4:n=VP;break;case 16:n=qm;break;case 536870912:n=UP;break;default:n=qm}n=dO(n,sO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sO(t,e){if(vm=-1,_m=0,et&6)throw Error(re(327));var n=t.callbackNode;if(Fc()&&t.callbackNode!==n)return null;var r=Hm(t,t===En?An:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ug(t,r);else{e=r;var s=et;et|=2;var i=oO();(En!==t||An!==e)&&(Ni=null,cu=Kt()+500,ll(t,e));do try{m9();break}catch(a){iO(t,a)}while(!0);Kb(),ag.current=i,et=s,rn!==null?e=0:(En=null,An=0,e=dn)}if(e!==0){if(e===2&&(s=u0(t),s!==0&&(r=s,e=F0(t,s))),e===1)throw n=Uh,ll(t,0),ko(t,r),Ir(t,Kt()),n;if(e===6)ko(t,r);else{if(s=t.current.alternate,!(r&30)&&!f9(s)&&(e=ug(t,r),e===2&&(i=u0(t),i!==0&&(r=i,e=F0(t,i))),e===1))throw n=Uh,ll(t,0),ko(t,r),Ir(t,Kt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:Fa(t,_r,Ni);break;case 3:if(ko(t,r),(r&130023424)===r&&(e=cT+500-Kt(),10<e)){if(Hm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){nr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=v0(Fa.bind(null,t,_r,Ni),e);break}Fa(t,_r,Ni);break;case 4:if(ko(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-As(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*h9(r/1960))-r,10<r){t.timeoutHandle=v0(Fa.bind(null,t,_r,Ni),r);break}Fa(t,_r,Ni);break;case 5:Fa(t,_r,Ni);break;default:throw Error(re(329))}}}return Ir(t,Kt()),t.callbackNode===n?sO.bind(null,t):null}function F0(t,e){var n=nh;return t.current.memoizedState.isDehydrated&&(ll(t,e).flags|=256),t=ug(t,e),t!==2&&(e=_r,_r=n,e!==null&&V0(e)),t}function V0(t){_r===null?_r=t:_r.push.apply(_r,t)}function f9(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ds(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ko(t,e){for(e&=~lT,e&=~Ny,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-As(e),r=1<<n;t[n]=-1,e&=~r}}function m1(t){if(et&6)throw Error(re(327));Fc();var e=Hm(t,0);if(!(e&1))return Ir(t,Kt()),null;var n=ug(t,e);if(t.tag!==0&&n===2){var r=u0(t);r!==0&&(e=r,n=F0(t,r))}if(n===1)throw n=Uh,ll(t,0),ko(t,e),Ir(t,Kt()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fa(t,_r,Ni),Ir(t,Kt()),null}function uT(t,e){var n=et;et|=1;try{return t(e)}finally{et=n,et===0&&(cu=Kt()+500,Iy&&Ta())}}function wl(t){Vo!==null&&Vo.tag===0&&!(et&6)&&Fc();var e=et;et|=1;var n=ss.transition,r=ct;try{if(ss.transition=null,ct=1,t)return t()}finally{ct=r,ss.transition=n,et=e,!(et&6)&&Ta()}}function dT(){Dr=Nc.current,Ct(Nc)}function ll(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,z5(n)),rn!==null)for(n=rn.return;n!==null;){var r=n;switch(qb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xm();break;case 3:au(),Ct(Sr),Ct(Kn),eT();break;case 5:Jb(r);break;case 4:au();break;case 13:Ct(Rt);break;case 19:Ct(Rt);break;case 10:Qb(r.type._context);break;case 22:case 23:dT()}n=n.return}if(En=t,rn=t=Xo(t.current,null),An=Dr=e,dn=0,Uh=null,lT=Ny=_l=0,_r=nh=null,Qa!==null){for(e=0;e<Qa.length;e++)if(n=Qa[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qa=null}return t}function iO(t,e){do{var n=rn;try{if(Kb(),mm.current=og,ig){for(var r=Pt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ig=!1}if(vl=0,gn=un=Pt=null,eh=!1,jh=0,aT.current=null,n===null||n.return===null){dn=1,Uh=e,rn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=An,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=n1(o);if(m!==null){m.flags&=-257,r1(m,o,a,i,e),m.mode&1&&t1(i,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(l),e.updateQueue=y}else _.add(l);break e}else{if(!(e&1)){t1(i,c,e),hT();break e}l=Error(re(426))}}else if(kt&&a.mode&1){var w=n1(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),r1(w,o,a,i,e),Hb(lu(l,a));break e}}i=l=lu(l,a),dn!==4&&(dn=2),nh===null?nh=[i]:nh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=BD(i,l,e);QI(i,b);break e;case 1:a=l;var E=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qo===null||!Qo.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=zD(i,a,e);QI(i,R);break e}}i=i.return}while(i!==null)}lO(n)}catch(O){e=O,rn===n&&n!==null&&(rn=n=n.return);continue}break}while(!0)}function oO(){var t=ag.current;return ag.current=og,t===null?og:t}function hT(){(dn===0||dn===3||dn===2)&&(dn=4),En===null||!(_l&268435455)&&!(Ny&268435455)||ko(En,An)}function ug(t,e){var n=et;et|=2;var r=oO();(En!==t||An!==e)&&(Ni=null,ll(t,e));do try{p9();break}catch(s){iO(t,s)}while(!0);if(Kb(),et=n,ag.current=r,rn!==null)throw Error(re(261));return En=null,An=0,dn}function p9(){for(;rn!==null;)aO(rn)}function m9(){for(;rn!==null&&!U6();)aO(rn)}function aO(t){var e=uO(t.alternate,t,Dr);t.memoizedProps=t.pendingProps,e===null?lO(t):rn=e,aT.current=null}function lO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l9(n,e),n!==null){n.flags&=32767,rn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dn=6,rn=null;return}}else if(n=a9(n,e,Dr),n!==null){rn=n;return}if(e=e.sibling,e!==null){rn=e;return}rn=e=t}while(e!==null);dn===0&&(dn=5)}function Fa(t,e,n){var r=ct,s=ss.transition;try{ss.transition=null,ct=1,g9(t,e,n,r)}finally{ss.transition=s,ct=r}return null}function g9(t,e,n,r){do Fc();while(Vo!==null);if(et&6)throw Error(re(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Y6(t,i),t===En&&(rn=En=null,An=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bp||(Bp=!0,dO(qm,function(){return Fc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ss.transition,ss.transition=null;var o=ct;ct=1;var a=et;et|=4,aT.current=null,u9(t,n),nO(n,t),L5(g0),Gm=!!m0,g0=m0=null,t.current=n,d9(n),$6(),et=a,ct=o,ss.transition=i}else t.current=n;if(Bp&&(Bp=!1,Vo=t,cg=s),i=t.pendingLanes,i===0&&(Qo=null),W6(n.stateNode),Ir(t,Kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(lg)throw lg=!1,t=L0,L0=null,t;return cg&1&&t.tag!==0&&Fc(),i=t.pendingLanes,i&1?t===j0?rh++:(rh=0,j0=t):rh=0,Ta(),null}function Fc(){if(Vo!==null){var t=BP(cg),e=ss.transition,n=ct;try{if(ss.transition=null,ct=16>t?16:t,Vo===null)var r=!1;else{if(t=Vo,Vo=null,cg=0,et&6)throw Error(re(331));var s=et;for(et|=4,ye=t.current;ye!==null;){var i=ye,o=i.child;if(ye.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ye=c;ye!==null;){var u=ye;switch(u.tag){case 0:case 11:case 15:th(8,u,i)}var h=u.child;if(h!==null)h.return=u,ye=h;else for(;ye!==null;){u=ye;var p=u.sibling,m=u.return;if(JD(u),u===c){ye=null;break}if(p!==null){p.return=m,ye=p;break}ye=m}}}var _=i.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ye=o;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:th(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ye=b;break e}ye=i.return}}var E=t.current;for(ye=E;ye!==null;){o=ye;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ye=x;else e:for(o=E;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ay(9,a)}}catch(O){Vt(a,a.return,O)}if(a===o){ye=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ye=R;break e}ye=a.return}}if(et=s,Ta(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(by,t)}catch{}r=!0}return r}finally{ct=n,ss.transition=e}}return!1}function g1(t,e,n){e=lu(n,e),e=BD(t,e,1),t=Ko(t,e,1),e=nr(),t!==null&&(kf(t,1,e),Ir(t,e))}function Vt(t,e,n){if(t.tag===3)g1(t,t,n);else for(;e!==null;){if(e.tag===3){g1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qo===null||!Qo.has(r))){t=lu(n,t),t=zD(e,t,1),e=Ko(e,t,1),t=nr(),e!==null&&(kf(e,1,t),Ir(e,t));break}}e=e.return}}function y9(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nr(),t.pingedLanes|=t.suspendedLanes&n,En===t&&(An&n)===n&&(dn===4||dn===3&&(An&130023424)===An&&500>Kt()-cT?ll(t,0):lT|=n),Ir(t,e)}function cO(t,e){e===0&&(t.mode&1?(e=Pp,Pp<<=1,!(Pp&130023424)&&(Pp=4194304)):e=1);var n=nr();t=Xi(t,e),t!==null&&(kf(t,e,n),Ir(t,n))}function v9(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cO(t,n)}function _9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),cO(t,n)}var uO;uO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sr.current)Er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Er=!1,o9(t,e,n);Er=!!(t.flags&131072)}else Er=!1,kt&&e.flags&1048576&&pD(e,eg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ym(t,e),t=e.pendingProps;var s=su(e,Kn.current);jc(e,n),s=nT(null,e,r,t,s,n);var i=rT();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cr(r)?(i=!0,Zm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xb(e),s.updater=Ry,e.stateNode=s,s._reactInternals=e,S0(e,r,t,n),e=k0(null,e,r,!0,i,n)):(e.tag=0,kt&&i&&Wb(e),Jn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ym(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=E9(r),t=ys(r,t),s){case 0:e=I0(null,e,r,t,n);break e;case 1:e=o1(null,e,r,t,n);break e;case 11:e=s1(null,e,r,t,n);break e;case 14:e=i1(null,e,r,ys(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),I0(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),o1(t,e,r,s,n);case 3:e:{if(GD(e),t===null)throw Error(re(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wD(t,e),rg(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lu(Error(re(423)),e),e=a1(t,e,r,n,s);break e}else if(r!==s){s=lu(Error(re(424)),e),e=a1(t,e,r,n,s);break e}else for(Lr=Go(e.stateNode.containerInfo.firstChild),Vr=e,kt=!0,bs=null,n=vD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(iu(),r===s){e=Zi(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return ED(e),t===null&&b0(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,y0(r,s)?o=null:i!==null&&y0(r,i)&&(e.flags|=32),HD(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&b0(e),null;case 13:return KD(t,e,n);case 4:return Zb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ou(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),s1(t,e,r,s,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_t(tg,r._currentValue),r._currentValue=o,i!==null)if(Ds(i.value,o)){if(i.children===s.children&&!Sr.current){e=Zi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Wi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),T0(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),T0(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Jn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,jc(e,n),s=os(s),r=r(s),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,s=ys(r,e.pendingProps),s=ys(r.type,s),i1(t,e,r,s,n);case 15:return WD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),ym(t,e),e.tag=1,Cr(r)?(t=!0,Zm(e)):t=!1,jc(e,n),$D(e,r,s),S0(e,r,s,n),k0(null,e,r,!0,t,n);case 19:return QD(t,e,n);case 22:return qD(t,e,n)}throw Error(re(156,e.tag))};function dO(t,e){return FP(t,e)}function w9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(t,e,n,r){return new w9(t,e,n,r)}function fT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E9(t){if(typeof t=="function")return fT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pb)return 11;if(t===Db)return 14}return 2}function Xo(t,e){var n=t.alternate;return n===null?(n=ns(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wm(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")fT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ec:return cl(n.children,s,i,e);case Nb:o=8,s|=8;break;case Qw:return t=ns(12,n,e,s|2),t.elementType=Qw,t.lanes=i,t;case Yw:return t=ns(13,n,e,s),t.elementType=Yw,t.lanes=i,t;case Xw:return t=ns(19,n,e,s),t.elementType=Xw,t.lanes=i,t;case EP:return Py(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _P:o=10;break e;case wP:o=9;break e;case Pb:o=11;break e;case Db:o=14;break e;case To:o=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=ns(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function cl(t,e,n,r){return t=ns(7,t,r,e),t.lanes=n,t}function Py(t,e,n,r){return t=ns(22,t,r,e),t.elementType=EP,t.lanes=n,t.stateNode={isHidden:!1},t}function K_(t,e,n){return t=ns(6,t,null,e),t.lanes=n,t}function Q_(t,e,n){return e=ns(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b9(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=R_(0),this.expirationTimes=R_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pT(t,e,n,r,s,i,o,a,l){return t=new b9(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ns(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xb(i),t}function T9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hO(t){if(!t)return aa;t=t._reactInternals;e:{if(Ul(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(Cr(n))return hD(t,n,e)}return e}function fO(t,e,n,r,s,i,o,a,l){return t=pT(n,r,!0,t,s,i,o,a,l),t.context=hO(null),n=t.current,r=nr(),s=Yo(n),i=Wi(r,s),i.callback=e??null,Ko(n,i,s),t.current.lanes=s,kf(t,s,r),Ir(t,r),t}function Dy(t,e,n,r){var s=e.current,i=nr(),o=Yo(s);return n=hO(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ko(s,e,o),t!==null&&(Ns(t,s,o,i),pm(t,s,o)),o}function dg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function y1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mT(t,e){y1(t,e),(t=t.alternate)&&y1(t,e)}function x9(){return null}var pO=typeof reportError=="function"?reportError:function(t){console.error(t)};function gT(t){this._internalRoot=t}Oy.prototype.render=gT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Dy(t,e,null,null)};Oy.prototype.unmount=gT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wl(function(){Dy(null,t,null,null)}),e[Yi]=null}};function Oy(t){this._internalRoot=t}Oy.prototype.unstable_scheduleHydration=function(t){if(t){var e=qP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Io.length&&e!==0&&e<Io[n].priority;n++);Io.splice(n,0,t),n===0&&GP(t)}};function yT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function My(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v1(){}function S9(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=dg(o);i.call(c)}}var o=fO(e,r,t,0,null,!1,!1,"",v1);return t._reactRootContainer=o,t[Yi]=o.current,Ph(t.nodeType===8?t.parentNode:t),wl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=dg(l);a.call(c)}}var l=pT(t,0,!1,null,null,!1,!1,"",v1);return t._reactRootContainer=l,t[Yi]=l.current,Ph(t.nodeType===8?t.parentNode:t),wl(function(){Dy(e,l,n,r)}),l}function Ly(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=dg(o);a.call(l)}}Dy(e,o,t,s)}else o=S9(n,e,t,s,r);return dg(o)}zP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jd(e.pendingLanes);n!==0&&(Lb(e,n|1),Ir(e,Kt()),!(et&6)&&(cu=Kt()+500,Ta()))}break;case 13:wl(function(){var r=Xi(t,1);if(r!==null){var s=nr();Ns(r,t,1,s)}}),mT(t,1)}};jb=function(t){if(t.tag===13){var e=Xi(t,134217728);if(e!==null){var n=nr();Ns(e,t,134217728,n)}mT(t,134217728)}};WP=function(t){if(t.tag===13){var e=Yo(t),n=Xi(t,e);if(n!==null){var r=nr();Ns(n,t,e,r)}mT(t,e)}};qP=function(){return ct};HP=function(t,e){var n=ct;try{return ct=t,e()}finally{ct=n}};a0=function(t,e,n){switch(e){case"input":if(e0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Cy(r);if(!s)throw Error(re(90));TP(r),e0(r,s)}}}break;case"textarea":SP(t,n);break;case"select":e=n.value,e!=null&&Dc(t,!!n.multiple,e,!1)}};PP=uT;DP=wl;var C9={usingClientEntryPoint:!1,Events:[Af,Sc,Cy,AP,NP,uT]},Td={findFiberByHostInstance:Ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I9={bundleType:Td.bundleType,version:Td.version,rendererPackageName:Td.rendererPackageName,rendererConfig:Td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:co.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LP(t),t===null?null:t.stateNode},findFiberByHostInstance:Td.findFiberByHostInstance||x9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{by=zp.inject(I9),si=zp}catch{}}Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C9;Hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yT(e))throw Error(re(200));return T9(t,e,null,n)};Hr.createRoot=function(t,e){if(!yT(t))throw Error(re(299));var n=!1,r="",s=pO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=pT(t,1,!1,null,null,n,!1,r,s),t[Yi]=e.current,Ph(t.nodeType===8?t.parentNode:t),new gT(e)};Hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=LP(e),t=t===null?null:t.stateNode,t};Hr.flushSync=function(t){return wl(t)};Hr.hydrate=function(t,e,n){if(!My(e))throw Error(re(200));return Ly(null,t,e,!0,n)};Hr.hydrateRoot=function(t,e,n){if(!yT(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=pO;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fO(e,null,t,1,n??null,s,!1,i,o),t[Yi]=e.current,Ph(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Oy(e)};Hr.render=function(t,e,n){if(!My(e))throw Error(re(200));return Ly(null,t,e,!1,n)};Hr.unmountComponentAtNode=function(t){if(!My(t))throw Error(re(40));return t._reactRootContainer?(wl(function(){Ly(null,null,t,!1,function(){t._reactRootContainer=null,t[Yi]=null})}),!0):!1};Hr.unstable_batchedUpdates=uT;Hr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!My(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Ly(t,e,n,!1,r)};Hr.version="18.3.1-next-f1338f8080-20240426";function mO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mO)}catch(t){console.error(t)}}mO(),mP.exports=Hr;var Pf=mP.exports;const gO=rP(Pf);var yO,_1=Pf;yO=_1.createRoot,_1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(this,arguments)}var Uo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Uo||(Uo={}));const w1="popstate";function k9(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return U0("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hg(s)}return A9(e,n,null,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vO(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R9(){return Math.random().toString(36).substr(2,8)}function E1(t,e){return{usr:t.state,key:t.key,idx:e}}function U0(t,e,n,r){return n===void 0&&(n=null),$h({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fu(e):e,{state:n,key:e&&e.key||r||R9()})}function hg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function A9(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Uo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState($h({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Uo.Pop;let w=u(),b=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:b})}function p(w,b){a=Uo.Push;let E=U0(y.location,w,b);c=u()+1;let x=E1(E,c),R=y.createHref(E);try{o.pushState(x,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(R)}i&&l&&l({action:a,location:y.location,delta:1})}function m(w,b){a=Uo.Replace;let E=U0(y.location,w,b);c=u();let x=E1(E,c),R=y.createHref(E);o.replaceState(x,"",R),i&&l&&l({action:a,location:y.location,delta:0})}function _(w){let b=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof w=="string"?w:hg(w);return E=E.replace(/ $/,"%20"),Bt(b,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,b)}let y={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(w1,h),l=w,()=>{s.removeEventListener(w1,h),l=null}},createHref(w){return e(s,w)},createURL:_,encodeLocation(w){let b=_(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(w){return o.go(w)}};return y}var b1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(b1||(b1={}));function N9(t,e,n){return n===void 0&&(n="/"),P9(t,e,n,!1)}function P9(t,e,n,r){let s=typeof e=="string"?Fu(e):e,i=uu(s.pathname||"/",n);if(i==null)return null;let o=_O(t);D9(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=W9(i);a=B9(o[l],c,r)}return a}function _O(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Bt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Zo([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_O(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:U9(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of wO(i.path))s(i,o,l)}),e}function wO(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=wO(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function D9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const O9=/^:[\w-]+$/,M9=3,L9=2,j9=1,F9=10,V9=-2,T1=t=>t==="*";function U9(t,e){let n=t.split("/"),r=n.length;return n.some(T1)&&(r+=V9),e&&(r+=L9),n.filter(s=>!T1(s)).reduce((s,i)=>s+(O9.test(i)?M9:i===""?j9:F9),r)}function $9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function B9(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=fg({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=fg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Zo([i,h.pathname]),pathnameBase:K9(Zo([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Zo([i,h.pathnameBase]))}return o}function fg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=z9(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const _=a[h];return m&&!_?c[p]=void 0:c[p]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function z9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vO(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function W9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vO(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function q9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fu(t):t;return{pathname:n?n.startsWith("/")?n:H9(n,e):e,search:Q9(r),hash:Y9(s)}}function H9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Y_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function EO(t,e){let n=G9(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bO(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Fu(t):(s=$h({},t),Bt(!s.pathname||!s.pathname.includes("?"),Y_("?","pathname","search",s)),Bt(!s.pathname||!s.pathname.includes("#"),Y_("#","pathname","hash",s)),Bt(!s.search||!s.search.includes("#"),Y_("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=q9(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Zo=t=>t.join("/").replace(/\/\/+/g,"/"),K9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Y9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function X9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TO=["post","put","patch","delete"];new Set(TO);const Z9=["get",...TO];new Set(Z9);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bh(){return Bh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bh.apply(this,arguments)}const jy=g.createContext(null),xO=g.createContext(null),xa=g.createContext(null),Fy=g.createContext(null),$l=g.createContext({outlet:null,matches:[],isDataRoute:!1}),SO=g.createContext(null);function J9(t,e){let{relative:n}=e===void 0?{}:e;Df()||Bt(!1);let{basename:r,navigator:s}=g.useContext(xa),{hash:i,pathname:o,search:a}=Vy(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Zo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Df(){return g.useContext(Fy)!=null}function Sa(){return Df()||Bt(!1),g.useContext(Fy).location}function CO(t){g.useContext(xa).static||g.useLayoutEffect(t)}function Vu(){let{isDataRoute:t}=g.useContext($l);return t?hB():eB()}function eB(){Df()||Bt(!1);let t=g.useContext(jy),{basename:e,future:n,navigator:r}=g.useContext(xa),{matches:s}=g.useContext($l),{pathname:i}=Sa(),o=JSON.stringify(EO(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return CO(()=>{a.current=!0}),g.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=bO(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Zo([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}function Vy(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(xa),{matches:s}=g.useContext($l),{pathname:i}=Sa(),o=JSON.stringify(EO(s,r.v7_relativeSplatPath));return g.useMemo(()=>bO(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function tB(t,e){return nB(t,e)}function nB(t,e,n,r){Df()||Bt(!1);let{navigator:s}=g.useContext(xa),{matches:i}=g.useContext($l),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Sa(),u;if(e){var h;let w=typeof e=="string"?Fu(e):e;l==="/"||(h=w.pathname)!=null&&h.startsWith(l)||Bt(!1),u=w}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=N9(t,{pathname:m}),y=aB(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Zo([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Zo([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&y?g.createElement(Fy.Provider,{value:{location:Bh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Uo.Pop}},y):y}function rB(){let t=dB(),e=X9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const sB=g.createElement(rB,null);class iB extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement($l.Provider,{value:this.props.routeContext},g.createElement(SO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oB(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(jy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement($l.Provider,{value:e},r)}function aB(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Bt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:m}=n,_=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let m,_=!1,y=null,w=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||sB,l&&(c<0&&p===0?(_=!0,w=null):c===p&&(_=!0,w=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),E=()=>{let x;return m?x=y:_?x=w:h.route.Component?x=g.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=u,g.createElement(oB,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?g.createElement(iB,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):E()},null)}var IO=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(IO||{}),pg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pg||{});function lB(t){let e=g.useContext(jy);return e||Bt(!1),e}function cB(t){let e=g.useContext(xO);return e||Bt(!1),e}function uB(t){let e=g.useContext($l);return e||Bt(!1),e}function kO(t){let e=uB(),n=e.matches[e.matches.length-1];return n.route.id||Bt(!1),n.route.id}function dB(){var t;let e=g.useContext(SO),n=cB(pg.UseRouteError),r=kO(pg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function hB(){let{router:t}=lB(IO.UseNavigateStable),e=kO(pg.UseNavigateStable),n=g.useRef(!1);return CO(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Bh({fromRouteId:e},i)))},[t,e])}function fB(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xn(t){Bt(!1)}function pB(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Uo.Pop,navigator:i,static:o=!1,future:a}=t;Df()&&Bt(!1);let l=e.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:l,navigator:i,static:o,future:Bh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Fu(r));let{pathname:u="/",search:h="",hash:p="",state:m=null,key:_="default"}=r,y=g.useMemo(()=>{let w=uu(u,l);return w==null?null:{location:{pathname:w,search:h,hash:p,state:m,key:_},navigationType:s}},[l,u,h,p,m,_,s]);return y==null?null:g.createElement(xa.Provider,{value:c},g.createElement(Fy.Provider,{children:n,value:y}))}function x1(t){let{children:e,location:n}=t;return tB($0(e),n)}new Promise(()=>{});function $0(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,$0(r.props.children,i));return}r.type!==Xn&&Bt(!1),!r.props.index||!r.props.children||Bt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$0(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mg(){return mg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mg.apply(this,arguments)}function RO(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function mB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gB(t,e){return t.button===0&&(!e||e==="_self")&&!mB(t)}const yB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vB=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_B="6";try{window.__reactRouterVersion=_B}catch{}const wB=g.createContext({isTransitioning:!1}),EB="startTransition",S1=Ib[EB];function bB(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=k9({window:s,v5Compat:!0}));let o=i.current,[a,l]=g.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=g.useCallback(h=>{c&&S1?S1(()=>l(h)):l(h)},[l,c]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>fB(r),[r]),g.createElement(pB,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const TB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zh=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,p=RO(e,yB),{basename:m}=g.useContext(xa),_,y=!1;if(typeof c=="string"&&xB.test(c)&&(_=c,TB))try{let x=new URL(window.location.href),R=c.startsWith("//")?new URL(x.protocol+c):new URL(c),O=uu(R.pathname,m);R.origin===x.origin&&O!=null?c=O+R.search+R.hash:y=!0}catch{}let w=J9(c,{relative:s}),b=CB(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function E(x){r&&r(x),x.defaultPrevented||b(x)}return g.createElement("a",mg({},p,{href:_||w,onClick:y||i?r:E,ref:n,target:l}))}),C1=g.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=RO(e,vB),p=Vy(l,{relative:h.relative}),m=Sa(),_=g.useContext(xO),{navigator:y,basename:w}=g.useContext(xa),b=_!=null&&IB(p)&&c===!0,E=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,x=m.pathname,R=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;s||(x=x.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&w&&(R=uu(R,w)||R);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let L=x===E||!o&&x.startsWith(E)&&x.charAt(O)==="/",k=R!=null&&(R===E||!o&&R.startsWith(E)&&R.charAt(E.length)==="/"),S={isActive:L,isPending:k,isTransitioning:b},I=L?r:void 0,C;typeof i=="function"?C=i(S):C=[i,L?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(S):a;return g.createElement(zh,mg({},h,{"aria-current":I,className:C,ref:n,style:P,to:l,viewTransition:c}),typeof u=="function"?u(S):u)});var B0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(B0||(B0={}));var I1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(I1||(I1={}));function SB(t){let e=g.useContext(jy);return e||Bt(!1),e}function CB(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Vu(),c=Sa(),u=Vy(t,{relative:o});return g.useCallback(h=>{if(gB(h,n)){h.preventDefault();let p=r!==void 0?r:hg(c)===hg(u);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function IB(t,e){e===void 0&&(e={});let n=g.useContext(wB);n==null&&Bt(!1);let{basename:r}=SB(B0.useViewTransitionState),s=Vy(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=uu(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=uu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fg(s.pathname,o)!=null||fg(s.pathname,i)!=null}const kB=1,RB=1e6;let X_=0;function AB(){return X_=(X_+1)%Number.MAX_SAFE_INTEGER,X_.toString()}const Z_=new Map,k1=t=>{if(Z_.has(t))return;const e=setTimeout(()=>{Z_.delete(t),sh({type:"REMOVE_TOAST",toastId:t})},RB);Z_.set(t,e)},NB=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,kB)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?k1(n):t.toasts.forEach(r=>{k1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Em=[];let bm={toasts:[]};function sh(t){bm=NB(bm,t),Em.forEach(e=>{e(bm)})}function PB({...t}){const e=AB(),n=s=>sh({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>sh({type:"DISMISS_TOAST",toastId:e});return sh({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Bl(){const[t,e]=g.useState(bm);return g.useEffect(()=>(Em.push(e),()=>{const n=Em.indexOf(e);n>-1&&Em.splice(n,1)}),[t]),{...t,toast:PB,dismiss:n=>sh({type:"DISMISS_TOAST",toastId:n})}}function pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function R1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Uy(...t){return e=>{let n=!1;const r=t.map(s=>{const i=R1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():R1(t[s],null)}}}}function ut(...t){return g.useCallback(Uy(...t),t)}function DB(t,e){const n=g.createContext(e),r=i=>{const{children:o,...a}=i,l=g.useMemo(()=>a,Object.values(a));return f.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Kr(t,e=[]){let n=[];function r(i,o){const a=g.createContext(o),l=n.length;n=[...n,o];const c=h=>{var b;const{scope:p,children:m,..._}=h,y=((b=p==null?void 0:p[t])==null?void 0:b[l])||a,w=g.useMemo(()=>_,Object.values(_));return f.jsx(y.Provider,{value:w,children:m})};c.displayName=i+"Provider";function u(h,p){var y;const m=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,_=g.useContext(m);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>g.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,OB(s,...e)]}function OB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function El(t){const e=MB(t),n=g.forwardRef((r,s)=>{const{children:i,...o}=r,a=g.Children.toArray(i),l=a.find(jB);if(l){const c=l.props.children,u=a.map(h=>h===l?g.Children.count(c)>1?g.Children.only(null):g.isValidElement(c)?c.props.children:null:h);return f.jsx(e,{...o,ref:s,children:g.isValidElement(c)?g.cloneElement(c,void 0,u):null})}return f.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var zl=El("Slot");function MB(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const o=VB(s),a=FB(i,s.props);return s.type!==g.Fragment&&(a.ref=r?Uy(r,o):o),g.cloneElement(s,a)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var AO=Symbol("radix.slottable");function LB(t){const e=({children:n})=>f.jsx(f.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=AO,e}function jB(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===AO}function FB(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function VB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vT(t){const e=t+"CollectionProvider",[n,r]=Kr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:b}=y,E=G.useRef(null),x=G.useRef(new Map).current;return f.jsx(s,{scope:w,itemMap:x,collectionRef:E,children:b})};o.displayName=e;const a=t+"CollectionSlot",l=El(a),c=G.forwardRef((y,w)=>{const{scope:b,children:E}=y,x=i(a,b),R=ut(w,x.collectionRef);return f.jsx(l,{ref:R,children:E})});c.displayName=a;const u=t+"CollectionItemSlot",h="data-radix-collection-item",p=El(u),m=G.forwardRef((y,w)=>{const{scope:b,children:E,...x}=y,R=G.useRef(null),O=ut(w,R),L=i(u,b);return G.useEffect(()=>(L.itemMap.set(R,{ref:R,...x}),()=>void L.itemMap.delete(R))),f.jsx(p,{[h]:"",ref:O,children:E})});m.displayName=u;function _(y){const w=i(t+"CollectionConsumer",y);return G.useCallback(()=>{const E=w.collectionRef.current;if(!E)return[];const x=Array.from(E.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((L,k)=>x.indexOf(L.ref.current)-x.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},_,r]}var UB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=UB.reduce((t,e)=>{const n=El(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function _T(t,e){t&&Pf.flushSync(()=>t.dispatchEvent(e))}function Qt(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function $B(t,e=globalThis==null?void 0:globalThis.document){const n=Qt(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var BB="DismissableLayer",z0="dismissableLayer.update",zB="dismissableLayer.pointerDownOutside",WB="dismissableLayer.focusOutside",A1,NO=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Uu=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=g.useContext(NO),[u,h]=g.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),_=ut(e,k=>h(k)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(w),E=u?y.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,R=E>=b,O=HB(k=>{const S=k.target,I=[...c.branches].some(C=>C.contains(S));!R||I||(s==null||s(k),o==null||o(k),k.defaultPrevented||a==null||a())},p),L=GB(k=>{const S=k.target;[...c.branches].some(C=>C.contains(S))||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},p);return $B(k=>{E===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},p),g.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(A1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),N1(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=A1)}},[u,p,n,c]),g.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),N1())},[u,c]),g.useEffect(()=>{const k=()=>m({});return document.addEventListener(z0,k),()=>document.removeEventListener(z0,k)},[]),f.jsx(Ae.div,{...l,ref:_,style:{pointerEvents:x?R?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,L.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,O.onPointerDownCapture)})});Uu.displayName=BB;var qB="DismissableLayerBranch",PO=g.forwardRef((t,e)=>{const n=g.useContext(NO),r=g.useRef(null),s=ut(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),f.jsx(Ae.div,{...t,ref:s})});PO.displayName=qB;function HB(t,e=globalThis==null?void 0:globalThis.document){const n=Qt(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){DO(zB,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GB(t,e=globalThis==null?void 0:globalThis.document){const n=Qt(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&DO(WB,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function N1(){const t=new CustomEvent(z0);document.dispatchEvent(t)}function DO(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?_T(s,i):s.dispatchEvent(i)}var KB=Uu,QB=PO,Wr=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},YB="Portal",Of=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=g.useState(!1);Wr(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?gO.createPortal(f.jsx(Ae.div,{...r,ref:e}),o):null});Of.displayName=YB;function XB(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var On=t=>{const{present:e,children:n}=t,r=ZB(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=ut(r.ref,JB(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};On.displayName="Presence";function ZB(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),o=t?"mounted":"unmounted",[a,l]=XB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=Wp(r.current);i.current=a==="mounted"?c:"none"},[a]),Wr(()=>{const c=r.current,u=s.current;if(u!==t){const p=i.current,m=Wp(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Wr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=m=>{const y=Wp(r.current).includes(m.animationName);if(m.target===e&&y&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=m=>{m.target===e&&(i.current=Wp(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Wp(t){return(t==null?void 0:t.animationName)||"none"}function JB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ez=Ib[" useInsertionEffect ".trim().toString()]||Wr;function Wl({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=tz({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const u=g.useRef(t!==void 0);g.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=g.useCallback(u=>{var h;if(a){const p=nz(u)?u(t):u;p!==t&&((h=o.current)==null||h.call(o,p))}else i(u)},[a,t,i,o]);return[l,c]}function tz({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return ez(()=>{i.current=e},[e]),g.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function nz(t){return typeof t=="function"}var rz=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sz="VisuallyHidden",$y=g.forwardRef((t,e)=>f.jsx(Ae.span,{...t,ref:e,style:{...rz,...t.style}}));$y.displayName=sz;var iz=$y,wT="ToastProvider",[ET,oz,az]=vT("Toast"),[OO,vfe]=Kr("Toast",[az]),[lz,By]=OO(wT),MO=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=g.useState(null),[c,u]=g.useState(0),h=g.useRef(!1),p=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${wT}\`. Expected non-empty \`string\`.`),f.jsx(ET.Provider,{scope:e,children:f.jsx(lz,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:g.useCallback(()=>u(m=>m+1),[]),onToastRemove:g.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};MO.displayName=wT;var LO="ToastViewport",cz=["F8"],W0="toast.viewportPause",q0="toast.viewportResume",jO=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=cz,label:s="Notifications ({hotkey})",...i}=t,o=By(LO,n),a=oz(n),l=g.useRef(null),c=g.useRef(null),u=g.useRef(null),h=g.useRef(null),p=ut(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;g.useEffect(()=>{const w=b=>{var x;r.length!==0&&r.every(R=>b[R]||b.code===R)&&((x=h.current)==null||x.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),g.useEffect(()=>{const w=l.current,b=h.current;if(_&&w&&b){const E=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(W0);b.dispatchEvent(L),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(q0);b.dispatchEvent(L),o.isClosePausedRef.current=!1}},R=L=>{!w.contains(L.relatedTarget)&&x()},O=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",E),w.addEventListener("focusout",R),w.addEventListener("pointermove",E),w.addEventListener("pointerleave",O),window.addEventListener("blur",E),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",E),w.removeEventListener("focusout",R),w.removeEventListener("pointermove",E),w.removeEventListener("pointerleave",O),window.removeEventListener("blur",E),window.removeEventListener("focus",x)}}},[_,o.isClosePausedRef]);const y=g.useCallback(({tabbingDirection:w})=>{const E=a().map(x=>{const R=x.ref.current,O=[R,...bz(R)];return w==="forwards"?O:O.reverse()});return(w==="forwards"?E.reverse():E).flat()},[a]);return g.useEffect(()=>{const w=h.current;if(w){const b=E=>{var O,L,k;const x=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!x){const S=document.activeElement,I=E.shiftKey;if(E.target===w&&I){(O=c.current)==null||O.focus();return}const D=y({tabbingDirection:I?"backwards":"forwards"}),A=D.findIndex(q=>q===S);J_(D.slice(A+1))?E.preventDefault():I?(L=c.current)==null||L.focus():(k=u.current)==null||k.focus()}};return w.addEventListener("keydown",b),()=>w.removeEventListener("keydown",b)}},[a,y]),f.jsxs(QB,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&f.jsx(H0,{ref:c,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});J_(w)}}),f.jsx(ET.Slot,{scope:n,children:f.jsx(Ae.ol,{tabIndex:-1,...i,ref:p})}),_&&f.jsx(H0,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});J_(w)}})]})});jO.displayName=LO;var FO="ToastFocusProxy",H0=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=By(FO,n);return f.jsx($y,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});H0.displayName=FO;var Mf="Toast",uz="toast.swipeStart",dz="toast.swipeMove",hz="toast.swipeCancel",fz="toast.swipeEnd",VO=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=Wl({prop:r,defaultProp:s??!0,onChange:i,caller:Mf});return f.jsx(On,{present:n||a,children:f.jsx(gz,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Qt(t.onPause),onResume:Qt(t.onResume),onSwipeStart:pe(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:pe(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});VO.displayName=Mf;var[pz,mz]=OO(Mf,{onClose(){}}),gz=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,..._}=t,y=By(Mf,n),[w,b]=g.useState(null),E=ut(e,q=>b(q)),x=g.useRef(null),R=g.useRef(null),O=s||y.duration,L=g.useRef(0),k=g.useRef(O),S=g.useRef(0),{onToastAdd:I,onToastRemove:C}=y,P=Qt(()=>{var $;(w==null?void 0:w.contains(document.activeElement))&&(($=y.viewport)==null||$.focus()),o()}),D=g.useCallback(q=>{!q||q===1/0||(window.clearTimeout(S.current),L.current=new Date().getTime(),S.current=window.setTimeout(P,q))},[P]);g.useEffect(()=>{const q=y.viewport;if(q){const $=()=>{D(k.current),c==null||c()},B=()=>{const Y=new Date().getTime()-L.current;k.current=k.current-Y,window.clearTimeout(S.current),l==null||l()};return q.addEventListener(W0,B),q.addEventListener(q0,$),()=>{q.removeEventListener(W0,B),q.removeEventListener(q0,$)}}},[y.viewport,O,l,c,D]),g.useEffect(()=>{i&&!y.isClosePausedRef.current&&D(O)},[i,O,y.isClosePausedRef,D]),g.useEffect(()=>(I(),()=>C()),[I,C]);const A=g.useMemo(()=>w?HO(w):null,[w]);return y.viewport?f.jsxs(f.Fragment,{children:[A&&f.jsx(yz,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),f.jsx(pz,{scope:n,onClose:P,children:Pf.createPortal(f.jsx(ET.ItemSlot,{scope:n,children:f.jsx(KB,{asChild:!0,onEscapeKeyDown:pe(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||P(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(Ae.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,..._,ref:E,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:pe(t.onPointerDown,q=>{q.button===0&&(x.current={x:q.clientX,y:q.clientY})}),onPointerMove:pe(t.onPointerMove,q=>{if(!x.current)return;const $=q.clientX-x.current.x,B=q.clientY-x.current.y,Y=!!R.current,F=["left","right"].includes(y.swipeDirection),j=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,H=F?j(0,$):0,te=F?0:j(0,B),J=q.pointerType==="touch"?10:2,se={x:H,y:te},de={originalEvent:q,delta:se};Y?(R.current=se,qp(dz,h,de,{discrete:!1})):P1(se,y.swipeDirection,J)?(R.current=se,qp(uz,u,de,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs($)>J||Math.abs(B)>J)&&(x.current=null)}),onPointerUp:pe(t.onPointerUp,q=>{const $=R.current,B=q.target;if(B.hasPointerCapture(q.pointerId)&&B.releasePointerCapture(q.pointerId),R.current=null,x.current=null,$){const Y=q.currentTarget,F={originalEvent:q,delta:$};P1($,y.swipeDirection,y.swipeThreshold)?qp(fz,m,F,{discrete:!0}):qp(hz,p,F,{discrete:!0}),Y.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),yz=t=>{const{__scopeToast:e,children:n,...r}=t,s=By(Mf,e),[i,o]=g.useState(!1),[a,l]=g.useState(!1);return wz(()=>o(!0)),g.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:f.jsx(Of,{asChild:!0,children:f.jsx($y,{...r,children:i&&f.jsxs(f.Fragment,{children:[s.label," ",n]})})})},vz="ToastTitle",UO=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return f.jsx(Ae.div,{...r,ref:e})});UO.displayName=vz;var _z="ToastDescription",$O=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return f.jsx(Ae.div,{...r,ref:e})});$O.displayName=_z;var BO="ToastAction",zO=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?f.jsx(qO,{altText:n,asChild:!0,children:f.jsx(bT,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${BO}\`. Expected non-empty \`string\`.`),null)});zO.displayName=BO;var WO="ToastClose",bT=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=mz(WO,n);return f.jsx(qO,{asChild:!0,children:f.jsx(Ae.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,s.onClose)})})});bT.displayName=WO;var qO=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return f.jsx(Ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function HO(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Ez(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...HO(r))}}),e}function qp(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?_T(s,i):s.dispatchEvent(i)}var P1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function wz(t=()=>{}){const e=Qt(t);Wr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Ez(t){return t.nodeType===t.ELEMENT_NODE}function bz(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function J_(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Tz=MO,GO=jO,KO=VO,QO=UO,YO=$O,XO=zO,ZO=bT;function JO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=JO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function eM(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=JO(t))&&(r&&(r+=" "),r+=e);return r}const D1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,O1=eM,$u=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return O1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],h=i==null?void 0:i[c];if(u===null)return null;const p=D1(u)||D1(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,p]=u;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:p,...m}=u;return Object.entries(m).every(_=>{let[y,w]=_;return Array.isArray(w)?w.includes({...i,...a}[y]):{...i,...a}[y]===w})?[...c,h,p]:c},[]);return O1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sz=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),M1=t=>{const e=Sz(t);return e.charAt(0).toUpperCase()+e.slice(1)},tM=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Cz=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Iz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>g.createElement("svg",{ref:l,...Iz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tM("lucide",s),...!i&&!Cz(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>g.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(kz,{ref:i,iconNode:e,className:tM(`lucide-${xz(M1(t))}`,`lucide-${t}`,r),...s}));return n.displayName=M1(t),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Az=Le("arrow-left",Rz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],L1=Le("bell",Nz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],nM=Le("calendar",Pz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],G0=Le("chart-column",Dz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Mz=Le("check-check",Oz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rM=Le("check",Lz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Fz=Le("chevron-right",jz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],sM=Le("chrome",Vz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$z=Le("circle-check-big",Uz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zz=Le("circle",Bz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],TT=Le("clock",Wz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Hz=Le("cloud-off",qz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],Kz=Le("command",Gz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],Yz=Le("dot",Qz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Zz=Le("file-text",Xz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Jo=Le("loader-circle",Jz);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],iM=Le("log-out",eW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],j1=Le("mail",tW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],rW=Le("maximize",nW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],iW=Le("menu",sW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],aW=Le("message-square",oW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],oM=Le("mic",lW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],uW=Le("minimize",cW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],hW=Le("moon",dW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],pW=Le("notebook-text",fW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],gW=Le("panel-left",mW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],K0=Le("pause",yW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],aM=Le("phone",vW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Q0=Le("play",_W);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lM=Le("refresh-cw",wW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bW=Le("rotate-ccw",EW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],F1=Le("search",TW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],SW=Le("settings",xW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CW=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],du=Le("square-check-big",CW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],kW=Le("square",IW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],AW=Le("sun",RW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NW=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],PW=Le("timer",NW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],OW=Le("trash-2",DW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ih=Le("triangle-alert",MW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zy=Le("user",LW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cM=Le("users",jW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],VW=Le("wifi-off",FW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],$W=Le("wifi",UW);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ql=Le("x",BW),xT="-",zW=t=>{const e=qW(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(xT);return a[0]===""&&a.length!==1&&a.shift(),uM(a,e)||WW(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},uM=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?uM(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(xT);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},V1=/^\[(.+)\]$/,WW=t=>{if(V1.test(t)){const e=V1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},qW=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return GW(Object.entries(t.classGroups),n).forEach(([i,o])=>{Y0(o,r,i,e)}),r},Y0=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:U1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(HW(s)){Y0(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Y0(o,U1(e,i),n,r)})})},U1=(t,e)=>{let n=t;return e.split(xT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},HW=t=>t.isThemeGetter,GW=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,KW=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},dM="!",QW=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let w=0;w<a.length;w++){let b=a[w];if(c===0){if(b===s&&(r||a.slice(w,w+i)===e)){l.push(a.slice(u,w)),u=w+i;continue}if(b==="/"){h=w;continue}}b==="["?c++:b==="]"&&c--}const p=l.length===0?a:a.substring(u),m=p.startsWith(dM),_=m?p.substring(1):p,y=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:_,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},YW=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},XW=t=>({cache:KW(t.cacheSize),parseClassName:QW(t),...zW(t)}),ZW=/\s+/,JW=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(ZW);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let _=!!m,y=r(_?p.substring(0,m):p);if(!y){if(!_){a=c+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=c+(a.length>0?" "+a:a);continue}_=!1}const w=YW(u).join(":"),b=h?w+dM:w,E=b+y;if(i.includes(E))continue;i.push(E);const x=s(y,_);for(let R=0;R<x.length;++R){const O=x[R];i.push(b+O)}a=c+(a.length>0?" "+a:a)}return a};function e8(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=hM(e))&&(r&&(r+=" "),r+=n);return r}const hM=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=hM(t[r]))&&(n&&(n+=" "),n+=e);return n};function t8(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,h)=>h(u),t());return n=XW(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=JW(l,n);return s(l,u),u}return function(){return i(e8.apply(null,arguments))}}const Tt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},fM=/^\[(?:([a-z-]+):)?(.+)\]$/i,n8=/^\d+\/\d+$/,r8=new Set(["px","full","screen"]),s8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,i8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,o8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,a8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,l8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ii=t=>Vc(t)||r8.has(t)||n8.test(t),vo=t=>Bu(t,"length",g8),Vc=t=>!!t&&!Number.isNaN(Number(t)),ew=t=>Bu(t,"number",Vc),xd=t=>!!t&&Number.isInteger(Number(t)),c8=t=>t.endsWith("%")&&Vc(t.slice(0,-1)),Fe=t=>fM.test(t),_o=t=>s8.test(t),u8=new Set(["length","size","percentage"]),d8=t=>Bu(t,u8,pM),h8=t=>Bu(t,"position",pM),f8=new Set(["image","url"]),p8=t=>Bu(t,f8,v8),m8=t=>Bu(t,"",y8),Sd=()=>!0,Bu=(t,e,n)=>{const r=fM.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},g8=t=>i8.test(t)&&!o8.test(t),pM=()=>!1,y8=t=>a8.test(t),v8=t=>l8.test(t),_8=()=>{const t=Tt("colors"),e=Tt("spacing"),n=Tt("blur"),r=Tt("brightness"),s=Tt("borderColor"),i=Tt("borderRadius"),o=Tt("borderSpacing"),a=Tt("borderWidth"),l=Tt("contrast"),c=Tt("grayscale"),u=Tt("hueRotate"),h=Tt("invert"),p=Tt("gap"),m=Tt("gradientColorStops"),_=Tt("gradientColorStopPositions"),y=Tt("inset"),w=Tt("margin"),b=Tt("opacity"),E=Tt("padding"),x=Tt("saturate"),R=Tt("scale"),O=Tt("sepia"),L=Tt("skew"),k=Tt("space"),S=Tt("translate"),I=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Fe,e],D=()=>[Fe,e],A=()=>["",Ii,vo],q=()=>["auto",Vc,Fe],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Fe],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Vc,Fe];return{cacheSize:500,separator:":",theme:{colors:[Sd],spacing:[Ii,vo],blur:["none","",_o,Fe],brightness:te(),borderColor:[t],borderRadius:["none","","full",_o,Fe],borderSpacing:D(),borderWidth:A(),contrast:te(),grayscale:j(),hueRotate:te(),invert:j(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[c8,vo],inset:P(),margin:P(),opacity:te(),padding:D(),saturate:te(),scale:te(),sepia:j(),skew:te(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Fe]}],container:["container"],columns:[{columns:[_o]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Fe]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xd,Fe]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Fe]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",xd,Fe]}],"grid-cols":[{"grid-cols":[Sd]}],"col-start-end":[{col:["auto",{span:["full",xd,Fe]},Fe]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Sd]}],"row-start-end":[{row:["auto",{span:[xd,Fe]},Fe]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Fe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Fe,e]}],"min-w":[{"min-w":[Fe,e,"min","max","fit"]}],"max-w":[{"max-w":[Fe,e,"none","full","min","max","fit","prose",{screen:[_o]},_o]}],h:[{h:[Fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",_o,vo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ew]}],"font-family":[{font:[Sd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Fe]}],"line-clamp":[{"line-clamp":["none",Vc,ew]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ii,Fe]}],"list-image":[{"list-image":["none",Fe]}],"list-style-type":[{list:["none","disc","decimal",Fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ii,vo]}],"underline-offset":[{"underline-offset":["auto",Ii,Fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),h8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",d8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},p8]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Ii,Fe]}],"outline-w":[{outline:[Ii,vo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ii,vo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",_o,m8]}],"shadow-color":[{shadow:[Sd]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",_o,Fe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Fe]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",Fe]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",Fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[xd,Fe]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ii,vo,ew]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},w8=t8(_8);function Z(...t){return w8(eM(t))}const E8="/sounds/iphone_ding.mp3",$1="/sounds/ting.mp3";async function B1(t){try{const e=new Audio(t);e.addEventListener("error",n=>{console.warn(`Sound file not found: ${t}. Skipping audio playback.`)}),await e.play()}catch{console.warn(`Could not play sound: ${t}. This is likely due to missing audio files.`)}}const b8=Tz,mM=g.forwardRef(({className:t,...e},n)=>f.jsx(GO,{ref:n,className:Z("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));mM.displayName=GO.displayName;const T8=$u("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gM=g.forwardRef(({className:t,variant:e,...n},r)=>f.jsx(KO,{ref:r,className:Z(T8({variant:e}),t),...n}));gM.displayName=KO.displayName;const x8=g.forwardRef(({className:t,...e},n)=>f.jsx(XO,{ref:n,className:Z("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));x8.displayName=XO.displayName;const yM=g.forwardRef(({className:t,...e},n)=>f.jsx(ZO,{ref:n,className:Z("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:f.jsx(ql,{className:"h-4 w-4"})}));yM.displayName=ZO.displayName;const vM=g.forwardRef(({className:t,...e},n)=>f.jsx(QO,{ref:n,className:Z("text-sm font-semibold",t),...e}));vM.displayName=QO.displayName;const _M=g.forwardRef(({className:t,...e},n)=>f.jsx(YO,{ref:n,className:Z("text-sm opacity-90",t),...e}));_M.displayName=YO.displayName;function S8(){const{toasts:t}=Bl();return f.jsxs(b8,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return f.jsxs(gM,{...i,children:[f.jsxs("div",{className:"grid gap-1",children:[n&&f.jsx(vM,{children:n}),r&&f.jsx(_M,{children:r})]}),s,f.jsx(yM,{})]},e)}),f.jsx(mM,{})]})}var gg=["light","dark"],ST="(prefers-color-scheme: dark)",C8=typeof window>"u",CT=g.createContext(void 0),I8={setTheme:t=>{},themes:[]},wM=()=>{var t;return(t=g.useContext(CT))!=null?t:I8},k8=t=>g.useContext(CT)?t.children:g.createElement(A8,{...t}),R8=["light","dark"],A8=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=R8,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u})=>{let[h,p]=g.useState(()=>z1(s,o)),[m,_]=g.useState(()=>z1(s)),y=l?Object.values(l):i,w=g.useCallback(R=>{let O=R;if(!O)return;R==="system"&&n&&(O=W1());let L=l?l[O]:O,k=e?P8():null,S=document.documentElement;if(a==="class"?(S.classList.remove(...y),L&&S.classList.add(L)):L?S.setAttribute(a,L):S.removeAttribute(a),r){let I=gg.includes(o)?o:null,C=gg.includes(O)?O:I;S.style.colorScheme=C}k==null||k()},[]),b=g.useCallback(R=>{let O=typeof R=="function"?R(R):R;p(O);try{localStorage.setItem(s,O)}catch{}},[t]),E=g.useCallback(R=>{let O=W1(R);_(O),h==="system"&&n&&!t&&w("system")},[h,t]);g.useEffect(()=>{let R=window.matchMedia(ST);return R.addListener(E),E(R),()=>R.removeListener(E)},[E]),g.useEffect(()=>{let R=O=>{if(O.key!==s)return;let L=O.newValue||o;b(L)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[b]),g.useEffect(()=>{w(t??h)},[t,h]);let x=g.useMemo(()=>({theme:h,setTheme:b,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,b,t,m,n,i]);return g.createElement(CT.Provider,{value:x},g.createElement(N8,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:y,nonce:u}),c)},N8=g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?gg.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(_,y=!1,w=!0)=>{let b=o?o[_]:_,E=y?_+"|| ''":`'${b}'`,x="";return s&&w&&!y&&gg.includes(_)&&(x+=`d.style.colorScheme = '${_}';`),n==="class"?y||b?x+=`c.add(${E})`:x+="null":b&&(x+=`d[s](n,${E})`),x},m=t?`!function(){${u}${p(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${ST}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return g.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),z1=(t,e)=>{if(C8)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},P8=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},W1=t=>(t||(t=window.matchMedia(ST)),t.matches?"dark":"light"),D8=t=>{switch(t){case"success":return L8;case"info":return F8;case"warning":return j8;case"error":return V8;default:return null}},O8=Array(12).fill(0),M8=({visible:t,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},O8.map((n,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),L8=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),j8=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),F8=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),V8=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),U8=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$8=()=>{let[t,e]=G.useState(document.hidden);return G.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},X0=1,B8=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:X0++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],G.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(W8(c)&&!c.ok){i=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:h})}else if(n.success!==void 0){i=!1;let u=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let u=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||X0++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},yr=new B8,z8=(t,e)=>{let n=(e==null?void 0:e.id)||X0++;return yr.addToast({title:t,...e,id:n}),n},W8=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",q8=z8,H8=()=>yr.toasts,G8=()=>yr.getActiveToasts(),oc=Object.assign(q8,{success:yr.success,info:yr.info,warning:yr.warning,error:yr.error,custom:yr.custom,message:yr.message,promise:yr.promise,dismiss:yr.dismiss,loading:yr.loading},{getHistory:H8,getToasts:G8});function K8(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}K8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Hp(t){return t.label!==void 0}var Q8=3,Y8="32px",X8="16px",q1=4e3,Z8=356,J8=14,eq=20,tq=200;function gs(...t){return t.filter(Boolean).join(" ")}function nq(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var rq=t=>{var e,n,r,s,i,o,a,l,c,u,h;let{invert:p,toast:m,unstyled:_,interacting:y,setHeights:w,visibleToasts:b,heights:E,index:x,toasts:R,expanded:O,removeToast:L,defaultRichColors:k,closeButton:S,style:I,cancelButtonStyle:C,actionButtonStyle:P,className:D="",descriptionClassName:A="",duration:q,position:$,gap:B,loadingIcon:Y,expandByDefault:F,classNames:j,icons:H,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:J}=t,[se,de]=G.useState(null),[be,Pe]=G.useState(null),[ve,ht]=G.useState(!1),[ft,wt]=G.useState(!1),[ln,Xt]=G.useState(!1),[Mn,Te]=G.useState(!1),[Se,Et]=G.useState(!1),[Zt,qt]=G.useState(0),[He,M]=G.useState(0),U=G.useRef(m.duration||q||q1),z=G.useRef(null),oe=G.useRef(null),ie=x===0,ee=x+1<=b,ne=m.type,we=m.dismissible!==!1,Ge=m.className||"",Jt=m.descriptionClassName||"",hr=G.useMemo(()=>E.findIndex(ke=>ke.toastId===m.id)||0,[E,m.id]),fr=G.useMemo(()=>{var ke;return(ke=m.closeButton)!=null?ke:S},[m.closeButton,S]),Qr=G.useMemo(()=>m.duration||q||q1,[m.duration,q]),fn=G.useRef(0),Tn=G.useRef(0),Vs=G.useRef(0),fs=G.useRef(null),[id,fo]=$.split("-"),od=G.useMemo(()=>E.reduce((ke,Je,pt)=>pt>=hr?ke:ke+Je.height,0),[E,hr]),ad=$8(),Pa=m.invert||p,Da=ne==="loading";Tn.current=G.useMemo(()=>hr*B+od,[hr,od]),G.useEffect(()=>{U.current=Qr},[Qr]),G.useEffect(()=>{ht(!0)},[]),G.useEffect(()=>{let ke=oe.current;if(ke){let Je=ke.getBoundingClientRect().height;return M(Je),w(pt=>[{toastId:m.id,height:Je,position:m.position},...pt]),()=>w(pt=>pt.filter(xn=>xn.toastId!==m.id))}},[w,m.id]),G.useLayoutEffect(()=>{if(!ve)return;let ke=oe.current,Je=ke.style.height;ke.style.height="auto";let pt=ke.getBoundingClientRect().height;ke.style.height=Je,M(pt),w(xn=>xn.find(pr=>pr.toastId===m.id)?xn.map(pr=>pr.toastId===m.id?{...pr,height:pt}:pr):[{toastId:m.id,height:pt,position:m.position},...xn])},[ve,m.title,m.description,w,m.id]);let Yr=G.useCallback(()=>{wt(!0),qt(Tn.current),w(ke=>ke.filter(Je=>Je.toastId!==m.id)),setTimeout(()=>{L(m)},tq)},[m,L,w,Tn]);G.useEffect(()=>{if(m.promise&&ne==="loading"||m.duration===1/0||m.type==="loading")return;let ke;return O||y||J&&ad?(()=>{if(Vs.current<fn.current){let Je=new Date().getTime()-fn.current;U.current=U.current-Je}Vs.current=new Date().getTime()})():U.current!==1/0&&(fn.current=new Date().getTime(),ke=setTimeout(()=>{var Je;(Je=m.onAutoClose)==null||Je.call(m,m),Yr()},U.current)),()=>clearTimeout(ke)},[O,y,m,ne,J,ad,Yr]),G.useEffect(()=>{m.delete&&Yr()},[Yr,m.delete]);function xi(){var ke,Je,pt;return H!=null&&H.loading?G.createElement("div",{className:gs(j==null?void 0:j.loader,(ke=m==null?void 0:m.classNames)==null?void 0:ke.loader,"sonner-loader"),"data-visible":ne==="loading"},H.loading):Y?G.createElement("div",{className:gs(j==null?void 0:j.loader,(Je=m==null?void 0:m.classNames)==null?void 0:Je.loader,"sonner-loader"),"data-visible":ne==="loading"},Y):G.createElement(M8,{className:gs(j==null?void 0:j.loader,(pt=m==null?void 0:m.classNames)==null?void 0:pt.loader),visible:ne==="loading"})}return G.createElement("li",{tabIndex:0,ref:oe,className:gs(D,Ge,j==null?void 0:j.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[ne],(n=m==null?void 0:m.classNames)==null?void 0:n[ne]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:k,"data-styled":!(m.jsx||m.unstyled||_),"data-mounted":ve,"data-promise":!!m.promise,"data-swiped":Se,"data-removed":ft,"data-visible":ee,"data-y-position":id,"data-x-position":fo,"data-index":x,"data-front":ie,"data-swiping":ln,"data-dismissible":we,"data-type":ne,"data-invert":Pa,"data-swipe-out":Mn,"data-swipe-direction":be,"data-expanded":!!(O||F&&ve),style:{"--index":x,"--toasts-before":x,"--z-index":R.length-x,"--offset":`${ft?Zt:Tn.current}px`,"--initial-height":F?"auto":`${He}px`,...I,...m.style},onDragEnd:()=>{Xt(!1),de(null),fs.current=null},onPointerDown:ke=>{Da||!we||(z.current=new Date,qt(Tn.current),ke.target.setPointerCapture(ke.pointerId),ke.target.tagName!=="BUTTON"&&(Xt(!0),fs.current={x:ke.clientX,y:ke.clientY}))},onPointerUp:()=>{var ke,Je,pt,xn;if(Mn||!we)return;fs.current=null;let pr=Number(((ke=oe.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),It=Number(((Je=oe.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Us=new Date().getTime()-((pt=z.current)==null?void 0:pt.getTime()),Sn=se==="x"?pr:It,mr=Math.abs(Sn)/Us;if(Math.abs(Sn)>=eq||mr>.11){qt(Tn.current),(xn=m.onDismiss)==null||xn.call(m,m),Pe(se==="x"?pr>0?"right":"left":It>0?"down":"up"),Yr(),Te(!0),Et(!1);return}Xt(!1),de(null)},onPointerMove:ke=>{var Je,pt,xn,pr;if(!fs.current||!we||((Je=window.getSelection())==null?void 0:Je.toString().length)>0)return;let It=ke.clientY-fs.current.y,Us=ke.clientX-fs.current.x,Sn=(pt=t.swipeDirections)!=null?pt:nq($);!se&&(Math.abs(Us)>1||Math.abs(It)>1)&&de(Math.abs(Us)>Math.abs(It)?"x":"y");let mr={x:0,y:0};se==="y"?(Sn.includes("top")||Sn.includes("bottom"))&&(Sn.includes("top")&&It<0||Sn.includes("bottom")&&It>0)&&(mr.y=It):se==="x"&&(Sn.includes("left")||Sn.includes("right"))&&(Sn.includes("left")&&Us<0||Sn.includes("right")&&Us>0)&&(mr.x=Us),(Math.abs(mr.x)>0||Math.abs(mr.y)>0)&&Et(!0),(xn=oe.current)==null||xn.style.setProperty("--swipe-amount-x",`${mr.x}px`),(pr=oe.current)==null||pr.style.setProperty("--swipe-amount-y",`${mr.y}px`)}},fr&&!m.jsx?G.createElement("button",{"aria-label":te,"data-disabled":Da,"data-close-button":!0,onClick:Da||!we?()=>{}:()=>{var ke;Yr(),(ke=m.onDismiss)==null||ke.call(m,m)},className:gs(j==null?void 0:j.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=H==null?void 0:H.close)!=null?i:U8):null,m.jsx||g.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:G.createElement(G.Fragment,null,ne||m.icon||m.promise?G.createElement("div",{"data-icon":"",className:gs(j==null?void 0:j.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||xi():null,m.type!=="loading"?m.icon||(H==null?void 0:H[ne])||D8(ne):null):null,G.createElement("div",{"data-content":"",className:gs(j==null?void 0:j.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},G.createElement("div",{"data-title":"",className:gs(j==null?void 0:j.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?G.createElement("div",{"data-description":"",className:gs(A,Jt,j==null?void 0:j.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),g.isValidElement(m.cancel)?m.cancel:m.cancel&&Hp(m.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||C,onClick:ke=>{var Je,pt;Hp(m.cancel)&&we&&((pt=(Je=m.cancel).onClick)==null||pt.call(Je,ke),Yr())},className:gs(j==null?void 0:j.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,g.isValidElement(m.action)?m.action:m.action&&Hp(m.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:ke=>{var Je,pt;Hp(m.action)&&((pt=(Je=m.action).onClick)==null||pt.call(Je,ke),!ke.defaultPrevented&&Yr())},className:gs(j==null?void 0:j.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function H1(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function sq(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?X8:Y8;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var iq=g.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:h,duration:p,style:m,visibleToasts:_=Q8,toastOptions:y,dir:w=H1(),gap:b=J8,loadingIcon:E,icons:x,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:O}=t,[L,k]=G.useState([]),S=G.useMemo(()=>Array.from(new Set([r].concat(L.filter(J=>J.position).map(J=>J.position)))),[L,r]),[I,C]=G.useState([]),[P,D]=G.useState(!1),[A,q]=G.useState(!1),[$,B]=G.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=G.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=G.useRef(null),H=G.useRef(!1),te=G.useCallback(J=>{k(se=>{var de;return(de=se.find(be=>be.id===J.id))!=null&&de.delete||yr.dismiss(J.id),se.filter(({id:be})=>be!==J.id)})},[]);return G.useEffect(()=>yr.subscribe(J=>{if(J.dismiss){k(se=>se.map(de=>de.id===J.id?{...de,delete:!0}:de));return}setTimeout(()=>{gO.flushSync(()=>{k(se=>{let de=se.findIndex(be=>be.id===J.id);return de!==-1?[...se.slice(0,de),{...se[de],...J},...se.slice(de+1)]:[J,...se]})})})}),[]),G.useEffect(()=>{if(u!=="system"){B(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:se})=>{B(se?"dark":"light")})}catch{J.addListener(({matches:de})=>{try{B(de?"dark":"light")}catch(be){console.error(be)}})}},[u]),G.useEffect(()=>{L.length<=1&&D(!1)},[L]),G.useEffect(()=>{let J=se=>{var de,be;s.every(Pe=>se[Pe]||se.code===Pe)&&(D(!0),(de=Y.current)==null||de.focus()),se.code==="Escape"&&(document.activeElement===Y.current||(be=Y.current)!=null&&be.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[s]),G.useEffect(()=>{if(Y.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,H.current=!1)}},[Y.current]),G.createElement("section",{ref:e,"aria-label":`${R} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((J,se)=>{var de;let[be,Pe]=J.split("-");return L.length?G.createElement("ol",{key:J,dir:w==="auto"?H1():w,tabIndex:-1,ref:Y,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":be,"data-lifted":P&&L.length>1&&!i,"data-x-position":Pe,style:{"--front-toast-height":`${((de=I[0])==null?void 0:de.height)||0}px`,"--width":`${Z8}px`,"--gap":`${b}px`,...m,...sq(l,c)},onBlur:ve=>{H.current&&!ve.currentTarget.contains(ve.relatedTarget)&&(H.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||H.current||(H.current=!0,j.current=ve.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{A||D(!1)},onDragEnd:()=>D(!1),onPointerDown:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},L.filter(ve=>!ve.position&&se===0||ve.position===J).map((ve,ht)=>{var ft,wt;return G.createElement(rq,{key:ve.id,icons:x,index:ht,toast:ve,defaultRichColors:h,duration:(ft=y==null?void 0:y.duration)!=null?ft:p,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:_,closeButton:(wt=y==null?void 0:y.closeButton)!=null?wt:o,interacting:A,position:J,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:te,toasts:L.filter(ln=>ln.position==ve.position),heights:I.filter(ln=>ln.position==ve.position),setHeights:C,expandByDefault:i,gap:b,loadingIcon:E,expanded:P,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const oq=({...t})=>{const{theme:e="system"}=wM();return f.jsx(iq,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var aq=Ib[" useId ".trim().toString()]||(()=>{}),lq=0;function qi(t){const[e,n]=g.useState(aq());return Wr(()=>{t||n(r=>r??String(lq++))},[t]),t||(e?`radix-${e}`:"")}const cq=["top","right","bottom","left"],la=Math.min,Mr=Math.max,yg=Math.round,Gp=Math.floor,oi=t=>({x:t,y:t}),uq={left:"right",right:"left",bottom:"top",top:"bottom"},dq={start:"end",end:"start"};function Z0(t,e,n){return Mr(t,la(e,n))}function Ji(t,e){return typeof t=="function"?t(e):t}function eo(t){return t.split("-")[0]}function zu(t){return t.split("-")[1]}function IT(t){return t==="x"?"y":"x"}function kT(t){return t==="y"?"height":"width"}const hq=new Set(["top","bottom"]);function Xs(t){return hq.has(eo(t))?"y":"x"}function RT(t){return IT(Xs(t))}function fq(t,e,n){n===void 0&&(n=!1);const r=zu(t),s=RT(t),i=kT(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=vg(o)),[o,vg(o)]}function pq(t){const e=vg(t);return[J0(t),e,J0(e)]}function J0(t){return t.replace(/start|end/g,e=>dq[e])}const G1=["left","right"],K1=["right","left"],mq=["top","bottom"],gq=["bottom","top"];function yq(t,e,n){switch(t){case"top":case"bottom":return n?e?K1:G1:e?G1:K1;case"left":case"right":return e?mq:gq;default:return[]}}function vq(t,e,n,r){const s=zu(t);let i=yq(eo(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(J0)))),i}function vg(t){return t.replace(/left|right|bottom|top/g,e=>uq[e])}function _q(t){return{top:0,right:0,bottom:0,left:0,...t}}function EM(t){return typeof t!="number"?_q(t):{top:t,right:t,bottom:t,left:t}}function _g(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Q1(t,e,n){let{reference:r,floating:s}=t;const i=Xs(e),o=RT(e),a=kT(o),l=eo(e),c=i==="y",u=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(zu(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const wq=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=Q1(c,r,l),p=r,m={},_=0;for(let y=0;y<a.length;y++){const{name:w,fn:b}=a[y],{x:E,y:x,data:R,reset:O}=await b({x:u,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});u=E??u,h=x??h,m={...m,[w]:{...m[w],...R}},O&&_<=50&&(_++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:u,y:h}=Q1(c,p,l)),y=-1)}return{x:u,y:h,placement:p,strategy:s,middlewareData:m}};async function Wh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Ji(e,t),_=EM(m),w=a[p?h==="floating"?"reference":"floating":h],b=_g(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},O=_g(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:x,strategy:l}):E);return{top:(b.top-O.top+_.top)/R.y,bottom:(O.bottom-b.bottom+_.bottom)/R.y,left:(b.left-O.left+_.left)/R.x,right:(O.right-b.right+_.right)/R.x}}const Eq=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ji(t,e)||{};if(c==null)return{};const h=EM(u),p={x:n,y:r},m=RT(s),_=kT(m),y=await o.getDimensions(c),w=m==="y",b=w?"top":"left",E=w?"bottom":"right",x=w?"clientHeight":"clientWidth",R=i.reference[_]+i.reference[m]-p[m]-i.floating[_],O=p[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=L?L[x]:0;(!k||!await(o.isElement==null?void 0:o.isElement(L)))&&(k=a.floating[x]||i.floating[_]);const S=R/2-O/2,I=k/2-y[_]/2-1,C=la(h[b],I),P=la(h[E],I),D=C,A=k-y[_]-P,q=k/2-y[_]/2+S,$=Z0(D,q,A),B=!l.arrow&&zu(s)!=null&&q!==$&&i.reference[_]/2-(q<D?C:P)-y[_]/2<0,Y=B?q<D?q-D:q-A:0;return{[m]:p[m]+Y,data:{[m]:$,centerOffset:q-$-Y,...B&&{alignmentOffset:Y}},reset:B}}}),bq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:y=!0,...w}=Ji(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=eo(s),E=Xs(a),x=eo(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(x||!y?[vg(a)]:pq(a)),L=_!=="none";!p&&L&&O.push(...vq(a,y,_,R));const k=[a,...O],S=await Wh(e,w),I=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&I.push(S[b]),h){const q=fq(s,o,R);I.push(S[q[0]],S[q[1]])}if(C=[...C,{placement:s,overflows:I}],!I.every(q=>q<=0)){var P,D;const q=(((P=i.flip)==null?void 0:P.index)||0)+1,$=k[q];if($&&(!(h==="alignment"?E!==Xs($):!1)||C.every(F=>F.overflows[0]>0&&Xs(F.placement)===E)))return{data:{index:q,overflows:C},reset:{placement:$}};let B=(D=C.filter(Y=>Y.overflows[0]<=0).sort((Y,F)=>Y.overflows[1]-F.overflows[1])[0])==null?void 0:D.placement;if(!B)switch(m){case"bestFit":{var A;const Y=(A=C.filter(F=>{if(L){const j=Xs(F.placement);return j===E||j==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(j=>j>0).reduce((j,H)=>j+H,0)]).sort((F,j)=>F[1]-j[1])[0])==null?void 0:A[0];Y&&(B=Y);break}case"initialPlacement":B=a;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function Y1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function X1(t){return cq.some(e=>t[e]>=0)}const Tq=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ji(t,e);switch(r){case"referenceHidden":{const i=await Wh(e,{...s,elementContext:"reference"}),o=Y1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:X1(o)}}}case"escaped":{const i=await Wh(e,{...s,altBoundary:!0}),o=Y1(i,n.floating);return{data:{escapedOffsets:o,escaped:X1(o)}}}default:return{}}}}},bM=new Set(["left","top"]);async function xq(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=eo(n),a=zu(n),l=Xs(n)==="y",c=bM.has(o)?-1:1,u=i&&l?-1:1,h=Ji(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(m=a==="end"?_*-1:_),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const Sq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await xq(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Cq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:b,y:E}=w;return{x:b,y:E}}},...l}=Ji(t,e),c={x:n,y:r},u=await Wh(e,l),h=Xs(eo(s)),p=IT(h);let m=c[p],_=c[h];if(i){const w=p==="y"?"top":"left",b=p==="y"?"bottom":"right",E=m+u[w],x=m-u[b];m=Z0(E,m,x)}if(o){const w=h==="y"?"top":"left",b=h==="y"?"bottom":"right",E=_+u[w],x=_-u[b];_=Z0(E,_,x)}const y=a.fn({...e,[p]:m,[h]:_});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[h]:o}}}}}},Iq=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ji(t,e),u={x:n,y:r},h=Xs(s),p=IT(h);let m=u[p],_=u[h];const y=Ji(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const x=p==="y"?"height":"width",R=i.reference[p]-i.floating[x]+w.mainAxis,O=i.reference[p]+i.reference[x]-w.mainAxis;m<R?m=R:m>O&&(m=O)}if(c){var b,E;const x=p==="y"?"width":"height",R=bM.has(eo(s)),O=i.reference[h]-i.floating[x]+(R&&((b=o.offset)==null?void 0:b[h])||0)+(R?0:w.crossAxis),L=i.reference[h]+i.reference[x]+(R?0:((E=o.offset)==null?void 0:E[h])||0)-(R?w.crossAxis:0);_<O?_=O:_>L&&(_=L)}return{[p]:m,[h]:_}}}},kq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ji(t,e),u=await Wh(e,c),h=eo(s),p=zu(s),m=Xs(s)==="y",{width:_,height:y}=i.floating;let w,b;h==="top"||h==="bottom"?(w=h,b=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=h,w=p==="end"?"top":"bottom");const E=y-u.top-u.bottom,x=_-u.left-u.right,R=la(y-u[w],E),O=la(_-u[b],x),L=!e.middlewareData.shift;let k=R,S=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=E),L&&!p){const C=Mr(u.left,0),P=Mr(u.right,0),D=Mr(u.top,0),A=Mr(u.bottom,0);m?S=_-2*(C!==0||P!==0?C+P:Mr(u.left,u.right)):k=y-2*(D!==0||A!==0?D+A:Mr(u.top,u.bottom))}await l({...e,availableWidth:S,availableHeight:k});const I=await o.getDimensions(a.floating);return _!==I.width||y!==I.height?{reset:{rects:!0}}:{}}}};function Wy(){return typeof window<"u"}function Wu(t){return TM(t)?(t.nodeName||"").toLowerCase():"#document"}function Ur(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _i(t){var e;return(e=(TM(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function TM(t){return Wy()?t instanceof Node||t instanceof Ur(t).Node:!1}function Os(t){return Wy()?t instanceof Element||t instanceof Ur(t).Element:!1}function fi(t){return Wy()?t instanceof HTMLElement||t instanceof Ur(t).HTMLElement:!1}function Z1(t){return!Wy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ur(t).ShadowRoot}const Rq=new Set(["inline","contents"]);function Lf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ms(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Rq.has(s)}const Aq=new Set(["table","td","th"]);function Nq(t){return Aq.has(Wu(t))}const Pq=[":popover-open",":modal"];function qy(t){return Pq.some(e=>{try{return t.matches(e)}catch{return!1}})}const Dq=["transform","translate","scale","rotate","perspective"],Oq=["transform","translate","scale","rotate","perspective","filter"],Mq=["paint","layout","strict","content"];function AT(t){const e=NT(),n=Os(t)?Ms(t):t;return Dq.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Oq.some(r=>(n.willChange||"").includes(r))||Mq.some(r=>(n.contain||"").includes(r))}function Lq(t){let e=ca(t);for(;fi(e)&&!hu(e);){if(AT(e))return e;if(qy(e))return null;e=ca(e)}return null}function NT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jq=new Set(["html","body","#document"]);function hu(t){return jq.has(Wu(t))}function Ms(t){return Ur(t).getComputedStyle(t)}function Hy(t){return Os(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ca(t){if(Wu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Z1(t)&&t.host||_i(t);return Z1(e)?e.host:e}function xM(t){const e=ca(t);return hu(e)?t.ownerDocument?t.ownerDocument.body:t.body:fi(e)&&Lf(e)?e:xM(e)}function qh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=xM(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Ur(s);if(i){const a=eE(o);return e.concat(o,o.visualViewport||[],Lf(s)?s:[],a&&n?qh(a):[])}return e.concat(s,qh(s,[],n))}function eE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SM(t){const e=Ms(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=fi(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=yg(n)!==i||yg(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function PT(t){return Os(t)?t:t.contextElement}function Uc(t){const e=PT(t);if(!fi(e))return oi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=SM(e);let o=(i?yg(n.width):n.width)/r,a=(i?yg(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Fq=oi(0);function CM(t){const e=Ur(t);return!NT()||!e.visualViewport?Fq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ur(t)?!1:e}function bl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=PT(t);let o=oi(1);e&&(r?Os(r)&&(o=Uc(r)):o=Uc(t));const a=Vq(i,n,r)?CM(i):oi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const p=Ur(i),m=r&&Os(r)?Ur(r):r;let _=p,y=eE(_);for(;y&&r&&m!==_;){const w=Uc(y),b=y.getBoundingClientRect(),E=Ms(y),x=b.left+(y.clientLeft+parseFloat(E.paddingLeft))*w.x,R=b.top+(y.clientTop+parseFloat(E.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,h*=w.y,l+=x,c+=R,_=Ur(y),y=eE(_)}}return _g({width:u,height:h,x:l,y:c})}function DT(t,e){const n=Hy(t).scrollLeft;return e?e.left+n:bl(_i(t)).left+n}function IM(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:DT(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function Uq(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=_i(r),a=e?qy(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=oi(1);const u=oi(0),h=fi(r);if((h||!h&&!i)&&((Wu(r)!=="body"||Lf(o))&&(l=Hy(r)),fi(r))){const m=bl(r);c=Uc(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=o&&!h&&!i?IM(o,l,!0):oi(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function $q(t){return Array.from(t.getClientRects())}function Bq(t){const e=_i(t),n=Hy(t),r=t.ownerDocument.body,s=Mr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Mr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+DT(t);const a=-n.scrollTop;return Ms(r).direction==="rtl"&&(o+=Mr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function zq(t,e){const n=Ur(t),r=_i(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=NT();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const Wq=new Set(["absolute","fixed"]);function qq(t,e){const n=bl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=fi(t)?Uc(t):oi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function J1(t,e,n){let r;if(e==="viewport")r=zq(t,n);else if(e==="document")r=Bq(_i(t));else if(Os(e))r=qq(e,n);else{const s=CM(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return _g(r)}function kM(t,e){const n=ca(t);return n===e||!Os(n)||hu(n)?!1:Ms(n).position==="fixed"||kM(n,e)}function Hq(t,e){const n=e.get(t);if(n)return n;let r=qh(t,[],!1).filter(a=>Os(a)&&Wu(a)!=="body"),s=null;const i=Ms(t).position==="fixed";let o=i?ca(t):t;for(;Os(o)&&!hu(o);){const a=Ms(o),l=AT(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&Wq.has(s.position)||Lf(o)&&!l&&kM(t,o))?r=r.filter(u=>u!==o):s=a,o=ca(o)}return e.set(t,r),r}function Gq(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?qy(e)?[]:Hq(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=J1(e,u,s);return c.top=Mr(h.top,c.top),c.right=la(h.right,c.right),c.bottom=la(h.bottom,c.bottom),c.left=Mr(h.left,c.left),c},J1(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Kq(t){const{width:e,height:n}=SM(t);return{width:e,height:n}}function Qq(t,e,n){const r=fi(e),s=_i(e),i=n==="fixed",o=bl(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=oi(0);function c(){l.x=DT(s)}if(r||!r&&!i)if((Wu(e)!=="body"||Lf(s))&&(a=Hy(e)),r){const m=bl(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?IM(s,a):oi(0),h=o.left+a.scrollLeft-l.x-u.x,p=o.top+a.scrollTop-l.y-u.y;return{x:h,y:p,width:o.width,height:o.height}}function tw(t){return Ms(t).position==="static"}function ek(t,e){if(!fi(t)||Ms(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _i(t)===n&&(n=n.ownerDocument.body),n}function RM(t,e){const n=Ur(t);if(qy(t))return n;if(!fi(t)){let s=ca(t);for(;s&&!hu(s);){if(Os(s)&&!tw(s))return s;s=ca(s)}return n}let r=ek(t,e);for(;r&&Nq(r)&&tw(r);)r=ek(r,e);return r&&hu(r)&&tw(r)&&!AT(r)?n:r||Lq(t)||n}const Yq=async function(t){const e=this.getOffsetParent||RM,n=this.getDimensions,r=await n(t.floating);return{reference:Qq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Xq(t){return Ms(t).direction==="rtl"}const Zq={convertOffsetParentRelativeRectToViewportRelativeRect:Uq,getDocumentElement:_i,getClippingRect:Gq,getOffsetParent:RM,getElementRects:Yq,getClientRects:$q,getDimensions:Kq,getScale:Uc,isElement:Os,isRTL:Xq};function AM(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Jq(t,e){let n=null,r;const s=_i(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:h,width:p,height:m}=c;if(a||e(),!p||!m)return;const _=Gp(h),y=Gp(s.clientWidth-(u+p)),w=Gp(s.clientHeight-(h+m)),b=Gp(u),x={rootMargin:-_+"px "+-y+"px "+-w+"px "+-b+"px",threshold:Mr(0,la(1,l))||1};let R=!0;function O(L){const k=L[0].intersectionRatio;if(k!==l){if(!R)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!AM(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(O,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,x)}n.observe(t)}return o(!0),i}function eH(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=PT(t),u=s||i?[...c?qh(c):[],...qh(e)]:[];u.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const h=c&&a?Jq(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(b=>{let[E]=b;E&&E.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var x;(x=m)==null||x.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let _,y=l?bl(t):null;l&&w();function w(){const b=bl(t);y&&!AM(y,b)&&n(),y=b,_=requestAnimationFrame(w)}return n(),()=>{var b;u.forEach(E=>{s&&E.removeEventListener("scroll",n),i&&E.removeEventListener("resize",n)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,l&&cancelAnimationFrame(_)}}const tH=Sq,nH=Cq,rH=bq,sH=kq,iH=Tq,tk=Eq,oH=Iq,aH=(t,e,n)=>{const r=new Map,s={platform:Zq,...n},i={...s.platform,_c:r};return wq(t,e,{...s,platform:i})};var lH=typeof document<"u",cH=function(){},Tm=lH?g.useLayoutEffect:cH;function wg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!wg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!wg(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function NM(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function nk(t,e){const n=NM(t);return Math.round(e*n)/n}function nw(t){const e=g.useRef(t);return Tm(()=>{e.current=t}),e}function uH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=g.useState(r);wg(p,r)||m(r);const[_,y]=g.useState(null),[w,b]=g.useState(null),E=g.useCallback(F=>{F!==L.current&&(L.current=F,y(F))},[]),x=g.useCallback(F=>{F!==k.current&&(k.current=F,b(F))},[]),R=i||_,O=o||w,L=g.useRef(null),k=g.useRef(null),S=g.useRef(u),I=l!=null,C=nw(l),P=nw(s),D=nw(c),A=g.useCallback(()=>{if(!L.current||!k.current)return;const F={placement:e,strategy:n,middleware:p};P.current&&(F.platform=P.current),aH(L.current,k.current,F).then(j=>{const H={...j,isPositioned:D.current!==!1};q.current&&!wg(S.current,H)&&(S.current=H,Pf.flushSync(()=>{h(H)}))})},[p,e,n,P,D]);Tm(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const q=g.useRef(!1);Tm(()=>(q.current=!0,()=>{q.current=!1}),[]),Tm(()=>{if(R&&(L.current=R),O&&(k.current=O),R&&O){if(C.current)return C.current(R,O,A);A()}},[R,O,A,C,I]);const $=g.useMemo(()=>({reference:L,floating:k,setReference:E,setFloating:x}),[E,x]),B=g.useMemo(()=>({reference:R,floating:O}),[R,O]),Y=g.useMemo(()=>{const F={position:n,left:0,top:0};if(!B.floating)return F;const j=nk(B.floating,u.x),H=nk(B.floating,u.y);return a?{...F,transform:"translate("+j+"px, "+H+"px)",...NM(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:H}},[n,a,B.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:A,refs:$,elements:B,floatingStyles:Y}),[u,A,$,B,Y])}const dH=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?tk({element:r.current,padding:s}).fn(n):{}:r?tk({element:r,padding:s}).fn(n):{}}}},hH=(t,e)=>({...tH(t),options:[t,e]}),fH=(t,e)=>({...nH(t),options:[t,e]}),pH=(t,e)=>({...oH(t),options:[t,e]}),mH=(t,e)=>({...rH(t),options:[t,e]}),gH=(t,e)=>({...sH(t),options:[t,e]}),yH=(t,e)=>({...iH(t),options:[t,e]}),vH=(t,e)=>({...dH(t),options:[t,e]});var _H="Arrow",PM=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return f.jsx(Ae.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});PM.displayName=_H;var wH=PM;function EH(t){const[e,n]=g.useState(void 0);return Wr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var OT="Popper",[DM,qu]=Kr(OT),[bH,OM]=DM(OT),MM=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return f.jsx(bH,{scope:e,anchor:r,onAnchorChange:s,children:n})};MM.displayName=OT;var LM="PopperAnchor",jM=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=OM(LM,n),o=g.useRef(null),a=ut(e,o);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:f.jsx(Ae.div,{...s,ref:a})});jM.displayName=LM;var MT="PopperContent",[TH,xH]=DM(MT),FM=g.forwardRef((t,e)=>{var ve,ht,ft,wt,ln,Xt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:_,...y}=t,w=OM(MT,n),[b,E]=g.useState(null),x=ut(e,Mn=>E(Mn)),[R,O]=g.useState(null),L=EH(R),k=(L==null?void 0:L.width)??0,S=(L==null?void 0:L.height)??0,I=r+(i!=="center"?"-"+i:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(c)?c:[c],D=P.length>0,A={padding:C,boundary:P.filter(CH),altBoundary:D},{refs:q,floatingStyles:$,placement:B,isPositioned:Y,middlewareData:F}=uH({strategy:"fixed",placement:I,whileElementsMounted:(...Mn)=>eH(...Mn,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[hH({mainAxis:s+S,alignmentAxis:o}),l&&fH({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?pH():void 0,...A}),l&&mH({...A}),gH({...A,apply:({elements:Mn,rects:Te,availableWidth:Se,availableHeight:Et})=>{const{width:Zt,height:qt}=Te.reference,He=Mn.floating.style;He.setProperty("--radix-popper-available-width",`${Se}px`),He.setProperty("--radix-popper-available-height",`${Et}px`),He.setProperty("--radix-popper-anchor-width",`${Zt}px`),He.setProperty("--radix-popper-anchor-height",`${qt}px`)}}),R&&vH({element:R,padding:a}),IH({arrowWidth:k,arrowHeight:S}),p&&yH({strategy:"referenceHidden",...A})]}),[j,H]=$M(B),te=Qt(_);Wr(()=>{Y&&(te==null||te())},[Y,te]);const J=(ve=F.arrow)==null?void 0:ve.x,se=(ht=F.arrow)==null?void 0:ht.y,de=((ft=F.arrow)==null?void 0:ft.centerOffset)!==0,[be,Pe]=g.useState();return Wr(()=>{b&&Pe(window.getComputedStyle(b).zIndex)},[b]),f.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:Y?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(wt=F.transformOrigin)==null?void 0:wt.x,(ln=F.transformOrigin)==null?void 0:ln.y].join(" "),...((Xt=F.hide)==null?void 0:Xt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(TH,{scope:n,placedSide:j,onArrowChange:O,arrowX:J,arrowY:se,shouldHideArrow:de,children:f.jsx(Ae.div,{"data-side":j,"data-align":H,...y,ref:x,style:{...y.style,animation:Y?void 0:"none"}})})})});FM.displayName=MT;var VM="PopperArrow",SH={top:"bottom",right:"left",bottom:"top",left:"right"},UM=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=xH(VM,r),o=SH[i.placedSide];return f.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:f.jsx(wH,{...s,ref:n,style:{...s.style,display:"block"}})})});UM.displayName=VM;function CH(t){return t!==null}var IH=t=>({name:"transformOrigin",options:t,fn(e){var w,b,E;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=$M(n),h={start:"0%",center:"50%",end:"100%"}[u],p=(((b=s.arrow)==null?void 0:b.x)??0)+a/2,m=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let _="",y="";return c==="bottom"?(_=o?h:`${p}px`,y=`${-l}px`):c==="top"?(_=o?h:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,y=o?h:`${m}px`):c==="left"&&(_=`${r.floating.width+l}px`,y=o?h:`${m}px`),{data:{x:_,y}}}});function $M(t){const[e,n="center"]=t.split("-");return[e,n]}var LT=MM,Gy=jM,jT=FM,FT=UM,[Ky,wfe]=Kr("Tooltip",[qu]),Qy=qu(),BM="TooltipProvider",kH=700,tE="tooltip.open",[RH,VT]=Ky(BM),zM=t=>{const{__scopeTooltip:e,delayDuration:n=kH,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=g.useRef(!0),a=g.useRef(!1),l=g.useRef(0);return g.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),f.jsx(RH,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:g.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};zM.displayName=BM;var Hh="Tooltip",[AH,Yy]=Ky(Hh),WM=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=VT(Hh,t.__scopeTooltip),c=Qy(e),[u,h]=g.useState(null),p=qi(),m=g.useRef(0),_=o??l.disableHoverableContent,y=a??l.delayDuration,w=g.useRef(!1),[b,E]=Wl({prop:r,defaultProp:s??!1,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(tE))):l.onClose(),i==null||i(k)},caller:Hh}),x=g.useMemo(()=>b?w.current?"delayed-open":"instant-open":"closed",[b]),R=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w.current=!1,E(!0)},[E]),O=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,E(!1)},[E]),L=g.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{w.current=!0,E(!0),m.current=0},y)},[y,E]);return g.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),f.jsx(LT,{...c,children:f.jsx(AH,{scope:e,contentId:p,open:b,stateAttribute:x,trigger:u,onTriggerChange:h,onTriggerEnter:g.useCallback(()=>{l.isOpenDelayedRef.current?L():R()},[l.isOpenDelayedRef,L,R]),onTriggerLeave:g.useCallback(()=>{_?O():(window.clearTimeout(m.current),m.current=0)},[O,_]),onOpen:R,onClose:O,disableHoverableContent:_,children:n})})};WM.displayName=Hh;var nE="TooltipTrigger",qM=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Yy(nE,n),i=VT(nE,n),o=Qy(n),a=g.useRef(null),l=ut(e,a,s.onTriggerChange),c=g.useRef(!1),u=g.useRef(!1),h=g.useCallback(()=>c.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),f.jsx(Gy,{asChild:!0,...o,children:f.jsx(Ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:pe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:pe(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:pe(t.onBlur,s.onClose),onClick:pe(t.onClick,s.onClose)})})});qM.displayName=nE;var NH="TooltipPortal",[Efe,PH]=Ky(NH,{forceMount:void 0}),fu="TooltipContent",HM=g.forwardRef((t,e)=>{const n=PH(fu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Yy(fu,t.__scopeTooltip);return f.jsx(On,{present:r||o.open,children:o.disableHoverableContent?f.jsx(GM,{side:s,...i,ref:e}):f.jsx(DH,{side:s,...i,ref:e})})}),DH=g.forwardRef((t,e)=>{const n=Yy(fu,t.__scopeTooltip),r=VT(fu,t.__scopeTooltip),s=g.useRef(null),i=ut(e,s),[o,a]=g.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:h}=r,p=g.useCallback(()=>{a(null),h(!1)},[h]),m=g.useCallback((_,y)=>{const w=_.currentTarget,b={x:_.clientX,y:_.clientY},E=FH(b,w.getBoundingClientRect()),x=VH(b,E),R=UH(y.getBoundingClientRect()),O=BH([...x,...R]);a(O),h(!0)},[h]);return g.useEffect(()=>()=>p(),[p]),g.useEffect(()=>{if(l&&u){const _=w=>m(w,u),y=w=>m(w,l);return l.addEventListener("pointerleave",_),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",y)}}},[l,u,m,p]),g.useEffect(()=>{if(o){const _=y=>{const w=y.target,b={x:y.clientX,y:y.clientY},E=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),x=!$H(b,o);E?p():x&&(p(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,u,o,c,p]),f.jsx(GM,{...t,ref:i})}),[OH,MH]=Ky(Hh,{isInside:!1}),LH=LB("TooltipContent"),GM=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Yy(fu,n),c=Qy(n),{onClose:u}=l;return g.useEffect(()=>(document.addEventListener(tE,u),()=>document.removeEventListener(tE,u)),[u]),g.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),f.jsx(Uu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:f.jsxs(jT,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(LH,{children:r}),f.jsx(OH,{scope:n,isInside:!0,children:f.jsx(iz,{id:l.contentId,role:"tooltip",children:s||r})})]})})});HM.displayName=fu;var KM="TooltipArrow",jH=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Qy(n);return MH(KM,n).isInside?null:f.jsx(FT,{...s,...r,ref:e})});jH.displayName=KM;function FH(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function VH(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function UH(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function $H(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,h=l.x,p=l.y;u>r!=p>r&&n<(h-c)*(r-u)/(p-u)+c&&(s=!s)}return s}function BH(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),zH(e)}function zH(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var WH=zM,qH=WM,HH=qM,QM=HM;const UT=WH,YM=qH,XM=HH,$T=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(QM,{ref:r,sideOffset:e,className:Z("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));$T.displayName=QM.displayName;var Xy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zy=typeof window>"u"||"Deno"in globalThis;function vs(){}function GH(t,e){return typeof t=="function"?t(e):t}function KH(t){return typeof t=="number"&&t>=0&&t!==1/0}function QH(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rE(t,e){return typeof t=="function"?t(e):t}function YH(t,e){return typeof t=="function"?t(e):t}function rk(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==BT(o,e.options))return!1}else if(!Kh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function sk(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Gh(e.options.mutationKey)!==Gh(i))return!1}else if(!Kh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function BT(t,e){return((e==null?void 0:e.queryKeyHashFn)||Gh)(t)}function Gh(t){return JSON.stringify(t,(e,n)=>sE(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Kh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Kh(t[n],e[n])):!1}function ZM(t,e){if(t===e)return t;const n=ik(t)&&ik(e);if(n||sE(t)&&sE(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&l.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=ZM(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function ik(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function sE(t){if(!ok(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!ok(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ok(t){return Object.prototype.toString.call(t)==="[object Object]"}function XH(t){return new Promise(e=>{setTimeout(e,t)})}function ZH(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ZM(t,e):e}function JH(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function e7(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var zT=Symbol();function JM(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===zT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var nl,Do,Qc,QN,t7=(QN=class extends Xy{constructor(){super();rt(this,nl);rt(this,Do);rt(this,Qc);je(this,Qc,e=>{if(!Zy&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,Do)||this.setEventListener(Q(this,Qc))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Do))==null||e.call(this),je(this,Do,void 0))}setEventListener(e){var n;je(this,Qc,e),(n=Q(this,Do))==null||n.call(this),je(this,Do,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,nl)!==e&&(je(this,nl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,nl)=="boolean"?Q(this,nl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},nl=new WeakMap,Do=new WeakMap,Qc=new WeakMap,QN),e2=new t7,Yc,Oo,Xc,YN,n7=(YN=class extends Xy{constructor(){super();rt(this,Yc,!0);rt(this,Oo);rt(this,Xc);je(this,Xc,e=>{if(!Zy&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,Oo)||this.setEventListener(Q(this,Xc))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Oo))==null||e.call(this),je(this,Oo,void 0))}setEventListener(e){var n;je(this,Xc,e),(n=Q(this,Oo))==null||n.call(this),je(this,Oo,e(this.setOnline.bind(this)))}setOnline(e){Q(this,Yc)!==e&&(je(this,Yc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,Yc)}},Yc=new WeakMap,Oo=new WeakMap,Xc=new WeakMap,YN),Eg=new n7;function r7(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function s7(t){return Math.min(1e3*2**t,3e4)}function t2(t){return(t??"online")==="online"?Eg.isOnline():!0}var n2=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function rw(t){return t instanceof n2}function r2(t){let e=!1,n=0,r=!1,s;const i=r7(),o=y=>{var w;r||(p(new n2(y)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>e2.isFocused()&&(t.networkMode==="always"||Eg.isOnline())&&t.canRun(),u=()=>t2(t.networkMode)&&t.canRun(),h=y=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,y),s==null||s(),i.resolve(y))},p=y=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,y),s==null||s(),i.reject(y))},m=()=>new Promise(y=>{var w;s=b=>{(r||c())&&y(b)},(w=t.onPause)==null||w.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),_=()=>{if(r)return;let y;const w=n===0?t.initialPromise:void 0;try{y=w??t.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var L;if(r)return;const E=t.retry??(Zy?0:3),x=t.retryDelay??s7,R=typeof x=="function"?x(n,b):x,O=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,b);if(e||!O){p(b);return}n++,(L=t.onFail)==null||L.call(t,n,b),XH(R).then(()=>c()?void 0:m()).then(()=>{e?p(b):_()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?_():m().then(_),i)}}var i7=t=>setTimeout(t,0);function o7(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=i7;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var tr=o7(),rl,XN,s2=(XN=class{constructor(){rt(this,rl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KH(this.gcTime)&&je(this,rl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Zy?1/0:5*60*1e3))}clearGcTimeout(){Q(this,rl)&&(clearTimeout(Q(this,rl)),je(this,rl,void 0))}},rl=new WeakMap,XN),Zc,sl,Zr,il,Bn,Sf,ol,_s,Ri,ZN,a7=(ZN=class extends s2{constructor(n){super();rt(this,_s);rt(this,Zc);rt(this,sl);rt(this,Zr);rt(this,il);rt(this,Bn);rt(this,Sf);rt(this,ol);je(this,ol,!1),je(this,Sf,n.defaultOptions),this.setOptions(n.options),this.observers=[],je(this,il,n.client),je(this,Zr,Q(this,il).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,je(this,Zc,c7(this.options)),this.state=n.state??Q(this,Zc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,Bn))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,Sf),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,Zr).remove(this)}setData(n,r){const s=ZH(this.state.data,n,this.options);return Fn(this,_s,Ri).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Fn(this,_s,Ri).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,Bn))==null?void 0:s.promise;return(i=Q(this,Bn))==null||i.cancel(n),r?r.then(vs).catch(vs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Zc))}isActive(){return this.observers.some(n=>YH(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>rE(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!QH(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Bn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Bn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,Zr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,Bn)&&(Q(this,ol)?Q(this,Bn).cancel({revert:!0}):Q(this,Bn).cancelRetry()),this.scheduleGc()),Q(this,Zr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fn(this,_s,Ri).call(this,{type:"invalidate"})}fetch(n,r){var u,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,Bn))return Q(this,Bn).continueRetry(),Q(this,Bn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(_=>_.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(je(this,ol,!0),s.signal)})},o=()=>{const m=JM(this.options,r),y=(()=>{const w={client:Q(this,il),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return je(this,ol,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Q(this,il),state:this.state,fetchFn:o};return i(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),je(this,sl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Fn(this,_s,Ri).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=m=>{var _,y,w,b;rw(m)&&m.silent||Fn(this,_s,Ri).call(this,{type:"error",error:m}),rw(m)||((y=(_=Q(this,Zr).config).onError)==null||y.call(_,m,this),(b=(w=Q(this,Zr).config).onSettled)==null||b.call(w,this.state.data,m,this)),this.scheduleGc()};return je(this,Bn,r2({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var _,y,w,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(E){c(E);return}(y=(_=Q(this,Zr).config).onSuccess)==null||y.call(_,m,this),(b=(w=Q(this,Zr).config).onSettled)==null||b.call(w,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,_)=>{Fn(this,_s,Ri).call(this,{type:"failed",failureCount:m,error:_})},onPause:()=>{Fn(this,_s,Ri).call(this,{type:"pause"})},onContinue:()=>{Fn(this,_s,Ri).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Q(this,Bn).start()}},Zc=new WeakMap,sl=new WeakMap,Zr=new WeakMap,il=new WeakMap,Bn=new WeakMap,Sf=new WeakMap,ol=new WeakMap,_s=new WeakSet,Ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...l7(s.data,this.options),fetchMeta:n.meta??null};case"success":return je(this,sl,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return rw(i)&&i.revert&&Q(this,sl)?{...Q(this,sl),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),tr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,Zr).notify({query:this,type:"updated",action:n})})},ZN);function l7(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:t2(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function c7(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Hs,JN,u7=(JN=class extends Xy{constructor(e={}){super();rt(this,Hs);this.config=e,je(this,Hs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??BT(s,n);let o=this.get(i);return o||(o=new a7({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,Hs).has(e.queryHash)||(Q(this,Hs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,Hs).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,Hs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){tr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,Hs).get(e)}getAll(){return[...Q(this,Hs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>rk(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>rk(e,r)):n}notify(e){tr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){tr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){tr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hs=new WeakMap,JN),Gs,Zn,al,Ks,Eo,eP,d7=(eP=class extends s2{constructor(n){super();rt(this,Ks);rt(this,Gs);rt(this,Zn);rt(this,al);this.mutationId=n.mutationId,je(this,Zn,n.mutationCache),je(this,Gs,[]),this.state=n.state||h7(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,Gs).includes(n)||(Q(this,Gs).push(n),this.clearGcTimeout(),Q(this,Zn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){je(this,Gs,Q(this,Gs).filter(r=>r!==n)),this.scheduleGc(),Q(this,Zn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,Gs).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Zn).remove(this))}continue(){var n;return((n=Q(this,al))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,c,u,h,p,m,_,y,w,b,E,x,R,O,L,k,S,I;const r=()=>{Fn(this,Ks,Eo).call(this,{type:"continue"})};je(this,al,r2({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,P)=>{Fn(this,Ks,Eo).call(this,{type:"failed",failureCount:C,error:P})},onPause:()=>{Fn(this,Ks,Eo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Zn).canRun(this)}));const s=this.state.status==="pending",i=!Q(this,al).canStart();try{if(s)r();else{Fn(this,Ks,Eo).call(this,{type:"pending",variables:n,isPaused:i}),await((a=(o=Q(this,Zn).config).onMutate)==null?void 0:a.call(o,n,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));P!==this.state.context&&Fn(this,Ks,Eo).call(this,{type:"pending",context:P,variables:n,isPaused:i})}const C=await Q(this,al).start();return await((h=(u=Q(this,Zn).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,C,n,this.state.context)),await((y=(_=Q(this,Zn).config).onSettled)==null?void 0:y.call(_,C,null,this.state.variables,this.state.context,this)),await((b=(w=this.options).onSettled)==null?void 0:b.call(w,C,null,n,this.state.context)),Fn(this,Ks,Eo).call(this,{type:"success",data:C}),C}catch(C){try{throw await((x=(E=Q(this,Zn).config).onError)==null?void 0:x.call(E,C,n,this.state.context,this)),await((O=(R=this.options).onError)==null?void 0:O.call(R,C,n,this.state.context)),await((k=(L=Q(this,Zn).config).onSettled)==null?void 0:k.call(L,void 0,C,this.state.variables,this.state.context,this)),await((I=(S=this.options).onSettled)==null?void 0:I.call(S,void 0,C,n,this.state.context)),C}finally{Fn(this,Ks,Eo).call(this,{type:"error",error:C})}}finally{Q(this,Zn).runNext(this)}}},Gs=new WeakMap,Zn=new WeakMap,al=new WeakMap,Ks=new WeakSet,Eo=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),tr.batch(()=>{Q(this,Gs).forEach(s=>{s.onMutationUpdate(n)}),Q(this,Zn).notify({mutation:this,type:"updated",action:n})})},eP);function h7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Oi,ws,Cf,tP,f7=(tP=class extends Xy{constructor(e={}){super();rt(this,Oi);rt(this,ws);rt(this,Cf);this.config=e,je(this,Oi,new Set),je(this,ws,new Map),je(this,Cf,0)}build(e,n,r){const s=new d7({mutationCache:this,mutationId:++Cp(this,Cf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Q(this,Oi).add(e);const n=Kp(e);if(typeof n=="string"){const r=Q(this,ws).get(n);r?r.push(e):Q(this,ws).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Q(this,Oi).delete(e)){const n=Kp(e);if(typeof n=="string"){const r=Q(this,ws).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Q(this,ws).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Kp(e);if(typeof n=="string"){const r=Q(this,ws).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Kp(e);if(typeof n=="string"){const s=(r=Q(this,ws).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tr.batch(()=>{Q(this,Oi).forEach(e=>{this.notify({type:"removed",mutation:e})}),Q(this,Oi).clear(),Q(this,ws).clear()})}getAll(){return Array.from(Q(this,Oi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>sk(n,r))}findAll(e={}){return this.getAll().filter(n=>sk(e,n))}notify(e){tr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return tr.batch(()=>Promise.all(e.map(n=>n.continue().catch(vs))))}},Oi=new WeakMap,ws=new WeakMap,Cf=new WeakMap,tP);function Kp(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ak(t){return{onFetch:(e,n)=>{var u,h,p,m,_;const r=e.options,s=(p=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const w=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},b=JM(e.options,e.fetchOptions),E=async(x,R,O)=>{if(y)return Promise.reject();if(R==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:R,direction:O?"backward":"forward",meta:e.options.meta};return w(P),P})(),S=await b(k),{maxPages:I}=e.options,C=O?e7:JH;return{pages:C(x.pages,S,I),pageParams:C(x.pageParams,R,I)}};if(s&&i.length){const x=s==="backward",R=x?p7:lk,O={pages:i,pageParams:o},L=R(r,O);a=await E(O,L,x)}else{const x=t??i.length;do{const R=l===0?o[0]??r.initialPageParam:lk(r,a);if(l>0&&R==null)break;a=await E(a,R),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function lk(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function p7(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Lt,Mo,Lo,Jc,eu,jo,tu,nu,nP,m7=(nP=class{constructor(t={}){rt(this,Lt);rt(this,Mo);rt(this,Lo);rt(this,Jc);rt(this,eu);rt(this,jo);rt(this,tu);rt(this,nu);je(this,Lt,t.queryCache||new u7),je(this,Mo,t.mutationCache||new f7),je(this,Lo,t.defaultOptions||{}),je(this,Jc,new Map),je(this,eu,new Map),je(this,jo,0)}mount(){Cp(this,jo)._++,Q(this,jo)===1&&(je(this,tu,e2.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,Lt).onFocus())})),je(this,nu,Eg.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,Lt).onOnline())})))}unmount(){var t,e;Cp(this,jo)._--,Q(this,jo)===0&&((t=Q(this,tu))==null||t.call(this),je(this,tu,void 0),(e=Q(this,nu))==null||e.call(this),je(this,nu,void 0))}isFetching(t){return Q(this,Lt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Mo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,Lt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Q(this,Lt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(rE(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Q(this,Lt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,Lt).get(r.queryHash),i=s==null?void 0:s.state.data,o=GH(e,i);if(o!==void 0)return Q(this,Lt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return tr.batch(()=>Q(this,Lt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,Lt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,Lt);tr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,Lt);return tr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=tr.batch(()=>Q(this,Lt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(vs).catch(vs)}invalidateQueries(t,e={}){return tr.batch(()=>(Q(this,Lt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=tr.batch(()=>Q(this,Lt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(vs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(vs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,Lt).build(this,e);return n.isStaleByTime(rE(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(vs).catch(vs)}fetchInfiniteQuery(t){return t.behavior=ak(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(vs).catch(vs)}ensureInfiniteQueryData(t){return t.behavior=ak(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Eg.isOnline()?Q(this,Mo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,Lt)}getMutationCache(){return Q(this,Mo)}getDefaultOptions(){return Q(this,Lo)}setDefaultOptions(t){je(this,Lo,t)}setQueryDefaults(t,e){Q(this,Jc).set(Gh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,Jc).values()],n={};return e.forEach(r=>{Kh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Q(this,eu).set(Gh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,eu).values()],n={};return e.forEach(r=>{Kh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Lo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=BT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===zT&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Lo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,Lt).clear(),Q(this,Mo).clear()}},Lt=new WeakMap,Mo=new WeakMap,Lo=new WeakMap,Jc=new WeakMap,eu=new WeakMap,jo=new WeakMap,tu=new WeakMap,nu=new WeakMap,nP),g7=g.createContext(void 0),y7=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(g7.Provider,{value:t,children:e}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var Tl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Tl||(Tl={}));class xm extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const v7=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},_7=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:v7(t),i=()=>s()!=="web",o=h=>{const p=c.get(h);return!!(p!=null&&p.platforms.has(s())||a(h))},a=h=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,u=(h,p={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const _=s(),y=a(h);let w;const b=async()=>(!w&&_ in p?w=typeof p[_]=="function"?w=await p[_]():w=p[_]:e!==null&&!w&&"web"in p&&(w=typeof p.web=="function"?w=await p.web():w=p.web),w),E=(S,I)=>{var C,P;if(y){const D=y==null?void 0:y.methods.find(A=>I===A.name);if(D)return D.rtype==="promise"?A=>n.nativePromise(h,I.toString(),A):(A,q)=>n.nativeCallback(h,I.toString(),A,q);if(S)return(C=S[I])===null||C===void 0?void 0:C.bind(S)}else{if(S)return(P=S[I])===null||P===void 0?void 0:P.bind(S);throw new xm(`"${h}" plugin is not implemented on ${_}`,Tl.Unimplemented)}},x=S=>{let I;const C=(...P)=>{const D=b().then(A=>{const q=E(A,S);if(q){const $=q(...P);return I=$==null?void 0:$.remove,$}else throw new xm(`"${h}.${S}()" is not implemented on ${_}`,Tl.Unimplemented)});return S==="addListener"&&(D.remove=async()=>I()),D};return C.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:S,writable:!1,configurable:!1}),C},R=x("addListener"),O=x("removeListener"),L=(S,I)=>{const C=R({eventName:S},I),P=async()=>{const A=await C;O({eventName:S,callbackId:A},I)},D=new Promise(A=>C.then(()=>A({remove:P})));return D.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},D},k=new Proxy({},{get(S,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?L:R;case"removeListener":return O;default:return x(I)}}});return r[h]=k,c.set(h,{name:h,proxy:k,platforms:new Set([...Object.keys(p),...y?[_]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=u,n.Exception=xm,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},w7=t=>t.Capacitor=_7(t),At=w7(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Hu=At.registerPlugin;class WT{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new At.Exception(e,Tl.Unimplemented)}unavailable(e="not available"){return new At.Exception(e,Tl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const ck=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),uk=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class E7 extends WT{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=uk(s).trim(),i=uk(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=ck(e.key),r=ck(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Hu("CapacitorCookies",{web:()=>new E7});const b7=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),T7=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},x7=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,i2=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=T7(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class S7 extends WT{async request(e){const n=i2(e,e.webFetchExtra),r=x7(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await b7(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const u={};return i.headers.forEach((h,p)=>{u[p]=h}),{data:l,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Hu("CapacitorHttp",{web:()=>new S7});const xfe=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:At,CapacitorException:xm,get ExceptionCode(){return Tl},WebPlugin:WT,buildRequestInit:i2,registerPlugin:Hu},Symbol.toStringTag,{value:"Module"})),Xr=Hu("PushNotifications",{});var iE;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(iE||(iE={}));const jt=Hu("LocalNotifications",{web:()=>wn(()=>import("./web-Bj7blDrR.js"),[]).then(t=>new t.LocalNotificationsWeb)}),C7=Object.freeze(Object.defineProperty({__proto__:null,LocalNotifications:jt,get Weekday(){return iE}},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=()=>{};var dk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae=function(t,e){if(!t)throw Gu(e)},Gu=function(t){return new Error("Firebase Database ("+o2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},k7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},qT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):k7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new R7;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class R7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l2=function(t){const e=a2(t);return qT.encodeByteArray(e,!0)},bg=function(t){return l2(t).replace(/\./g,"")},Tg=function(t){try{return qT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t){return c2(void 0,t)}function c2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!N7(n)||(t[n]=c2(t[n],e[n]));return t}function N7(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=()=>P7().__FIREBASE_DEFAULTS__,O7=()=>{if(typeof process>"u"||typeof dk>"u")return;const t=dk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},M7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tg(t[1]);return e&&JSON.parse(e)},Jy=()=>{try{return I7()||D7()||O7()||M7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},u2=t=>{var e,n;return(n=(e=Jy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},HT=t=>{const e=u2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},d2=()=>{var t;return(t=Jy())==null?void 0:t.config},h2=t=>{var e;return(e=Jy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ev(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bg(JSON.stringify(n)),bg(JSON.stringify(o)),""].join(".")}const oh={};function L7(){const t={prod:[],emulator:[]};for(const e of Object.keys(oh))oh[e]?t.emulator.push(e):t.prod.push(e);return t}function j7(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let hk=!1;function tv(t,e){if(typeof window>"u"||typeof document>"u"||!wi(window.location.host)||oh[t]===e||oh[t]||hk)return;oh[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=L7().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{hk=!0,o()},p}function u(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=j7(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),y=n("learnmore"),w=document.getElementById(y)||document.createElement("a"),b=n("preprendIcon"),E=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),u(w,y);const R=c();l(E,b),x.append(E,_,w,R),document.body.appendChild(x)}i?(_.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function F7(){var e;const t=(e=Jy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function f2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function p2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U7(){const t=Qn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m2(){return o2.NODE_ADMIN===!0}function $7(){return!F7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QT(){try{return typeof indexedDB=="object"}catch{return!1}}function YT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function g2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7="FirebaseError";class cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=B7,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ca.prototype.create)}}class Ca{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?z7(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cs(s,a,r)}}function z7(t,e){return t.replace(W7,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const W7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){return JSON.parse(t)}function _n(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Qh(Tg(i[0])||""),n=Qh(Tg(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},q7=function(t){const e=y2(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},H7=function(t){const e=y2(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function oE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xg(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function pi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(fk(i)&&fk(o)){if(!pi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ud(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const p=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(p<<1|p>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),u=1518500249):(c=i^o^a,u=1859775393):h<60?(c=i&o|a&(i|o),u=2400959708):(c=i^o^a,u=3395469782);const p=(s<<5|s>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function K7(t,e){const n=new Q7(t,e);return n.subscribe.bind(n)}class Q7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Y7(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=sw),s.error===void 0&&(s.error=sw),s.complete===void 0&&(s.complete=sw);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sw(){}function nv(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rv=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=1e3,J7=2,eG=4*60*60*1e3,tG=.5;function pk(t,e=Z7,n=J7){const r=e*Math.pow(n,t),s=Math.round(tG*r*(Math.random()-.5)*2);return Math.min(eG,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jf;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sG(e))try{this.getOrInitializeService({instanceIdentifier:Va})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Va){return this.instances.has(e)}getOptions(e=Va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Va){return this.component?this.component.multipleInstances?e:Va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rG(t){return t===Va?void 0:t}function sG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nG(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const oG={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},aG=We.INFO,lG={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},cG=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lG[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ff{constructor(e){this.name=e,this._logLevel=aG,this._logHandler=cG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const uG=(t,e)=>e.some(n=>t instanceof n);let mk,gk;function dG(){return mk||(mk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hG(){return gk||(gk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v2=new WeakMap,aE=new WeakMap,_2=new WeakMap,iw=new WeakMap,XT=new WeakMap;function fG(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Hi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&v2.set(n,t)}).catch(()=>{}),XT.set(e,t),e}function pG(t){if(aE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});aE.set(t,e)}let lE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return aE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mG(t){lE=t(lE)}function gG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ow(this),e,...n);return _2.set(r,e.sort?e.sort():[e]),Hi(r)}:hG().includes(t)?function(...e){return t.apply(ow(this),e),Hi(v2.get(this))}:function(...e){return Hi(t.apply(ow(this),e))}}function yG(t){return typeof t=="function"?gG(t):(t instanceof IDBTransaction&&pG(t),uG(t,dG())?new Proxy(t,lE):t)}function Hi(t){if(t instanceof IDBRequest)return fG(t);if(iw.has(t))return iw.get(t);const e=yG(t);return e!==t&&(iw.set(t,e),XT.set(e,t)),e}const ow=t=>XT.get(t);function sv(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Hi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hi(o.result),l.oldVersion,l.newVersion,Hi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function aw(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Hi(n).then(()=>{})}const vG=["get","getKey","getAll","getAllKeys","count"],_G=["put","add","delete","clear"],lw=new Map;function yk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lw.get(e))return lw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_G.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vG.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return lw.set(e,i),i}mG(t=>({...t,get:(e,n,r)=>yk(e,n)||t.get(e,n,r),has:(e,n)=>!!yk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EG(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EG(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cE="@firebase/app",vk="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Ff("@firebase/app"),bG="@firebase/app-compat",TG="@firebase/analytics-compat",xG="@firebase/analytics",SG="@firebase/app-check-compat",CG="@firebase/app-check",IG="@firebase/auth",kG="@firebase/auth-compat",RG="@firebase/database",AG="@firebase/data-connect",NG="@firebase/database-compat",PG="@firebase/functions",DG="@firebase/functions-compat",OG="@firebase/installations",MG="@firebase/installations-compat",LG="@firebase/messaging",jG="@firebase/messaging-compat",FG="@firebase/performance",VG="@firebase/performance-compat",UG="@firebase/remote-config",$G="@firebase/remote-config-compat",BG="@firebase/storage",zG="@firebase/storage-compat",WG="@firebase/firestore",qG="@firebase/ai",HG="@firebase/firestore-compat",GG="firebase",KG="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="[DEFAULT]",QG={[cE]:"fire-core",[bG]:"fire-core-compat",[xG]:"fire-analytics",[TG]:"fire-analytics-compat",[CG]:"fire-app-check",[SG]:"fire-app-check-compat",[IG]:"fire-auth",[kG]:"fire-auth-compat",[RG]:"fire-rtdb",[AG]:"fire-data-connect",[NG]:"fire-rtdb-compat",[PG]:"fire-fn",[DG]:"fire-fn-compat",[OG]:"fire-iid",[MG]:"fire-iid-compat",[LG]:"fire-fcm",[jG]:"fire-fcm-compat",[FG]:"fire-perf",[VG]:"fire-perf-compat",[UG]:"fire-rc",[$G]:"fire-rc-compat",[BG]:"fire-gcs",[zG]:"fire-gcs-compat",[WG]:"fire-fst",[HG]:"fire-fst-compat",[qG]:"fire-vertex","fire-js":"fire-js",[GG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Map,YG=new Map,dE=new Map;function _k(t,e){try{t.container.addComponent(e)}catch(n){to.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ar(t){const e=t.name;if(dE.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;dE.set(e,t);for(const n of Yh.values())_k(n,t);for(const n of YG.values())_k(n,t);return!0}function bi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ea=new Ca("app","Firebase",XG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=KG;function w2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:uE,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ea.create("bad-app-name",{appName:String(s)});if(n||(n=d2()),!n)throw ea.create("no-options");const i=Yh.get(s);if(i){if(pi(n,i.options)&&pi(r,i.config))return i;throw ea.create("duplicate-app",{appName:s})}const o=new iG(s);for(const l of dE.values())o.addComponent(l);const a=new ZG(n,r,o);return Yh.set(s,a),a}function Gl(t=uE){const e=Yh.get(t);if(!e&&t===uE&&d2())return w2();if(!e)throw ea.create("no-app",{appName:t});return e}function JG(){return Array.from(Yh.values())}function bn(t,e,n){let r=QG[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(o.join(" "));return}Ar(new or(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK="firebase-heartbeat-database",tK=1,Xh="firebase-heartbeat-store";let cw=null;function E2(){return cw||(cw=sv(eK,tK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xh)}catch(n){console.warn(n)}}}}).catch(t=>{throw ea.create("idb-open",{originalErrorMessage:t.message})})),cw}async function nK(t){try{const n=(await E2()).transaction(Xh),r=await n.objectStore(Xh).get(b2(t));return await n.done,r}catch(e){if(e instanceof cs)to.warn(e.message);else{const n=ea.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(n.message)}}}async function wk(t,e){try{const r=(await E2()).transaction(Xh,"readwrite");await r.objectStore(Xh).put(e,b2(t)),await r.done}catch(n){if(n instanceof cs)to.warn(n.message);else{const r=ea.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});to.warn(r.message)}}}function b2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK=1024,sK=30;class iK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ek();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>sK){const o=lK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){to.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ek(),{heartbeatsToSend:r,unsentEntries:s}=oK(this._heartbeatsCache.heartbeats),i=bg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return to.warn(n),""}}}function Ek(){return new Date().toISOString().substring(0,10)}function oK(t,e=rK){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),bk(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QT()?YT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return wk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return wk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function bk(t){return bg(JSON.stringify({version:2,heartbeats:t})).length}function lK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(t){Ar(new or("platform-logger",e=>new wG(e),"PRIVATE")),Ar(new or("heartbeat",e=>new iK(e),"PRIVATE")),bn(cE,vk,t),bn(cE,vk,"esm2020"),bn("fire-js","")}cK("");var Tk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ta,T2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function I(){}I.prototype=S.prototype,k.D=S.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(C,P,D){for(var A=Array(arguments.length-2),q=2;q<arguments.length;q++)A[q-2]=arguments[q];return S.prototype[P].apply(C,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,S,I){I||(I=0);var C=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)C[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)C[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=k.g[0],I=k.g[1],P=k.g[2];var D=k.g[3],A=S+(D^I&(P^D))+C[0]+3614090360&4294967295;S=I+(A<<7&4294967295|A>>>25),A=D+(P^S&(I^P))+C[1]+3905402710&4294967295,D=S+(A<<12&4294967295|A>>>20),A=P+(I^D&(S^I))+C[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(S^P&(D^S))+C[3]+3250441966&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(D^I&(P^D))+C[4]+4118548399&4294967295,S=I+(A<<7&4294967295|A>>>25),A=D+(P^S&(I^P))+C[5]+1200080426&4294967295,D=S+(A<<12&4294967295|A>>>20),A=P+(I^D&(S^I))+C[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(S^P&(D^S))+C[7]+4249261313&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(D^I&(P^D))+C[8]+1770035416&4294967295,S=I+(A<<7&4294967295|A>>>25),A=D+(P^S&(I^P))+C[9]+2336552879&4294967295,D=S+(A<<12&4294967295|A>>>20),A=P+(I^D&(S^I))+C[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(S^P&(D^S))+C[11]+2304563134&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(D^I&(P^D))+C[12]+1804603682&4294967295,S=I+(A<<7&4294967295|A>>>25),A=D+(P^S&(I^P))+C[13]+4254626195&4294967295,D=S+(A<<12&4294967295|A>>>20),A=P+(I^D&(S^I))+C[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(S^P&(D^S))+C[15]+1236535329&4294967295,I=P+(A<<22&4294967295|A>>>10),A=S+(P^D&(I^P))+C[1]+4129170786&4294967295,S=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(S^I))+C[6]+3225465664&4294967295,D=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(D^S))+C[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^S&(P^D))+C[0]+3921069994&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(P^D&(I^P))+C[5]+3593408605&4294967295,S=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(S^I))+C[10]+38016083&4294967295,D=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(D^S))+C[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^S&(P^D))+C[4]+3889429448&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(P^D&(I^P))+C[9]+568446438&4294967295,S=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(S^I))+C[14]+3275163606&4294967295,D=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(D^S))+C[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^S&(P^D))+C[8]+1163531501&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(P^D&(I^P))+C[13]+2850285829&4294967295,S=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(S^I))+C[2]+4243563512&4294967295,D=S+(A<<9&4294967295|A>>>23),A=P+(S^I&(D^S))+C[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^S&(P^D))+C[12]+2368359562&4294967295,I=P+(A<<20&4294967295|A>>>12),A=S+(I^P^D)+C[5]+4294588738&4294967295,S=I+(A<<4&4294967295|A>>>28),A=D+(S^I^P)+C[8]+2272392833&4294967295,D=S+(A<<11&4294967295|A>>>21),A=P+(D^S^I)+C[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^S)+C[14]+4259657740&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(I^P^D)+C[1]+2763975236&4294967295,S=I+(A<<4&4294967295|A>>>28),A=D+(S^I^P)+C[4]+1272893353&4294967295,D=S+(A<<11&4294967295|A>>>21),A=P+(D^S^I)+C[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^S)+C[10]+3200236656&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(I^P^D)+C[13]+681279174&4294967295,S=I+(A<<4&4294967295|A>>>28),A=D+(S^I^P)+C[0]+3936430074&4294967295,D=S+(A<<11&4294967295|A>>>21),A=P+(D^S^I)+C[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^S)+C[6]+76029189&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(I^P^D)+C[9]+3654602809&4294967295,S=I+(A<<4&4294967295|A>>>28),A=D+(S^I^P)+C[12]+3873151461&4294967295,D=S+(A<<11&4294967295|A>>>21),A=P+(D^S^I)+C[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^S)+C[2]+3299628645&4294967295,I=P+(A<<23&4294967295|A>>>9),A=S+(P^(I|~D))+C[0]+4096336452&4294967295,S=I+(A<<6&4294967295|A>>>26),A=D+(I^(S|~P))+C[7]+1126891415&4294967295,D=S+(A<<10&4294967295|A>>>22),A=P+(S^(D|~I))+C[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~S))+C[5]+4237533241&4294967295,I=P+(A<<21&4294967295|A>>>11),A=S+(P^(I|~D))+C[12]+1700485571&4294967295,S=I+(A<<6&4294967295|A>>>26),A=D+(I^(S|~P))+C[3]+2399980690&4294967295,D=S+(A<<10&4294967295|A>>>22),A=P+(S^(D|~I))+C[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~S))+C[1]+2240044497&4294967295,I=P+(A<<21&4294967295|A>>>11),A=S+(P^(I|~D))+C[8]+1873313359&4294967295,S=I+(A<<6&4294967295|A>>>26),A=D+(I^(S|~P))+C[15]+4264355552&4294967295,D=S+(A<<10&4294967295|A>>>22),A=P+(S^(D|~I))+C[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~S))+C[13]+1309151649&4294967295,I=P+(A<<21&4294967295|A>>>11),A=S+(P^(I|~D))+C[4]+4149444226&4294967295,S=I+(A<<6&4294967295|A>>>26),A=D+(I^(S|~P))+C[11]+3174756917&4294967295,D=S+(A<<10&4294967295|A>>>22),A=P+(S^(D|~I))+C[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~S))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+D&4294967295}r.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var I=S-this.blockSize,C=this.B,P=this.h,D=0;D<S;){if(P==0)for(;D<=I;)s(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<S;)if(C[P++]=k.charCodeAt(D++),P==this.blockSize){s(this,C),P=0;break}}else for(;D<S;)if(C[P++]=k[D++],P==this.blockSize){s(this,C),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var I=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=I&255,I/=256;for(this.u(k),k=Array(16),S=I=0;4>S;++S)for(var C=0;32>C;C+=8)k[I++]=this.g[S]>>>C&255;return k};function i(k,S){var I=a;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=S(k)}function o(k,S){this.h=S;for(var I=[],C=!0,P=k.length-1;0<=P;P--){var D=k[P]|0;C&&D==S||(I[P]=D,C=!1)}this.g=I}var a={};function l(k){return-128<=k&&128>k?i(k,function(S){return new o([S|0],0>S?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return h;if(0>k)return w(c(-k));for(var S=[],I=1,C=0;k>=I;C++)S[C]=k/I|0,I*=4294967296;return new o(S,0)}function u(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return w(u(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(S,8)),C=h,P=0;P<k.length;P+=8){var D=Math.min(8,k.length-P),A=parseInt(k.substring(P,P+D),S);8>D?(D=c(Math.pow(S,D)),C=C.j(D).add(c(A))):(C=C.j(I),C=C.add(c(A)))}return C}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();for(var k=0,S=1,I=0;I<this.g.length;I++){var C=this.i(I);k+=(0<=C?C:4294967296+C)*S,S*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(_(this))return"0";if(y(this))return"-"+w(this).toString(k);for(var S=c(Math.pow(k,6)),I=this,C="";;){var P=R(I,S).g;I=b(I,P.j(S));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=P,_(I))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function _(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function y(k){return k.h==-1}t.l=function(k){return k=b(this,k),y(k)?-1:_(k)?0:1};function w(k){for(var S=k.g.length,I=[],C=0;C<S;C++)I[C]=~k.g[C];return new o(I,~k.h).add(p)}t.abs=function(){return y(this)?w(this):this},t.add=function(k){for(var S=Math.max(this.g.length,k.g.length),I=[],C=0,P=0;P<=S;P++){var D=C+(this.i(P)&65535)+(k.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);C=A>>>16,D&=65535,A&=65535,I[P]=A<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(k,S){return k.add(w(S))}t.j=function(k){if(_(this)||_(k))return h;if(y(this))return y(k)?w(this).j(w(k)):w(w(this).j(k));if(y(k))return w(this.j(w(k)));if(0>this.l(m)&&0>k.l(m))return c(this.m()*k.m());for(var S=this.g.length+k.g.length,I=[],C=0;C<2*S;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<k.g.length;P++){var D=this.i(C)>>>16,A=this.i(C)&65535,q=k.i(P)>>>16,$=k.i(P)&65535;I[2*C+2*P]+=A*$,E(I,2*C+2*P),I[2*C+2*P+1]+=D*$,E(I,2*C+2*P+1),I[2*C+2*P+1]+=A*q,E(I,2*C+2*P+1),I[2*C+2*P+2]+=D*q,E(I,2*C+2*P+2)}for(C=0;C<S;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=S;C<2*S;C++)I[C]=0;return new o(I,0)};function E(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function x(k,S){this.g=k,this.h=S}function R(k,S){if(_(S))throw Error("division by zero");if(_(k))return new x(h,h);if(y(k))return S=R(w(k),S),new x(w(S.g),w(S.h));if(y(S))return S=R(k,w(S)),new x(w(S.g),S.h);if(30<k.g.length){if(y(k)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var I=p,C=S;0>=C.l(k);)I=O(I),C=O(C);var P=L(I,1),D=L(C,1);for(C=L(C,2),I=L(I,2);!_(C);){var A=D.add(C);0>=A.l(k)&&(P=P.add(I),D=A),C=L(C,1),I=L(I,1)}return S=b(k,P.j(S)),new x(P,S)}for(P=h;0<=k.l(S);){for(I=Math.max(1,Math.floor(k.m()/S.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=c(I),A=D.j(S);y(A)||0<A.l(k);)I-=C,D=c(I),A=D.j(S);_(D)&&(D=p),P=P.add(D),k=b(k,A)}return new x(P,k)}t.A=function(k){return R(this,k).h},t.and=function(k){for(var S=Math.max(this.g.length,k.g.length),I=[],C=0;C<S;C++)I[C]=this.i(C)&k.i(C);return new o(I,this.h&k.h)},t.or=function(k){for(var S=Math.max(this.g.length,k.g.length),I=[],C=0;C<S;C++)I[C]=this.i(C)|k.i(C);return new o(I,this.h|k.h)},t.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),I=[],C=0;C<S;C++)I[C]=this.i(C)^k.i(C);return new o(I,this.h^k.h)};function O(k){for(var S=k.g.length+1,I=[],C=0;C<S;C++)I[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(I,k.h)}function L(k,S){var I=S>>5;S%=32;for(var C=k.g.length-I,P=[],D=0;D<C;D++)P[D]=0<S?k.i(D+I)>>>S|k.i(D+I+1)<<32-S:k.i(D+I);return new o(P,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,T2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,ta=o}).apply(typeof Tk<"u"?Tk:typeof self<"u"?self:typeof window<"u"?window:{});var Qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var x2,$d,S2,Sm,hE,C2,I2,k2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,T){return d==Array.prototype||d==Object.prototype||(d[v]=T.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qp=="object"&&Qp];for(var v=0;v<d.length;++v){var T=d[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(d,v){if(v)e:{var T=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var V=d[N];if(!(V in T))break e;T=T[V]}d=d[d.length-1],N=T[d],v=v(N),v!=N&&v!=null&&e(T,d,{configurable:!0,writable:!0,value:v})}}function i(d,v){d instanceof String&&(d+="");var T=0,N=!1,V={next:function(){if(!N&&T<d.length){var W=T++;return{value:v(W,d[W]),done:!1}}return N=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(d){return d||function(){return i(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function u(d,v,T){return d.call.apply(d.bind,arguments)}function h(d,v,T){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,N),d.apply(v,V)}}return function(){return d.apply(v,arguments)}}function p(d,v,T){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,p.apply(null,arguments)}function m(d,v){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function _(d,v){function T(){}T.prototype=v.prototype,d.aa=v.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(N,V,W){for(var ce=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)ce[mt-2]=arguments[mt];return v.prototype[V].apply(N,ce)}}function y(d){const v=d.length;if(0<v){const T=Array(v);for(let N=0;N<v;N++)T[N]=d[N];return T}return[]}function w(d,v){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(l(N)){const V=d.length||0,W=N.length||0;d.length=V+W;for(let ce=0;ce<W;ce++)d[V+ce]=N[ce]}else d.push(N)}}class b{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function E(d){return/^[\s\xa0]*$/.test(d)}function x(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var O=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function L(d,v,T){for(const N in d)v.call(T,d[N],N,d)}function k(d,v){for(const T in d)v.call(void 0,d[T],T,d)}function S(d){const v={};for(const T in d)v[T]=d[T];return v}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,v){let T,N;for(let V=1;V<arguments.length;V++){N=arguments[V];for(T in N)d[T]=N[T];for(let W=0;W<I.length;W++)T=I[W],Object.prototype.hasOwnProperty.call(N,T)&&(d[T]=N[T])}}function P(d){var v=1;d=d.split(":");const T=[];for(;0<v&&d.length;)T.push(d.shift()),v--;return d.length&&T.push(d.join(":")),T}function D(d){a.setTimeout(()=>{throw d},0)}function A(){var d=j;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,T){const N=$.get();N.set(v,T),this.h?this.h.next=N:this.g=N,this.h=N}}var $=new b(()=>new B,d=>d.reset());class B{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,F=!1,j=new q,H=()=>{const d=a.Promise.resolve(void 0);Y=()=>{d.then(te)}};var te=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(T){D(T)}var v=$;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}F=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};a.addEventListener("test",T,v),a.removeEventListener("test",T,v)}catch{}return d}();function be(d,v){if(se.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(O){e:{try{R(v.nodeName);var V=!0;break e}catch{}V=!1}V||(v=null)}}else T=="mouseover"?v=d.fromElement:T=="mouseout"&&(v=d.toElement);this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Pe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&be.aa.h.call(this)}}_(be,se);var Pe={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),ht=0;function ft(d,v,T,N,V){this.listener=d,this.proxy=null,this.src=v,this.type=T,this.capture=!!N,this.ha=V,this.key=++ht,this.da=this.fa=!1}function wt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ln(d){this.src=d,this.g={},this.h=0}ln.prototype.add=function(d,v,T,N,V){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var ce=Mn(d,v,N,V);return-1<ce?(v=d[ce],T||(v.fa=!1)):(v=new ft(v,this.src,W,!!N,V),v.fa=T,d.push(v)),v};function Xt(d,v){var T=v.type;if(T in d.g){var N=d.g[T],V=Array.prototype.indexOf.call(N,v,void 0),W;(W=0<=V)&&Array.prototype.splice.call(N,V,1),W&&(wt(v),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Mn(d,v,T,N){for(var V=0;V<d.length;++V){var W=d[V];if(!W.da&&W.listener==v&&W.capture==!!T&&W.ha==N)return V}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),Se={};function Et(d,v,T,N,V){if(Array.isArray(v)){for(var W=0;W<v.length;W++)Et(d,v[W],T,N,V);return null}return T=ee(T),d&&d[ve]?d.K(v,T,c(N)?!!N.capture:!!N,V):Zt(d,v,T,!1,N,V)}function Zt(d,v,T,N,V,W){if(!v)throw Error("Invalid event type");var ce=c(V)?!!V.capture:!!V,mt=oe(d);if(mt||(d[Te]=mt=new ln(d)),T=mt.add(v,T,N,ce,W),T.proxy)return T;if(N=qt(),T.proxy=N,N.src=d,N.listener=T,d.addEventListener)de||(V=ce),V===void 0&&(V=!1),d.addEventListener(v.toString(),N,V);else if(d.attachEvent)d.attachEvent(U(v.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function qt(){function d(T){return v.call(d.src,d.listener,T)}const v=z;return d}function He(d,v,T,N,V){if(Array.isArray(v))for(var W=0;W<v.length;W++)He(d,v[W],T,N,V);else N=c(N)?!!N.capture:!!N,T=ee(T),d&&d[ve]?(d=d.i,v=String(v).toString(),v in d.g&&(W=d.g[v],T=Mn(W,T,N,V),-1<T&&(wt(W[T]),Array.prototype.splice.call(W,T,1),W.length==0&&(delete d.g[v],d.h--)))):d&&(d=oe(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Mn(v,T,N,V)),(T=-1<d?v[d]:null)&&M(T))}function M(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ve])Xt(v.i,d);else{var T=d.type,N=d.proxy;v.removeEventListener?v.removeEventListener(T,N,d.capture):v.detachEvent?v.detachEvent(U(T),N):v.addListener&&v.removeListener&&v.removeListener(N),(T=oe(v))?(Xt(T,d),T.h==0&&(T.src=null,v[Te]=null)):wt(d)}}}function U(d){return d in Se?Se[d]:Se[d]="on"+d}function z(d,v){if(d.da)d=!0;else{v=new be(v,this);var T=d.listener,N=d.ha||d.src;d.fa&&M(d),d=T.call(N,v)}return d}function oe(d){return d=d[Te],d instanceof ln?d:null}var ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(d){return typeof d=="function"?d:(d[ie]||(d[ie]=function(v){return d.handleEvent(v)}),d[ie])}function ne(){J.call(this),this.i=new ln(this),this.M=this,this.F=null}_(ne,J),ne.prototype[ve]=!0,ne.prototype.removeEventListener=function(d,v,T,N){He(this,d,v,T,N)};function we(d,v){var T,N=d.F;if(N)for(T=[];N;N=N.F)T.push(N);if(d=d.M,N=v.type||v,typeof v=="string")v=new se(v,d);else if(v instanceof se)v.target=v.target||d;else{var V=v;v=new se(N,d),C(v,V)}if(V=!0,T)for(var W=T.length-1;0<=W;W--){var ce=v.g=T[W];V=Ge(ce,N,!0,v)&&V}if(ce=v.g=d,V=Ge(ce,N,!0,v)&&V,V=Ge(ce,N,!1,v)&&V,T)for(W=0;W<T.length;W++)ce=v.g=T[W],V=Ge(ce,N,!1,v)&&V}ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var T=d.g[v],N=0;N<T.length;N++)wt(T[N]);delete d.g[v],d.h--}}this.F=null},ne.prototype.K=function(d,v,T,N){return this.i.add(String(d),v,!1,T,N)},ne.prototype.L=function(d,v,T,N){return this.i.add(String(d),v,!0,T,N)};function Ge(d,v,T,N){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var V=!0,W=0;W<v.length;++W){var ce=v[W];if(ce&&!ce.da&&ce.capture==T){var mt=ce.listener,Cn=ce.ha||ce.src;ce.fa&&Xt(d.i,ce),V=mt.call(Cn,N)!==!1&&V}}return V&&!N.defaultPrevented}function Jt(d,v,T){if(typeof d=="function")T&&(d=p(d,T));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(d,v||0)}function hr(d){d.g=Jt(()=>{d.g=null,d.i&&(d.i=!1,hr(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class fr extends J{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:hr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(d){J.call(this),this.h=d,this.g={}}_(Qr,J);var fn=[];function Tn(d){L(d.g,function(v,T){this.g.hasOwnProperty(T)&&M(v)},d),d.g={}}Qr.prototype.N=function(){Qr.aa.N.call(this),Tn(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vs=a.JSON.stringify,fs=a.JSON.parse,id=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function fo(){}fo.prototype.h=null;function od(d){return d.h||(d.h=d.i())}function ad(){}var Pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Da(){se.call(this,"d")}_(Da,se);function Yr(){se.call(this,"c")}_(Yr,se);var xi={},ke=null;function Je(){return ke=ke||new ne}xi.La="serverreachability";function pt(d){se.call(this,xi.La,d)}_(pt,se);function xn(d){const v=Je();we(v,new pt(v))}xi.STAT_EVENT="statevent";function pr(d,v){se.call(this,xi.STAT_EVENT,d),this.stat=v}_(pr,se);function It(d){const v=Je();we(v,new pr(v,d))}xi.Ma="timingevent";function Us(d,v){se.call(this,xi.Ma,d),this.size=v}_(Us,se);function Sn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},v)}function mr(){this.g=!0}mr.prototype.xa=function(){this.g=!1};function R3(d,v,T,N,V,W){d.info(function(){if(d.g)if(W)for(var ce="",mt=W.split("&"),Cn=0;Cn<mt.length;Cn++){var nt=mt[Cn].split("=");if(1<nt.length){var Ln=nt[0];nt=nt[1];var jn=Ln.split("_");ce=2<=jn.length&&jn[1]=="type"?ce+(Ln+"="+nt+"&"):ce+(Ln+"=redacted&")}}else ce=null;else ce=W;return"XMLHTTP REQ ("+N+") [attempt "+V+"]: "+v+`
`+T+`
`+ce})}function A3(d,v,T,N,V,W,ce){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+V+"]: "+v+`
`+T+`
`+W+" "+ce})}function tc(d,v,T,N){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+P3(d,T)+(N?" "+N:"")})}function N3(d,v){d.info(function(){return"TIMEOUT: "+v})}mr.prototype.info=function(){};function P3(d,v){if(!d.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var N=T[d];if(!(2>N.length)){var V=N[1];if(Array.isArray(V)&&!(1>V.length)){var W=V[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ce=1;ce<V.length;ce++)V[ce]=""}}}}return Vs(T)}catch{return v}}var hp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},d_;function fp(){}_(fp,fo),fp.prototype.g=function(){return new XMLHttpRequest},fp.prototype.i=function(){return{}},d_=new fp;function po(d,v,T,N){this.j=d,this.i=v,this.l=T,this.R=N||1,this.U=new Qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new SC}function SC(){this.i=null,this.g="",this.h=!1}var CC={},h_={};function f_(d,v,T){d.L=1,d.v=yp(Si(v)),d.m=T,d.P=!0,IC(d,null)}function IC(d,v){d.F=Date.now(),pp(d),d.A=Si(d.v);var T=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),$C(T.i,"t",N),d.C=0,T=d.j.J,d.h=new SC,d.g=iI(d.j,T?v:null,!d.m),0<d.O&&(d.M=new fr(p(d.Y,d,d.g),d.O)),v=d.U,T=d.g,N=d.ca;var V="readystatechange";Array.isArray(V)||(V&&(fn[0]=V.toString()),V=fn);for(var W=0;W<V.length;W++){var ce=Et(T,V[W],N||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),xn(),R3(d.i,d.u,d.A,d.l,d.R,d.m)}po.prototype.ca=function(d){d=d.target;const v=this.M;v&&Ci(d)==3?v.j():this.Y(d)},po.prototype.Y=function(d){try{if(d==this.g)e:{const jn=Ci(this.g);var v=this.g.Ba();const sc=this.g.Z();if(!(3>jn)&&(jn!=3||this.g&&(this.h.h||this.g.oa()||KC(this.g)))){this.J||jn!=4||v==7||(v==8||0>=sc?xn(3):xn(2)),p_(this);var T=this.g.Z();this.X=T;t:if(kC(this)){var N=KC(this.g);d="";var V=N.length,W=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oa(this),ld(this);var ce="";break t}this.h.i=new a.TextDecoder}for(v=0;v<V;v++)this.h.h=!0,d+=this.h.i.decode(N[v],{stream:!(W&&v==V-1)});N.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=T==200,A3(this.i,this.u,this.A,this.l,this.R,jn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,Cn=this.g;if((mt=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(mt)){var nt=mt;break t}}nt=null}if(T=nt)tc(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,m_(this,T);else{this.o=!1,this.s=3,It(12),Oa(this),ld(this);break e}}if(this.P){T=!0;let ps;for(;!this.J&&this.C<ce.length;)if(ps=D3(this,ce),ps==h_){jn==4&&(this.s=4,It(14),T=!1),tc(this.i,this.l,null,"[Incomplete Response]");break}else if(ps==CC){this.s=4,It(15),tc(this.i,this.l,ce,"[Invalid Chunk]"),T=!1;break}else tc(this.i,this.l,ps,null),m_(this,ps);if(kC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jn!=4||ce.length!=0||this.h.h||(this.s=1,It(16),T=!1),this.o=this.o&&T,!T)tc(this.i,this.l,ce,"[Invalid Chunked Response]"),Oa(this),ld(this);else if(0<ce.length&&!this.W){this.W=!0;var Ln=this.j;Ln.g==this&&Ln.ba&&!Ln.M&&(Ln.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),E_(Ln),Ln.M=!0,It(11))}}else tc(this.i,this.l,ce,null),m_(this,ce);jn==4&&Oa(this),this.o&&!this.J&&(jn==4?tI(this.j,this):(this.o=!1,pp(this)))}else Y3(this.g),T==400&&0<ce.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Oa(this),ld(this)}}}catch{}finally{}};function kC(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function D3(d,v){var T=d.C,N=v.indexOf(`
`,T);return N==-1?h_:(T=Number(v.substring(T,N)),isNaN(T)?CC:(N+=1,N+T>v.length?h_:(v=v.slice(N,N+T),d.C=N+T,v)))}po.prototype.cancel=function(){this.J=!0,Oa(this)};function pp(d){d.S=Date.now()+d.I,RC(d,d.I)}function RC(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Sn(p(d.ba,d),v)}function p_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}po.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(N3(this.i,this.A),this.L!=2&&(xn(),It(17)),Oa(this),this.s=2,ld(this)):RC(this,this.S-d)};function ld(d){d.j.G==0||d.J||tI(d.j,d)}function Oa(d){p_(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Tn(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function m_(d,v){try{var T=d.j;if(T.G!=0&&(T.g==d||g_(T.h,d))){if(!d.K&&g_(T.h,d)&&T.G==3){try{var N=T.Da.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var V=N;if(V[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)Tp(T),Ep(T);else break e;w_(T),It(18)}}else T.za=V[1],0<T.za-T.T&&37500>V[2]&&T.F&&T.v==0&&!T.C&&(T.C=Sn(p(T.Za,T),6e3));if(1>=PC(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else La(T,11)}else if((d.K||T.g==d)&&Tp(T),!E(v))for(V=T.Da.g.parse(v),v=0;v<V.length;v++){let nt=V[v];if(T.T=nt[0],nt=nt[1],T.G==2)if(nt[0]=="c"){T.K=nt[1],T.ia=nt[2];const Ln=nt[3];Ln!=null&&(T.la=Ln,T.j.info("VER="+T.la));const jn=nt[4];jn!=null&&(T.Aa=jn,T.j.info("SVER="+T.Aa));const sc=nt[5];sc!=null&&typeof sc=="number"&&0<sc&&(N=1.5*sc,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const ps=d.g;if(ps){const Sp=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sp){var W=N.h;W.g||Sp.indexOf("spdy")==-1&&Sp.indexOf("quic")==-1&&Sp.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(y_(W,W.h),W.h=null))}if(N.D){const b_=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;b_&&(N.ya=b_,bt(N.I,N.D,b_))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var ce=d;if(N.qa=sI(N,N.J?N.ia:null,N.W),ce.K){DC(N.h,ce);var mt=ce,Cn=N.L;Cn&&(mt.I=Cn),mt.B&&(p_(mt),pp(mt)),N.g=ce}else JC(N);0<T.i.length&&bp(T)}else nt[0]!="stop"&&nt[0]!="close"||La(T,7);else T.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?La(T,7):__(T):nt[0]!="noop"&&T.l&&T.l.ta(nt),T.v=0)}}xn(4)}catch{}}var O3=class{constructor(d,v){this.g=d,this.map=v}};function AC(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function NC(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function PC(d){return d.h?1:d.g?d.g.size:0}function g_(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function y_(d,v){d.g?d.g.add(v):d.h=v}function DC(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}AC.prototype.cancel=function(){if(this.i=OC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function OC(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const T of d.g.values())v=v.concat(T.D);return v}return y(d.i)}function M3(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var v=[],T=d.length,N=0;N<T;N++)v.push(d[N]);return v}v=[],T=0;for(N in d)v[T++]=d[N];return v}function L3(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var v=[];d=d.length;for(var T=0;T<d;T++)v.push(T);return v}v=[],T=0;for(const N in d)v[T++]=N;return v}}}function MC(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var T=L3(d),N=M3(d),V=N.length,W=0;W<V;W++)v.call(void 0,N[W],T&&T[W],d)}var LC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j3(d,v){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var N=d[T].indexOf("="),V=null;if(0<=N){var W=d[T].substring(0,N);V=d[T].substring(N+1)}else W=d[T];v(W,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ma(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ma){this.h=d.h,mp(this,d.j),this.o=d.o,this.g=d.g,gp(this,d.s),this.l=d.l;var v=d.i,T=new dd;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),jC(this,T),this.m=d.m}else d&&(v=String(d).match(LC))?(this.h=!1,mp(this,v[1]||"",!0),this.o=cd(v[2]||""),this.g=cd(v[3]||"",!0),gp(this,v[4]),this.l=cd(v[5]||"",!0),jC(this,v[6]||"",!0),this.m=cd(v[7]||"")):(this.h=!1,this.i=new dd(null,this.h))}Ma.prototype.toString=function(){var d=[],v=this.j;v&&d.push(ud(v,FC,!0),":");var T=this.g;return(T||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ud(v,FC,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(ud(T,T.charAt(0)=="/"?U3:V3,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",ud(T,B3)),d.join("")};function Si(d){return new Ma(d)}function mp(d,v,T){d.j=T?cd(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function gp(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function jC(d,v,T){v instanceof dd?(d.i=v,z3(d.i,d.h)):(T||(v=ud(v,$3)),d.i=new dd(v,d.h))}function bt(d,v,T){d.i.set(v,T)}function yp(d){return bt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function cd(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ud(d,v,T){return typeof d=="string"?(d=encodeURI(d).replace(v,F3),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function F3(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var FC=/[#\/\?@]/g,V3=/[#\?:]/g,U3=/[#\?]/g,$3=/[#\?@]/g,B3=/#/g;function dd(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function mo(d){d.g||(d.g=new Map,d.h=0,d.i&&j3(d.i,function(v,T){d.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}t=dd.prototype,t.add=function(d,v){mo(this),this.i=null,d=nc(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(v),this.h+=1,this};function VC(d,v){mo(d),v=nc(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function UC(d,v){return mo(d),v=nc(d,v),d.g.has(v)}t.forEach=function(d,v){mo(this),this.g.forEach(function(T,N){T.forEach(function(V){d.call(v,V,N,this)},this)},this)},t.na=function(){mo(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let N=0;N<v.length;N++){const V=d[N];for(let W=0;W<V.length;W++)T.push(v[N])}return T},t.V=function(d){mo(this);let v=[];if(typeof d=="string")UC(this,d)&&(v=v.concat(this.g.get(nc(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)v=v.concat(d[T])}return v},t.set=function(d,v){return mo(this),this.i=null,d=nc(this,d),UC(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function $C(d,v,T){VC(d,v),0<T.length&&(d.i=null,d.g.set(nc(d,v),y(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var N=v[T];const W=encodeURIComponent(String(N)),ce=this.V(N);for(N=0;N<ce.length;N++){var V=W;ce[N]!==""&&(V+="="+encodeURIComponent(String(ce[N]))),d.push(V)}}return this.i=d.join("&")};function nc(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function z3(d,v){v&&!d.j&&(mo(d),d.i=null,d.g.forEach(function(T,N){var V=N.toLowerCase();N!=V&&(VC(this,N),$C(this,V,T))},d)),d.j=v}function W3(d,v){const T=new mr;if(a.Image){const N=new Image;N.onload=m(go,T,"TestLoadImage: loaded",!0,v,N),N.onerror=m(go,T,"TestLoadImage: error",!1,v,N),N.onabort=m(go,T,"TestLoadImage: abort",!1,v,N),N.ontimeout=m(go,T,"TestLoadImage: timeout",!1,v,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else v(!1)}function q3(d,v){const T=new mr,N=new AbortController,V=setTimeout(()=>{N.abort(),go(T,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:N.signal}).then(W=>{clearTimeout(V),W.ok?go(T,"TestPingServer: ok",!0,v):go(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(V),go(T,"TestPingServer: error",!1,v)})}function go(d,v,T,N,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),N(T)}catch{}}function H3(){this.g=new id}function G3(d,v,T){const N=T||"";try{MC(d,function(V,W){let ce=V;c(V)&&(ce=Vs(V)),v.push(N+W+"="+encodeURIComponent(ce))})}catch(V){throw v.push(N+"type="+encodeURIComponent("_badmap")),V}}function vp(d){this.l=d.Ub||null,this.j=d.eb||!1}_(vp,fo),vp.prototype.g=function(){return new _p(this.l,this.j)},vp.prototype.i=function(d){return function(){return d}}({});function _p(d,v){ne.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(_p,ne),t=_p.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,fd(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hd(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fd(this)),this.g&&(this.readyState=3,fd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;BC(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function BC(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?hd(this):fd(this),this.readyState==3&&BC(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,hd(this))},t.Qa=function(d){this.g&&(this.response=d,hd(this))},t.ga=function(){this.g&&hd(this)};function hd(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fd(d)}t.setRequestHeader=function(d,v){this.u.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=v.next();return d.join(`\r
`)};function fd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(_p.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function zC(d){let v="";return L(d,function(T,N){v+=N,v+=":",v+=T,v+=`\r
`}),v}function v_(d,v,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=zC(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):bt(d,v,T))}function Ot(d){ne.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ot,ne);var K3=/^https?$/i,Q3=["POST","PUT"];t=Ot.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,v,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():d_.g(),this.v=this.o?od(this.o):od(d_),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(W){WC(this,W);return}if(d=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var V in N)T.set(V,N[V]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const W of N.keys())T.set(W,N.get(W));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(W=>W.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Q3,v,void 0))||N||V||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ce]of T)this.g.setRequestHeader(W,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{GC(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){WC(this,W)}};function WC(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,qC(d),wp(d)}function qC(d){d.A||(d.A=!0,we(d,"complete"),we(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,we(this,"complete"),we(this,"abort"),wp(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wp(this,!0)),Ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?HC(this):this.bb())},t.bb=function(){HC(this)};function HC(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Ci(d)!=4||d.Z()!=2)){if(d.u&&Ci(d)==4)Jt(d.Ea,0,d);else if(we(d,"readystatechange"),Ci(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var N;if(N=ce===0){var V=String(d.D).match(LC)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),N=!K3.test(V?V.toLowerCase():"")}T=N}if(T)we(d,"complete"),we(d,"success");else{d.m=6;try{var W=2<Ci(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",qC(d)}}finally{wp(d)}}}}function wp(d,v){if(d.g){GC(d);const T=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||we(d,"ready");try{T.onreadystatechange=N}catch{}}}function GC(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Ci(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),fs(v)}};function KC(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Y3(d){const v={};d=(d.g&&2<=Ci(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(E(d[N]))continue;var T=P(d[N]);const V=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const W=v[V]||[];v[V]=W,W.push(T)}k(v,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pd(d,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||v}function QC(d){this.Aa=0,this.i=[],this.j=new mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pd("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pd("baseRetryDelayMs",5e3,d),this.cb=pd("retryDelaySeedMs",1e4,d),this.Wa=pd("forwardChannelMaxRetries",2,d),this.wa=pd("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new AC(d&&d.concurrentRequestLimit),this.Da=new H3,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=QC.prototype,t.la=8,t.G=1,t.connect=function(d,v,T,N){It(0),this.W=d,this.H=v||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=sI(this,null,this.W),bp(this)};function __(d){if(YC(d),d.G==3){var v=d.U++,T=Si(d.I);if(bt(T,"SID",d.K),bt(T,"RID",v),bt(T,"TYPE","terminate"),md(d,T),v=new po(d,d.j,v),v.L=2,v.v=yp(Si(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=v.v,T=!0),T||(v.g=iI(v.j,null),v.g.ea(v.v)),v.F=Date.now(),pp(v)}rI(d)}function Ep(d){d.g&&(E_(d),d.g.cancel(),d.g=null)}function YC(d){Ep(d),d.u&&(a.clearTimeout(d.u),d.u=null),Tp(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function bp(d){if(!NC(d.h)&&!d.s){d.s=!0;var v=d.Ga;Y||H(),F||(Y(),F=!0),j.add(v,d),d.B=0}}function X3(d,v){return PC(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Sn(p(d.Ga,d,v),nI(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const V=new po(this,this.j,d);let W=this.o;if(this.S&&(W?(W=S(W),C(W,this.S)):W=this.S),this.m!==null||this.O||(V.H=W,W=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=ZC(this,V,v),T=Si(this.I),bt(T,"RID",d),bt(T,"CVER",22),this.D&&bt(T,"X-HTTP-Session-Id",this.D),md(this,T),W&&(this.O?v="headers="+encodeURIComponent(String(zC(W)))+"&"+v:this.m&&v_(T,this.m,W)),y_(this.h,V),this.Ua&&bt(T,"TYPE","init"),this.P?(bt(T,"$req",v),bt(T,"SID","null"),V.T=!0,f_(V,T,null)):f_(V,T,v),this.G=2}}else this.G==3&&(d?XC(this,d):this.i.length==0||NC(this.h)||XC(this))};function XC(d,v){var T;v?T=v.l:T=d.U++;const N=Si(d.I);bt(N,"SID",d.K),bt(N,"RID",T),bt(N,"AID",d.T),md(d,N),d.m&&d.o&&v_(N,d.m,d.o),T=new po(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),v&&(d.i=v.D.concat(d.i)),v=ZC(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),y_(d.h,T),f_(T,N,v)}function md(d,v){d.H&&L(d.H,function(T,N){bt(v,N,T)}),d.l&&MC({},function(T,N){bt(v,N,T)})}function ZC(d,v,T){T=Math.min(d.i.length,T);var N=d.l?p(d.l.Na,d.l,d):null;e:{var V=d.i;let W=-1;for(;;){const ce=["count="+T];W==-1?0<T?(W=V[0].g,ce.push("ofs="+W)):W=0:ce.push("ofs="+W);let mt=!0;for(let Cn=0;Cn<T;Cn++){let nt=V[Cn].g;const Ln=V[Cn].map;if(nt-=W,0>nt)W=Math.max(0,V[Cn].g-100),mt=!1;else try{G3(Ln,ce,"req"+nt+"_")}catch{N&&N(Ln)}}if(mt){N=ce.join("&");break e}}}return d=d.i.splice(0,T),v.D=d,N}function JC(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;Y||H(),F||(Y(),F=!0),j.add(v,d),d.v=0}}function w_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Sn(p(d.Fa,d),nI(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,eI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Sn(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Ep(this),eI(this))};function E_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function eI(d){d.g=new po(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=Si(d.qa);bt(v,"RID","rpc"),bt(v,"SID",d.K),bt(v,"AID",d.T),bt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&bt(v,"TO",d.ja),bt(v,"TYPE","xmlhttp"),md(d,v),d.m&&d.o&&v_(v,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=yp(Si(v)),T.m=null,T.P=!0,IC(T,d)}t.Za=function(){this.C!=null&&(this.C=null,Ep(this),w_(this),It(19))};function Tp(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function tI(d,v){var T=null;if(d.g==v){Tp(d),E_(d),d.g=null;var N=2}else if(g_(d.h,v))T=v.D,DC(d.h,v),N=1;else return;if(d.G!=0){if(v.o)if(N==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var V=d.B;N=Je(),we(N,new Us(N,T)),bp(d)}else JC(d);else if(V=v.s,V==3||V==0&&0<v.X||!(N==1&&X3(d,v)||N==2&&w_(d)))switch(T&&0<T.length&&(v=d.h,v.i=v.i.concat(T)),V){case 1:La(d,5);break;case 4:La(d,10);break;case 3:La(d,6);break;default:La(d,2)}}}function nI(d,v){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*v}function La(d,v){if(d.j.info("Error code "+v),v==2){var T=p(d.fb,d),N=d.Xa;const V=!N;N=new Ma(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mp(N,"https"),yp(N),V?W3(N.toString(),T):q3(N.toString(),T)}else It(2);d.G=0,d.l&&d.l.sa(v),rI(d),YC(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function rI(d){if(d.G=0,d.ka=[],d.l){const v=OC(d.h);(v.length!=0||d.i.length!=0)&&(w(d.ka,v),w(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function sI(d,v,T){var N=T instanceof Ma?Si(T):new Ma(T);if(N.g!="")v&&(N.g=v+"."+N.g),gp(N,N.s);else{var V=a.location;N=V.protocol,v=v?v+"."+V.hostname:V.hostname,V=+V.port;var W=new Ma(null);N&&mp(W,N),v&&(W.g=v),V&&gp(W,V),T&&(W.l=T),N=W}return T=d.D,v=d.ya,T&&v&&bt(N,T,v),bt(N,"VER",d.la),md(d,N),N}function iI(d,v,T){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Ot(new vp({eb:T})):new Ot(d.pa),v.Ha(d.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oI(){}t=oI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xp(){}xp.prototype.g=function(d,v){return new Pr(d,v)};function Pr(d,v){ne.call(this),this.g=new QC(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!E(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!E(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new rc(this)}_(Pr,ne),Pr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pr.prototype.close=function(){__(this.g)},Pr.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Vs(d),d=T);v.i.push(new O3(v.Ya++,d)),v.G==3&&bp(v)},Pr.prototype.N=function(){this.g.l=null,delete this.j,__(this.g),delete this.g,Pr.aa.N.call(this)};function aI(d){Da.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const T in v){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}_(aI,Da);function lI(){Yr.call(this),this.status=1}_(lI,Yr);function rc(d){this.g=d}_(rc,oI),rc.prototype.ua=function(){we(this.g,"a")},rc.prototype.ta=function(d){we(this.g,new aI(d))},rc.prototype.sa=function(d){we(this.g,new lI)},rc.prototype.ra=function(){we(this.g,"b")},xp.prototype.createWebChannel=xp.prototype.g,Pr.prototype.send=Pr.prototype.o,Pr.prototype.open=Pr.prototype.m,Pr.prototype.close=Pr.prototype.close,k2=function(){return new xp},I2=function(){return Je()},C2=xi,hE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hp.NO_ERROR=0,hp.TIMEOUT=8,hp.HTTP_ERROR=6,Sm=hp,xC.COMPLETE="complete",S2=xC,ad.EventType=Pa,Pa.OPEN="a",Pa.CLOSE="b",Pa.ERROR="c",Pa.MESSAGE="d",ne.prototype.listen=ne.prototype.K,$d=ad,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,x2=Ot}).apply(typeof Qp<"u"?Qp:typeof self<"u"?self:typeof window<"u"?window:{});const xk="@firebase/firestore",Sk="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zn.UNAUTHENTICATED=new zn(null),zn.GOOGLE_CREDENTIALS=new zn("google-credentials-uid"),zn.FIRST_PARTY=new zn("first-party-uid"),zn.MOCK_USER=new zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Ff("@firebase/firestore");function hc(){return xl.logLevel}function me(t,...e){if(xl.logLevel<=We.DEBUG){const n=e.map(ZT);xl.debug(`Firestore (${Ku}): ${t}`,...n)}}function no(t,...e){if(xl.logLevel<=We.ERROR){const n=e.map(ZT);xl.error(`Firestore (${Ku}): ${t}`,...n)}}function mu(t,...e){if(xl.logLevel<=We.WARN){const n=e.map(ZT);xl.warn(`Firestore (${Ku}): ${t}`,...n)}}function ZT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,R2(t,r,n)}function R2(t,e,n){let r=`FIRESTORE (${Ku}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw no(r),new Error(r)}function at(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||R2(e,s,r)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zn.UNAUTHENTICATED))}shutdown(){}}class dK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hK{constructor(e){this.t=e,this.currentUser=zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new A2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new zn(e)}}class fK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new fK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ck{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mK{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const r=i=>{i.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ck(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ck(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=gK(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function fE(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return uw(s)===uw(i)?Ke(s,i):uw(s)?1:-1}return Ke(t.length,e.length)}const yK=55296,vK=57343;function uw(t){const e=t.charCodeAt(0);return e>=yK&&e<=vK}function gu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="__name__";class qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=qs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ke(e.length,n.length)}static compareSegments(e,n){const r=qs.isNumericId(e),s=qs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?qs.extractNumericId(e).compare(qs.extractNumericId(n)):fE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ta.fromString(e.substring(4,e.length-2))}}class vt extends qs{construct(e,n,r){return new vt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const _K=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends qs{construct(e,n,r){return new Rn(e,n,r)}static isValidIdentifier(e){return _K.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ik}static keyField(){return new Rn([Ik])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new he(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new he(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new he(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new he(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(n)}static emptyPath(){return new Rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(vt.fromString(e))}static fromName(e){return new xe(vt.fromString(e).popFirst(5))}static empty(){return new xe(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t,e,n){if(!n)throw new he(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wK(t,e,n,r){if(e===!0&&r===!0)throw new he(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kk(t){if(!xe.isDocumentKey(t))throw new he(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rk(t){if(xe.isDocumentKey(t))throw new he(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function P2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function iv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iv(t);throw new he(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vf(t,e){if(!P2(t))throw new he(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new he(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=-62135596800,Nk=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Nk);return new St(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ak)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nk}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vf(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ak;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:on("string",St._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new St(0,0))}static max(){return new Ne(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=-1;function EK(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new St(n+1,0):new St(n,r));return new ua(s,xe.empty(),e)}function bK(t){return new ua(t.readTime,t.key,Zh)}class ua{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ua(Ne.min(),xe.empty(),Zh)}static max(){return new ua(Ne.max(),xe.empty(),Zh)}}function TK(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==xK)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(s=>s?X.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new X((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new X((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function CK(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ov.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=-1;function av(t){return t==null}function Sg(t){return t===0&&1/t==-1/0}function IK(t){return typeof t=="number"&&Number.isInteger(t)&&!Sg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="";function kK(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Pk(e)),e=RK(t.get(n),e);return Pk(e)}function RK(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case D2:n+="";break;default:n+=i}}return n}function Pk(t){return t+D2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ka(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function O2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an=class pE{constructor(e,n){this.comparator=e,this.root=n||na.EMPTY}insert(e,n){return new pE(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,na.BLACK,null,null))}remove(e){return new pE(this.comparator,this.root.remove(e,this.comparator).copy(null,null,na.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yp(this.root,e,this.comparator,!0)}},Yp=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},na=class Ai{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ai.RED,this.left=s??Ai.EMPTY,this.right=i??Ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ai(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ai.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}};na.EMPTY=null,na.RED=!0,na.BLACK=!1;na.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new na(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ok(this.data.getIterator())}getIteratorFrom(e){return new Ok(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hn(this.comparator);return n.data=e,n}}class Ok{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new jr([])}unionWith(e){let n=new hn(Rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new M2("Invalid base64 string: "+i):i}}(e);return new Pn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const AK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function da(t){if(at(!!t,39018),typeof t=="string"){let e=0;const n=AK.exec(t);if(at(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ha(t){return typeof t=="string"?Pn.fromBase64String(t):Pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="server_timestamp",j2="__type__",F2="__previous_value__",V2="__local_write_time__";function tx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[j2])==null?void 0:r.stringValue)===L2}function lv(t){const e=t.mapValue.fields[F2];return tx(e)?lv(e):e}function Jh(t){const e=da(t.mapValue.fields[V2].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(e,n,r,s,i,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Cg="(default)";class ef{constructor(e,n){this.projectId=e,this.database=n||Cg}static empty(){return new ef("","")}get isDefaultDatabase(){return this.database===Cg}isEqual(e){return e instanceof ef&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="__type__",$2="__max__",Xp={mapValue:{fields:{__type__:{stringValue:$2}}}},B2="__vector__",Ig="value";function fa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tx(t)?4:DK(t)?9007199254740991:PK(t)?10:11:Ce(28295,{value:t})}function mi(t,e){if(t===e)return!0;const n=fa(t);if(n!==fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jh(t).isEqual(Jh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=da(s.timestampValue),a=da(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ha(s.bytesValue).isEqual(ha(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ht(s.geoPointValue.latitude)===Ht(i.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ht(s.integerValue)===Ht(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ht(s.doubleValue),a=Ht(i.doubleValue);return o===a?Sg(o)===Sg(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return gu(t.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Dk(o)!==Dk(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!mi(o[l],a[l])))return!1;return!0}(t,e);default:return Ce(52216,{left:t})}}function tf(t,e){return(t.values||[]).find(n=>mi(n,e))!==void 0}function yu(t,e){if(t===e)return 0;const n=fa(t),r=fa(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ht(i.integerValue||i.doubleValue),l=Ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Mk(t.timestampValue,e.timestampValue);case 4:return Mk(Jh(t),Jh(e));case 5:return fE(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ha(i),l=ha(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ke(a[c],l[c]);if(u!==0)return u}return Ke(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ke(Ht(i.latitude),Ht(o.latitude));return a!==0?a:Ke(Ht(i.longitude),Ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lk(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,m,_,y;const a=i.fields||{},l=o.fields||{},c=(p=a[Ig])==null?void 0:p.arrayValue,u=(m=l[Ig])==null?void 0:m.arrayValue,h=Ke(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((y=u==null?void 0:u.values)==null?void 0:y.length)||0);return h!==0?h:Lk(c,u)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Xp.mapValue&&o===Xp.mapValue)return 0;if(i===Xp.mapValue)return 1;if(o===Xp.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const p=fE(l[h],u[h]);if(p!==0)return p;const m=yu(a[l[h]],c[u[h]]);if(m!==0)return m}return Ke(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function Mk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=da(t),r=da(e),s=Ke(n.seconds,r.seconds);return s!==0?s:Ke(n.nanos,r.nanos)}function Lk(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=yu(n[s],r[s]);if(i)return i}return Ke(n.length,r.length)}function vu(t){return mE(t)}function mE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=da(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ha(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=mE(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${mE(n.fields[o])}`;return s+"}"}(t.mapValue):Ce(61005,{value:t})}function Cm(t){switch(fa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lv(t);return e?16+Cm(e):16;case 5:return 2*t.stringValue.length;case 6:return ha(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Cm(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ka(r.fields,(i,o)=>{s+=i.length+Cm(o)}),s}(t.mapValue);default:throw Ce(13486,{value:t})}}function jk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gE(t){return!!t&&"integerValue"in t}function nx(t){return!!t&&"arrayValue"in t}function Fk(t){return!!t&&"nullValue"in t}function Vk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Im(t){return!!t&&"mapValue"in t}function PK(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[U2])==null?void 0:r.stringValue)===B2}function ah(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ka(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ah(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ah(t.arrayValue.values[n]);return e}return{...t}}function DK(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Im(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ah(n)}setAll(e){let n=Rn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ah(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Im(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Im(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ka(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wr(ah(this.value))}}function z2(t){const e=[];return ka(t.fields,(n,r)=>{const s=new Rn([n]);if(Im(r)){const i=z2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qn(e,0,Ne.min(),Ne.min(),Ne.min(),wr.empty(),0)}static newFoundDocument(e,n,r,s){return new qn(e,1,n,Ne.min(),r,s,0)}static newNoDocument(e,n){return new qn(e,2,n,Ne.min(),Ne.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new qn(e,3,n,Ne.min(),Ne.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.position=e,this.inclusive=n}}function Uk(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=xe.comparator(xe.fromName(o.referenceValue),n.key):r=yu(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function $k(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n="asc"){this.field=e,this.dir=n}}function OK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{}class sn extends W2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LK(e,n,r):n==="array-contains"?new VK(e,r):n==="in"?new UK(e,r):n==="not-in"?new $K(e,r):n==="array-contains-any"?new BK(e,r):new sn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jK(e,r):new FK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yu(n,this.value)):n!==null&&fa(this.value)===fa(n)&&this.matchesComparison(yu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ls extends W2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ls(e,n)}matches(e){return q2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function q2(t){return t.op==="and"}function H2(t){return MK(t)&&q2(t)}function MK(t){for(const e of t.filters)if(e instanceof Ls)return!1;return!0}function yE(t){if(t instanceof sn)return t.field.canonicalString()+t.op.toString()+vu(t.value);if(H2(t))return t.filters.map(e=>yE(e)).join(",");{const e=t.filters.map(n=>yE(n)).join(",");return`${t.op}(${e})`}}function G2(t,e){return t instanceof sn?function(r,s){return s instanceof sn&&r.op===s.op&&r.field.isEqual(s.field)&&mi(r.value,s.value)}(t,e):t instanceof Ls?function(r,s){return s instanceof Ls&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&G2(o,s.filters[a]),!0):!1}(t,e):void Ce(19439)}function K2(t){return t instanceof sn?function(n){return`${n.field.canonicalString()} ${n.op} ${vu(n.value)}`}(t):t instanceof Ls?function(n){return n.op.toString()+" {"+n.getFilters().map(K2).join(" ,")+"}"}(t):"Filter"}class LK extends sn{constructor(e,n,r){super(e,n,r),this.key=xe.fromName(r.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class jK extends sn{constructor(e,n){super(e,"in",n),this.keys=Q2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FK extends sn{constructor(e,n){super(e,"not-in",n),this.keys=Q2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Q2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>xe.fromName(r.referenceValue))}class VK extends sn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nx(n)&&tf(n.arrayValue,this.value)}}class UK extends sn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tf(this.value.arrayValue,n)}}class $K extends sn{constructor(e,n){super(e,"not-in",n)}matches(e){if(tf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tf(this.value.arrayValue,n)}}class BK extends sn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Bk(t,e=null,n=[],r=[],s=null,i=null,o=null){return new zK(t,e,n,r,s,i,o)}function rx(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),av(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vu(r)).join(",")),e.Te=n}return e.Te}function sx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!G2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$k(t.startAt,e.startAt)&&$k(t.endAt,e.endAt)}function vE(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WK(t,e,n,r,s,i,o,a){return new Xu(t,e,n,r,s,i,o,a)}function cv(t){return new Xu(t)}function zk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y2(t){return t.collectionGroup!==null}function lh(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new hn(Rn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new nf(i,r))}),n.has(Rn.keyField().canonicalString())||e.Ie.push(new nf(Rn.keyField(),r))}return e.Ie}function ai(t){const e=Me(t);return e.Ee||(e.Ee=qK(e,lh(t))),e.Ee}function qK(t,e){if(t.limitType==="F")return Bk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new nf(s.field,i)});const n=t.endAt?new kg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kg(t.startAt.position,t.startAt.inclusive):null;return Bk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _E(t,e){const n=t.filters.concat([e]);return new Xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rg(t,e,n){return new Xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uv(t,e){return sx(ai(t),ai(e))&&t.limitType===e.limitType}function X2(t){return`${rx(ai(t))}|lt:${t.limitType}`}function fc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>K2(s)).join(", ")}]`),av(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>vu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>vu(s)).join(",")),`Target(${r})`}(ai(t))}; limitType=${t.limitType})`}function dv(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):xe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of lh(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Uk(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,lh(r),s)||r.endAt&&!function(o,a,l){const c=Uk(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,lh(r),s))}(t,e)}function HK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Z2(t){return(e,n)=>{let r=!1;for(const s of lh(t)){const i=GK(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function GK(t,e,n){const r=t.field.isKeyField()?xe.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?yu(l,c):Ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return O2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=new an(xe.comparator);function ro(){return KK}const J2=new an(xe.comparator);function Bd(...t){let e=J2;for(const n of t)e=e.insert(n.key,n);return e}function eL(t){let e=J2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xa(){return ch()}function tL(){return ch()}function ch(){return new Kl(t=>t.toString(),(t,e)=>t.isEqual(e))}const QK=new an(xe.comparator),YK=new hn(xe.comparator);function Ye(...t){let e=YK;for(const n of t)e=e.add(n);return e}const XK=new hn(Ke);function ZK(){return XK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sg(e)?"-0":e}}function nL(t){return{integerValue:""+t}}function JK(t,e){return IK(e)?nL(e):ix(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this._=void 0}}function eQ(t,e,n){return t instanceof rf?function(s,i){const o={fields:{[j2]:{stringValue:L2},[V2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&tx(i)&&(i=lv(i)),i&&(o.fields[F2]=i),{mapValue:o}}(n,e):t instanceof _u?sL(t,e):t instanceof sf?iL(t,e):function(s,i){const o=rL(s,i),a=Wk(o)+Wk(s.Ae);return gE(o)&&gE(s.Ae)?nL(a):ix(s.serializer,a)}(t,e)}function tQ(t,e,n){return t instanceof _u?sL(t,e):t instanceof sf?iL(t,e):n}function rL(t,e){return t instanceof Ag?function(r){return gE(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class rf extends hv{}class _u extends hv{constructor(e){super(),this.elements=e}}function sL(t,e){const n=oL(e);for(const r of t.elements)n.some(s=>mi(s,r))||n.push(r);return{arrayValue:{values:n}}}class sf extends hv{constructor(e){super(),this.elements=e}}function iL(t,e){let n=oL(e);for(const r of t.elements)n=n.filter(s=>!mi(s,r));return{arrayValue:{values:n}}}class Ag extends hv{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Wk(t){return Ht(t.integerValue||t.doubleValue)}function oL(t){return nx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.field=e,this.transform=n}}function nQ(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof _u&&s instanceof _u||r instanceof sf&&s instanceof sf?gu(r.elements,s.elements,mi):r instanceof Ag&&s instanceof Ag?mi(r.Ae,s.Ae):r instanceof rf&&s instanceof rf}(t.transform,e.transform)}class rQ{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function km(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fv{}function lL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pv(t.key,sr.none()):new Uf(t.key,t.data,sr.none());{const n=t.data,r=wr.empty();let s=new hn(Rn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ra(t.key,r,new jr(s.toArray()),sr.none())}}function sQ(t,e,n){t instanceof Uf?function(s,i,o){const a=s.value.clone(),l=Hk(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ra?function(s,i,o){if(!km(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Hk(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(cL(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function uh(t,e,n,r){return t instanceof Uf?function(i,o,a,l){if(!km(i.precondition,o))return a;const c=i.value.clone(),u=Gk(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ra?function(i,o,a,l){if(!km(i.precondition,o))return a;const c=Gk(i.fieldTransforms,l,o),u=o.data;return u.setAll(cL(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return km(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function iQ(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=rL(r.transform,s||null);i!=null&&(n===null&&(n=wr.empty()),n.set(r.field,i))}return n||null}function qk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gu(r,s,(i,o)=>nQ(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uf extends fv{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ra extends fv{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Hk(t,e,n){const r=new Map;at(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,tQ(o,a,n[s]))}return r}function Gk(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,eQ(i,o,e))}return r}class pv extends fv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oQ extends fv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sQ(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=uh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=uh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tL();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=lL(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ye())}isEqual(e){return this.batchId===e.batchId&&gu(this.mutations,e.mutations,(n,r)=>qk(n,r))&&gu(this.baseMutations,e.baseMutations,(n,r)=>qk(n,r))}}class ox{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return QK}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ox(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lQ=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,Xe;function uQ(t){switch(t){case K.OK:return Ce(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function uL(t){if(t===void 0)return no("GRPC error has no .code"),K.UNKNOWN;switch(t){case tn.OK:return K.OK;case tn.CANCELLED:return K.CANCELLED;case tn.UNKNOWN:return K.UNKNOWN;case tn.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case tn.INTERNAL:return K.INTERNAL;case tn.UNAVAILABLE:return K.UNAVAILABLE;case tn.UNAUTHENTICATED:return K.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case tn.NOT_FOUND:return K.NOT_FOUND;case tn.ALREADY_EXISTS:return K.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return K.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case tn.ABORTED:return K.ABORTED;case tn.OUT_OF_RANGE:return K.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return K.UNIMPLEMENTED;case tn.DATA_LOSS:return K.DATA_LOSS;default:return Ce(39323,{code:t})}}(Xe=tn||(tn={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ=new ta([4294967295,4294967295],0);function Kk(t){const e=dQ().encode(t),n=new T2;return n.update(e),new Uint8Array(n.digest())}function Qk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ta([n,r],0),new ta([s,i],0)]}class ax{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zd(`Invalid padding: ${n}`);if(r<0)throw new zd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ta.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ta.fromNumber(r)));return s.compare(hQ)===1&&(s=new ta([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Kk(e),[r,s]=Qk(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ax(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Kk(e),[r,s]=Qk(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$f.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mv(Ne.min(),s,new an(Ke),ro(),Ye())}}class $f{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $f(r,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class dL{constructor(e,n){this.targetId=e,this.Ce=n}}class hL{constructor(e,n,r=Pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Yk{constructor(){this.ve=0,this.Fe=Xk(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),r=Ye();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ce(38017,{changeType:i})}}),new $f(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Xk()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fQ{constructor(e){this.Ge=e,this.ze=new Map,this.je=ro(),this.Je=Zp(),this.He=Zp(),this.Ye=new an(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(vE(i))if(r===0){const o=new xe(i.path);this.et(n,o,qn.newNoDocument(o,Ne.min()))}else at(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ha(r).toUint8Array()}catch(l){if(l instanceof M2)return mu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ax(o,s,i)}catch(l){return mu(l instanceof zd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&vE(a.target)){const l=new xe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,qn.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ye();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new mv(e,n,this.Ye,this.je,r);return this.je=ro(),this.Je=Zp(),this.He=Zp(),this.Ye=new an(Ke),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yk,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new hn(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new hn(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yk),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zp(){return new an(xe.comparator)}function Xk(){return new an(xe.comparator)}const pQ={asc:"ASCENDING",desc:"DESCENDING"},mQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gQ={and:"AND",or:"OR"};class yQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wE(t,e){return t.useProto3Json||av(e)?e:{value:e}}function Ng(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vQ(t,e){return Ng(t,e.toTimestamp())}function li(t){return at(!!t,49232),Ne.fromTimestamp(function(n){const r=da(n);return new St(r.seconds,r.nanos)}(t))}function lx(t,e){return EE(t,e).canonicalString()}function EE(t,e){const n=function(s){return new vt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pL(t){const e=vt.fromString(t);return at(_L(e),10190,{key:e.toString()}),e}function bE(t,e){return lx(t.databaseId,e.path)}function dw(t,e){const n=pL(e);if(n.get(1)!==t.databaseId.projectId)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(gL(n))}function mL(t,e){return lx(t.databaseId,e)}function _Q(t){const e=pL(t);return e.length===4?vt.emptyPath():gL(e)}function TE(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gL(t){return at(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zk(t,e,n){return{name:bE(t,e),fields:n.value.mapValue.fields}}function wQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ce(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(at(u===void 0||typeof u=="string",58123),Pn.fromBase64String(u||"")):(at(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Pn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?K.UNKNOWN:uL(c.code);return new he(u,c.message||"")}(o);n=new hL(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=dw(t,r.document.name),i=li(r.document.updateTime),o=r.document.createTime?li(r.document.createTime):Ne.min(),a=new wr({mapValue:{fields:r.document.fields}}),l=qn.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Rm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=dw(t,r.document),i=r.readTime?li(r.readTime):Ne.min(),o=qn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Rm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=dw(t,r.document),i=r.removedTargetIds||[];n=new Rm([],i,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new cQ(s,i),a=r.targetId;n=new dL(a,o)}}return n}function EQ(t,e){let n;if(e instanceof Uf)n={update:Zk(t,e.key,e.value)};else if(e instanceof pv)n={delete:bE(t,e.key)};else if(e instanceof Ra)n={update:Zk(t,e.key,e.data),updateMask:AQ(e.fieldMask)};else{if(!(e instanceof oQ))return Ce(16599,{Vt:e.type});n={verify:bE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof rf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ag)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ce(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:vQ(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ce(27497)}(t,e.precondition)),n}function bQ(t,e){return t&&t.length>0?(at(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?li(s.updateTime):li(i);return o.isEqual(Ne.min())&&(o=li(i)),new rQ(o,s.transformResults||[])}(n,e))):[]}function TQ(t,e){return{documents:[mL(t,e.path)]}}function xQ(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mL(t,s);const i=function(c){if(c.length!==0)return vL(Ls.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:pc(p.field),direction:IQ(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function SQ(t){let e=_Q(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){at(r===1,65062);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const p=yL(h);return p instanceof Ls&&H2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(_){return new nf(mc(_.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,av(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new kg(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new kg(m,p)}(n.endAt)),WK(e,s,o,i,a,"F",l,c)}function CQ(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mc(n.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=mc(n.unaryFilter.field);return sn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=mc(n.unaryFilter.field);return sn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mc(n.unaryFilter.field);return sn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return sn.create(mc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ls.create(n.compositeFilter.filters.map(r=>yL(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(t):Ce(30097,{filter:t})}function IQ(t){return pQ[t]}function kQ(t){return mQ[t]}function RQ(t){return gQ[t]}function pc(t){return{fieldPath:t.canonicalString()}}function mc(t){return Rn.fromServerFormat(t.fieldPath)}function vL(t){return t instanceof sn?function(n){if(n.op==="=="){if(Vk(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NAN"}};if(Fk(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vk(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NOT_NAN"}};if(Fk(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(n.field),op:kQ(n.op),value:n.value}}}(t):t instanceof Ls?function(n){const r=n.getFilters().map(s=>vL(s));return r.length===1?r[0]:{compositeFilter:{op:RQ(n.op),filters:r}}}(t):Ce(54877,{filter:t})}function AQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _L(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r,s,i=Ne.min(),o=Ne.min(),a=Pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new $o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e){this.yt=e}}function PQ(t){const e=SQ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(){this.Cn=new OQ}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(ua.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(ua.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class OQ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new hn(vt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new hn(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wL=41943040;class vr{static withCacheSize(e){return new vr(e,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr.DEFAULT_COLLECTION_PERCENTILE=10,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vr.DEFAULT=new vr(wL,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vr.DISABLED=new vr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wu(0)}static cr(){return new wu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="LruGarbageCollector",MQ=1048576;function tR([t,e],[n,r]){const s=Ke(t,n);return s===0?Ke(e,r):s}class LQ{constructor(e){this.Ir=e,this.buffer=new hn(tR),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jQ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(eR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yu(n)?me(eR,"Ignoring IndexedDB error during garbage collection: ",n):await Qu(n)}await this.Vr(3e5)})}}class FQ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return X.resolve(ov.ce);const r=new LQ(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Jk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jk):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),hc()<=We.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function VQ(t,e){return new FQ(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(){this.changes=new Kl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&uh(r.mutation,s,jr.empty(),St.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ye()){const s=Xa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Bd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ro();const o=ch(),a=function(){return ch()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Ra)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),uh(u.mutation,c,u.mutation.getFieldMask(),St.now())):o.set(c.key,jr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>a.set(c,new $Q(u,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ch();let s=new an((o,a)=>o-a),i=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||jr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||Ye()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=tL();u.forEach(p=>{if(!i.has(p)){const m=lL(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return X.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return xe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):X.resolve(Xa());let a=Zh,l=i;return o.next(c=>X.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?X.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ye())).next(u=>({batchId:a,changes:eL(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(r=>{let s=Bd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Bd();return this.indexManager.getCollectionParents(e,i).next(a=>X.forEach(a,l=>{const c=function(h,p){return new Xu(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,qn.newInvalidDocument(u)))});let a=Bd();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&uh(u.mutation,c,jr.empty(),St.now()),dv(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:li(s.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:PQ(s.bundledQuery),readTime:li(s.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(){this.overlays=new an(xe.comparator),this.qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xa();return X.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const s=Xa(),i=n.length+1,o=new xe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return X.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new an((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Xa(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Xa(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return X.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lQ(n,r));let i=this.qr.get(n);i===void 0&&(i=Ye(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.Qr=new hn(mn.$r),this.Ur=new hn(mn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new mn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new mn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new xe(new vt([])),r=new mn(n,e),s=new mn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new xe(new vt([])),r=new mn(n,e),s=new mn(n,e+1);let i=Ye();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return xe.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new hn(mn.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aQ(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new mn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?ex:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mn(n,0),s=new mn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hn(Ke);return n.forEach(s=>{const i=new mn(s,0),o=new mn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;xe.isDocumentKey(i)||(i=i.child(""));const o=new mn(new xe(i),0);let a=new hn(Ke);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),X.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){at(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(n.mutations,s=>{const i=new mn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new mn(n,0),s=this.Zr.firstAfterOrEqual(r);return X.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e){this.ri=e,this.docs=function(){return new an(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(n))}getEntries(e,n){let r=ro();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qn.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ro();const o=n.path,a=new xe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||TK(bK(u),r)<=0||(s.has(u.key)||dv(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ce(9500)}ii(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KQ(this)}getSize(e){return X.resolve(this.size)}}class KQ extends UQ{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(e){this.persistence=e,this.si=new Kl(n=>rx(n),sx),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new cx,this.targetCount=0,this.ai=wu.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),X.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new wu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Pr(n),X.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),X.waitFor(i).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n){this.ui={},this.overlays={},this.ci=new ov(0),this.li=!1,this.li=!0,this.hi=new qQ,this.referenceDelegate=e(this),this.Pi=new QQ(this),this.indexManager=new DQ,this.remoteDocumentCache=function(s){return new GQ(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new NQ(n),this.Ii=new zQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new HQ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const s=new YQ(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return X.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class YQ extends SK{constructor(e){super(),this.currentSequenceNumber=e}}class ux{constructor(e){this.persistence=e,this.Ri=new cx,this.Vi=null}static mi(e){return new ux(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,r=>{const s=xe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pg{constructor(e,n){this.persistence=e,this.pi=new Kl(r=>kK(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=VQ(this,n)}static mi(e,n){return new Pg(e,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return X.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?X.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cm(e.data.value)),n}br(e,n,r){return X.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ye(),s=Ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return $7()?8:CK(Qn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new XQ;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(hc()<=We.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",fc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(hc()<=We.DEBUG&&me("QueryEngine","Query:",fc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(hc()<=We.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",fc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):X.resolve())}ys(e,n){if(zk(n))return X.resolve(null);let r=ai(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Rg(n,null,"F"),r=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ye(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Rg(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return zk(n)||s.isEqual(Ne.min())?X.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?X.resolve(null):(hc()<=We.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fc(n)),this.vs(e,o,n,EK(s,Zh)).next(a=>a))})}Ds(e,n){let r=new hn(Z2(e));return n.forEach((s,i)=>{dv(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return hc()<=We.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",fc(n)),this.ps.getDocumentsMatchingQuery(e,n,ua.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="LocalStore",JQ=3e8;class eY{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new an(Ke),this.xs=new Kl(i=>rx(i),sx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BQ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function tY(t,e,n,r){return new eY(t,e,n,r)}async function bL(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ye();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function nY(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,p=h.keys();let m=X.resolve();return p.forEach(_=>{m=m.next(()=>u.getEntry(l,_)).next(y=>{const w=c.docVersions.get(_);at(w!==null,48541),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function TL(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function rY(t,e){const n=Me(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((u,h)=>{const p=s.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,u.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Pn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(y,w,b){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=JQ?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,m,u)&&a.push(n.Pi.updateTargetData(i,m))});let l=ro(),c=Ye();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(sY(i,o,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!r.isEqual(Ne.min())){const u=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return X.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function sY(t,e,n){let r=Ye(),s=Ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ro();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me(hx,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function iY(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ex),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oY(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,X.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new $o(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function xE(t,e,n){const r=Me(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yu(o))throw o;me(hx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function nR(t,e,n){const r=Me(t);let s=Ne.min(),i=Ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Me(l),p=h.xs.get(u);return p!==void 0?X.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,u)}(r,o,ai(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ne.min(),n?i:Ye())).next(a=>(aY(r,HK(e),a),{documents:a,Qs:i})))}function aY(t,e,n){let r=t.Os.get(e)||Ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class rR{constructor(){this.activeTargetIds=ZK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lY{constructor(){this.Mo=new rR,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="ConnectivityMonitor";class iR{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(sR,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(sR,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp=null;function SE(){return Jp===null?Jp=function(){return 268435456+Math.round(2147483648*Math.random())}():Jp++,"0x"+Jp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="RestConnection",uY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dY{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Cg?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=SE(),a=this.zo(e,n.toUriEncodedString());me(hw,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),u=wi(c);return this.Jo(e,a,l,r,u).then(h=>(me(hw,`Received RPC '${e}' ${o}: `,h),h),h=>{throw mu(hw,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ku}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=uY[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class fY extends dY{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=SE();return new Promise((a,l)=>{const c=new x2;c.setWithCredentials(!0),c.listenOnce(S2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Sm.NO_ERROR:const h=c.getResponseJson();me($n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Sm.TIMEOUT:me($n,`RPC '${e}' ${o} timed out`),l(new he(K.DEADLINE_EXCEEDED,"Request time out"));break;case Sm.HTTP_ERROR:const p=c.getStatus();if(me($n,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const y=function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(E)>=0?E:K.UNKNOWN}(_.status);l(new he(y,_.message))}else l(new he(K.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new he(K.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{me($n,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(s);me($n,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",u,r,15)})}T_(e,n,r){const s=SE(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=k2(),a=I2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");me($n,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let p=!1,m=!1;const _=new hY({Yo:w=>{m?me($n,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(me($n,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),me($n,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},Zo:()=>h.close()}),y=(w,b,E)=>{w.listen(b,x=>{try{E(x)}catch(R){setTimeout(()=>{throw R},0)}})};return y(h,$d.EventType.OPEN,()=>{m||(me($n,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),y(h,$d.EventType.CLOSE,()=>{m||(m=!0,me($n,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(h))}),y(h,$d.EventType.ERROR,w=>{m||(m=!0,mu($n,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),_.a_(new he(K.UNAVAILABLE,"The operation could not be completed")))}),y(h,$d.EventType.MESSAGE,w=>{var b;if(!m){const E=w.data[0];at(!!E,16349);const x=E,R=(x==null?void 0:x.error)||((b=x[0])==null?void 0:b.error);if(R){me($n,`RPC '${e}' stream ${s} received error:`,R);const O=R.status;let L=function(I){const C=tn[I];if(C!==void 0)return uL(C)}(O),k=R.message;L===void 0&&(L=K.INTERNAL,k="Unknown error status: "+O+" with message "+R.message),m=!0,_.a_(new he(L,k)),h.close()}else me($n,`RPC '${e}' stream ${s} received:`,E),_.u_(E)}}),y(a,C2.STAT_EVENT,w=>{w.stat===hE.PROXY?me($n,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===hE.NOPROXY&&me($n,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function fw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){return new yQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="PersistentStream";class SL{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xL(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(no(n.toString()),no("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new he(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(oR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(me(oR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pY extends SL{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wQ(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?li(o.readTime):Ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=TE(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=vE(l)?{documents:TQ(i,l)}:{query:xQ(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fL(i,o.resumeToken);const c=wE(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=Ng(i,o.snapshotVersion.toTimestamp());const c=wE(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=CQ(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=TE(this.serializer),n.removeTarget=e,this.q_(n)}}class mY extends SL{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bQ(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=TE(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>EQ(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY{}class yY extends gY{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,EE(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new he(K.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,EE(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class vY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(no(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="RemoteStore";class _Y{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ql(this)&&(me(Sl,"Restarting streams for network reachability change."),await async function(l){const c=Me(l);c.Ea.add(4),await Bf(c),c.Ra.set("Unknown"),c.Ea.delete(4),await yv(c)}(this))})}),this.Ra=new vY(r,s)}}async function yv(t){if(Ql(t))for(const e of t.da)await e(!0)}async function Bf(t){for(const e of t.da)await e(!1)}function CL(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gx(n)?mx(n):Zu(n).O_()&&px(n,e))}function fx(t,e){const n=Me(t),r=Zu(n);n.Ia.delete(e),r.O_()&&IL(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ql(n)&&n.Ra.set("Unknown"))}function px(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zu(t).Y_(e)}function IL(t,e){t.Va.Ue(e),Zu(t).Z_(e)}function mx(t){t.Va=new fQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zu(t).start(),t.Ra.ua()}function gx(t){return Ql(t)&&!Zu(t).x_()&&t.Ia.size>0}function Ql(t){return Me(t).Ea.size===0}function kL(t){t.Va=void 0}async function wY(t){t.Ra.set("Online")}async function EY(t){t.Ia.forEach((e,n)=>{px(t,e)})}async function bY(t,e){kL(t),gx(t)?(t.Ra.ha(e),mx(t)):t.Ra.set("Unknown")}async function TY(t,e,n){if(t.Ra.set("Online"),e instanceof hL&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){me(Sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dg(t,r)}else if(e instanceof Rm?t.Va.Ze(e):e instanceof dL?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ne.min()))try{const r=await TL(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Ia.get(c);u&&i.Ia.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.Ia.get(l);if(!u)return;i.Ia.set(l,u.withResumeToken(Pn.EMPTY_BYTE_STRING,u.snapshotVersion)),IL(i,l);const h=new $o(u.target,l,c,u.sequenceNumber);px(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){me(Sl,"Failed to raise snapshot:",r),await Dg(t,r)}}async function Dg(t,e,n){if(!Yu(e))throw e;t.Ea.add(1),await Bf(t),t.Ra.set("Offline"),n||(n=()=>TL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me(Sl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await yv(t)})}function RL(t,e){return e().catch(n=>Dg(t,n,e))}async function vv(t){const e=Me(t),n=pa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ex;for(;xY(e);)try{const s=await iY(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,SY(e,s)}catch(s){await Dg(e,s)}AL(e)&&NL(e)}function xY(t){return Ql(t)&&t.Ta.length<10}function SY(t,e){t.Ta.push(e);const n=pa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function AL(t){return Ql(t)&&!pa(t).x_()&&t.Ta.length>0}function NL(t){pa(t).start()}async function CY(t){pa(t).ra()}async function IY(t){const e=pa(t);for(const n of t.Ta)e.ea(n.mutations)}async function kY(t,e,n){const r=t.Ta.shift(),s=ox.from(r,e,n);await RL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vv(t)}async function RY(t,e){e&&pa(t).X_&&await async function(r,s){if(function(o){return uQ(o)&&o!==K.ABORTED}(s.code)){const i=r.Ta.shift();pa(r).B_(),await RL(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await vv(r)}}(t,e),AL(t)&&NL(t)}async function aR(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),me(Sl,"RemoteStore received new credentials");const r=Ql(n);n.Ea.add(3),await Bf(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yv(n)}async function AY(t,e){const n=Me(t);e?(n.Ea.delete(2),await yv(n)):e||(n.Ea.add(2),await Bf(n),n.Ra.set("Unknown"))}function Zu(t){return t.ma||(t.ma=function(n,r,s){const i=Me(n);return i.sa(),new pY(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:wY.bind(null,t),t_:EY.bind(null,t),r_:bY.bind(null,t),H_:TY.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),gx(t)?mx(t):t.Ra.set("Unknown")):(await t.ma.stop(),kL(t))})),t.ma}function pa(t){return t.fa||(t.fa=function(n,r,s){const i=Me(n);return i.sa(),new mY(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:CY.bind(null,t),r_:RY.bind(null,t),ta:IY.bind(null,t),na:kY.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await vv(t)):(await t.fa.stop(),t.Ta.length>0&&(me(Sl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new yx(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vx(t,e){if(no("AsyncQueue",`${e}: ${t}`),Yu(t))return new he(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{static emptySet(e){return new $c(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||xe.comparator(n.key,r.key):(n,r)=>xe.comparator(n.key,r.key),this.keyedMap=Bd(),this.sortedSet=new an(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $c)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $c;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.ga=new an(xe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eu{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Eu(e,n,$c.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class PY{constructor(){this.queries=cR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Me(n),i=s.queries;s.queries=cR(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new he(K.ABORTED,"Firestore shutting down"))}}function cR(){return new Kl(t=>X2(t),uv)}async function _x(t,e){const n=Me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new NY,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=vx(o,`Initialization of query '${fc(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ex(n)}async function wx(t,e){const n=Me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function DY(t,e){const n=Me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Ex(n)}function OY(t,e,n){const r=Me(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Ex(t){t.Ca.forEach(e=>{e.next()})}var CE,uR;(uR=CE||(CE={})).Ma="default",uR.Cache="cache";class bx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Eu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==CE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.key=e}}class DL{constructor(e){this.key=e}}class MY{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=Z2(e),this.tu=new $c(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new lR,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const p=s.get(u),m=dv(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;p&&m?p.data.isEqual(m.data)?_!==y&&(r.track({type:3,doc:m}),w=!0):this.su(p,m)||(r.track({type:2,doc:m}),w=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),w=!0):p&&!m&&(r.track({type:1,doc:p}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),i=y?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,h)=>function(m,_){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:w})}};return y(m)-y(_)}(u.type,h.type)||this.eu(u.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Eu(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lR,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new DL(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new PL(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Eu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tx="SyncEngine";class LY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jY{constructor(e){this.key=e,this.hu=!1}}class FY{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Kl(a=>X2(a),uv),this.Iu=new Map,this.Eu=new Set,this.du=new an(xe.comparator),this.Au=new Map,this.Ru=new cx,this.Vu={},this.mu=new Map,this.fu=wu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VY(t,e,n=!0){const r=VL(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await OL(r,e,n,!0),s}async function UY(t,e){const n=VL(t);await OL(n,e,!0,!1)}async function OL(t,e,n,r){const s=await oY(t.localStore,ai(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await $Y(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&CL(t.remoteStore,s),a}async function $Y(t,e,n,r,s){t.pu=(h,p,m)=>async function(y,w,b,E){let x=w.view.ru(b);x.Cs&&(x=await nR(y.localStore,w.query,!1).then(({documents:k})=>w.view.ru(k,x)));const R=E&&E.targetChanges.get(w.targetId),O=E&&E.targetMismatches.get(w.targetId)!=null,L=w.view.applyChanges(x,y.isPrimaryClient,R,O);return hR(y,w.targetId,L.au),L.snapshot}(t,h,p,m);const i=await nR(t.localStore,e,!0),o=new MY(e,i.Qs),a=o.ru(i.documents),l=$f.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);hR(t,n,c.au);const u=new LY(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function BY(t,e,n){const r=Me(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!uv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xE(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&fx(r.remoteStore,s.targetId),IE(r,s.targetId)}).catch(Qu)):(IE(r,s.targetId),await xE(r.localStore,s.targetId,!0))}async function zY(t,e){const n=Me(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fx(n.remoteStore,r.targetId))}async function WY(t,e,n){const r=XY(t);try{const s=await function(o,a){const l=Me(o),c=St.now(),u=a.reduce((m,_)=>m.add(_.key),Ye());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=ro(),y=Ye();return l.Ns.getEntries(m,u).next(w=>{_=w,_.forEach((b,E)=>{E.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(w=>{h=w;const b=[];for(const E of a){const x=iQ(E,h.get(E.key).overlayedDocument);x!=null&&b.push(new Ra(E.key,x,z2(x.value.mapValue),sr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,b,a)}).next(w=>{p=w;const b=w.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(m,w.batchId,b)})}).then(()=>({batchId:p.batchId,changes:eL(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new an(Ke)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await zf(r,s.changes),await vv(r.remoteStore)}catch(s){const i=vx(s,"Failed to persist write");n.reject(i)}}async function ML(t,e){const n=Me(t);try{const r=await rY(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?at(o.hu,14607):s.removedDocuments.size>0&&(at(o.hu,42227),o.hu=!1))}),await zf(n,r,e)}catch(r){await Qu(r)}}function dR(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Me(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&Ex(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qY(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new an(xe.comparator);o=o.insert(i,qn.newNoDocument(i,Ne.min()));const a=Ye().add(i),l=new mv(Ne.min(),new Map,new an(Ke),o,a);await ML(r,l),r.du=r.du.remove(i),r.Au.delete(e),xx(r)}else await xE(r.localStore,e,!1).then(()=>IE(r,e,n)).catch(Qu)}async function HY(t,e){const n=Me(t),r=e.batch.batchId;try{const s=await nY(n.localStore,e);jL(n,r,null),LL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zf(n,s)}catch(s){await Qu(s)}}async function GY(t,e,n){const r=Me(t);try{const s=await function(o,a){const l=Me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(at(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);jL(r,e,n),LL(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zf(r,s)}catch(s){await Qu(s)}}function LL(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jL(t,e,n){const r=Me(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function IE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||FL(t,r)})}function FL(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xx(t))}function hR(t,e,n){for(const r of n)r instanceof PL?(t.Ru.addReference(r.key,e),KY(t,r)):r instanceof DL?(me(Tx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||FL(t,r.key)):Ce(19791,{wu:r})}function KY(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(me(Tx,"New document in limbo: "+n),t.Eu.add(r),xx(t))}function xx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new xe(vt.fromString(e)),r=t.fu.next();t.Au.set(r,new jY(n)),t.du=t.du.insert(n,r),CL(t.remoteStore,new $o(ai(cv(n.path)),r,"TargetPurposeLimboResolution",ov.ce))}}async function zf(t,e,n){const r=Me(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=dx.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const u=Me(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>X.forEach(c,p=>X.forEach(p.Es,m=>u.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>X.forEach(p.ds,m=>u.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!Yu(h))throw h;me(hx,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=u.Ms.get(p),_=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(_);u.Ms=u.Ms.insert(p,y)}}}(r.localStore,i))}async function QY(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){me(Tx,"User change. New user:",e.toKey());const r=await bL(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new he(K.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zf(n,r.Ls)}}function YY(t,e){const n=Me(t),r=n.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let s=Ye();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function VL(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ML.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qY.bind(null,e),e.Pu.H_=DY.bind(null,e.eventManager),e.Pu.yu=OY.bind(null,e.eventManager),e}function XY(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GY.bind(null,e),e}class Og{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tY(this.persistence,new ZQ,e.initialUser,this.serializer)}Cu(e){return new EL(ux.mi,this.serializer)}Du(e){return new lY}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Og.provider={build:()=>new Og};class ZY extends Og{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){at(this.persistence.referenceDelegate instanceof Pg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jQ(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new EL(r=>Pg.mi(r,n),this.serializer)}}class kE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QY.bind(null,this.syncEngine),await AY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PY}()}createDatastore(e){const n=gv(e.databaseInfo.databaseId),r=function(i){return new fY(i)}(e.databaseInfo);return function(i,o,a,l){return new yY(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new _Y(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dR(this.syncEngine,n,0),function(){return iR.v()?new iR:new cY}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new FY(s,i,o,a,l,c);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Me(s);me(Sl,"RemoteStore shutting down."),i.Ea.add(5),await Bf(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}kE.provider={build:()=>new kE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):no("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="FirestoreClient";class JY{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=zn.UNAUTHENTICATED,this.clientId=JT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{me(ma,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(me(ma,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pw(t,e){t.asyncQueue.verifyOperationInProgress(),me(ma,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bL(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eX(t);me(ma,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>aR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>aR(e.remoteStore,s)),t._onlineComponents=e}async function eX(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(ma,"Using user provided OfflineComponentProvider");try{await pw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;mu("Error using user provided cache. Falling back to memory cache: "+n),await pw(t,new Og)}}else me(ma,"Using default OfflineComponentProvider"),await pw(t,new ZY(void 0));return t._offlineComponents}async function UL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(ma,"Using user provided OnlineComponentProvider"),await fR(t,t._uninitializedComponentsProvider._online)):(me(ma,"Using default OnlineComponentProvider"),await fR(t,new kE))),t._onlineComponents}function tX(t){return UL(t).then(e=>e.syncEngine)}async function Mg(t){const e=await UL(t),n=e.eventManager;return n.onListen=VY.bind(null,e.syncEngine),n.onUnlisten=BY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zY.bind(null,e.syncEngine),n}function nX(t,e,n={}){const r=new Gi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Sx({next:p=>{u.Nu(),o.enqueueAndForget(()=>wx(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new he(K.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new he(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new bx(cv(a.path),u,{includeMetadataChanges:!0,qa:!0});return _x(i,h)}(await Mg(t),t.asyncQueue,e,n,r)),r.promise}function rX(t,e,n={}){const r=new Gi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Sx({next:p=>{u.Nu(),o.enqueueAndForget(()=>wx(i,h)),p.fromCache&&l.source==="server"?c.reject(new he(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new bx(a,u,{includeMetadataChanges:!0,qa:!0});return _x(i,h)}(await Mg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="firestore.googleapis.com",mR=!0;class gR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BL,this.ssl=mR}else this.host=e.host,this.ssl=e.ssl??mR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MQ)throw new he(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$L(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _v{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uK;switch(r.type){case"firstParty":return new pK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pR.get(n);r&&(me("ComponentProvider","Removing Datastore"),pR.delete(n),r.terminate())}(this),Promise.resolve()}}function sX(t,e,n,r={}){var c;t=rr(t,_v);const s=wi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(ev(`https://${a}`),tv("Firestore",!0)),i.host!==BL&&i.host!==a&&mu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!pi(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=zn.MOCK_USER;else{u=GT(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new he(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new zn(p)}t._authCredentials=new dK(new A2(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class $t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vf(n,$t._jsonSchema))return new $t(e,r||null,new xe(vt.fromString(n.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:on("string",$t._jsonSchemaVersion),referencePath:on("string")};class ra extends uo{constructor(e,n,r){super(e,n,cv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new xe(e))}withConverter(e){return new ra(this.firestore,e,this._path)}}function br(t,e,...n){if(t=Ve(t),N2("collection","path",e),t instanceof _v){const r=vt.fromString(e,...n);return Rk(r),new ra(t,null,r)}{if(!(t instanceof $t||t instanceof ra))throw new he(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vt.fromString(e,...n));return Rk(r),new ra(t.firestore,null,r)}}function it(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=JT.newId()),N2("doc","path",e),t instanceof _v){const r=vt.fromString(e,...n);return kk(r),new $t(t,null,new xe(r))}{if(!(t instanceof $t||t instanceof ra))throw new he(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vt.fromString(e,...n));return kk(r),new $t(t.firestore,t instanceof ra?t.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="AsyncQueue";class vR{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xL(this,"async_queue_retry"),this._c=()=>{const r=fw();r&&me(yR,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Gi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Yu(e))throw e;me(yR,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,no("INTERNAL UNHANDLED ERROR: ",_R(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=yx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:_R(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _R(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class gi extends _v{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vR(e),this._firestoreClient=void 0,await e}}}function iX(t,e){const n=typeof t=="object"?t:Gl(),r=typeof t=="string"?t:Cg,s=bi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=HT("firestore");i&&sX(s,...i)}return s}function Wf(t){if(t._terminated)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oX(t),t._firestoreClient}function oX(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,u){return new NK(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,$L(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new JY(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(Pn.fromBase64String(e))}catch(n){throw new he(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vf(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:on("string",ts._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(Vf(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:on("string",ci._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vf(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ui(e.vectorValues);throw new he(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:on("string",ui._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX=/^__.*__$/;class lX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uf(e,this.data,n,this.fieldTransforms)}}class zL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:t})}}class wv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WL(this.Ac)&&aX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gv(e)}Cc(e,n,r,s=!1){return new wv({Ac:e,methodName:n,Dc:r,path:Rn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gf(t){const e=t._freezeSettings(),n=gv(t._databaseId);return new cX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cx(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Rx("Data must be an object, but it was:",o,r);const a=GL(r,o);let l,c;if(i.merge)l=new jr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const p=RE(e,h,n);if(!o.contains(p))throw new he(K.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);QL(u,p)||u.push(p)}l=new jr(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new lX(new wr(a),l,c)}class Kf extends Hf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kf}}function uX(t,e,n){return new wv({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ix extends Hf{_toFieldTransform(e){return new aL(e.path,new rf)}isEqual(e){return e instanceof Ix}}class kx extends Hf{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=uX(this,e,!0),r=this.vc.map(i=>Ju(i,n)),s=new _u(r);return new aL(e.path,s)}isEqual(e){return e instanceof kx&&pi(this.vc,e.vc)}}function qL(t,e,n,r){const s=t.Cc(1,e,n);Rx("Data must be an object, but it was:",s,r);const i=[],o=wr.empty();ka(r,(l,c)=>{const u=Ax(e,l,n);c=Ve(c);const h=s.yc(u);if(c instanceof Kf)i.push(u);else{const p=Ju(c,h);p!=null&&(i.push(u),o.set(u,p))}});const a=new jr(i);return new zL(o,a,s.fieldTransforms)}function HL(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[RE(e,r,n)],l=[s];if(i.length%2!=0)throw new he(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(RE(e,i[p])),l.push(i[p+1]);const c=[],u=wr.empty();for(let p=a.length-1;p>=0;--p)if(!QL(c,a[p])){const m=a[p];let _=l[p];_=Ve(_);const y=o.yc(m);if(_ instanceof Kf)c.push(m);else{const w=Ju(_,y);w!=null&&(c.push(m),u.set(m,w))}}const h=new jr(c);return new zL(u,h,o.fieldTransforms)}function dX(t,e,n,r=!1){return Ju(n,t.Cc(r?4:3,e))}function Ju(t,e){if(KL(t=Ve(t)))return Rx("Unsupported field value:",e,t),GL(t,e);if(t instanceof Hf)return function(r,s){if(!WL(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ju(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JK(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=St.fromDate(r);return{timestampValue:Ng(s.serializer,i)}}if(r instanceof St){const i=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ng(s.serializer,i)}}if(r instanceof ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:fL(s.serializer,r._byteString)};if(r instanceof $t){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ui)return function(o,a){return{mapValue:{fields:{[U2]:{stringValue:B2},[Ig]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return ix(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${iv(r)}`)}(t,e)}function GL(t,e){const n={};return O2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(t,(r,s)=>{const i=Ju(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function KL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof St||t instanceof ci||t instanceof ts||t instanceof $t||t instanceof Hf||t instanceof ui)}function Rx(t,e,n){if(!KL(n)||!P2(n)){const r=iv(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function RE(t,e,n){if((e=Ve(e))instanceof qf)return e._internalPath;if(typeof e=="string")return Ax(t,e);throw Lg("Field path arguments must be of type string or ",t,!1,void 0,n)}const hX=new RegExp("[~\\*/\\[\\]]");function Ax(t,e,n){if(e.search(hX)>=0)throw Lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qf(...e.split("."))._internalPath}catch{throw Lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lg(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new he(K.INVALID_ARGUMENT,a+t+l)}function QL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ev("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fX extends YL{data(){return super.data()}}function Ev(t,e){return typeof e=="string"?Ax(t,e):e instanceof qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nx{}let Px=class extends Nx{};function Cl(t,e,...n){let r=[];e instanceof Nx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Dx).length,a=i.filter(l=>l instanceof bv).length;if(o>1||o>0&&a>0)throw new he(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class bv extends Px{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bv(e,n,r)}_apply(e){const n=this._parse(e);return ZL(e._query,n),new uo(e.firestore,e.converter,_E(e._query,n))}_parse(e){const n=Gf(e.firestore);return function(i,o,a,l,c,u,h){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new he(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){bR(h,u);const _=[];for(const y of h)_.push(ER(l,i,y));p={arrayValue:{values:_}}}else p=ER(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||bR(h,u),p=dX(a,o,h,u==="in"||u==="not-in");return sn.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bc(t,e,n){const r=e,s=Ev("where",t);return bv._create(s,r,n)}class Dx extends Nx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ls.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)ZL(o,l),o=_E(o,l)}(e._query,n),new uo(e.firestore,e.converter,_E(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ox extends Px{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ox(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new he(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nf(i,o)}(e._query,this._field,this._direction);return new uo(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Tv(t,e="asc"){const n=e,r=Ev("orderBy",t);return Ox._create(r,n)}class Mx extends Px{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mx(e,n,r)}_apply(e){return new uo(e.firestore,e.converter,Rg(e._query,this._limit,this._limitType))}}function pX(t){return Mx._create("limit",t,"F")}function ER(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new he(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y2(e)&&n.indexOf("/")!==-1)throw new he(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(vt.fromString(n));if(!xe.isDocumentKey(r))throw new he(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jk(t,new xe(r))}if(n instanceof $t)return jk(t,n._key);throw new he(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iv(n)}.`)}function bR(t,e){if(!Array.isArray(t)||t.length===0)throw new he(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZL(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mX{convertValue(e,n="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ka(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Ig].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ht(o.doubleValue));return new ui(n)}convertGeoPoint(e){return new ci(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jh(e));default:return null}}convertTimestamp(e){const n=da(e);return new St(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=vt.fromString(e);at(_L(r),9688,{name:e});const s=new ef(r.get(1),r.get(3)),i=new xe(r.popFirst(5));return s.isEqual(n)||no(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Wd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ul extends YL{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Am(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ev("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ul._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ul._jsonSchemaVersion="firestore/documentSnapshot/1.0",ul._jsonSchema={type:on("string",ul._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Am extends ul{data(e={}){return super.data(e)}}class dl{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Am(this._firestore,this._userDataWriter,r.key,r,new Wd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Am(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wd(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Am(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wd(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:gX(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=JT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){t=rr(t,$t);const e=rr(t.firestore,gi);return nX(Wf(e),t._key).then(n=>ej(e,t,n))}dl._jsonSchemaVersion="firestore/querySnapshot/1.0",dl._jsonSchema={type:on("string",dl._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class jx extends mX{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function TR(t){t=rr(t,uo);const e=rr(t.firestore,gi),n=Wf(e),r=new jx(e);return XL(t._query),rX(n,t._query).then(s=>new dl(e,r,t,s))}function JL(t,e,n){t=rr(t,$t);const r=rr(t.firestore,gi),s=Lx(t.converter,e,n);return Yf(r,[Cx(Gf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sr.none())])}function Cs(t,e,n,...r){t=rr(t,$t);const s=rr(t.firestore,gi),i=Gf(s);let o;return o=typeof(e=Ve(e))=="string"||e instanceof qf?HL(i,"updateDoc",t._key,e,n,r):qL(i,"updateDoc",t._key,e),Yf(s,[o.toMutation(t._key,sr.exists(!0))])}function Il(t){return Yf(rr(t.firestore,gi),[new pv(t._key,sr.none())])}function Qf(t,e){const n=rr(t.firestore,gi),r=it(t),s=Lx(t.converter,e);return Yf(n,[Cx(Gf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function hl(t,...e){var l,c,u;t=Ve(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||wR(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wR(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(u=h.complete)==null?void 0:u.bind(h)}let i,o,a;if(t instanceof $t)o=rr(t.firestore,gi),a=cv(t._key.path),i={next:h=>{e[r]&&e[r](ej(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=rr(t,uo);o=rr(h.firestore,gi),a=h._query;const p=new jx(o);i={next:m=>{e[r]&&e[r](new dl(o,p,h,m))},error:e[r+1],complete:e[r+2]},XL(t._query)}return function(p,m,_,y){const w=new Sx(y),b=new bx(m,w,_);return p.asyncQueue.enqueueAndForget(async()=>_x(await Mg(p),b)),()=>{w.Nu(),p.asyncQueue.enqueueAndForget(async()=>wx(await Mg(p),b))}}(Wf(o),a,s,i)}function Yf(t,e){return function(r,s){const i=new Gi;return r.asyncQueue.enqueueAndForget(async()=>WY(await tX(r),s,i)),i.promise}(Wf(t),e)}function ej(t,e,n){const r=n.docs.get(e._key),s=new jx(t);return new ul(t,s,e._key,r,new Wd(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gf(e)}set(e,n,r){this._verifyNotCommitted();const s=mw(e,this._firestore),i=Lx(s.converter,n,r),o=Cx(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,sr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=mw(e,this._firestore);let o;return o=typeof(n=Ve(n))=="string"||n instanceof qf?HL(this._dataReader,"WriteBatch.update",i._key,n,r,s):qL(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mw(e,this._firestore);return this._mutations=this._mutations.concat(new pv(n._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mw(t,e){if((t=Ve(t)).firestore!==e)throw new he(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return new Kf("deleteField")}function of(){return new Ix("serverTimestamp")}function vX(...t){return new kx("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){return Wf(t=rr(t,gi)),new yX(t,e=>Yf(t,e))}(function(e,n=!0){(function(s){Ku=s})(Ia),Ar(new or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new gi(new hK(r.getProvider("auth-internal")),new mK(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new he(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ef(c.options.projectId,u)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),bn(xk,Sk,e),bn(xk,Sk,"esm2020")})();var _X="firebase",wX="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(_X,wX,"app");function tj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EX=tj,nj=new Ca("auth","Firebase",tj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Ff("@firebase/auth");function bX(t,...e){jg.logLevel<=We.WARN&&jg.warn(`Auth (${Ia}): ${t}`,...e)}function Nm(t,...e){jg.logLevel<=We.ERROR&&jg.error(`Auth (${Ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t,...e){throw Vx(t,...e)}function kr(t,...e){return Vx(t,...e)}function Fx(t,e,n){const r={...EX(),[e]:n};return new Ca("auth","Firebase",r).create(e,{appName:t.name})}function di(t){return Fx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TX(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ls(t,"argument-error"),Fx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nj.create(t,...e)}function ge(t,e,...n){if(!t)throw Vx(e,...n)}function Vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nm(e),new Error(e)}function so(t,e){t||Vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function rj(){return xR()==="http:"||xR()==="https:"}function xR(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rj()||f2()||"connection"in navigator)?navigator.onLine:!0}function SX(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n){this.shortDelay=e,this.longDelay=n,so(n>e,"Short delay should be less than long delay!"),this.isMobile=KT()||p2()}get(){return xX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e){so(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kX=new Xf(3e4,6e4);function cr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Nr(t,e,n,r,s={}){return ij(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Hl({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return V7()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&wi(t.emulatorConfig.host)&&(c.credentials="include"),sj.fetch()(await oj(t,t.config.apiHost,n,a),c)})}async function ij(t,e,n){t._canInitEmulator=!1;const r={...CX,...e};try{const s=new AX(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw qd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw qd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw qd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Fx(t,u,c);ls(t,u)}}catch(s){if(s instanceof cs)throw s;ls(t,"network-request-failed",{message:String(s)})}}async function Aa(t,e,n,r,s={}){const i=await Nr(t,e,n,r,s);return"mfaPendingCredential"in i&&ls(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function oj(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Ux(t.config,s):`${t.config.apiScheme}://${s}`;return IX.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function RX(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kr(this.auth,"network-request-failed")),kX.get())})}}function qd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=kr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){return t!==void 0&&t.getResponse!==void 0}function CR(t){return t!==void 0&&t.enterprise!==void 0}class aj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RX(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NX(t){return(await Nr(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function lj(t,e){return Nr(t,"GET","/v2/recaptchaConfig",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PX(t,e){return Nr(t,"POST","/v1/accounts:delete",e)}async function Fg(t,e){return Nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DX(t,e=!1){const n=Ve(t),r=await n.getIdToken(e),s=$x(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:dh(yw(s.auth_time)),issuedAtTime:dh(yw(s.iat)),expirationTime:dh(yw(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yw(t){return Number(t)*1e3}function $x(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nm("JWT malformed, contained fewer than 3 sections"),null;try{const s=Tg(n);return s?JSON.parse(s):(Nm("Failed to decode base64 JWT payload"),null)}catch(s){return Nm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function IR(t){const e=$x(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cs&&OX(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OX({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dh(this.lastLoginAt),this.creationTime=dh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vg(t){var h;const e=t.auth,n=await t.getIdToken(),r=await bu(t,Fg(e,{idToken:n}));ge(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?cj(s.providerUserInfo):[],o=jX(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new PE(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function LX(t){const e=Ve(t);await Vg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jX(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function cj(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FX(t,e){const n=await ij(t,{},async()=>{const r=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await oj(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&wi(t.emulatorConfig.host)&&(l.credentials="include"),sj.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VX(t,e){return Nr(t,"POST","/v2/accounts:revokeToken",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=IR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await FX(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new zc;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zc,this.toJSON())}_performRefresh(){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Is{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new MX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new PE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bu(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DX(this,e)}reload(){return LX(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await bu(this,PX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:m,providerData:_,stsTokenManager:y}=n;ge(h&&y,e,"internal-error");const w=zc.fromJSON(this.name,y);ge(typeof h=="string",e,"internal-error"),wo(r,e.name),wo(s,e.name),ge(typeof p=="boolean",e,"internal-error"),ge(typeof m=="boolean",e,"internal-error"),wo(i,e.name),wo(o,e.name),wo(a,e.name),wo(l,e.name),wo(c,e.name),wo(u,e.name);const b=new Is({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:w,createdAt:c,lastLoginAt:u});return _&&Array.isArray(_)&&(b.providerData=_.map(E=>({...E}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new zc;s.updateFromServerResponse(n);const i=new Is({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vg(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?cj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new zc;a.updateFromIdToken(r);const l=new Is({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new PE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new Map;function Ui(t){so(t instanceof Function,"Expected a class definition");let e=kR.get(t);return e?(so(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uj.type="NONE";const RR=uj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e,n){return`firebase:${t}:${e}:${n}`}class Wc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Pm(this.userKey,s.apiKey,i),this.fullPersistenceKey=Pm("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fg(this.auth,{idToken:e}).catch(()=>{});return n?Is._fromGetAccountInfoResponse(this.auth,n,e):null}return Is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wc(Ui(RR),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ui(RR);const o=Pm(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const p=await Fg(e,{idToken:u}).catch(()=>{});if(!p)break;h=await Is._fromGetAccountInfoResponse(e,p,u)}else h=Is._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Wc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Wc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gj(e))return"Blackberry";if(yj(e))return"Webos";if(hj(e))return"Safari";if((e.includes("chrome/")||fj(e))&&!e.includes("edge/"))return"Chrome";if(mj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dj(t=Qn()){return/firefox\//i.test(t)}function hj(t=Qn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fj(t=Qn()){return/crios\//i.test(t)}function pj(t=Qn()){return/iemobile/i.test(t)}function mj(t=Qn()){return/android/i.test(t)}function gj(t=Qn()){return/blackberry/i.test(t)}function yj(t=Qn()){return/webos/i.test(t)}function Bx(t=Qn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UX(t=Qn()){var e;return Bx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function $X(){return U7()&&document.documentMode===10}function vj(t=Qn()){return Bx(t)||mj(t)||yj(t)||gj(t)||/windows phone/i.test(t)||pj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t,e=[]){let n;switch(t){case"Browser":n=AR(Qn());break;case"Worker":n=`${AR(Qn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BX{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zX(t,e={}){return Nr(t,"GET","/v2/passwordPolicy",cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WX=6;class qX{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??WX,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HX{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NR(this),this.idTokenSubscription=new NR(this),this.beforeStateQueue=new BX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Wc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fg(this,{idToken:e}),r=await Is._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(di(this));const n=e?Ve(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zX(this),n=new qX(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ca("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VX(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ui(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Wc.create(this,[Ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_j(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&bX(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function us(t){return Ve(t)}class NR{constructor(e){this.auth=e,this.observer=null,this.addObserver=K7(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GX(t){Zf=t}function zx(t){return Zf.loadJS(t)}function KX(){return Zf.recaptchaV2Script}function QX(){return Zf.recaptchaEnterpriseScript}function YX(){return Zf.gapiScript}function wj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XX=500,ZX=6e4,em=1e12;class JX{constructor(e){this.auth=e,this.counter=em,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new nZ(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||em;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||em;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||em;return(r=this._widgets.get(n))==null||r.execute(),""}}class eZ{constructor(){this.enterprise=new tZ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tZ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nZ{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ge(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=rZ(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ZX)},XX))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function rZ(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const sZ="recaptcha-enterprise",hh="NO_RECAPTCHA";class Ej{constructor(e){this.type=sZ,this.auth=us(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{lj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new aj(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;CR(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(hh)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eZ().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&CR(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=QX();l.length!==0&&(l+=a),zx(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Cd(t,e,n,r=!1,s=!1){const i=new Ej(t);let o;if(s)o=hh;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function fl(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Cd(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Cd(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(s==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Cd(t,e,n);return r(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Cd(t,e,n,!1,!0);return r(t,u)}return Promise.reject(l)})}else{const a=await Cd(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(s+" provider is not supported.")}async function iZ(t){const e=us(t),n=await lj(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new aj(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new Ej(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(t,e){const n=bi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(pi(i,e??{}))return s;ls(s,"already-initialized")}return n.initialize({options:e})}function aZ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lZ(t,e,n){const r=us(t);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=bj(e),{host:o,port:a}=cZ(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(pi(c,r.config.emulator)&&pi(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,wi(o)?(ev(`${i}//${o}${l}`),tv("Auth",!0)):uZ()}function bj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cZ(t){const e=bj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:PR(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:PR(o)}}}function PR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uZ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,n){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}}async function dZ(t,e){return Nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hZ(t,e){return Aa(t,"POST","/v1/accounts:signInWithPassword",cr(t,e))}async function Tj(t,e){return Nr(t,"POST","/v1/accounts:sendOobCode",cr(t,e))}async function fZ(t,e){return Tj(t,e)}async function pZ(t,e){return Tj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mZ(t,e){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}async function gZ(t,e){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends xv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new af(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new af(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fl(e,n,"signInWithPassword",hZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return mZ(e,{email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fl(e,r,"signUpPassword",dZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gZ(e,{idToken:n,email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t,e){return Aa(t,"POST","/v1/accounts:signInWithIdp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZ="http://localhost";class kl extends xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new kl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new kl(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qc(e,n)}buildRequest(){const e={requestUri:yZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){return Nr(t,"POST","/v1/accounts:sendVerificationCode",cr(t,e))}async function vZ(t,e){return Aa(t,"POST","/v1/accounts:signInWithPhoneNumber",cr(t,e))}async function _Z(t,e){const n=await Aa(t,"POST","/v1/accounts:signInWithPhoneNumber",cr(t,e));if(n.temporaryProof)throw qd(t,"account-exists-with-different-credential",n);return n}const wZ={USER_NOT_FOUND:"user-not-found"};async function EZ(t,e){const n={...e,operation:"REAUTH"};return Aa(t,"POST","/v1/accounts:signInWithPhoneNumber",cr(t,n),wZ)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends xv{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new fh({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new fh({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return vZ(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return _Z(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return EZ(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new fh({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TZ(t){const e=Vd(Ud(t)).link,n=e?Vd(Ud(e)).deep_link_id:null,r=Vd(Ud(t)).deep_link_id;return(r?Vd(Ud(r)).link:null)||r||n||e||t}class Wx{constructor(e){const n=Vd(Ud(e)),r=n.apiKey??null,s=n.oobCode??null,i=bZ(n.mode??null);ge(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TZ(e);try{return new Wx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this.providerId=ed.PROVIDER_ID}static credential(e,n){return af._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Wx.parseLink(n);return ge(r,"argument-error"),af._fromEmailAndCode(e,r.code,r.tenantId)}}ed.PROVIDER_ID="password";ed.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ed.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends qx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Jf{constructor(){super("facebook.com")}static credential(e){return kl._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ro.credential(e.oauthAccessToken)}catch{return null}}}Ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Jf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return kl._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mi.credential(n,r)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Jf{constructor(){super("github.com")}static credential(e){return kl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ao.credential(e.oauthAccessToken)}catch{return null}}}Ao.GITHUB_SIGN_IN_METHOD="github.com";Ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Jf{constructor(){super("twitter.com")}static credential(e,n){return kl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return No.credential(n,r)}catch{return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xZ(t,e){return Aa(t,"POST","/v1/accounts:signUp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Is._fromIdTokenResponse(e,r,s),o=OR(r);return new Rl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=OR(r);return new Rl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function OR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends cs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ug.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ug(e,n,r,s)}}function xj(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ug._fromErrorAndOperation(t,i,e,r):i})}async function SZ(t,e,n=!1){const r=await bu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CZ(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(di(r));const s="reauthenticate";try{const i=await bu(t,xj(r,s,e,t),n);ge(i.idToken,r,"internal-error");const o=$x(i.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(t.uid===a,r,"user-mismatch"),Rl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ls(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e,n=!1){if(Hn(t.app))return Promise.reject(di(t));const r="signIn",s=await xj(t,r,e),i=await Rl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Cj(t,e){return Sj(us(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t){const e=us(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IZ(t,e,n){const r=us(t);await fl(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pZ,"EMAIL_PASSWORD_PROVIDER")}async function kZ(t,e,n){if(Hn(t.app))return Promise.reject(di(t));const r=us(t),o=await fl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xZ,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Ij(t),l}),a=await Rl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function RZ(t,e,n){return Hn(t.app)?Promise.reject(di(t)):Cj(Ve(t),ed.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ij(t),r})}async function MR(t,e){const n=Ve(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await fZ(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AZ(t,e){return Nr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NZ(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ve(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await bu(r,AZ(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function PZ(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function DZ(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function OZ(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function MZ(t){return Ve(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e){return Nr(t,"POST","/v2/accounts/mfaEnrollment:start",cr(t,e))}const $g="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($g,"1"),this.storage.removeItem($g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LZ=1e3,jZ=10;class Rj extends kj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);$X()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jZ):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},LZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rj.type="LOCAL";const FZ=Rj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj extends kj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Aj.type="SESSION";const Nj=Aj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VZ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Sv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await VZ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Hx("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return window}function $Z(t){nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(){return typeof nn().WorkerGlobalScope<"u"&&typeof nn().importScripts=="function"}async function BZ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zZ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function WZ(){return Gx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj="firebaseLocalStorageDb",qZ=1,Bg="firebaseLocalStorage",Dj="fbase_key";class ep{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cv(t,e){return t.transaction([Bg],e?"readwrite":"readonly").objectStore(Bg)}function HZ(){const t=indexedDB.deleteDatabase(Pj);return new ep(t).toPromise()}function DE(){const t=indexedDB.open(Pj,qZ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bg,{keyPath:Dj})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bg)?e(r):(r.close(),await HZ(),e(await DE()))})})}async function jR(t,e,n){const r=Cv(t,!0).put({[Dj]:e,value:n});return new ep(r).toPromise()}async function GZ(t,e){const n=Cv(t,!1).get(e),r=await new ep(n).toPromise();return r===void 0?null:r.value}function FR(t,e){const n=Cv(t,!0).delete(e);return new ep(n).toPromise()}const KZ=800,QZ=3;class Oj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await DE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QZ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sv._getInstance(WZ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await BZ(),!this.activeServiceWorker)return;this.sender=new UZ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await DE();return await jR(e,$g,"1"),await FR(e,$g),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GZ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>FR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Cv(s,!1).getAll();return new ep(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Oj.type="LOCAL";const YZ=Oj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return Nr(t,"POST","/v2/accounts/mfaSignIn:start",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=wj("rcb"),XZ=new Xf(3e4,6e4);class ZZ{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=nn().grecaptcha)!=null&&e.render)}load(e,n=""){return ge(JZ(n),e,"argument-error"),this.shouldResolveImmediately(n)&&SR(nn().grecaptcha)?Promise.resolve(nn().grecaptcha):new Promise((r,s)=>{const i=nn().setTimeout(()=>{s(kr(e,"network-request-failed"))},XZ.get());nn()[vw]=()=>{nn().clearTimeout(i),delete nn()[vw];const a=nn().grecaptcha;if(!a||!SR(a)){s(kr(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const h=l(c,u);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${KX()}?${Hl({onload:vw,render:"explicit",hl:n})}`;zx(o).catch(()=>{clearTimeout(i),s(kr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=nn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function JZ(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class eJ{async load(e){return new JX(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="recaptcha",tJ={theme:"light",type:"image"};class nJ{constructor(e,n,r={...tJ}){this.parameters=r,this.type=ph,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=us(e),this.isInvisible=this.parameters.size==="invisible",ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ge(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new eJ:new ZZ,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=nn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ge(rj()&&!Gx(),this.auth,"internal-error"),await rJ(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await NX(this.auth);ge(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function rJ(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=fh._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function iJ(t,e,n){if(Hn(t.app))return Promise.reject(di(t));const r=us(t),s=await oJ(r,e,Ve(n));return new sJ(s,i=>Cj(r,i))}async function oJ(t,e,n){var r;if(!t._getRecaptchaConfig())try{await iZ(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){ge(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await fl(t,o,"mfaSmsEnrollment",async(u,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===hh){ge((n==null?void 0:n.type)===ph,u,"argument-error");const p=await _w(u,h,n);return LR(u,p)}return LR(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{ge(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)==null?void 0:r.uid)||s.multiFactorUid;ge(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await fl(t,a,"mfaSmsSignIn",async(h,p)=>{if(p.phoneSignInInfo.captchaResponse===hh){ge((n==null?void 0:n.type)===ph,h,"argument-error");const m=await _w(h,p,n);return VR(h,m)}return VR(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await fl(t,i,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===hh){ge((n==null?void 0:n.type)===ph,c,"argument-error");const h=await _w(c,u,n);return DR(c,h)}return DR(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function _w(t,e,n){ge(n.type===ph,t,"argument-error");const r=await n.verify();ge(typeof r=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,l=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t,e){return e?Ui(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends xv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aJ(t){return Sj(t.auth,new Kx(t),t.bypassAuthState)}function lJ(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),CZ(n,new Kx(t),t.bypassAuthState)}async function cJ(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),SZ(n,new Kx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aJ;case"linkViaPopup":case"linkViaRedirect":return cJ;case"reauthViaPopup":case"reauthViaRedirect":return lJ;default:ls(this.auth,"internal-error")}}resolve(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uJ=new Xf(2e3,1e4);async function dJ(t,e,n){if(Hn(t.app))return Promise.reject(kr(t,"operation-not-supported-in-this-environment"));const r=us(t);TX(t,e,qx);const s=Mj(r,n);return new Za(r,"signInViaPopup",e,s).executeNotNull()}class Za extends Lj{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){so(this.filter.length===1,"Popup operations only handle one event");const e=Hx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uJ.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hJ="pendingRedirect",Dm=new Map;class fJ extends Lj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dm.get(this.auth._key());if(!e){try{const r=await pJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dm.set(this.auth._key(),e)}return this.bypassAuthState||Dm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pJ(t,e){const n=yJ(e),r=gJ(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mJ(t,e){Dm.set(t._key(),e)}function gJ(t){return Ui(t._redirectPersistence)}function yJ(t){return Pm(hJ,t.config.apiKey,t.name)}async function vJ(t,e,n=!1){if(Hn(t.app))return Promise.reject(di(t));const r=us(t),s=Mj(r,e),o=await new fJ(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J=10*60*1e3;class wJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EJ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jj(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(kr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_J&&this.cachedEventUids.clear(),this.cachedEventUids.has(UR(e))}saveEventToCache(e){this.cachedEventUids.add(UR(e)),this.lastProcessedEventTime=Date.now()}}function UR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bJ(t,e={}){return Nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xJ=/^https?/;async function SJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bJ(t);for(const n of e)try{if(CJ(n))return}catch{}ls(t,"unauthorized-domain")}function CJ(t){const e=NE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xJ.test(n))return!1;if(TJ.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IJ=new Xf(3e4,6e4);function $R(){const t=nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kJ(t){return new Promise((e,n)=>{var s,i,o;function r(){$R(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$R(),n(kr(t,"network-request-failed"))},timeout:IJ.get()})}if((i=(s=nn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=nn().gapi)!=null&&o.load)r();else{const a=wj("iframefcb");return nn()[a]=()=>{gapi.load?r():n(kr(t,"network-request-failed"))},zx(`${YX()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Om=null,e})}let Om=null;function RJ(t){return Om=Om||kJ(t),Om}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ=new Xf(5e3,15e3),NJ="__/auth/iframe",PJ="emulator/auth/iframe",DJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MJ(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ux(e,PJ):`https://${t.config.authDomain}/${NJ}`,r={apiKey:e.apiKey,appName:t.name,v:Ia},s=OJ.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Hl(r).slice(1)}`}async function LJ(t){const e=await RJ(t),n=nn().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:MJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DJ,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=kr(t,"network-request-failed"),a=nn().setTimeout(()=>{i(o)},AJ.get());function l(){nn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FJ=500,VJ=600,UJ="_blank",$J="http://localhost";class BR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BJ(t,e,n,r=FJ,s=VJ){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...jJ,width:r.toString(),height:s.toString(),top:i,left:o},c=Qn().toLowerCase();n&&(a=fj(c)?UJ:n),dj(c)&&(e=e||$J,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(UX(c)&&a!=="_self")return zJ(e||"",a),new BR(null);const h=window.open(e||"",a,u);ge(h,t,"popup-blocked");try{h.focus()}catch{}return new BR(h)}function zJ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WJ="__/auth/handler",qJ="emulator/auth/handler",HJ=encodeURIComponent("fac");async function zR(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ia,eventId:s};if(e instanceof qx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Jf){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${HJ}=${encodeURIComponent(l)}`:"";return`${GJ(t)}?${Hl(a).slice(1)}${c}`}function GJ({config:t}){return t.emulator?Ux(t,qJ):`https://${t.authDomain}/${WJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="webStorageSupport";class KJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nj,this._completeRedirectFn=vJ,this._overrideRedirectResult=mJ}async _openPopup(e,n,r,s){var o;so((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await zR(e,n,r,NE(),s);return BJ(e,i,Hx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await zR(e,n,r,NE(),s);return $Z(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(so(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await LJ(e),r=new wJ(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ww,{type:ww},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[ww];i!==void 0&&n(!!i),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vj()||hj()||Bx()}}const QJ=KJ;var WR="@firebase/auth",qR="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZJ(t){Ar(new or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_j(t)},c=new HX(r,s,i,l);return aZ(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ar(new or("auth-internal",e=>{const n=us(e.getProvider("auth").getImmediate());return(r=>new YJ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(WR,qR,XJ(t)),bn(WR,qR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ=5*60,eee=h2("authIdTokenMaxAge")||JJ;let HR=null;const tee=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eee)return;const s=n==null?void 0:n.token;HR!==s&&(HR=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function nee(t=Gl()){const e=bi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oZ(t,{popupRedirectResolver:QJ,persistence:[YZ,FZ,Nj]}),r=h2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=tee(i.toString());DZ(n,o,()=>o(n.currentUser)),PZ(n,a=>o(a))}}const s=u2("auth");return s&&lZ(n,`http://${s}`),n}function ree(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}GX({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=kr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ree().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZJ("Browser");var GR={};const KR="@firebase/database",QR="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fj="";function see(t){Fj=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iee{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_n(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Qh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ei(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iee(e)}}catch{}return new oee},Ja=Vj("localStorage"),aee=Vj("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Ff("@firebase/database"),lee=function(){let t=1;return function(){return t++}}(),Uj=function(t){const e=X7(t),n=new G7;n.update(e);const r=n.digest();return qT.encodeByteArray(r)},tp=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=tp.apply(null,r):typeof r=="object"?e+=_n(r):e+=r,e+=" "}return e};let mh=null,YR=!0;const cee=function(t,e){ae(!e,"Can't turn on custom loggers persistently."),Hc.logLevel=We.VERBOSE,mh=Hc.log.bind(Hc)},kn=function(...t){if(YR===!0&&(YR=!1,mh===null&&aee.get("logging_enabled")===!0&&cee()),mh){const e=tp.apply(null,t);mh(e)}},np=function(t){return function(...e){kn(t,...e)}},OE=function(...t){const e="FIREBASE INTERNAL ERROR: "+tp(...t);Hc.error(e)},io=function(...t){const e=`FIREBASE FATAL ERROR: ${tp(...t)}`;throw Hc.error(e),new Error(e)},ir=function(...t){const e="FIREBASE WARNING: "+tp(...t);Hc.warn(e)},uee=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ir("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qx=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},dee=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Al="[MIN_NAME]",ga="[MAX_NAME]",Yl=function(t,e){if(t===e)return 0;if(t===Al||e===ga)return-1;if(e===Al||t===ga)return 1;{const n=XR(t),r=XR(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},hee=function(t,e){return t===e?0:t<e?-1:1},Id=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_n(e))},Yx=function(t){if(typeof t!="object"||t===null)return _n(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=_n(e[r]),n+=":",n+=Yx(t[e[r]]);return n+="}",n},$j=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Dn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Bj=function(t){ae(!Qx(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let p=parseInt(u.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},fee=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},pee=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function mee(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const gee=new RegExp("^-?(0*)\\d{1,10}$"),yee=-2147483648,vee=2147483647,XR=function(t){if(gee.test(t)){const e=Number(t);if(e>=yee&&e<=vee)return e}return null},td=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ir("Exception was thrown by user callback.",n),e},Math.floor(0))}},_ee=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gh=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Hn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ir(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eee{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(kn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ir(e)}}class Mm{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Mm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="5",zj="v",Wj="s",qj="r",Hj="f",Gj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Kj="ls",Qj="p",ME="ac",Yj="websocket",Xj="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ja.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ja.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function bee(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Jj(t,e,n){ae(typeof e=="string","typeof type must == string"),ae(typeof n=="object","typeof params must == object");let r;if(e===Yj)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Xj)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bee(t)&&(n.ns=t.namespace);const s=[];return Dn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(){this.counters_={}}incrementCounter(e,n=1){Ei(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return A7(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={},bw={};function Zx(t){const e=t.toString();return Ew[e]||(Ew[e]=new Tee),Ew[e]}function xee(t,e){const n=t.toString();return bw[n]||(bw[n]=e()),bw[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class See{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&td(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="start",Cee="close",Iee="pLPCommand",kee="pRTLPCB",eF="id",tF="pw",nF="ser",Ree="cb",Aee="seg",Nee="ts",Pee="d",Dee="dframe",rF=1870,sF=30,Oee=rF-sF,Mee=25e3,Lee=3e4;class Pc{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=np(e),this.stats_=Zx(n),this.urlFn=l=>(this.appCheckToken&&(l[ME]=this.appCheckToken),Jj(n,Xj,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new See(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Lee)),dee(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jx((...i)=>{const[o,a,l,c,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ZR)this.id=a,this.password=l;else if(o===Cee)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[ZR]="t",r[nF]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Ree]=this.scriptTagHolder.uniqueCallbackIdentifier),r[zj]=Xx,this.transportSessionId&&(r[Wj]=this.transportSessionId),this.lastSessionId&&(r[Kj]=this.lastSessionId),this.applicationId&&(r[Qj]=this.applicationId),this.appCheckToken&&(r[ME]=this.appCheckToken),typeof location<"u"&&location.hostname&&Gj.test(location.hostname)&&(r[qj]=Hj);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pc.forceAllow_=!0}static forceDisallow(){Pc.forceDisallow_=!0}static isAvailable(){return Pc.forceAllow_?!0:!Pc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!fee()&&!pee()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=_n(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=l2(n),s=$j(r,Oee);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Dee]="t",r[eF]=e,r[tF]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=_n(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Jx{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=lee(),window[Iee+this.uniqueCallbackIdentifier]=e,window[kee+this.uniqueCallbackIdentifier]=n,this.myIFrame=Jx.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){kn("frame writing exception"),a.stack&&kn(a.stack),kn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[eF]=this.myID,e[tF]=this.myPW,e[nF]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+sF+r.length<=rF;){const o=this.pendingSegs.shift();r=r+"&"+Aee+s+"="+o.seg+"&"+Nee+s+"="+o.ts+"&"+Pee+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Mee)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{kn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jee=16384,Fee=45e3;let zg=null;typeof MozWebSocket<"u"?zg=MozWebSocket:typeof WebSocket<"u"&&(zg=WebSocket);class Ts{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=np(this.connId),this.stats_=Zx(n),this.connURL=Ts.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[zj]=Xx,typeof location<"u"&&location.hostname&&Gj.test(location.hostname)&&(o[qj]=Hj),n&&(o[Wj]=n),r&&(o[Kj]=r),s&&(o[ME]=s),i&&(o[Qj]=i),Jj(e,Yj,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ja.set("previous_websocket_failure",!0);try{let r;m2(),this.mySock=new zg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ts.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&zg!==null&&!Ts.forceDisallow_}static previouslyFailed(){return Ja.isInMemoryStorage||Ja.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ja.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Qh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=_n(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$j(n,jee);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Fee))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ts.responsesRequiredToBeHealthy=2;Ts.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{static get ALL_TRANSPORTS(){return[Pc,Ts]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Ts&&Ts.isAvailable();let r=n&&!Ts.previouslyFailed();if(e.webSocketOnly&&(n||ir("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ts];else{const s=this.transports_=[];for(const i of lf.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);lf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}lf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vee=6e4,Uee=5e3,$ee=10*1024,Bee=100*1024,Tw="t",JR="d",zee="s",eA="r",Wee="e",tA="o",nA="a",rA="n",sA="p",qee="h";class Hee{constructor(e,n,r,s,i,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=np("c:"+this.id+":"),this.transportManager_=new lf(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=gh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Bee?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$ee?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Tw in e){const n=e[Tw];n===nA?this.upgradeIfSecondaryHealthy_():n===eA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===tA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Id("t",e),r=Id("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:sA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Id("t",e),r=Id("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Id(Tw,e);if(JR in e){const r=e[JR];if(n===qee){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===rA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===zee?this.onConnectionShutdown_(r):n===eA?this.onReset_(r):n===Wee?OE("Server Error: "+r):n===tA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):OE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Xx!==r&&ir("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),gh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Vee))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Uee))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:sA,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends oF{static getInstance(){return new Wg}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!KT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=32,oA=768;class dt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ot(){return new dt("")}function Ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ya(t){return t.pieces_.length-t.pieceNum_}function yt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new dt(t.pieces_,e)}function eS(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Gee(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function cf(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function aF(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new dt(e,0)}function Ut(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof dt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new dt(n,0)}function $e(t){return t.pieceNum_>=t.pieces_.length}function Tr(t,e){const n=Ue(t),r=Ue(e);if(n===null)return e;if(n===r)return Tr(yt(t),yt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Kee(t,e){const n=cf(t,0),r=cf(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Yl(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function tS(t,e){if(ya(t)!==ya(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function rs(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ya(t)>ya(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Qee{constructor(e,n){this.errorPrefix_=n,this.parts_=cf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=rv(this.parts_[r]);lF(this)}}function Yee(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=rv(e),lF(t)}function Xee(t){const e=t.parts_.pop();t.byteLength_-=rv(e),t.parts_.length>0&&(t.byteLength_-=1)}function lF(t){if(t.byteLength_>oA)throw new Error(t.errorPrefix_+"has a key path longer than "+oA+" bytes ("+t.byteLength_+").");if(t.parts_.length>iA)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iA+") or object contains a cycle "+Ua(t))}function Ua(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends oF{static getInstance(){return new nS}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=1e3,Zee=60*5*1e3,aA=30*1e3,Jee=1.3,ete=3e4,tte="server_kill",lA=3;class Ki extends iF{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ki.nextPersistentConnectionId_++,this.log_=np("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kd,this.maxReconnectDelay_=Zee,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!m2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nS.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Wg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(_n(i)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new jf,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;Ki.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ei(e,"w")){const r=pu(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ir(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||H7(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=aA)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=q7(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+_n(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):OE("Unrecognized action received from server: "+_n(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=kd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ete&&(this.reconnectDelay_=kd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Jee)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ki.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,p]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?kn("getToken() completed but was canceled"):(kn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,a=new Hee(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{ir(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(tte)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&ir(h),l())}}}interrupt(e){kn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){kn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],oE(this.interruptReasons_)&&(this.reconnectDelay_=kd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Yx(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new dt(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){kn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lA&&(this.reconnectDelay_=aA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){kn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=lA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Fj.replace(/\./g,"-")]=1,KT()?e["framework.cordova"]=1:p2()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Wg.getInstance().currentlyOnline();return oE(this.interruptReasons_)&&e}}Ki.nextPersistentConnectionId_=0;Ki.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Be(Al,e),s=new Be(Al,n);return this.compare(r,s)!==0}minPost(){return Be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tm;class cF extends Iv{static get __EMPTY_NODE(){return tm}static set __EMPTY_NODE(e){tm=e}compare(e,n){return Yl(e.name,n.name)}isDefinedOn(e){throw Gu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Be.MIN}maxPost(){return new Be(ga,tm)}makePost(e,n){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Be(e,tm)}toString(){return".key"}}const pl=new cF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class yn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??yn.RED,this.left=s??xr.EMPTY_NODE,this.right=i??xr.EMPTY_NODE}copy(e,n,r,s,i){return new yn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return xr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return xr.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}yn.RED=!0;yn.BLACK=!1;class nte{copy(e,n,r,s,i){return this}insert(e,n,r){return new yn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xr{constructor(e,n=xr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new xr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yn.BLACK,null,null))}remove(e){return new xr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new nm(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new nm(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new nm(this.root_,null,this.comparator_,!0,e)}}xr.EMPTY_NODE=new nte;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(t,e){return Yl(t.name,e.name)}function rS(t,e){return Yl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LE;function ste(t){LE=t}const uF=function(t){return typeof t=="number"?"number:"+Bj(t):"string:"+t},dF=function(t){if(t.isLeafNode()){const e=t.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ei(e,".sv"),"Priority must be a string or number.")}else ae(t===LE||t.isEmpty(),"priority of unexpected type.");ae(t===LE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cA;class pn{static set __childrenNodeConstructor(e){cA=e}static get __childrenNodeConstructor(){return cA}constructor(e,n=pn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dF(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:Ue(e)===".priority"?this.priorityNode_:pn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:pn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ue(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ae(r!==".priority"||ya(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,pn.__childrenNodeConstructor.EMPTY_NODE.updateChild(yt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+uF(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Bj(this.value_):e+=this.value_,this.lazyHash_=Uj(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pn.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=pn.VALUE_TYPE_ORDER.indexOf(n),i=pn.VALUE_TYPE_ORDER.indexOf(r);return ae(s>=0,"Unknown leaf type: "+n),ae(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}pn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hF,fF;function ite(t){hF=t}function ote(t){fF=t}class ate extends Iv{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Yl(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(ga,new pn("[PRIORITY-POST]",fF))}makePost(e,n){const r=hF(e);return new Be(n,new pn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Nt=new ate;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lte=Math.log(2);class cte{constructor(e){const n=i=>parseInt(Math.log(i)/lte,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qg=function(t,e,n,r){t.sort(e);const s=function(l,c){const u=c-l;let h,p;if(u===0)return null;if(u===1)return h=t[l],p=n?n(h):h,new yn(p,h.node,yn.BLACK,null,null);{const m=parseInt(u/2,10)+l,_=s(l,m),y=s(m+1,c);return h=t[m],p=n?n(h):h,new yn(p,h.node,yn.BLACK,_,y)}},i=function(l){let c=null,u=null,h=t.length;const p=function(_,y){const w=h-_,b=h;h-=_;const E=s(w+1,b),x=t[w],R=n?n(x):x;m(new yn(R,x.node,y,null,E))},m=function(_){c?(c.left=_,c=_):(u=_,c=_)};for(let _=0;_<l.count;++_){const y=l.nextBitIsOne(),w=Math.pow(2,l.count-(_+1));y?p(w,yn.BLACK):(p(w,yn.BLACK),p(w,yn.RED))}return u},o=new cte(t.length),a=i(o);return new xr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xw;const ac={};class $i{static get Default(){return ae(ac&&Nt,"ChildrenNode.ts has not been loaded"),xw=xw||new $i({".priority":ac},{".priority":Nt}),xw}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=pu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xr?n:null}hasIndex(e){return Ei(this.indexSet_,e.toString())}addIndex(e,n){ae(e!==pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Be.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=qg(r,e.getCompare()):a=ac;const l=e.toString(),c={...this.indexSet_};c[l]=e;const u={...this.indexes_};return u[l]=a,new $i(u,c)}addToIndexes(e,n){const r=xg(this.indexes_,(s,i)=>{const o=pu(this.indexSet_,i);if(ae(o,"Missing index implementation for "+i),s===ac)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Be.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),qg(a,o.getCompare())}else return ac;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Be(e.name,a))),l.insert(e,e.node)}});return new $i(r,this.indexSet_)}removeFromIndexes(e,n){const r=xg(this.indexes_,s=>{if(s===ac)return s;{const i=n.get(e.name);return i?s.remove(new Be(e.name,i)):s}});return new $i(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd;class Ie{static get EMPTY_NODE(){return Rd||(Rd=new Ie(new xr(rS),null,$i.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dF(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rd}updatePriority(e){return this.children_.isEmpty()?this:new Ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Rd:n}}getChild(e){const n=Ue(e);return n===null?this:this.getImmediateChild(n).getChild(yt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Be(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Rd:this.priorityNode_;return new Ie(s,o,i)}}updateChild(e,n){const r=Ue(e);if(r===null)return n;{ae(Ue(e)!==".priority"||ya(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(yt(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Nt,(o,a)=>{n[o]=a.val(e),r++,i&&Ie.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+uF(this.getPriority().val())+":"),this.forEachChild(Nt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Uj(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Be(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Be(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rp?-1:0}withIndex(e){if(e===pl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ie(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===pl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Nt),s=n.getIterator(Nt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===pl?null:this.indexMap_.get(e.toString())}}Ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ute extends Ie{constructor(){super(new xr(rS),Ie.EMPTY_NODE,$i.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ie.EMPTY_NODE}isEmpty(){return!1}}const rp=new ute;Object.defineProperties(Be,{MIN:{value:new Be(Al,Ie.EMPTY_NODE)},MAX:{value:new Be(ga,rp)}});cF.__EMPTY_NODE=Ie.EMPTY_NODE;pn.__childrenNodeConstructor=Ie;ste(rp);ote(rp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dte=!0;function vn(t,e=null){if(t===null)return Ie.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new pn(n,vn(e))}if(!(t instanceof Array)&&dte){const n=[];let r=!1;if(Dn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=vn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Be(o,l)))}}),n.length===0)return Ie.EMPTY_NODE;const i=qg(n,rte,o=>o.name,rS);if(r){const o=qg(n,Nt.getCompare());return new Ie(i,vn(e),new $i({".priority":o},{".priority":Nt}))}else return new Ie(i,vn(e),$i.Default)}else{let n=Ie.EMPTY_NODE;return Dn(t,(r,s)=>{if(Ei(t,r)&&r.substring(0,1)!=="."){const i=vn(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(vn(e))}}ite(vn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends Iv{constructor(e){super(),this.indexPath_=e,ae(!$e(e)&&Ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Yl(e.name,n.name):i}makePost(e,n){const r=vn(e),s=Ie.EMPTY_NODE.updateChild(this.indexPath_,r);return new Be(n,s)}maxPost(){const e=Ie.EMPTY_NODE.updateChild(this.indexPath_,rp);return new Be(ga,e)}toString(){return cf(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hte extends Iv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Yl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(e,n){const r=vn(e);return new Be(n,r)}toString(){return".value"}}const pF=new hte;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){return{type:"value",snapshotNode:t}}function Tu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function uf(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function df(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function fte(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(uf(n,a)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Tu(n,r)):o.trackChildChange(df(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Nt,(s,i)=>{n.hasChild(s)||r.trackChildChange(uf(s,i))}),n.isLeafNode()||n.forEachChild(Nt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(df(s,i,o))}else r.trackChildChange(Tu(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ie.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.indexedFilter_=new iS(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hf.getStartPost_(e),this.endPost_=hf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Be(n,r))||(r=Ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ie.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Ie.EMPTY_NODE);const i=this;return n.forEachChild(Nt,(o,a)=>{i.matches(new Be(o,a))||(s=s.updateImmediateChild(o,Ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pte{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Be(n,r))||(r=Ie.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Ie.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Ie.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,Ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(p,m)=>h(m,p)}else o=this.index_.getCompare();const a=e;ae(a.numChildren()===this.limit_,"");const l=new Be(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let p=s.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=s.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(u&&!r.isEmpty()&&m>=0)return i!=null&&i.trackChildChange(df(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(uf(n,h));const y=a.updateImmediateChild(n,Ie.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i!=null&&i.trackChildChange(Tu(p.name,p.node)),y.updateImmediateChild(p.name,p.node)):y}}else return r.isEmpty()?e:u&&o(c,l)>=0?(i!=null&&(i.trackChildChange(uf(c.name,c.node)),i.trackChildChange(Tu(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,Ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Al}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ga}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nt}copy(){const e=new oS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mte(t){return t.loadsAllData()?new iS(t.getIndex()):t.hasLimit()?new pte(t):new hf(t)}function gte(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function yte(t,e){const n=t.copy();return n.index_=e,n}function uA(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Nt?n="$priority":t.index_===pF?n="$value":t.index_===pl?n="$key":(ae(t.index_ instanceof sS,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=_n(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=_n(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+_n(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=_n(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+_n(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function dA(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Nt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends iF{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=np("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Hg.getListenId_(e,r),a={};this.listens_[o]=a;const l=uA(e._queryParams);this.restRequest_(i+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),pu(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",s(p,null)}})}unlisten(e,n){const r=Hg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=uA(e._queryParams),r=e._path.toString(),s=new jf;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Hl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Qh(a.responseText)}catch{ir("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ir("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vte{constructor(){this.rootNode_=Ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(){return{value:null,children:new Map}}function gF(t,e,n){if($e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ue(e);t.children.has(r)||t.children.set(r,Gg());const s=t.children.get(r);e=yt(e),gF(s,e,n)}}function jE(t,e,n){t.value!==null?n(e,t.value):_te(t,(r,s)=>{const i=new dt(e.toString()+"/"+r);jE(s,i,n)})}function _te(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Dn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=10*1e3,Ete=30*1e3,bte=5*60*1e3;class Tte{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new wte(e);const r=hA+(Ete-hA)*Math.random();gh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Dn(e,(s,i)=>{i>0&&Ei(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),gh(this.reportStats_.bind(this),Math.floor(Math.random()*2*bte))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ks;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ks||(ks={}));function aS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cS(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ks.ACK_USER_WRITE,this.source=aS()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new dt(e));return new Kg(ot(),n,this.revert)}}else return ae(Ue(this.path)===e,"operationForChild called for unrelated child."),new Kg(yt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.source=e,this.path=n,this.type=ks.LISTEN_COMPLETE}operationForChild(e){return $e(this.path)?new ff(this.source,ot()):new ff(this.source,yt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ks.OVERWRITE}operationForChild(e){return $e(this.path)?new Nl(this.source,ot(),this.snap.getImmediateChild(e)):new Nl(this.source,yt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ks.MERGE}operationForChild(e){if($e(this.path)){const n=this.children.subtree(new dt(e));return n.isEmpty()?null:n.value?new Nl(this.source,ot(),n.value):new xu(this.source,ot(),n)}else return ae(Ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xu(this.source,yt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ste(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(fte(o.childName,o.snapshotNode))}),Ad(t,s,"child_removed",e,r,n),Ad(t,s,"child_added",e,r,n),Ad(t,s,"child_moved",i,r,n),Ad(t,s,"child_changed",e,r,n),Ad(t,s,"value",e,r,n),s}function Ad(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Ite(t,a,l)),o.forEach(a=>{const l=Cte(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Cte(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ite(t,e,n){if(e.childName==null||n.childName==null)throw Gu("Should only compare child_ events.");const r=new Be(e.childName,e.snapshotNode),s=new Be(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t,e){return{eventCache:t,serverCache:e}}function yh(t,e,n,r){return kv(new Pl(e,n,r),t.serverCache)}function yF(t,e,n,r){return kv(t.eventCache,new Pl(e,n,r))}function FE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Dl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sw;const kte=()=>(Sw||(Sw=new xr(hee)),Sw);class gt{static fromObject(e){let n=new gt(null);return Dn(e,(r,s)=>{n=n.set(new dt(r),s)}),n}constructor(e,n=kte()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ot(),value:this.value};if($e(e))return null;{const r=Ue(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(yt(e),n);return i!=null?{path:Ut(new dt(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const n=Ue(e),r=this.children.get(n);return r!==null?r.subtree(yt(e)):new gt(null)}}set(e,n){if($e(e))return new gt(n,this.children);{const r=Ue(e),i=(this.children.get(r)||new gt(null)).set(yt(e),n),o=this.children.insert(r,i);return new gt(this.value,o)}}remove(e){if($e(e))return this.children.isEmpty()?new gt(null):new gt(null,this.children);{const n=Ue(e),r=this.children.get(n);if(r){const s=r.remove(yt(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new gt(null):new gt(this.value,i)}else return this}}get(e){if($e(e))return this.value;{const n=Ue(e),r=this.children.get(n);return r?r.get(yt(e)):null}}setTree(e,n){if($e(e))return n;{const r=Ue(e),i=(this.children.get(r)||new gt(null)).setTree(yt(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new gt(this.value,o)}}fold(e){return this.fold_(ot(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ut(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ot(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if($e(e))return null;{const i=Ue(e),o=this.children.get(i);return o?o.findOnPath_(yt(e),Ut(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ot(),n)}foreachOnPath_(e,n,r){if($e(e))return this;{this.value&&r(n,this.value);const s=Ue(e),i=this.children.get(s);return i?i.foreachOnPath_(yt(e),Ut(n,s),r):new gt(null)}}foreach(e){this.foreach_(ot(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ut(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.writeTree_=e}static empty(){return new Ps(new gt(null))}}function vh(t,e,n){if($e(e))return new Ps(new gt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Tr(s,e);return i=i.updateChild(o,n),new Ps(t.writeTree_.set(s,i))}else{const s=new gt(n),i=t.writeTree_.setTree(e,s);return new Ps(i)}}}function VE(t,e,n){let r=t;return Dn(n,(s,i)=>{r=vh(r,Ut(e,s),i)}),r}function fA(t,e){if($e(e))return Ps.empty();{const n=t.writeTree_.setTree(e,new gt(null));return new Ps(n)}}function UE(t,e){return Xl(t,e)!=null}function Xl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Tr(n.path,e)):null}function pA(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Nt,(r,s)=>{e.push(new Be(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Be(r,s.value))}),e}function sa(t,e){if($e(e))return t;{const n=Xl(t,e);return n!=null?new Ps(new gt(n)):new Ps(t.writeTree_.subtree(e))}}function $E(t){return t.writeTree_.isEmpty()}function Su(t,e){return vF(ot(),t.writeTree_,e)}function vF(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ae(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=vF(Ut(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ut(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e){return bF(e,t)}function Rte(t,e,n,r,s){ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=vh(t.visibleWrites,e,n)),t.lastWriteId=r}function Ate(t,e,n,r){ae(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=VE(t.visibleWrites,e,n),t.lastWriteId=r}function Nte(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Pte(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Dte(a,r.path)?s=!1:rs(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Ote(t),!0;if(r.snap)t.visibleWrites=fA(t.visibleWrites,r.path);else{const a=r.children;Dn(a,l=>{t.visibleWrites=fA(t.visibleWrites,Ut(r.path,l))})}return!0}else return!1}function Dte(t,e){if(t.snap)return rs(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&rs(Ut(t.path,n),e))return!0;return!1}function Ote(t){t.visibleWrites=_F(t.allWrites,Mte,ot()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Mte(t){return t.visible}function _F(t,e,n){let r=Ps.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)rs(n,o)?(a=Tr(n,o),r=vh(r,a,i.snap)):rs(o,n)&&(a=Tr(o,n),r=vh(r,ot(),i.snap.getChild(a)));else if(i.children){if(rs(n,o))a=Tr(n,o),r=VE(r,a,i.children);else if(rs(o,n))if(a=Tr(o,n),$e(a))r=VE(r,ot(),i.children);else{const l=pu(i.children,Ue(a));if(l){const c=l.getChild(yt(a));r=vh(r,ot(),c)}}}else throw Gu("WriteRecord should have .snap or .children")}}return r}function wF(t,e,n,r,s){if(!r&&!s){const i=Xl(t.visibleWrites,e);if(i!=null)return i;{const o=sa(t.visibleWrites,e);if($E(o))return n;if(n==null&&!UE(o,ot()))return null;{const a=n||Ie.EMPTY_NODE;return Su(o,a)}}}else{const i=sa(t.visibleWrites,e);if(!s&&$E(i))return n;if(!s&&n==null&&!UE(i,ot()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(rs(c.path,e)||rs(e,c.path))},a=_F(t.allWrites,o,e),l=n||Ie.EMPTY_NODE;return Su(a,l)}}}function Lte(t,e,n){let r=Ie.EMPTY_NODE;const s=Xl(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Nt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=sa(t.visibleWrites,e);return n.forEachChild(Nt,(o,a)=>{const l=Su(sa(i,new dt(o)),a);r=r.updateImmediateChild(o,l)}),pA(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=sa(t.visibleWrites,e);return pA(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function jte(t,e,n,r,s){ae(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ut(e,n);if(UE(t.visibleWrites,i))return null;{const o=sa(t.visibleWrites,i);return $E(o)?s.getChild(n):Su(o,s.getChild(n))}}function Fte(t,e,n,r){const s=Ut(e,n),i=Xl(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=sa(t.visibleWrites,s);return Su(o,r.getNode().getImmediateChild(n))}else return null}function Vte(t,e){return Xl(t.visibleWrites,e)}function Ute(t,e,n,r,s,i,o){let a;const l=sa(t.visibleWrites,e),c=Xl(l,ot());if(c!=null)a=c;else if(n!=null)a=Su(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),p=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=p.getNext();for(;m&&u.length<s;)h(m,r)!==0&&u.push(m),m=p.getNext();return u}else return[]}function $te(){return{visibleWrites:Ps.empty(),allWrites:[],lastWriteId:-1}}function Qg(t,e,n,r){return wF(t.writeTree,t.treePath,e,n,r)}function dS(t,e){return Lte(t.writeTree,t.treePath,e)}function mA(t,e,n,r){return jte(t.writeTree,t.treePath,e,n,r)}function Yg(t,e){return Vte(t.writeTree,Ut(t.treePath,e))}function Bte(t,e,n,r,s,i){return Ute(t.writeTree,t.treePath,e,n,r,s,i)}function hS(t,e,n){return Fte(t.writeTree,t.treePath,e,n)}function EF(t,e){return bF(Ut(t.treePath,e),t.writeTree)}function bF(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zte{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ae(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,df(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,uf(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Tu(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,df(r,e.snapshotNode,s.oldSnap));else throw Gu("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const TF=new Wte;class fS{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Pl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hS(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dl(this.viewCache_),i=Bte(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qte(t){return{filter:t}}function Hte(t,e){ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Gte(t,e,n,r,s){const i=new zte;let o,a;if(n.type===ks.OVERWRITE){const c=n;c.source.fromUser?o=BE(t,e,c.path,c.snap,r,s,i):(ae(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$e(c.path),o=Xg(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===ks.MERGE){const c=n;c.source.fromUser?o=Qte(t,e,c.path,c.children,r,s,i):(ae(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=zE(t,e,c.path,c.children,r,s,a,i))}else if(n.type===ks.ACK_USER_WRITE){const c=n;c.revert?o=Zte(t,e,c.path,r,s,i):o=Yte(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===ks.LISTEN_COMPLETE)o=Xte(t,e,n.path,r,i);else throw Gu("Unknown operation type: "+n.type);const l=i.getChanges();return Kte(e,o,l),{viewCache:o,changes:l}}function Kte(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=FE(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(mF(FE(e)))}}function xF(t,e,n,r,s,i){const o=e.eventCache;if(Yg(r,n)!=null)return e;{let a,l;if($e(n))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Dl(e),u=c instanceof Ie?c:Ie.EMPTY_NODE,h=dS(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=Qg(r,Dl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=Ue(n);if(c===".priority"){ae(ya(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=mA(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=yt(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=mA(r,n,o.getNode(),l);p!=null?h=o.getNode().getImmediateChild(c).updateChild(u,p):h=o.getNode().getImmediateChild(c)}else h=hS(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,s,i):a=o.getNode()}}return yh(e,a,o.isFullyInitialized()||$e(n),t.filter.filtersNodes())}}function Xg(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if($e(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),m,null)}else{const m=Ue(n);if(!l.isCompleteForPath(n)&&ya(n)>1)return e;const _=yt(n),w=l.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?c=u.updatePriority(l.getNode(),w):c=u.updateChild(l.getNode(),m,w,_,TF,null)}const h=yF(e,c,l.isFullyInitialized()||$e(n),u.filtersNodes()),p=new fS(s,h,i);return xF(t,h,n,s,p,a)}function BE(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const u=new fS(s,e,i);if($e(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=yh(e,c,!0,t.filter.filtersNodes());else{const h=Ue(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=yh(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=yt(n),m=a.getNode().getImmediateChild(h);let _;if($e(p))_=r;else{const y=u.getCompleteChild(h);y!=null?eS(p)===".priority"&&y.getChild(aF(p)).isEmpty()?_=y:_=y.updateChild(p,r):_=Ie.EMPTY_NODE}if(m.equals(_))l=e;else{const y=t.filter.updateChild(a.getNode(),h,_,p,u,o);l=yh(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function gA(t,e){return t.eventCache.isCompleteForChild(e)}function Qte(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const u=Ut(n,l);gA(e,Ue(u))&&(a=BE(t,a,u,c,s,i,o))}),r.foreach((l,c)=>{const u=Ut(n,l);gA(e,Ue(u))||(a=BE(t,a,u,c,s,i,o))}),a}function yA(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function zE(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$e(n)?c=r:c=new gt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,p)=>{if(u.hasChild(h)){const m=e.serverCache.getNode().getImmediateChild(h),_=yA(t,m,p);l=Xg(t,l,new dt(h),_,s,i,o,a)}}),c.children.inorderTraversal((h,p)=>{const m=!e.serverCache.isCompleteForChild(h)&&p.value===null;if(!u.hasChild(h)&&!m){const _=e.serverCache.getNode().getImmediateChild(h),y=yA(t,_,p);l=Xg(t,l,new dt(h),y,s,i,o,a)}}),l}function Yte(t,e,n,r,s,i,o){if(Yg(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if($e(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Xg(t,e,n,l.getNode().getChild(n),s,i,a,o);if($e(n)){let c=new gt(null);return l.getNode().forEachChild(pl,(u,h)=>{c=c.set(new dt(u),h)}),zE(t,e,n,c,s,i,a,o)}else return e}else{let c=new gt(null);return r.foreach((u,h)=>{const p=Ut(n,u);l.isCompleteForPath(p)&&(c=c.set(u,l.getNode().getChild(p)))}),zE(t,e,n,c,s,i,a,o)}}function Xte(t,e,n,r,s){const i=e.serverCache,o=yF(e,i.getNode(),i.isFullyInitialized()||$e(n),i.isFiltered());return xF(t,o,n,r,TF,s)}function Zte(t,e,n,r,s,i){let o;if(Yg(r,n)!=null)return e;{const a=new fS(r,e,s),l=e.eventCache.getNode();let c;if($e(n)||Ue(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Qg(r,Dl(e));else{const h=e.serverCache.getNode();ae(h instanceof Ie,"serverChildren would be complete if leaf node"),u=dS(r,h)}u=u,c=t.filter.updateFullNode(l,u,i)}else{const u=Ue(n);let h=hS(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,yt(n),a,i):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Ie.EMPTY_NODE,yt(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Qg(r,Dl(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||Yg(r,ot())!=null,yh(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jte{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new iS(r.getIndex()),i=mte(r);this.processor_=qte(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(Ie.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Ie.EMPTY_NODE,a.getNode(),null),u=new Pl(l,o.isFullyInitialized(),s.filtersNodes()),h=new Pl(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=kv(h,u),this.eventGenerator_=new xte(this.query_)}get query(){return this.query_}}function ene(t){return t.viewCache_.serverCache.getNode()}function tne(t,e){const n=Dl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$e(e)&&!n.getImmediateChild(Ue(e)).isEmpty())?n.getChild(e):null}function vA(t){return t.eventRegistrations_.length===0}function nne(t,e){t.eventRegistrations_.push(e)}function _A(t,e,n){const r=[];if(n){ae(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function wA(t,e,n,r){e.type===ks.MERGE&&e.source.queryId!==null&&(ae(Dl(t.viewCache_),"We should always have a full cache before handling merges"),ae(FE(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Gte(t.processor_,s,e,n,r);return Hte(t.processor_,i.viewCache),ae(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,SF(t,i.changes,i.viewCache.eventCache.getNode(),null)}function rne(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Nt,(i,o)=>{r.push(Tu(i,o))}),n.isFullyInitialized()&&r.push(mF(n.getNode())),SF(t,r,n.getNode(),e)}function SF(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Ste(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg;class sne{constructor(){this.views=new Map}}function ine(t){ae(!Zg,"__referenceConstructor has already been defined"),Zg=t}function one(){return ae(Zg,"Reference.ts has not been loaded"),Zg}function ane(t){return t.views.size===0}function pS(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ae(i!=null,"SyncTree gave us an op for an invalid query."),wA(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(wA(o,e,n,r));return i}}function lne(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Qg(n,s?r:null),l=!1;a?l=!0:r instanceof Ie?(a=dS(n,r),l=!1):(a=Ie.EMPTY_NODE,l=!1);const c=kv(new Pl(a,l,!1),new Pl(r,s,!1));return new Jte(e,c)}return o}function cne(t,e,n,r,s,i){const o=lne(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),nne(o,n),rne(o,n)}function une(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=va(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(_A(c,n,r)),vA(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(_A(l,n,r)),vA(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!va(t)&&i.push(new(one())(e._repo,e._path)),{removed:i,events:o}}function CF(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Gc(t,e){let n=null;for(const r of t.views.values())n=n||tne(r,e);return n}function IF(t,e){if(e._queryParams.loadsAllData())return Rv(t);{const r=e._queryIdentifier;return t.views.get(r)}}function kF(t,e){return IF(t,e)!=null}function va(t){return Rv(t)!=null}function Rv(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jg;function dne(t){ae(!Jg,"__referenceConstructor has already been defined"),Jg=t}function hne(){return ae(Jg,"Reference.ts has not been loaded"),Jg}let fne=1;class EA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gt(null),this.pendingWriteTree_=$te(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RF(t,e,n,r,s){return Rte(t.pendingWriteTree_,e,n,r,s),s?nd(t,new Nl(aS(),e,n)):[]}function pne(t,e,n,r){Ate(t.pendingWriteTree_,e,n,r);const s=gt.fromObject(n);return nd(t,new xu(aS(),e,s))}function Bo(t,e,n=!1){const r=Nte(t.pendingWriteTree_,e);if(Pte(t.pendingWriteTree_,e)){let i=new gt(null);return r.snap!=null?i=i.set(ot(),!0):Dn(r.children,o=>{i=i.set(new dt(o),!0)}),nd(t,new Kg(r.path,i,n))}else return[]}function Av(t,e,n){return nd(t,new Nl(lS(),e,n))}function mne(t,e,n){const r=gt.fromObject(n);return nd(t,new xu(lS(),e,r))}function gne(t,e){return nd(t,new ff(lS(),e))}function yne(t,e,n){const r=gS(t,n);if(r){const s=yS(r),i=s.path,o=s.queryId,a=Tr(i,e),l=new ff(cS(o),a);return vS(t,i,l)}else return[]}function WE(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||kF(o,e))){const l=une(o,e,n,r);ane(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=l.removed;if(a=l.events,!s){const u=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(p,m)=>va(m));if(u&&!h){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=wne(p);for(let _=0;_<m.length;++_){const y=m[_],w=y.query,b=PF(t,y);t.listenProvider_.startListening(_h(w),ey(t,w),b.hashFn,b.onComplete)}}}!h&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(_h(e),null):c.forEach(p=>{const m=t.queryToTagMap.get(Nv(p));t.listenProvider_.stopListening(_h(p),m)}))}Ene(t,c)}return a}function vne(t,e,n,r){const s=gS(t,r);if(s!=null){const i=yS(s),o=i.path,a=i.queryId,l=Tr(o,e),c=new Nl(cS(a),l,n);return vS(t,o,c)}else return[]}function _ne(t,e,n,r){const s=gS(t,r);if(s){const i=yS(s),o=i.path,a=i.queryId,l=Tr(o,e),c=gt.fromObject(n),u=new xu(cS(a),l,c);return vS(t,o,u)}else return[]}function bA(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(p,m)=>{const _=Tr(p,s);i=i||Gc(m,_),o=o||va(m)});let a=t.syncPointTree_.get(s);a?(o=o||va(a),i=i||Gc(a,ot())):(a=new sne,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=Ie.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((m,_)=>{const y=Gc(_,ot());y&&(i=i.updateImmediateChild(m,y))}));const c=kF(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=Nv(e);ae(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=bne();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const u=uS(t.pendingWriteTree_,s);let h=cne(a,e,n,u,i,l);if(!c&&!o&&!r){const p=IF(a,e);h=h.concat(Tne(t,e,p))}return h}function mS(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Tr(o,e),c=Gc(a,l);if(c)return c});return wF(s,e,i,n,!0)}function nd(t,e){return AF(e,t.syncPointTree_,null,uS(t.pendingWriteTree_,ot()))}function AF(t,e,n,r){if($e(t.path))return NF(t,e,n,r);{const s=e.get(ot());n==null&&s!=null&&(n=Gc(s,ot()));let i=[];const o=Ue(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=EF(r,o);i=i.concat(AF(a,l,c,u))}return s&&(i=i.concat(pS(s,t,r,n))),i}}function NF(t,e,n,r){const s=e.get(ot());n==null&&s!=null&&(n=Gc(s,ot()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=EF(r,o),u=t.operationForChild(o);u&&(i=i.concat(NF(u,a,l,c)))}),s&&(i=i.concat(pS(s,t,r,n))),i}function PF(t,e){const n=e.query,r=ey(t,n);return{hashFn:()=>(ene(e)||Ie.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?yne(t,n._path,r):gne(t,n._path);{const i=mee(s,n);return WE(t,n,null,i)}}}}function ey(t,e){const n=Nv(e);return t.queryToTagMap.get(n)}function Nv(t){return t._path.toString()+"$"+t._queryIdentifier}function gS(t,e){return t.tagToQueryMap.get(e)}function yS(t){const e=t.indexOf("$");return ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new dt(t.substr(0,e))}}function vS(t,e,n){const r=t.syncPointTree_.get(e);ae(r,"Missing sync point for query tag that we're tracking");const s=uS(t.pendingWriteTree_,e);return pS(r,n,s,null)}function wne(t){return t.fold((e,n,r)=>{if(n&&va(n))return[Rv(n)];{let s=[];return n&&(s=CF(n)),Dn(r,(i,o)=>{s=s.concat(o)}),s}})}function _h(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(hne())(t._repo,t._path):t}function Ene(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Nv(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function bne(){return fne++}function Tne(t,e,n){const r=e._path,s=ey(t,e),i=PF(t,n),o=t.listenProvider_.startListening(_h(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)ae(!va(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!$e(c)&&u&&va(u))return[Rv(u).query];{let p=[];return u&&(p=p.concat(CF(u).map(m=>m.query))),Dn(h,(m,_)=>{p=p.concat(_)}),p}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(_h(u),ey(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new _S(n)}node(){return this.node_}}class wS{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ut(this.path_,e);return new wS(this.syncTree_,n)}node(){return mS(this.syncTree_,this.path_)}}const xne=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},TA=function(t,e,n){if(!t||typeof t!="object")return t;if(ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Sne(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Cne(t[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Sne=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ae(!1,"Unexpected server value: "+t)}},Cne=function(t,e,n){t.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ae(!1,"Unexpected increment value: "+r);const s=e.node();if(ae(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},DF=function(t,e,n,r){return ES(e,new wS(n,t),r)},OF=function(t,e,n){return ES(t,new _S(e),n)};function ES(t,e,n){const r=t.getPriority().val(),s=TA(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=TA(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new pn(a,vn(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new pn(s))),o.forEachChild(Nt,(a,l)=>{const c=ES(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function TS(t,e){let n=e instanceof dt?e:new dt(e),r=t,s=Ue(n);for(;s!==null;){const i=pu(r.node.children,s)||{children:{},childCount:0};r=new bS(s,r,i),n=yt(n),s=Ue(n)}return r}function rd(t){return t.node.value}function MF(t,e){t.node.value=e,qE(t)}function LF(t){return t.node.childCount>0}function Ine(t){return rd(t)===void 0&&!LF(t)}function Pv(t,e){Dn(t.node.children,(n,r)=>{e(new bS(n,t,r))})}function jF(t,e,n,r){n&&!r&&e(t),Pv(t,s=>{jF(s,e,!0,r)}),n&&r&&e(t)}function kne(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function sp(t){return new dt(t.parent===null?t.name:sp(t.parent)+"/"+t.name)}function qE(t){t.parent!==null&&Rne(t.parent,t.name,t)}function Rne(t,e,n){const r=Ine(n),s=Ei(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,qE(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,qE(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ane=/[\[\].#$\/\u0000-\u001F\u007F]/,Nne=/[\[\].#$\u0000-\u001F\u007F]/,Cw=10*1024*1024,xS=function(t){return typeof t=="string"&&t.length!==0&&!Ane.test(t)},FF=function(t){return typeof t=="string"&&t.length!==0&&!Nne.test(t)},Pne=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),FF(t)},HE=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Qx(t)||t&&typeof t=="object"&&Ei(t,".sv")},VF=function(t,e,n,r){r&&e===void 0||Dv(nv(t,"value"),e,n)},Dv=function(t,e,n){const r=n instanceof dt?new Qee(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ua(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ua(r)+" with contents = "+e.toString());if(Qx(e))throw new Error(t+"contains "+e.toString()+" "+Ua(r));if(typeof e=="string"&&e.length>Cw/3&&rv(e)>Cw)throw new Error(t+"contains a string greater than "+Cw+" utf8 bytes "+Ua(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Dn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!xS(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ua(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Yee(r,o),Dv(t,a,r),Xee(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ua(r)+" in addition to actual children.")}},Dne=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=cf(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!xS(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Kee);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&rs(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},One=function(t,e,n,r){const s=nv(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Dn(e,(o,a)=>{const l=new dt(o);if(Dv(s,a,Ut(n,l)),eS(l)===".priority"&&!HE(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(l)}),Dne(s,i)},SS=function(t,e,n,r){if(!FF(n))throw new Error(nv(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Mne=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),SS(t,e,n)},UF=function(t,e){if(Ue(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Lne=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Pne(n))throw new Error(nv(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jne{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ov(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!tS(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function $F(t,e,n){Ov(t,n),BF(t,r=>tS(r,e))}function js(t,e,n){Ov(t,n),BF(t,r=>rs(r,e)||rs(e,r))}function BF(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Fne(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Fne(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();mh&&kn("event: "+n.toString()),td(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vne="repo_interrupt",Une=25;class $ne{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jne,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gg(),this.transactionQueueTree_=new bS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Bne(t,e,n){if(t.stats_=Zx(t.repoInfo_),t.forceRestClient_||_ee())t.server_=new Hg(t.repoInfo_,(r,s,i,o)=>{xA(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>SA(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_n(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ki(t.repoInfo_,e,(r,s,i,o)=>{xA(t,r,s,i,o)},r=>{SA(t,r)},r=>{zne(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=xee(t.repoInfo_,()=>new Tte(t.stats_,t.server_)),t.infoData_=new vte,t.infoSyncTree_=new EA({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Av(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),CS(t,"connected",!1),t.serverSyncTree_=new EA({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);js(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function zF(t){const n=t.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Mv(t){return xne({timestamp:zF(t)})}function xA(t,e,n,r,s){t.dataUpdateCount++;const i=new dt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=xg(n,c=>vn(c));o=_ne(t.serverSyncTree_,i,l,s)}else{const l=vn(n);o=vne(t.serverSyncTree_,i,l,s)}else if(r){const l=xg(n,c=>vn(c));o=mne(t.serverSyncTree_,i,l)}else{const l=vn(n);o=Av(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=Cu(t,i)),js(t.eventQueue_,a,o)}function SA(t,e){CS(t,"connected",e),e===!1&&Hne(t)}function zne(t,e){Dn(e,(n,r)=>{CS(t,n,r)})}function CS(t,e,n){const r=new dt("/.info/"+e),s=vn(n);t.infoData_.updateSnapshot(r,s);const i=Av(t.infoSyncTree_,r,s);js(t.eventQueue_,r,i)}function IS(t){return t.nextWriteId_++}function Wne(t,e,n,r,s){Lv(t,"set",{path:e.toString(),value:n,priority:r});const i=Mv(t),o=vn(n,r),a=mS(t.serverSyncTree_,e),l=OF(o,a,i),c=IS(t),u=RF(t.serverSyncTree_,e,l,c,!0);Ov(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const _=p==="ok";_||ir("set at "+e+" failed: "+p);const y=Bo(t.serverSyncTree_,c,!_);js(t.eventQueue_,e,y),KE(t,s,p,m)});const h=RS(t,e);Cu(t,h),js(t.eventQueue_,h,[])}function qne(t,e,n,r){Lv(t,"update",{path:e.toString(),value:n});let s=!0;const i=Mv(t),o={};if(Dn(n,(a,l)=>{s=!1,o[a]=DF(Ut(e,a),vn(l),t.serverSyncTree_,i)}),s)kn("update() called with empty data.  Don't do anything."),KE(t,r,"ok",void 0);else{const a=IS(t),l=pne(t.serverSyncTree_,e,o,a);Ov(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const h=c==="ok";h||ir("update at "+e+" failed: "+c);const p=Bo(t.serverSyncTree_,a,!h),m=p.length>0?Cu(t,e):e;js(t.eventQueue_,m,p),KE(t,r,c,u)}),Dn(n,c=>{const u=RS(t,Ut(e,c));Cu(t,u)}),js(t.eventQueue_,e,[])}}function Hne(t){Lv(t,"onDisconnectEvents");const e=Mv(t),n=Gg();jE(t.onDisconnect_,ot(),(s,i)=>{const o=DF(s,i,t.serverSyncTree_,e);gF(n,s,o)});let r=[];jE(n,ot(),(s,i)=>{r=r.concat(Av(t.serverSyncTree_,s,i));const o=RS(t,s);Cu(t,o)}),t.onDisconnect_=Gg(),js(t.eventQueue_,ot(),r)}function Gne(t,e,n){let r;Ue(e._path)===".info"?r=bA(t.infoSyncTree_,e,n):r=bA(t.serverSyncTree_,e,n),$F(t.eventQueue_,e._path,r)}function GE(t,e,n){let r;Ue(e._path)===".info"?r=WE(t.infoSyncTree_,e,n):r=WE(t.serverSyncTree_,e,n),$F(t.eventQueue_,e._path,r)}function Kne(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Vne)}function Lv(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),kn(n,...e)}function KE(t,e,n,r){e&&td(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function WF(t,e,n){return mS(t.serverSyncTree_,e,n)||Ie.EMPTY_NODE}function kS(t,e=t.transactionQueueTree_){if(e||jv(t,e),rd(e)){const n=HF(t,e);ae(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Qne(t,sp(e),n)}else LF(e)&&Pv(e,n=>{kS(t,n)})}function Qne(t,e,n){const r=n.map(c=>c.currentWriteId),s=WF(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];ae(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Tr(e,u.path);i=i.updateChild(h,u.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Lv(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let p=0;p<n.length;p++)n[p].status=2,u=u.concat(Bo(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&h.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();jv(t,TS(t.transactionQueueTree_,e)),kS(t,t.transactionQueueTree_),js(t.eventQueue_,e,u);for(let p=0;p<h.length;p++)td(h[p])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{ir("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Cu(t,e)}},o)}function Cu(t,e){const n=qF(t,e),r=sp(n),s=HF(t,n);return Yne(t,s,r),r}function Yne(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Tr(n,l.path);let u=!1,h;if(ae(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(Bo(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Une)u=!0,h="maxretry",s=s.concat(Bo(t.serverSyncTree_,l.currentWriteId,!0));else{const p=WF(t,l.path,o);l.currentInputSnapshot=p;const m=e[a].update(p.val());if(m!==void 0){Dv("transaction failed: Data returned ",m,l.path);let _=vn(m);typeof m=="object"&&m!=null&&Ei(m,".priority")||(_=_.updatePriority(p.getPriority()));const w=l.currentWriteId,b=Mv(t),E=OF(_,p,b);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=E,l.currentWriteId=IS(t),o.splice(o.indexOf(w),1),s=s.concat(RF(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),s=s.concat(Bo(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",s=s.concat(Bo(t.serverSyncTree_,l.currentWriteId,!0))}js(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}jv(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)td(r[a]);kS(t,t.transactionQueueTree_)}function qF(t,e){let n,r=t.transactionQueueTree_;for(n=Ue(e);n!==null&&rd(r)===void 0;)r=TS(r,n),e=yt(e),n=Ue(e);return r}function HF(t,e){const n=[];return GF(t,e,n),n.sort((r,s)=>r.order-s.order),n}function GF(t,e,n){const r=rd(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Pv(e,s=>{GF(t,s,n)})}function jv(t,e){const n=rd(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,MF(e,n.length>0?n:void 0)}Pv(e,r=>{jv(t,r)})}function RS(t,e){const n=sp(qF(t,e)),r=TS(t.transactionQueueTree_,e);return kne(r,s=>{Iw(t,s)}),Iw(t,r),jF(r,s=>{Iw(t,s)}),n}function Iw(t,e){const n=rd(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ae(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Bo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?MF(e,void 0):n.length=i+1,js(t.eventQueue_,sp(e),s);for(let o=0;o<r.length;o++)td(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xne(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Zne(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ir(`Invalid query segment '${n}' in query '${t}'`)}return e}const CA=function(t,e){const n=Jne(t),r=n.namespace;n.domain==="firebase.com"&&io(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&io("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uee();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Zj(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new dt(n.pathString)}},Jne=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=Xne(t.substring(u,h)));const p=Zne(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),i=r}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ere=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=IA.charAt(n%64),n=Math.floor(n/64);ae(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=IA.charAt(e[s]);return ae(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_n(this.snapshot.exportVal())}}class QF{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return $e(this._path)?null:eS(this._path)}get ref(){return new ho(this._repo,this._path)}get _queryIdentifier(){const e=dA(this._queryParams),n=Yx(e);return n==="{}"?"default":n}get _queryObject(){return dA(this._queryParams)}isEqual(e){if(e=Ve(e),!(e instanceof ip))return!1;const n=this._repo===e._repo,r=tS(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Gee(this._path)}}function tre(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function nre(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===pl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Al)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==ga)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===Nt){if(e!=null&&!HE(e)||n!=null&&!HE(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ae(t.getIndex()instanceof sS||t.getIndex()===pF,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class ho extends ip{constructor(e,n){super(e,n,new oS,!1)}get parent(){const e=aF(this._path);return e===null?null:new ho(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class pf{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new dt(e),r=Iu(this.ref,e);return new pf(this._node.getChild(n),r,Nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new pf(s,Iu(this.ref,r),Nt)))}hasChild(e){const n=new dt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yc(t,e){return t=Ve(t),t._checkNotDeleted("ref"),e!==void 0?Iu(t._root,e):t._root}function Iu(t,e){return t=Ve(t),Ue(t._path)===null?Mne("child","path",e):SS("child","path",e),new ho(t._repo,Ut(t._path,e))}function Rfe(t,e){t=Ve(t),UF("push",t._path),VF("push",e,t._path,!0);const n=zF(t._repo),r=ere(n),s=Iu(t,r),i=Iu(t,r);let o;return e!=null?o=QE(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function QE(t,e){t=Ve(t),UF("set",t._path),VF("set",e,t._path,!1);const n=new jf;return Wne(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function rre(t,e){One("update",e,t._path);const n=new jf;return qne(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class Fv{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new KF("value",this,new pf(e.snapshotNode,new ho(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new QF(this,e,n):null}matches(e){return e instanceof Fv?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Vv{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new QF(this,e,n):null}createEvent(e,n){ae(e.childName!=null,"Child events should have a childName.");const r=Iu(new ho(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new KF(e.type,this,new pf(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Vv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function XF(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const l=n,c=(u,h)=>{GE(t._repo,t,a),l(u,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new YF(n,i||void 0),a=e==="value"?new Fv(o):new Vv(e,o);return Gne(t._repo,t,a),()=>GE(t._repo,t,a)}function kA(t,e,n,r){return XF(t,"value",e,n,r)}function sre(t,e,n,r){return XF(t,"child_added",e,n,r)}function ZF(t,e,n){let r=null;const s=n?new YF(n):null;e==="value"?r=new Fv(s):e&&(r=new Vv(e,s)),GE(t._repo,t,r)}class JF{}class ire extends JF{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ip(e._repo,e._path,gte(e._queryParams,this._limit),e._orderByCalled)}}function ore(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ire(t)}class are extends JF{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){tre(e,"orderByChild");const n=new dt(this._path);if($e(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new sS(n),s=yte(e._queryParams,r);return nre(s),new ip(e._repo,e._path,s,!0)}}function lre(t){return SS("orderByChild","path",t),new are(t)}function RA(t,...e){let n=Ve(t);for(const r of e)n=r._apply(n);return n}ine(ho);dne(ho);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre="FIREBASE_DATABASE_EMULATOR_HOST",YE={};let ure=!1;function dre(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=wi(i);t.repoInfo_=new Zj(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function hre(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||io("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=CA(i,s),a=o.repoInfo,l;typeof process<"u"&&GR&&(l=GR[cre]),l?(i=`http://${l}?ns=${a.namespace}`,o=CA(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new Eee(t.name,t.options,e);Lne("Invalid Firebase Database URL",o),$e(o.path)||io("Database URL must point to the root of a Firebase Database (not including a child path).");const u=pre(a,t,c,new wee(t,n));return new mre(u,t)}function fre(t,e){const n=YE[e];(!n||n[t.key]!==t)&&io(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Kne(t),delete n[t.key]}function pre(t,e,n,r){let s=YE[e.name];s||(s={},YE[e.name]=s);let i=s[t.toURLString()];return i&&io("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new $ne(t,ure,n,r),s[t.toURLString()]=i,i}class mre{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Bne(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ho(this._repo,ot())),this._rootInternal}_delete(){return this._rootInternal!==null&&(fre(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&io("Cannot call "+e+" on a deleted database.")}}function gre(t=Gl(),e){const n=bi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=HT("database");r&&yre(n,...r)}return n}function yre(t,e,n,r={}){t=Ve(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&pi(r,i.repoInfo_.emulatorOptions))return;io("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&io('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Mm(Mm.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:GT(r.mockUserToken,t.app.options.projectId);o=new Mm(a)}wi(e)&&(ev(e),tv("Database",!0)),dre(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vre(t){see(Ia),Ar(new or("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return hre(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),bn(KR,QR,t),bn(KR,QR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _re={".sv":"timestamp"};function Afe(){return _re}Ki.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ki.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};vre();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="firebasestorage.googleapis.com",tV="storageBucket",wre=2*60*1e3,Ere=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends cs{constructor(e,n,r=0){super(kw(e),`Firebase Storage: ${n} (${kw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zt||(zt={}));function kw(t){return"storage/"+t}function AS(){const t="An unknown error occurred, please check the error payload for server response.";return new Wt(zt.UNKNOWN,t)}function bre(t){return new Wt(zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Tre(t){return new Wt(zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xre(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wt(zt.UNAUTHENTICATED,t)}function Sre(){return new Wt(zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Cre(t){return new Wt(zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Ire(){return new Wt(zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kre(){return new Wt(zt.CANCELED,"User canceled the upload/download.")}function Rre(t){return new Wt(zt.INVALID_URL,"Invalid URL '"+t+"'.")}function Are(t){return new Wt(zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Nre(){return new Wt(zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tV+"' property when initializing the app?")}function Pre(){return new Wt(zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Dre(){return new Wt(zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ore(t){return new Wt(zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function XE(t){return new Wt(zt.INVALID_ARGUMENT,t)}function nV(){return new Wt(zt.APP_DELETED,"The Firebase app was deleted.")}function Mre(t){return new Wt(zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wh(t,e){return new Wt(zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Nd(t){throw new Wt(zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Fr.makeFromUrl(e,n)}catch{return new Fr(e,"")}if(r.path==="")return r;throw Are(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${s}/o${p}`,"i"),_={bucket:1,path:3},y=n===eV?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",b=new RegExp(`^https?://${y}/${s}/${w}`,"i"),x=[{regex:a,indices:l,postModify:i},{regex:m,indices:_,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<x.length;R++){const O=x[R],L=O.regex.exec(e);if(L){const k=L[O.indices.bucket];let S=L[O.indices.path];S||(S=""),r=new Fr(k,S),O.postModify(r);break}}if(r==null)throw Rre(e);return r}}class Lre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jre(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,t(m,l())},w)}function p(){i&&clearTimeout(i)}function m(w,...b){if(c){p();return}if(w){p(),u.call(null,w,...b);return}if(l()||o){p(),u.call(null,w,...b);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,h(x)}let _=!1;function y(w){_||(_=!0,p(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function Fre(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vre(t){return t!==void 0}function Ure(t){return typeof t=="object"&&!Array.isArray(t)}function NS(t){return typeof t=="string"||t instanceof String}function AA(t){return PS()&&t instanceof Blob}function PS(){return typeof Blob<"u"}function NA(t,e,n,r){if(r<e)throw XE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw XE(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function rV(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ml;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ml||(ml={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $re(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(e,n,r,s,i,o,a,l,c,u,h,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new rm(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ml.NO_ERROR,l=i.getStatus();if(!a||$re(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===ml.ABORT;r(!1,new rm(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new rm(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Vre(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=AS();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?nV():kre();o(l)}else{const l=Ire();o(l)}};this.canceled_?n(!1,new rm(!1,null,!0)):this.backoffId_=jre(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Fre(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function zre(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Wre(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qre(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Hre(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Gre(t,e,n,r,s,i,o=!0,a=!1){const l=rV(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return qre(u,e),zre(u,n),Wre(u,i),Hre(u,r),new Bre(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kre(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Qre(...t){const e=Kre();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(PS())return new Blob(t);throw new Wt(zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Yre(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xre(t){if(typeof atob>"u")throw Ore("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rw{constructor(e,n){this.data=e,this.contentType=n||null}}function Zre(t,e){switch(t){case Zs.RAW:return new Rw(sV(e));case Zs.BASE64:case Zs.BASE64URL:return new Rw(iV(t,e));case Zs.DATA_URL:return new Rw(ese(e),tse(e))}throw AS()}function sV(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Jre(t){let e;try{e=decodeURIComponent(t)}catch{throw wh(Zs.DATA_URL,"Malformed data URL.")}return sV(e)}function iV(t,e){switch(t){case Zs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw wh(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Zs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw wh(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Xre(e)}catch(s){throw s.message.includes("polyfill")?s:wh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class oV{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wh(Zs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=nse(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ese(t){const e=new oV(t);return e.base64?iV(Zs.BASE64,e.rest):Jre(e.rest)}function tse(t){return new oV(t).contentType}function nse(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){let r=0,s="";AA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(AA(this.data_)){const r=this.data_,s=Yre(r,e,n);return s===null?null:new Po(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Po(r,!0)}}static getBlob(...e){if(PS()){const n=e.map(r=>r instanceof Po?r.data_:r);return new Po(Qre.apply(null,n))}else{const n=e.map(o=>NS(o)?Zre(Zs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Po(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){let e;try{e=JSON.parse(t)}catch{return null}return Ure(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function sse(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function lV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ise(t,e){return e}class Yn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||ise}}let sm=null;function ose(t){return!NS(t)||t.length<2?t:lV(t)}function cV(){if(sm)return sm;const t=[];t.push(new Yn("bucket")),t.push(new Yn("generation")),t.push(new Yn("metageneration")),t.push(new Yn("name","fullPath",!0));function e(i,o){return ose(o)}const n=new Yn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Yn("size");return s.xform=r,t.push(s),t.push(new Yn("timeCreated")),t.push(new Yn("updated")),t.push(new Yn("md5Hash",null,!0)),t.push(new Yn("cacheControl",null,!0)),t.push(new Yn("contentDisposition",null,!0)),t.push(new Yn("contentEncoding",null,!0)),t.push(new Yn("contentLanguage",null,!0)),t.push(new Yn("contentType",null,!0)),t.push(new Yn("metadata","customMetadata",!0)),sm=t,sm}function ase(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Fr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function lse(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return ase(r,t),r}function uV(t,e,n){const r=aV(e);return r===null?null:lse(t,r,n)}function cse(t,e,n,r){const s=aV(e);if(s===null||!NS(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,h=t.fullPath,p="/b/"+o(u)+"/o/"+o(h),m=Uv(p,n,r),_=rV({alt:"media",token:c});return m+_})[0]}function use(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class DS{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){if(!t)throw AS()}function dse(t,e){function n(r,s){const i=uV(t,s,e);return dV(i!==null),i}return n}function hse(t,e){function n(r,s){const i=uV(t,s,e);return dV(i!==null),cse(i,s,t.host,t._protocol)}return n}function hV(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=Sre():s=xre():n.getStatus()===402?s=Tre(t.bucket):n.getStatus()===403?s=Cre(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function fV(t){const e=hV(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=bre(t.path)),i.serverResponse=s.serverResponse,i}return n}function fse(t,e,n){const r=e.fullServerUrl(),s=Uv(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new DS(s,i,hse(t,n),o);return a.errorHandler=fV(e),a}function pse(t,e){const n=e.fullServerUrl(),r=Uv(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new DS(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=fV(e),a}function mse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gse(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mse(null,e)),r}function yse(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let R=0;R<2;R++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=gse(e,r,s),u=use(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Po.getBlob(h,r,p);if(m===null)throw Pre();const _={name:c.fullPath},y=Uv(i,t.host,t._protocol),w="POST",b=t.maxUploadRetryTime,E=new DS(y,w,dse(t,n),b);return E.urlParams=_,E.headers=o,E.body=m.uploadData(),E.errorHandler=hV(e),E}class vse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ml.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ml.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ml.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Nd("cannot .send() more than once");if(wi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _se extends vse{initXhr(){this.xhr_.responseType="text"}}function OS(){return new _se}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this._service=e,n instanceof Fr?this._location=n:this._location=Fr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ol(e,n)}get root(){const e=new Fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lV(this._location.path)}get storage(){return this._service}get parent(){const e=rse(this._location.path);if(e===null)return null;const n=new Fr(this._location.bucket,e);return new Ol(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Mre(e)}}function wse(t,e,n){t._throwIfRoot("uploadBytes");const r=yse(t.storage,t._location,cV(),new Po(e,!0),n);return t.storage.makeRequestWithTokens(r,OS).then(s=>({metadata:s,ref:t}))}function Ese(t){t._throwIfRoot("getDownloadURL");const e=fse(t.storage,t._location,cV());return t.storage.makeRequestWithTokens(e,OS).then(n=>{if(n===null)throw Dre();return n})}function bse(t){t._throwIfRoot("deleteObject");const e=pse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,OS)}function Tse(t,e){const n=sse(t._location.path,e),r=new Fr(t._location.bucket,n);return new Ol(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xse(t){return/^[A-Za-z]+:\/\//.test(t)}function Sse(t,e){return new Ol(t,e)}function pV(t,e){if(t instanceof MS){const n=t;if(n._bucket==null)throw Nre();const r=new Ol(n,n._bucket);return e!=null?pV(r,e):r}else return e!==void 0?Tse(t,e):t}function Cse(t,e){if(e&&xse(e)){if(t instanceof MS)return Sse(t,e);throw XE("To use ref(service, url), the first argument must be a Storage instance.")}else return pV(t,e)}function PA(t,e){const n=e==null?void 0:e[tV];return n==null?null:Fr.makeFromBucketSpec(n,t)}function Ise(t,e,n,r={}){t.host=`${e}:${n}`;const s=wi(e);s&&(ev(`https://${t.host}/b`),tv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:GT(i,t.app.options.projectId))}class MS{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=eV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wre,this._maxUploadRetryTime=Ere,this._requests=new Set,s!=null?this._bucket=Fr.makeFromBucketSpec(s,this._host):this._bucket=PA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fr.makeFromBucketSpec(this._url,e):this._bucket=PA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ol(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Lre(nV());{const o=Gre(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const DA="@firebase/storage",OA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="storage";function kse(t,e,n){return t=Ve(t),wse(t,e,n)}function Rse(t){return t=Ve(t),Ese(t)}function Ase(t){return t=Ve(t),bse(t)}function MA(t,e){return t=Ve(t),Cse(t,e)}function Nse(t=Gl(),e){t=Ve(t);const r=bi(t,mV).getImmediate({identifier:e}),s=HT("storage");return s&&Pse(r,...s),r}function Pse(t,e,n,r={}){Ise(t,e,n,r)}function Dse(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new MS(n,r,s,e,Ia)}function Ose(){Ar(new or(mV,Dse,"PUBLIC").setMultipleInstances(!0)),bn(DA,OA,""),bn(DA,OA,"esm2020")}Ose();const gV="@firebase/installations",LS="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=1e4,vV=`w:${LS}`,_V="FIS_v2",Mse="https://firebaseinstallations.googleapis.com/v1",Lse=60*60*1e3,jse="installations",Fse="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ml=new Ca(jse,Fse,Vse);function wV(t){return t instanceof cs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV({projectId:t}){return`${Mse}/projects/${t}/installations`}function bV(t){return{token:t.token,requestStatus:2,expiresIn:$se(t.expiresIn),creationTime:Date.now()}}async function TV(t,e){const r=(await e.json()).error;return Ml.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function xV({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Use(t,{refreshToken:e}){const n=xV(t);return n.append("Authorization",Bse(e)),n}async function SV(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $se(t){return Number(t.replace("s","000"))}function Bse(t){return`${_V} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zse({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=EV(t),s=xV(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:_V,appId:t.appId,sdkVersion:vV},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await SV(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:bV(c.authToken)}}else throw await TV("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wse(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qse=/^[cdef][\w-]{21}$/,ZE="";function Hse(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Gse(t);return qse.test(n)?n:ZE}catch{return ZE}}function Gse(t){return Wse(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=new Map;function kV(t,e){const n=$v(t);RV(n,e),Kse(n,e)}function RV(t,e){const n=IV.get(t);if(n)for(const r of n)r(e)}function Kse(t,e){const n=Qse();n&&n.postMessage({key:t,fid:e}),Yse()}let el=null;function Qse(){return!el&&"BroadcastChannel"in self&&(el=new BroadcastChannel("[Firebase] FID Change"),el.onmessage=t=>{RV(t.data.key,t.data.fid)}),el}function Yse(){IV.size===0&&el&&(el.close(),el=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xse="firebase-installations-database",Zse=1,Ll="firebase-installations-store";let Aw=null;function jS(){return Aw||(Aw=sv(Xse,Zse,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ll)}}})),Aw}async function ty(t,e){const n=$v(t),s=(await jS()).transaction(Ll,"readwrite"),i=s.objectStore(Ll),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&kV(t,e.fid),e}async function AV(t){const e=$v(t),r=(await jS()).transaction(Ll,"readwrite");await r.objectStore(Ll).delete(e),await r.done}async function Bv(t,e){const n=$v(t),s=(await jS()).transaction(Ll,"readwrite"),i=s.objectStore(Ll),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&kV(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(t){let e;const n=await Bv(t.appConfig,r=>{const s=Jse(r),i=eie(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===ZE?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Jse(t){const e=t||{fid:Hse(),registrationStatus:0};return NV(e)}function eie(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ml.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=tie(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:nie(t)}:{installationEntry:e}}async function tie(t,e){try{const n=await zse(t,e);return ty(t.appConfig,n)}catch(n){throw wV(n)&&n.customData.serverCode===409?await AV(t.appConfig):await ty(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function nie(t){let e=await LA(t.appConfig);for(;e.registrationStatus===1;)await CV(100),e=await LA(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await FS(t);return r||n}return e}function LA(t){return Bv(t,e=>{if(!e)throw Ml.create("installation-not-found");return NV(e)})}function NV(t){return rie(t)?{fid:t.fid,registrationStatus:0}:t}function rie(t){return t.registrationStatus===1&&t.registrationTime+yV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sie({appConfig:t,heartbeatServiceProvider:e},n){const r=iie(t,n),s=Use(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:vV,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await SV(()=>fetch(r,a));if(l.ok){const c=await l.json();return bV(c)}else throw await TV("Generate Auth Token",l)}function iie(t,{fid:e}){return`${EV(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(t,e=!1){let n;const r=await Bv(t.appConfig,i=>{if(!PV(i))throw Ml.create("not-registered");const o=i.authToken;if(!e&&lie(o))return i;if(o.requestStatus===1)return n=oie(t,e),i;{if(!navigator.onLine)throw Ml.create("app-offline");const a=uie(i);return n=aie(t,a),a}});return n?await n:r.authToken}async function oie(t,e){let n=await jA(t.appConfig);for(;n.authToken.requestStatus===1;)await CV(100),n=await jA(t.appConfig);const r=n.authToken;return r.requestStatus===0?VS(t,e):r}function jA(t){return Bv(t,e=>{if(!PV(e))throw Ml.create("not-registered");const n=e.authToken;return die(n)?{...e,authToken:{requestStatus:0}}:e})}async function aie(t,e){try{const n=await sie(t,e),r={...e,authToken:n};return await ty(t.appConfig,r),n}catch(n){if(wV(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await AV(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ty(t.appConfig,r)}throw n}}function PV(t){return t!==void 0&&t.registrationStatus===2}function lie(t){return t.requestStatus===2&&!cie(t)}function cie(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Lse}function uie(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function die(t){return t.requestStatus===1&&t.requestTime+yV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hie(t){const e=t,{installationEntry:n,registrationPromise:r}=await FS(e);return r?r.catch(console.error):VS(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fie(t,e=!1){const n=t;return await pie(n),(await VS(n,e)).token}async function pie(t){const{registrationPromise:e}=await FS(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mie(t){if(!t||!t.options)throw Nw("App Configuration");if(!t.name)throw Nw("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Nw(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Nw(t){return Ml.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="installations",gie="installations-internal",yie=t=>{const e=t.getProvider("app").getImmediate(),n=mie(e),r=bi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},vie=t=>{const e=t.getProvider("app").getImmediate(),n=bi(e,DV).getImmediate();return{getId:()=>hie(n),getToken:s=>fie(n,s)}};function _ie(){Ar(new or(DV,yie,"PUBLIC")),Ar(new or(gie,vie,"PRIVATE"))}_ie();bn(gV,LS);bn(gV,LS,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="analytics",wie="firebase_id",Eie="origin",bie=60*1e3,Tie="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",US="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Ff("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xie={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$r=new Ca("analytics","Analytics",xie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(t){if(!t.startsWith(US)){const e=$r.create("invalid-gtag-resource",{gtagURL:t});return Rr.warn(e.message),""}return t}function OV(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Cie(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Iie(t,e){const n=Cie("firebase-js-sdk-policy",{createScriptURL:Sie}),r=document.createElement("script"),s=`${US}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function kie(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Rie(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await OV(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Rr.error(a)}t("config",s,i)}async function Aie(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await OV(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Rr.error(i)}}function Nie(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await Aie(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await Rie(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Rr.error(a)}}return s}function Pie(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=Nie(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function Die(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(US)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oie=30,Mie=1e3;class Lie{constructor(e={},n=Mie){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const MV=new Lie;function jie(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Fie(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:jie(n)},s=Tie.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const l=await i.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw $r.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function Vie(t,e=MV,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw $r.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw $r.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Bie;return setTimeout(async()=>{a.abort()},bie),LV({appId:r,apiKey:s,measurementId:i},o,a,e)}async function LV(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=MV){var a;const{appId:i,measurementId:o}=t;try{await Uie(r,e)}catch(l){if(o)return Rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:o};throw l}try{const l=await Fie(t);return s.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!$ie(c)){if(s.deleteThrottleMetadata(i),o)return Rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw l}const u=Number((a=c==null?void 0:c.customData)==null?void 0:a.httpStatus)===503?pk(n,s.intervalMillis,Oie):pk(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(i,h),Rr.debug(`Calling attemptFetch again in ${u} millis`),LV(t,h,r,s)}}function Uie(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r($r.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $ie(t){if(!(t instanceof cs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Bie{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function zie(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wie(){if(QT())try{await YT()}catch(t){return Rr.warn($r.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Rr.warn($r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qie(t,e,n,r,s,i,o){const a=Vie(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Rr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Rr.error(p)),e.push(a);const l=Wie().then(p=>{if(p)return r.getId()}),[c,u]=await Promise.all([a,l]);Die(i)||Iie(i,c.measurementId),s("js",new Date);const h=(o==null?void 0:o.config)??{};return h[Eie]="firebase",h.update=!0,u!=null&&(h[wie]=u),s("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hie{constructor(e){this.app=e}_delete(){return delete Eh[this.app.options.appId],Promise.resolve()}}let Eh={},FA=[];const VA={};let Pw="dataLayer",Gie="gtag",UA,jV,$A=!1;function Kie(){const t=[];if(f2()&&t.push("This is a browser extension environment."),g2()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=$r.create("invalid-analytics-context",{errorInfo:e});Rr.warn(n.message)}}function Qie(t,e,n){Kie();const r=t.options.appId;if(!r)throw $r.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $r.create("no-api-key");if(Eh[r]!=null)throw $r.create("already-exists",{id:r});if(!$A){kie(Pw);const{wrappedGtag:i,gtagCore:o}=Pie(Eh,FA,VA,Pw,Gie);jV=i,UA=o,$A=!0}return Eh[r]=qie(t,FA,VA,e,UA,Pw,n),new Hie(t)}function Yie(t=Gl()){t=Ve(t);const e=bi(t,ny);return e.isInitialized()?e.getImmediate():Xie(t)}function Xie(t,e={}){const n=bi(t,ny);if(n.isInitialized()){const s=n.getImmediate();if(pi(e,n.getOptions()))return s;throw $r.create("already-initialized")}return n.initialize({options:e})}function Zie(t,e,n,r){t=Ve(t),zie(jV,Eh[t.app.options.appId],e,n,r).catch(s=>Rr.error(s))}const BA="@firebase/analytics",zA="0.10.18";function Jie(){Ar(new or(ny,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Qie(r,s,n)},"PUBLIC")),Ar(new or("analytics-internal",t,"PRIVATE")),bn(BA,zA),bn(BA,zA,"esm2020");function t(e){try{const n=e.getProvider(ny).getImmediate();return{logEvent:(r,s,i)=>Zie(n,r,s,i)}}catch(n){throw $r.create("interop-component-reg-failed",{reason:n})}}}Jie();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eoe="/firebase-messaging-sw.js",toe="/firebase-cloud-messaging-push-scope",FV="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",noe="https://fcmregistrations.googleapis.com/v1",VV="google.c.a.c_id",roe="google.c.a.c_l",soe="google.c.a.ts",ioe="google.c.a.e",WA=1e4;var qA;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(qA||(qA={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var mf;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(mf||(mf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ooe(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="fcm_token_details_db",aoe=5,HA="fcm_token_object_Store";async function loe(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Dw))return null;let e=null;return(await sv(Dw,aoe,{upgrade:async(r,s,i,o)=>{if(s<2||!r.objectStoreNames.contains(HA))return;const a=o.objectStore(HA),l=await a.index("fcmSenderId").get(t);if(await a.clear(),!!l){if(s===2){const c=l;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:c.createTime??Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Pi(c.vapidKey)}}}else if(s===3){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Pi(c.auth),p256dh:Pi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Pi(c.vapidKey)}}}else if(s===4){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Pi(c.auth),p256dh:Pi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Pi(c.vapidKey)}}}}}})).close(),await aw(Dw),await aw("fcm_vapid_details_db"),await aw("undefined"),coe(e)?e:null}function coe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uoe="firebase-messaging-database",doe=1,gf="firebase-messaging-store";let Ow=null;function UV(){return Ow||(Ow=sv(uoe,doe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(gf)}}})),Ow}async function hoe(t){const e=$V(t),r=await(await UV()).transaction(gf).objectStore(gf).get(e);if(r)return r;{const s=await loe(t.appConfig.senderId);if(s)return await $S(t,s),s}}async function $S(t,e){const n=$V(t),s=(await UV()).transaction(gf,"readwrite");return await s.objectStore(gf).put(e,n),await s.done,e}function $V({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const foe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Gn=new Ca("messaging","Messaging",foe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function poe(t,e){const n=await zS(t),r=BV(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(BS(t.appConfig),s)).json()}catch(o){throw Gn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Gn.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw Gn.create("token-subscribe-no-token");return i.token}async function moe(t,e){const n=await zS(t),r=BV(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${BS(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw Gn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Gn.create("token-update-failed",{errorInfo:o})}if(!i.token)throw Gn.create("token-update-no-token");return i.token}async function goe(t,e){const r={method:"DELETE",headers:await zS(t)};try{const i=await(await fetch(`${BS(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw Gn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw Gn.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function BS({projectId:t}){return`${noe}/projects/${t}/registrations`}async function zS({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function BV({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==FV&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yoe=7*24*60*60*1e3;async function voe(t){const e=await woe(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Pi(e.getKey("auth")),p256dh:Pi(e.getKey("p256dh"))},r=await hoe(t.firebaseDependencies);if(r){if(Eoe(r.subscriptionOptions,n))return Date.now()>=r.createTime+yoe?_oe(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await goe(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return GA(t.firebaseDependencies,n)}else return GA(t.firebaseDependencies,n)}async function _oe(t,e){try{const n=await moe(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await $S(t.firebaseDependencies,r),n}catch(n){throw n}}async function GA(t,e){const r={token:await poe(t,e),createTime:Date.now(),subscriptionOptions:e};return await $S(t,r),r.token}async function woe(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ooe(e)})}function Eoe(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return boe(e,t),Toe(e,t),xoe(e,t),e}function boe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function Toe(t,e){e.data&&(t.data=e.data)}function xoe(t,e){var s,i,o,a;if(!e.fcmOptions&&!((s=e.notification)!=null&&s.click_action))return;t.fcmOptions={};const n=((i=e.fcmOptions)==null?void 0:i.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Soe(t){return typeof t=="object"&&!!t&&VV in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Coe(t){if(!t||!t.options)throw Mw("App Configuration Object");if(!t.name)throw Mw("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Mw(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Mw(t){return Gn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ioe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Coe(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function koe(t){try{t.swRegistration=await navigator.serviceWorker.register(eoe,{scope:toe}),t.swRegistration.update().catch(()=>{}),await Roe(t.swRegistration)}catch(e){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function Roe(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${WA} ms`)),WA),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=i=>{var o;((o=i.target)==null?void 0:o.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aoe(t,e){if(!e&&!t.swRegistration&&await koe(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Noe(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=FV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){if(!navigator)throw Gn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Gn.create("permission-blocked");return await Noe(t,e==null?void 0:e.vapidKey),await Aoe(t,e==null?void 0:e.serviceWorkerRegistration),voe(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Poe(t,e,n){const r=Doe(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[VV],message_name:n[roe],message_time:n[soe],message_device_time:Math.floor(Date.now()/1e3)})}function Doe(t){switch(t){case mf.NOTIFICATION_CLICKED:return"notification_open";case mf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ooe(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===mf.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(KA(n)):t.onMessageHandler.next(KA(n)));const r=n.data;Soe(r)&&r[ioe]==="1"&&await Poe(t,n.messageType,r)}const QA="@firebase/messaging",YA="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Moe=t=>{const e=new Ioe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Ooe(e,n)),e},Loe=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>zV(e,r)}};function joe(){Ar(new or("messaging",Moe,"PUBLIC")),Ar(new or("messaging-internal",Loe,"PRIVATE")),bn(QA,YA),bn(QA,YA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Foe(){try{await YT()}catch{return!1}return typeof window<"u"&&QT()&&g2()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Voe(t,e){if(!navigator)throw Gn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uoe(t=Gl()){return Foe().then(e=>{if(!e)throw Gn.create("unsupported-browser")},e=>{throw Gn.create("indexed-db-unsupported")}),bi(Ve(t),"messaging").getImmediate()}async function XA(t,e){return t=Ve(t),zV(t,e)}function $oe(t,e){return t=Ve(t),Voe(t,e)}joe();const Boe={apiKey:"AIzaSyCmioywtCMDFJjDvq8bF0_NBZJC5nyVPYo",authDomain:"huddlely.firebaseapp.com",projectId:"huddlely",storageBucket:"huddlely.firebasestorage.app",messagingSenderId:"788189911710",appId:"1:788189911710:web:3fd75fade0c56164d5b98f",measurementId:"G-8ZE8GCXPRX"},sd=JG().length===0?w2(Boe):Gl(),So=nee(sd),Re=iX(sd),vc=gre(sd),ZA=Nse(sd);Yie(sd);const zv=new Mi;let WV=null;if(typeof window<"u")try{WV=Uoe(sd)}catch(t){console.log("Messaging not available:",t)}zv.addScope("https://www.googleapis.com/auth/calendar");zv.addScope("https://www.googleapis.com/auth/userinfo.profile");zv.addScope("https://www.googleapis.com/auth/userinfo.email");const JA=t=>new nJ(So,t,{size:"normal",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired")}}),zoe=async(t,e)=>{try{return await iJ(So,t,e)}catch(n){throw console.error("Error sending OTP:",n),n}},Woe=async(t,e)=>{try{return await t.confirm(e)}catch(n){throw console.error("Error verifying OTP:",n),n}},Lw=768;function Wv(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Lw-1}px)`),r=()=>{e(window.innerWidth<Lw)};return n.addEventListener("change",r),e(window.innerWidth<Lw),()=>n.removeEventListener("change",r)},[]),!!t}const qoe=$u("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-elegant transition-smooth",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",focus:"gradient-primary text-focus-foreground hover:shadow-glow transition-smooth",break:"gradient-secondary text-break-foreground hover:shadow-elegant transition-smooth",success:"bg-success text-success-foreground hover:bg-success/90 transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Qe=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?zl:"button";return f.jsx(o,{className:Z(qoe({variant:e,size:n,className:t})),ref:i,...s})});Qe.displayName="Button";const Rs=g.forwardRef(({className:t,type:e,...n},r)=>f.jsx("input",{type:e,className:Z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Rs.displayName="Input";var Hoe="Separator",eN="horizontal",Goe=["horizontal","vertical"],qV=g.forwardRef((t,e)=>{const{decorative:n,orientation:r=eN,...s}=t,i=Koe(r)?r:eN,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return f.jsx(Ae.div,{"data-orientation":i,...a,...s,ref:e})});qV.displayName=Hoe;function Koe(t){return Goe.includes(t)}var HV=qV;const GV=g.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>f.jsx(HV,{ref:s,decorative:n,orientation:e,className:Z("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));GV.displayName=HV.displayName;var jw="focusScope.autoFocusOnMount",Fw="focusScope.autoFocusOnUnmount",tN={bubbles:!1,cancelable:!0},Qoe="FocusScope",qv=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=g.useState(null),c=Qt(s),u=Qt(i),h=g.useRef(null),p=ut(e,y=>l(y)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(x){if(m.paused||!a)return;const R=x.target;a.contains(R)?h.current=R:bo(h.current,{select:!0})},w=function(x){if(m.paused||!a)return;const R=x.relatedTarget;R!==null&&(a.contains(R)||bo(h.current,{select:!0}))},b=function(x){if(document.activeElement===document.body)for(const O of x)O.removedNodes.length>0&&bo(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const E=new MutationObserver(b);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,m.paused]),g.useEffect(()=>{if(a){rN.add(m);const y=document.activeElement;if(!a.contains(y)){const b=new CustomEvent(jw,tN);a.addEventListener(jw,c),a.dispatchEvent(b),b.defaultPrevented||(Yoe(tae(KV(a)),{select:!0}),document.activeElement===y&&bo(a))}return()=>{a.removeEventListener(jw,c),setTimeout(()=>{const b=new CustomEvent(Fw,tN);a.addEventListener(Fw,u),a.dispatchEvent(b),b.defaultPrevented||bo(y??document.body,{select:!0}),a.removeEventListener(Fw,u),rN.remove(m)},0)}}},[a,c,u,m]);const _=g.useCallback(y=>{if(!n&&!r||m.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(w&&b){const E=y.currentTarget,[x,R]=Xoe(E);x&&R?!y.shiftKey&&b===R?(y.preventDefault(),n&&bo(x,{select:!0})):y.shiftKey&&b===x&&(y.preventDefault(),n&&bo(R,{select:!0})):b===E&&y.preventDefault()}},[n,r,m.paused]);return f.jsx(Ae.div,{tabIndex:-1,...o,ref:p,onKeyDown:_})});qv.displayName=Qoe;function Yoe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(bo(r,{select:e}),document.activeElement!==n)return}function Xoe(t){const e=KV(t),n=nN(e,t),r=nN(e.reverse(),t);return[n,r]}function KV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function nN(t,e){for(const n of t)if(!Zoe(n,{upTo:e}))return n}function Zoe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Joe(t){return t instanceof HTMLInputElement&&"select"in t}function bo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Joe(t)&&e&&t.select()}}var rN=eae();function eae(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=sN(t,e),t.unshift(e)},remove(e){var n;t=sN(t,e),(n=t[0])==null||n.resume()}}}function sN(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function tae(t){return t.filter(e=>e.tagName!=="A")}var Vw=0;function WS(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??iN()),document.body.insertAdjacentElement("beforeend",t[1]??iN()),Vw++,()=>{Vw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vw--}},[])}function iN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ys=function(){return Ys=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ys.apply(this,arguments)};function QV(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function nae(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Lm="right-scroll-bar-position",jm="width-before-scroll-bar",rae="with-scroll-bars-hidden",sae="--removed-body-scroll-bar-size";function Uw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function iae(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var oae=typeof window<"u"?g.useLayoutEffect:g.useEffect,oN=new WeakMap;function aae(t,e){var n=iae(null,function(r){return t.forEach(function(s){return Uw(s,r)})});return oae(function(){var r=oN.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Uw(a,null)}),i.forEach(function(a){s.has(a)||Uw(a,o)})}oN.set(n,t)},[t]),n}function lae(t){return t}function cae(t,e){e===void 0&&(e=lae);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function uae(t){t===void 0&&(t={});var e=cae(null);return e.options=Ys({async:!0,ssr:!1},t),e}var YV=function(t){var e=t.sideCar,n=QV(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Ys({},n))};YV.isSideCarExport=!0;function dae(t,e){return t.useMedium(e),YV}var XV=uae(),$w=function(){},Hv=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:$w,onWheelCapture:$w,onTouchMoveCapture:$w}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,p=t.sideCar,m=t.noRelative,_=t.noIsolation,y=t.inert,w=t.allowPinchZoom,b=t.as,E=b===void 0?"div":b,x=t.gapMode,R=QV(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=p,L=aae([n,e]),k=Ys(Ys({},R),s);return g.createElement(g.Fragment,null,u&&g.createElement(O,{sideCar:XV,removeScrollBar:c,shards:h,noRelative:m,noIsolation:_,inert:y,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:x}),o?g.cloneElement(g.Children.only(a),Ys(Ys({},k),{ref:L})):g.createElement(E,Ys({},k,{className:l,ref:L}),a))});Hv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hv.classNames={fullWidth:jm,zeroRight:Lm};var hae=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fae(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=hae();return e&&t.setAttribute("nonce",e),t}function pae(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function mae(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var gae=function(){var t=0,e=null;return{add:function(n){t==0&&(e=fae())&&(pae(e,n),mae(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},yae=function(){var t=gae();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ZV=function(){var t=yae(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},vae={left:0,top:0,right:0,gap:0},Bw=function(t){return parseInt(t||"",10)||0},_ae=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Bw(n),Bw(r),Bw(s)]},wae=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vae;var e=_ae(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Eae=ZV(),Kc="data-scroll-locked",bae=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(rae,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Kc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Lm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(jm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Lm," .").concat(Lm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jm," .").concat(jm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Kc,`] {
    `).concat(sae,": ").concat(a,`px;
  }
`)},aN=function(){var t=parseInt(document.body.getAttribute(Kc)||"0",10);return isFinite(t)?t:0},Tae=function(){g.useEffect(function(){return document.body.setAttribute(Kc,(aN()+1).toString()),function(){var t=aN()-1;t<=0?document.body.removeAttribute(Kc):document.body.setAttribute(Kc,t.toString())}},[])},xae=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Tae();var i=g.useMemo(function(){return wae(s)},[s]);return g.createElement(Eae,{styles:bae(i,!e,s,n?"":"!important")})},JE=!1;if(typeof window<"u")try{var im=Object.defineProperty({},"passive",{get:function(){return JE=!0,!0}});window.addEventListener("test",im,im),window.removeEventListener("test",im,im)}catch{JE=!1}var lc=JE?{passive:!1}:!1,Sae=function(t){return t.tagName==="TEXTAREA"},JV=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Sae(t)&&n[e]==="visible")},Cae=function(t){return JV(t,"overflowY")},Iae=function(t){return JV(t,"overflowX")},lN=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=e4(t,r);if(s){var i=t4(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},kae=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Rae=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},e4=function(t,e){return t==="v"?Cae(e):Iae(e)},t4=function(t,e){return t==="v"?kae(e):Rae(e)},Aae=function(t,e){return t==="h"&&e==="rtl"?-1:1},Nae=function(t,e,n,r,s){var i=Aae(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,p=0;do{if(!a)break;var m=t4(t,a),_=m[0],y=m[1],w=m[2],b=y-w-i*_;(_||b)&&e4(t,a)&&(h+=b,p+=_);var E=a.parentNode;a=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(h)<1||!s)||!u&&(Math.abs(p)<1||!s))&&(c=!0),c},om=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},cN=function(t){return[t.deltaX,t.deltaY]},uN=function(t){return t&&"current"in t?t.current:t},Pae=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Dae=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Oae=0,cc=[];function Mae(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(Oae++)[0],i=g.useState(ZV)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=nae([t.lockRef.current],(t.shards||[]).map(uN),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=om(y),E=n.current,x="deltaX"in y?y.deltaX:E[0]-b[0],R="deltaY"in y?y.deltaY:E[1]-b[1],O,L=y.target,k=Math.abs(x)>Math.abs(R)?"h":"v";if("touches"in y&&k==="h"&&L.type==="range")return!1;var S=lN(k,L);if(!S)return!0;if(S?O=k:(O=k==="v"?"h":"v",S=lN(k,L)),!S)return!1;if(!r.current&&"changedTouches"in y&&(x||R)&&(r.current=O),!O)return!0;var I=r.current||O;return Nae(I,w,y,I==="h"?x:R,!0)},[]),l=g.useCallback(function(y){var w=y;if(!(!cc.length||cc[cc.length-1]!==i)){var b="deltaY"in w?cN(w):om(w),E=e.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&Pae(O.delta,b)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var x=(o.current.shards||[]).map(uN).filter(Boolean).filter(function(O){return O.contains(w.target)}),R=x.length>0?a(w,x[0]):!o.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),c=g.useCallback(function(y,w,b,E){var x={name:y,delta:w,target:b,should:E,shadowParent:Lae(b)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(R){return R!==x})},1)},[]),u=g.useCallback(function(y){n.current=om(y),r.current=void 0},[]),h=g.useCallback(function(y){c(y.type,cN(y),y.target,a(y,t.lockRef.current))},[]),p=g.useCallback(function(y){c(y.type,om(y),y.target,a(y,t.lockRef.current))},[]);g.useEffect(function(){return cc.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,lc),document.addEventListener("touchmove",l,lc),document.addEventListener("touchstart",u,lc),function(){cc=cc.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,lc),document.removeEventListener("touchmove",l,lc),document.removeEventListener("touchstart",u,lc)}},[]);var m=t.removeScrollBar,_=t.inert;return g.createElement(g.Fragment,null,_?g.createElement(i,{styles:Dae(s)}):null,m?g.createElement(xae,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Lae(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const jae=dae(XV,Mae);var Gv=g.forwardRef(function(t,e){return g.createElement(Hv,Ys({},t,{ref:e,sideCar:jae}))});Gv.classNames=Hv.classNames;var Fae=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uc=new WeakMap,am=new WeakMap,lm={},zw=0,n4=function(t){return t&&(t.host||n4(t.parentNode))},Vae=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=n4(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Uae=function(t,e,n,r){var s=Vae(e,Array.isArray(t)?t:[t]);lm[n]||(lm[n]=new WeakMap);var i=lm[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),_=m!==null&&m!=="false",y=(uc.get(p)||0)+1,w=(i.get(p)||0)+1;uc.set(p,y),i.set(p,w),o.push(p),y===1&&_&&am.set(p,!0),w===1&&p.setAttribute(n,"true"),_||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return u(e),a.clear(),zw++,function(){o.forEach(function(h){var p=uc.get(h)-1,m=i.get(h)-1;uc.set(h,p),i.set(h,m),p||(am.has(h)||h.removeAttribute(r),am.delete(h)),m||h.removeAttribute(n)}),zw--,zw||(uc=new WeakMap,uc=new WeakMap,am=new WeakMap,lm={})}},qS=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Fae(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Uae(r,s,n,"aria-hidden")):function(){return null}},Kv="Dialog",[r4,Nfe]=Kr(Kv),[$ae,Fs]=r4(Kv),s4=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=g.useRef(null),l=g.useRef(null),[c,u]=Wl({prop:r,defaultProp:s??!1,onChange:i,caller:Kv});return f.jsx($ae,{scope:e,triggerRef:a,contentRef:l,contentId:qi(),titleId:qi(),descriptionId:qi(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};s4.displayName=Kv;var i4="DialogTrigger",o4=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(i4,n),i=ut(e,s.triggerRef);return f.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":KS(s.open),...r,ref:i,onClick:pe(t.onClick,s.onOpenToggle)})});o4.displayName=i4;var HS="DialogPortal",[Bae,a4]=r4(HS,{forceMount:void 0}),l4=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Fs(HS,e);return f.jsx(Bae,{scope:e,forceMount:n,children:g.Children.map(r,o=>f.jsx(On,{present:n||i.open,children:f.jsx(Of,{asChild:!0,container:s,children:o})}))})};l4.displayName=HS;var ry="DialogOverlay",c4=g.forwardRef((t,e)=>{const n=a4(ry,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Fs(ry,t.__scopeDialog);return i.modal?f.jsx(On,{present:r||i.open,children:f.jsx(Wae,{...s,ref:e})}):null});c4.displayName=ry;var zae=El("DialogOverlay.RemoveScroll"),Wae=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(ry,n);return f.jsx(Gv,{as:zae,allowPinchZoom:!0,shards:[s.contentRef],children:f.jsx(Ae.div,{"data-state":KS(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),jl="DialogContent",u4=g.forwardRef((t,e)=>{const n=a4(jl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Fs(jl,t.__scopeDialog);return f.jsx(On,{present:r||i.open,children:i.modal?f.jsx(qae,{...s,ref:e}):f.jsx(Hae,{...s,ref:e})})});u4.displayName=jl;var qae=g.forwardRef((t,e)=>{const n=Fs(jl,t.__scopeDialog),r=g.useRef(null),s=ut(e,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return qS(i)},[]),f.jsx(d4,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:pe(t.onFocusOutside,i=>i.preventDefault())})}),Hae=g.forwardRef((t,e)=>{const n=Fs(jl,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return f.jsx(d4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),d4=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Fs(jl,n),l=g.useRef(null),c=ut(e,l);return WS(),f.jsxs(f.Fragment,{children:[f.jsx(qv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:f.jsx(Uu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":KS(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(Gae,{titleId:a.titleId}),f.jsx(Qae,{contentRef:l,descriptionId:a.descriptionId})]})]})}),GS="DialogTitle",h4=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(GS,n);return f.jsx(Ae.h2,{id:s.titleId,...r,ref:e})});h4.displayName=GS;var f4="DialogDescription",p4=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(f4,n);return f.jsx(Ae.p,{id:s.descriptionId,...r,ref:e})});p4.displayName=f4;var m4="DialogClose",g4=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(m4,n);return f.jsx(Ae.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});g4.displayName=m4;function KS(t){return t?"open":"closed"}var y4="DialogTitleWarning",[Pfe,v4]=DB(y4,{contentName:jl,titleName:GS,docsSlug:"dialog"}),Gae=({titleId:t})=>{const e=v4(y4),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Kae="DialogDescriptionWarning",Qae=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${v4(Kae).contentName}}.`;return g.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},_4=s4,Yae=o4,w4=l4,Qv=c4,Yv=u4,Xv=h4,Zv=p4,E4=g4;const Xae=_4,Zae=w4,b4=g.forwardRef(({className:t,...e},n)=>f.jsx(Qv,{className:Z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));b4.displayName=Qv.displayName;const Jae=$u("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),T4=g.forwardRef(({side:t="right",className:e,children:n,...r},s)=>f.jsxs(Zae,{children:[f.jsx(b4,{}),f.jsxs(Yv,{ref:s,className:Z(Jae({side:t}),e),...r,children:[n,f.jsxs(E4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[f.jsx(ql,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));T4.displayName=Yv.displayName;const ele=g.forwardRef(({className:t,...e},n)=>f.jsx(Xv,{ref:n,className:Z("text-lg font-semibold text-foreground",t),...e}));ele.displayName=Xv.displayName;const tle=g.forwardRef(({className:t,...e},n)=>f.jsx(Zv,{ref:n,className:Z("text-sm text-muted-foreground",t),...e}));tle.displayName=Zv.displayName;function dN({className:t,...e}){return f.jsx("div",{className:Z("animate-pulse rounded-md bg-muted",t),...e})}const nle="sidebar:state",rle=60*60*24*7,sle="16rem",ile="18rem",ole="3rem",ale="b",x4=g.createContext(null);function Zl(){const t=g.useContext(x4);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const S4=g.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:i,...o},a)=>{const l=Wv(),[c,u]=g.useState(!1),[h,p]=g.useState(!1),[m,_]=g.useState(t),y=e??m,w=g.useCallback(R=>{const O=typeof R=="function"?R(y):R;n?n(O):_(O),document.cookie=`${nle}=${O}; path=/; max-age=${rle}`},[n,y]),b=g.useCallback(()=>l?u(R=>!R):w(R=>!R),[l,w,u]);g.useEffect(()=>{const R=O=>{O.key===ale&&(O.metaKey||O.ctrlKey)&&(O.preventDefault(),b())};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[b]);const E=y?"expanded":"collapsed",x=g.useMemo(()=>({state:E,open:y,setOpen:w,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:b,isChatOpenMobile:h,setChatOpenMobile:p}),[E,y,w,l,c,u,b,h]);return f.jsx(x4.Provider,{value:x,children:f.jsx(UT,{delayDuration:0,children:f.jsx("div",{style:{"--sidebar-width":sle,"--sidebar-width-icon":ole,...s},className:Z("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:a,...o,children:i})})})});S4.displayName="SidebarProvider";const C4=g.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...i},o)=>{const{isMobile:a,state:l,openMobile:c,setOpenMobile:u}=Zl();return n==="none"?f.jsx("div",{className:Z("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:s}):a?f.jsx(Xae,{open:c,onOpenChange:u,...i,children:f.jsx(T4,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":ile},side:t,children:f.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):f.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,children:[f.jsx("div",{className:Z("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),f.jsx("div",{className:Z("duration-200 fixed z-10 hidden w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),style:{top:"var(--app-header-offset, 0px)",height:"calc(100vh - var(--app-header-offset, 0px))"},...i,children:f.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});C4.displayName="Sidebar";const I4=g.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:s}=Zl();return f.jsxs(Qe,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Z("h-7 w-7",t),onClick:i=>{e==null||e(i),s()},...n,children:[f.jsx(gW,{}),f.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});I4.displayName="SidebarTrigger";const lle=g.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=Zl();return f.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:Z("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});lle.displayName="SidebarRail";const cle=g.forwardRef(({className:t,...e},n)=>f.jsx("main",{ref:n,className:Z("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));cle.displayName="SidebarInset";const ule=g.forwardRef(({className:t,...e},n)=>f.jsx(Rs,{ref:n,"data-sidebar":"input",className:Z("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));ule.displayName="SidebarInput";const dle=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"header",className:Z("flex flex-col gap-2 p-2",t),...e}));dle.displayName="SidebarHeader";const hle=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"footer",className:Z("flex flex-col gap-2 p-2",t),...e}));hle.displayName="SidebarFooter";const k4=g.forwardRef(({className:t,...e},n)=>f.jsx(GV,{ref:n,"data-sidebar":"separator",className:Z("mx-2 w-auto bg-sidebar-border",t),...e}));k4.displayName="SidebarSeparator";const R4=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"content",className:Z("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));R4.displayName="SidebarContent";const eb=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"group",className:Z("relative flex w-full min-w-0 flex-col p-2",t),...e}));eb.displayName="SidebarGroup";const tb=g.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?zl:"div";return f.jsx(s,{ref:r,"data-sidebar":"group-label",className:Z("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});tb.displayName="SidebarGroupLabel";const fle=g.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?zl:"button";return f.jsx(s,{ref:r,"data-sidebar":"group-action",className:Z("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});fle.displayName="SidebarGroupAction";const nb=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"group-content",className:Z("w-full text-sm",t),...e}));nb.displayName="SidebarGroupContent";const rb=g.forwardRef(({className:t,...e},n)=>f.jsx("ul",{ref:n,"data-sidebar":"menu",className:Z("flex w-full min-w-0 flex-col gap-1",t),...e}));rb.displayName="SidebarMenu";const Fm=g.forwardRef(({className:t,...e},n)=>f.jsx("li",{ref:n,"data-sidebar":"menu-item",className:Z("group/menu-item relative",t),...e}));Fm.displayName="SidebarMenuItem";const ple=$u("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Vm=g.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:i,...o},a)=>{const l=t?zl:"button",{isMobile:c,state:u}=Zl(),h=f.jsx(l,{ref:a,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:Z(ple({variant:n,size:r}),i),...o});return s?(typeof s=="string"&&(s={children:s}),f.jsxs(YM,{children:[f.jsx(XM,{asChild:!0,children:h}),f.jsx($T,{side:"right",align:"center",hidden:u!=="collapsed"||c,...s})]})):h});Vm.displayName="SidebarMenuButton";const mle=g.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const i=e?zl:"button";return f.jsx(i,{ref:s,"data-sidebar":"menu-action",className:Z("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});mle.displayName="SidebarMenuAction";const gle=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:Z("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));gle.displayName="SidebarMenuBadge";const yle=g.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return f.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:Z("rounded-md h-8 flex gap-2 px-2 items-center",t),...n,children:[e&&f.jsx(dN,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),f.jsx(dN,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});yle.displayName="SidebarMenuSkeleton";const vle=g.forwardRef(({className:t,...e},n)=>f.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:Z("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));vle.displayName="SidebarMenuSub";const _le=g.forwardRef(({...t},e)=>f.jsx("li",{ref:e,...t}));_le.displayName="SidebarMenuSubItem";const wle=g.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},i)=>{const o=t?zl:"a";return f.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:Z("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});wle.displayName="SidebarMenuSubButton";const Ele=$u("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Br({className:t,variant:e,...n}){return f.jsx("div",{className:Z(Ele({variant:e}),t),...n})}const A4=g.createContext(void 0);function ble({children:t}){const[e,n]=g.useState(null),[r,s]=g.useState(null),[i,o]=g.useState(!0),{toast:a}=Bl();g.useEffect(()=>{const C=OZ(So,async P=>{n(P),P?await c(P):s(null),o(!1)});return()=>C()},[]);const l=async C=>{const P=it(Re,"users",C),D=await gc(P);D.exists()&&s(D.data())},c=async C=>{const P=it(Re,"users",C.uid),D=await gc(P);if(D.exists()){const A=D.data();s(A),await Cs(P,{lastLoginAt:new Date().toISOString()})}else{const A={uid:C.uid,email:C.email||"",displayName:C.displayName||"",photoURL:C.photoURL||"",phoneNumber:C.phoneNumber||"",emailVerified:C.emailVerified,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),preferences:{notifications:!0,theme:"system",language:"en"},teamId:null};await JL(P,A),s(A)}},I={user:e,userProfile:r,loading:i,signIn:async(C,P)=>{await RZ(So,C,P)},signUp:async(C,P,D)=>{const A=await kZ(So,C,P);A.user&&D&&await NZ(A.user,{displayName:D}),A.user&&await MR(A.user)},signInWithGoogle:async()=>{try{const{UniversalGoogleAuth:C}=await wn(async()=>{const{UniversalGoogleAuth:P}=await import("./universalAuth-BKR9b66w.js");return{UniversalGoogleAuth:P}},[]);await C.signIn()}catch(C){console.error("Google Sign-In failed:",C),await dJ(So,zv)}},signInWithPhone:async C=>{const P=JA("recaptcha-container");return await zoe(C,P)},verifyPhoneOTP:async(C,P)=>{await Woe(C,P)},signOutUser:async()=>{await MZ(So)},updateUserProfile:async C=>{if(!e||!r)return;const P=it(Re,"users",e.uid);await Cs(P,C),s({...r,...C}),a({title:"Profile Updated! "})},sendVerificationEmail:async()=>{e&&await MR(e)},resetPassword:async C=>{await IZ(So,C),a({title:"Password reset email sent!",description:"Check your inbox for reset instructions."})},setupPhoneAuth:C=>JA(C),sendTeamRequest:async C=>{if(!e||!r)throw new Error("Authentication required.");if(e.email===C)throw new Error("You cannot send a request to yourself.");const P=br(Re,"users"),D=Cl(P,Bc("email","==",C)),A=await TR(D);if(A.empty)throw new Error("No user found with this email address.");const q=A.docs[0];await Qf(br(Re,"teamRequests"),{senderId:e.uid,senderName:r.displayName||e.email,senderEmail:e.email,receiverId:q.id,receiverEmail:q.data().email,status:"pending",createdAt:of()}),a({title:"Team request sent! "})},fetchReceivedTeamRequests:async()=>{if(!e)return[];const C=br(Re,"teamRequests"),P=Cl(C,Bc("receiverId","==",e.uid),Bc("status","==","pending"));return(await TR(P)).docs.map(A=>({id:A.id,...A.data()}))},acceptTeamRequest:async(C,P)=>{if(!e)throw new Error("You must be logged in to accept a request.");o(!0);const D=AE(Re);try{const A=it(Re,"users",P),q=await gc(A);if(!q.exists())throw new Error("The user who sent the invite no longer exists.");const B=q.data().teamId,Y=it(Re,"users",e.uid),F=it(Re,"teamRequests",C);if(B){const j=it(Re,"teams",B);D.update(j,{memberIds:vX(e.uid)}),D.update(Y,{teamId:B})}else{const j=it(br(Re,"teams"));D.set(j,{memberIds:[P,e.uid],createdAt:of(),createdBy:P}),D.update(A,{teamId:j.id}),D.update(Y,{teamId:j.id})}D.delete(F),await D.commit(),await l(e.uid),a({title:"Team request accepted! ",description:"You are now part of the team."})}catch(A){throw console.error("Error accepting team request:",A),a({title:"Failed to accept request",description:A.message,variant:"destructive"}),A}finally{o(!1)}},declineTeamRequest:async C=>{const P=it(Re,"teamRequests",C);await Il(P),a({title:"Team request declined"})},fetchTeamMembers:async()=>{if(!(r!=null&&r.teamId))return[];const C=it(Re,"teams",r.teamId),P=await gc(C);if(!P.exists())return await Cs(it(Re,"users",r.uid),{teamId:null}),s(q=>q?{...q,teamId:null}:null),[];const D=P.data(),A=[];for(const q of D.memberIds){const $=it(Re,"users",q),B=await gc($);B.exists()&&A.push(B.data())}return A}};return f.jsx(A4.Provider,{value:I,children:!i&&t})}function ur(){const t=g.useContext(A4);if(t===void 0)throw new Error("useAuth must be used within an AuthContextProvider");return t}let Hd=null;const hN=t=>{Hd=t},Ba=class Ba{constructor(){Mt(this,"permission","default");Mt(this,"scheduledNotifications",new Map);Mt(this,"pendingAssignments",new Map);this.checkPermission(),this.setupServiceWorker()}static getInstance(){return Ba.instance||(Ba.instance=new Ba),Ba.instance}async addInAppNotification(e,n,r,s,i){if(Hd)try{await Hd({title:n,body:r,type:s,read:!1,data:i||{}},e),console.log("In-app notification added:",{title:n,body:r,type:s})}catch(o){console.error("Failed to add in-app notification:",o)}else console.warn("Global addNotification function not available")}checkPermission(){"Notification"in window&&(this.permission=Notification.permission)}async setupServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e)}catch(e){console.warn("Service Worker registration failed:",e)}}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.permission==="granted")return!0;const e=await Notification.requestPermission();return this.permission=e,e==="granted"}async showNotification(e,n){if(this.permission!=="granted")return console.warn("Notification permission not granted"),null;const r={icon:"/favicon.ico",badge:"/favicon.ico",tag:"mindmeld-notification",requireInteraction:!1,silent:!1,...n};try{if("serviceWorker"in navigator&&"actions"in Notification.prototype&&r.actions&&r.actions.length>0)if("serviceWorker"in navigator)try{return await(await navigator.serviceWorker.ready).showNotification(e,r),null}catch(i){console.warn("Service Worker notification failed, falling back to basic notification:",i);const{actions:o,...a}=r,l=new Notification(e,a);return a.requireInteraction||setTimeout(()=>{l.close()},5e3),l}else{const{actions:i,...o}=r,a=new Notification(e,o);return o.requireInteraction||setTimeout(()=>{a.close()},5e3),a}else{const i=new Notification(e,r);return r.requireInteraction||setTimeout(()=>{i.close()},5e3),i}}catch(s){return console.error("Failed to show notification:",s),null}}scheduleTaskReminder(e,n=15){if(!e.dueDate)return;const r=new Date(e.dueDate),s=new Date(r.getTime()-n*60*1e3),i=new Date;if(s<=i)return;const o=s.getTime()-i.getTime(),a=`task-reminder-${e.id}`;this.clearScheduledNotification(a);const l=setTimeout(()=>{this.showNotification(` Task Reminder: ${e.title}`,{body:`Due in ${n} minutes: ${e.description||"No description"}`,icon:"/favicon.ico",tag:a,data:{taskId:e.id,type:"reminder"},..."serviceWorker"in navigator&&{actions:[{action:"start",title:" Start Now"},{action:"snooze",title:" Snooze 5min"}]}}),this.scheduledNotifications.delete(a)},o);this.scheduledNotifications.set(a,l)}scheduleTaskDueNotification(e){if(!e.dueDate)return;const n=new Date(e.dueDate),r=new Date;if(n<=r)return;const s=n.getTime()-r.getTime(),i=`task-due-${e.id}`;this.clearScheduledNotification(i);const o=setTimeout(()=>{this.showNotification(` Task Due Now: ${e.title}`,{body:`This task is now due: ${e.description||"No description"}`,icon:"/favicon.ico",tag:i,data:{taskId:e.id,type:"due"},requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"complete",title:" Mark Complete"},{action:"extend",title:" Extend Deadline"}]}}),this.scheduledNotifications.delete(i)},s);this.scheduledNotifications.set(i,o)}showPomodoroNotification(e,n){if(Hd){const i=e==="focus-complete"?"Focus Session Complete! ":"Break Time Over! ",o=e==="focus-complete"?`Great work! Time for a well-deserved break. Sessions completed: ${n||0}`:"Ready to focus again? Let's get back to work!";this.addInAppNotification("",i,o,"pomodoro-complete",{sessionCount:n,type:e})}const s={"focus-complete":{title:" Focus Session Complete!",body:`Great work! Time for a well-deserved break. Sessions completed: ${n||0}`,actions:[{action:"start-break",title:" Start Break"},{action:"continue",title:" Continue Working"}]},"break-complete":{title:" Break Time Over!",body:"Ready to focus again? Let's get back to work!",actions:[{action:"start-focus",title:" Start Focus"},{action:"extend-break",title:" Extend Break"}]}}[e];this.showNotification(s.title,{body:s.body,tag:`pomodoro-${e}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:s.actions}})}showTaskCompleteNotification(e){Hd&&this.addInAppNotification("","Task Completed! ",`Great job completing "${e}"!`,"task-complete",{taskTitle:e}),this.showNotification(" Task Completed!",{body:`Great job completing "${e}"!`,tag:"task-complete",..."serviceWorker"in navigator&&{actions:[{action:"view-stats",title:" View Stats"},{action:"next-task",title:" Next Task"}]}})}showTaskAssignmentNotification(e,n,r){if(!e.assignedTo||!e.assignedTo.includes(r))return;this.addInAppNotification(r,"New Task Assignment",`${n} assigned "${e.title}" to you`,"task-assignment",{taskId:e.id,taskTitle:e.title,assignerName:n,priority:e.priority});const s=e.priority==="high"?"":e.priority==="medium"?"":"",i=e.dueDate?` (Due: ${new Date(e.dueDate).toLocaleDateString()})`:"";this.showNotification(`${s} New Task Assignment`,{body:`${n} assigned "${e.title}" to you${i}`,tag:`task-assignment-${e.id}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"start-task",title:" Start Now"},{action:"view-task",title:" View Details"},{action:"mark-progress",title:" Mark In Progress"}]},data:{taskId:e.id,type:"assignment",priority:e.priority,assignerName:n}})}showBulkAssignmentNotification(e,n){this.showNotification(" Multiple Task Assignments",{body:`${n} assigned ${e} tasks to you`,tag:"bulk-assignment",requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"view-all-tasks",title:" View All Tasks"},{action:"prioritize",title:" Help Me Prioritize"}]},data:{type:"bulk-assignment",taskCount:e,assignerName:n}})}showSmartTaskSuggestion(e,n){this.showNotification(" AI Task Suggestion",{body:`Based on your schedule, I suggest working on "${e.title}" now. ${n}`,tag:`ai-suggestion-${e.id}`,..."serviceWorker"in navigator&&{actions:[{action:"start-suggested",title:" Start Now"},{action:"schedule-later",title:" Schedule Later"},{action:"dismiss-suggestion",title:" Not Now"}]},data:{taskId:e.id,type:"ai-suggestion",reason:n}})}showTeamCollaborationUpdate(e,n,r){const s={started:"",completed:"",commented:"",updated:""};this.showNotification(`${s[n]||""} Team Update`,{body:`${e} ${n} "${r}"`,tag:`team-update-${Date.now()}`,..."serviceWorker"in navigator&&{actions:[{action:"view-task",title:" View Task"},{action:"send-message",title:" Send Message"}]},data:{type:"team-collaboration",action:n,teamMemberName:e}})}showWorkloadBalanceAlert(e,n){this.showNotification(" Workload Balance Alert",{body:`You have ${e} active tasks. ${n}`,tag:"workload-balance",..."serviceWorker"in navigator&&{actions:[{action:"auto-prioritize",title:" Auto-Prioritize"},{action:"delegate-tasks",title:" Delegate Tasks"},{action:"schedule-break",title:" Schedule Break"}]},data:{type:"workload-balance",currentTasks:e}})}handleTaskAssignment(e,n,r){if(console.log("=== ASSIGNMENT NOTIFICATION DEBUG ==="),console.log("Task assignedTo:",e.assignedTo),console.log("Current user ID:",r),console.log("Assigner name:",n),!e.assignedTo||!e.assignedTo.includes(r))return console.log("Current user not assigned to this task"),"none";console.log("Current user IS assigned to this task");const s=`${n}-${r}`;if(this.pendingAssignments.has(s)){const i=this.pendingAssignments.get(s);clearTimeout(i.timeout);const o=i.count+1;if(o>=3)return console.log("Showing bulk assignment notification for",o,"tasks"),this.showBulkAssignmentNotification(o,n),this.pendingAssignments.delete(s),"bulk";const a=setTimeout(()=>{this.pendingAssignments.delete(s)},3e4);this.pendingAssignments.set(s,{count:o,timeout:a})}else{const i=setTimeout(()=>{this.pendingAssignments.delete(s)},3e4);this.pendingAssignments.set(s,{count:1,timeout:i})}return console.log("Showing single assignment notification"),this.showTaskAssignmentNotification(e,n,r),"single"}showDailyMotivation(){const e=["Ready to crush your goals today? ","Every small step counts towards your success! ","Focus on progress, not perfection! ","You've got this! Let's make today productive! ","Time to turn your dreams into achievements! "],n=e[Math.floor(Math.random()*e.length)];this.showNotification(" Good Morning!",{body:n,tag:"daily-motivation"})}scheduleRecurringReminders(e){this.clearAllScheduledNotifications(),e.forEach(n=>{n.dueDate&&n.status!=="completed"&&(this.scheduleTaskReminder(n,15),this.scheduleTaskReminder(n,60),this.scheduleTaskDueNotification(n))})}clearScheduledNotification(e){const n=this.scheduledNotifications.get(e);n&&(clearTimeout(n),this.scheduledNotifications.delete(e))}clearAllScheduledNotifications(){this.scheduledNotifications.forEach(e=>{clearTimeout(e)}),this.scheduledNotifications.clear()}getScheduledNotificationsCount(){return this.scheduledNotifications.size}isPermissionGranted(){return this.permission==="granted"}showDailySummary(e){const{tasksCompleted:n,focusTime:r,sessionsCompleted:s}=e;this.showNotification(" Daily Summary",{body:`Today: ${n} tasks completed, ${r}min focused, ${s} sessions`,tag:"daily-summary",requireInteraction:!1})}showWeeklyGoalReminder(){this.showNotification(" Weekly Goals Check-in",{body:"How are you progressing with your weekly goals? Take a moment to review!",tag:"weekly-goals",..."serviceWorker"in navigator&&{actions:[{action:"review-goals",title:" Review Goals"},{action:"update-goals",title:" Update Goals"}]}})}};Mt(Ba,"instance");let sb=Ba;const Ws=sb.getInstance();"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{const{action:e,data:n}=t.data;switch(e){case"notification-click":console.log("Notification clicked:",n);break;case"notification-action":console.log("Notification action:",n);break}});function Tle(){const t=g.useRef({}),e=g.useCallback(s=>{if(!t.current[s]){const i=new Audio(s);i.preload="auto",i.addEventListener("error",()=>{console.warn(`Sound file not found: ${s}. Skipping audio playback.`)}),t.current[s]=i}return t.current[s]},[]),n=g.useCallback(async s=>{try{const i=e(s);i.currentTime=0;const o=i.play();o!==void 0&&await o}catch{console.warn(`Could not play sound: ${s}. This is likely due to missing audio files or browser restrictions.`)}},[e]),r=g.useCallback(()=>{e("/sounds/iphone_ding.mp3"),e("/sounds/ting.mp3")},[e]);return{playSound:n,preloadSound:e,preloadCommonSounds:r}}const N4=g.createContext(void 0);function xle({children:t}){const[e,n]=g.useState([]),[r,s]=g.useState(!1),{user:i}=ur(),{toast:o}=Bl();g.useEffect(()=>{i?a():n([])},[i]);const a=()=>{if(!i)return;console.log("Setting up notifications real-time listener for user:",i.uid),s(!0);const y=Cl(br(Re,"users",i.uid,"notifications"),Tv("timestamp","desc")),w=hl(y,b=>{console.log("Notifications snapshot received, size:",b.size);const E=[];b.forEach(x=>{E.push({id:x.id,...x.data()})}),n(E),s(!1)},b=>{console.error("Error in notifications listener:",b),o({title:"Connection error",description:"Lost connection to notifications. Retrying...",variant:"destructive"}),s(!1)});return()=>{console.log("Cleaning up notifications listener"),w()}},l=async(y,w)=>{const b=w||(i==null?void 0:i.uid);if(!b){console.warn("Cannot add notification: no target user specified and current user not authenticated");return}try{const E=br(Re,"users",b,"notifications"),x={...y,userId:b,timestamp:new Date().toISOString()};console.log("Adding notification for user:",b,x),await Qf(E,x),console.log("Notification added successfully")}catch(E){console.error("Error adding notification:",E),o({title:"Failed to save notification",description:"Could not save the notification.",variant:"destructive"})}},c=async y=>{if(i)try{const w=it(Re,"users",i.uid,"notifications",y);await Cs(w,{read:!0}),console.log("Notification marked as read:",y)}catch(w){console.error("Error marking notification as read:",w)}},u=async()=>{if(i)try{const y=AE(Re);e.filter(b=>!b.read).forEach(b=>{const E=it(Re,"users",i.uid,"notifications",b.id);y.update(E,{read:!0})}),await y.commit(),console.log("All notifications marked as read"),o({title:"All notifications marked as read",description:"Your notification list has been cleared."})}catch(y){console.error("Error marking all notifications as read:",y),o({title:"Failed to mark notifications as read",description:"Could not update notifications.",variant:"destructive"})}},h=async y=>{if(i)try{const w=it(Re,"users",i.uid,"notifications",y);await Il(w),console.log("Notification deleted:",y)}catch(w){console.error("Error deleting notification:",w),o({title:"Failed to delete notification",description:"Could not delete the notification.",variant:"destructive"})}},p=async()=>{if(i)try{const y=AE(Re);e.forEach(w=>{const b=it(Re,"users",i.uid,"notifications",w.id);y.delete(b)}),await y.commit(),console.log("All notifications cleared"),o({title:"All notifications cleared",description:"Your notification history has been cleared."})}catch(y){console.error("Error clearing all notifications:",y),o({title:"Failed to clear notifications",description:"Could not clear notifications.",variant:"destructive"})}},m=e.filter(y=>!y.read).length,_={notifications:e,unreadCount:m,loading:r,addNotification:l,markAsRead:c,markAllAsRead:u,deleteNotification:h,clearAllNotifications:p};return f.jsx(N4.Provider,{value:_,children:t})}function QS(){const t=g.useContext(N4);if(t===void 0)throw new Error("useNotifications must be used within a NotificationsContextProvider");return t}const P4=g.createContext(void 0);function Sle({children:t}){const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,o]=g.useState(!0),[a,l]=g.useState(!1),{user:c,userProfile:u}=ur();QS();const{toast:h}=Bl(),{playSound:p,preloadCommonSounds:m}=Tle();g.useEffect(()=>{let $;return c&&u?($=_(),m()):(n([]),s([]),o(!1)),()=>{$&&(console.log("Cleaning up all real-time listeners."),$())}},[c,u,m]);const _=()=>{if(!c||!u)return;o(!0);const $=[],B=Cl(br(Re,"users",c.uid,"tasks"),Tv("createdAt","desc")),Y=hl(B,F=>{const j=F.docs.map(H=>({id:H.id,...H.data()}));n(H=>{const te=H.filter(se=>se.teamId);return[...j,...te].sort((se,de)=>se.priority==="high"&&de.priority!=="high"?-1:de.priority==="high"&&se.priority!=="high"?1:new Date(de.createdAt).getTime()-new Date(se.createdAt).getTime())}),o(!1)},F=>{console.error("Error in personal tasks listener:",F),h({title:"Connection error",description:"Lost connection to personal tasks.",variant:"destructive"}),o(!1)});if($.push(Y),u.teamId){const F=Cl(br(Re,"teams",u.teamId,"tasks"),Bc("assignedTo","array-contains",c.uid)),j=hl(F,J=>{const se=J.docs.map(de=>({id:de.id,...de.data()}));n(de=>[...de.filter(ve=>!ve.teamId),...se].sort((ve,ht)=>ve.priority==="high"&&ht.priority!=="high"?-1:ht.priority==="high"&&ve.priority!=="high"?1:new Date(ht.createdAt).getTime()-new Date(ve.createdAt).getTime()))},J=>{console.error("Error in team tasks listener:",J),h({title:"Team connection error",description:"Lost connection to team tasks.",variant:"destructive"})});$.push(j);const H=it(Re,"teams",u.teamId),te=hl(H,async J=>{if(J.exists()){const de=J.data().memberIds||[];if(de.length>0){const be=de.map(ht=>gc(it(Re,"users",ht))),ve=(await Promise.all(be)).filter(ht=>ht.exists()).map(ht=>ht.data());s(ve)}else s([])}else s([])},J=>{console.error("Error in team members listener:",J),s([])});$.push(te)}else s([]);return()=>{$.forEach(F=>F())}},y=async $=>{if(!c||!u)return;const B=`temp-${Date.now()}`,Y=!!(u.teamId&&$.assignedTo&&$.assignedTo.length>0),F={...$,id:B,assignedTo:$.assignedTo||[],teamId:Y?u.teamId:void 0,createdBy:c.uid,createdAt:new Date().toISOString(),status:"todo",priority:$.priority||"medium"};n(j=>[F,...j].sort((H,te)=>new Date(te.createdAt).getTime()-new Date(H.createdAt).getTime())),h({title:"Task created",description:"Your task is being saved..."});try{const{id:j,...H}=F;H.teamId||delete H.teamId;const te=Y?`teams/${u.teamId}/tasks`:`users/${c.uid}/tasks`,J=await Qf(br(Re,te),H),se={...F,id:J.id};if(n(de=>de.map(be=>be.id===B?se:be)),se.dueDate&&(Ws.scheduleTaskReminder(se,15),Ws.scheduleTaskDueNotification(se)),se.assignedTo&&se.assignedTo.length>0){const de=u.displayName||c.email||"Someone";for(const be of se.assignedTo)be!==c.uid&&(console.log("Sending task assignment notification to user:",be),Ws.handleTaskAssignment(se,de,be))}}catch(j){n(H=>H.filter(te=>te.id!==B)),console.error("Error adding task:",j),h({title:"Failed to create task",variant:"destructive"})}},w=async($,B)=>{if(!c||!u){h({title:"Authentication required",variant:"destructive"});return}const Y=e.find(de=>de.id===$);if(!Y){h({title:"Task not found",variant:"destructive"});return}const F=Y.assignedTo||[],j=B.assignedTo||F,te=!!(u.teamId&&j.length>0)?u.teamId:null,J=(Y.teamId||null)!==te,se={...Y,...B,teamId:te||void 0};se.teamId||delete se.teamId,n(de=>de.map(be=>be.id===$?se:be));try{const de=j.filter(Pe=>!F.includes(Pe));if(de.length>0){const Pe=u.displayName||c.email||"Someone";for(const ve of de)ve!==c.uid&&(console.log("Sending task assignment notification to user:",ve),Ws.handleTaskAssignment(se,Pe,ve))}const be={...B};if(Object.entries(be).forEach(([Pe,ve])=>{ve===void 0&&(be[Pe]=gw())}),be.teamId=te||gw(),J){const Pe=it(Re,Y.teamId?`teams/${Y.teamId}/tasks`:`users/${c.uid}/tasks`,$);await Il(Pe);const ve=it(Re,te?`teams/${te}/tasks`:`users/${c.uid}/tasks`,$),{id:ht,...ft}=se,wt={};Object.entries(ft).forEach(([ln,Xt])=>{Xt!==void 0&&(wt[ln]=Xt)}),await JL(ve,wt)}else{const Pe=it(Re,Y.teamId?`teams/${Y.teamId}/tasks`:`users/${c.uid}/tasks`,$);await Cs(Pe,be)}h({title:"Task updated",description:"Your changes have been saved."})}catch(de){n(be=>be.map(Pe=>Pe.id===$?Y:Pe)),console.error("Error updating task:",de),h({title:"Failed to update task",variant:"destructive"})}},b=async $=>{if(!c)return;const B=e.find(Y=>Y.id===$);if(B){n(Y=>Y.filter(F=>F.id!==$));try{const Y=B.teamId?`teams/${B.teamId}/tasks/${$}`:`users/${c.uid}/tasks/${$}`;await Il(it(Re,Y)),Ws.clearScheduledNotification(`task-reminder-${$}`),Ws.clearScheduledNotification(`task-due-${$}`),h({title:"Task deleted",variant:"destructive"})}catch(Y){n(F=>[...F,B]),console.error("Error deleting task:",Y),h({title:"Failed to delete task",variant:"destructive"})}}},E=async $=>{if(!c)return;const B=e.find(H=>H.id===$);if(!B)return;const Y={...B},F=B.status==="completed"?"todo":"completed",j={...B,status:F};F==="completed"?j.completedAt=new Date().toISOString():delete j.completedAt,n(H=>H.map(te=>te.id===$?j:te));try{F==="completed"&&(p(E8),Ws.showTaskCompleteNotification(B.title),await Ws.addInAppNotification(c.uid,"Task completed! ",`Great job completing "${B.title}"!`,"task-complete",{taskId:$,taskTitle:B.title}));const H=B.teamId?`teams/${B.teamId}/tasks/${$}`:`users/${c.uid}/tasks/${$}`,te={status:F,completedAt:F==="completed"?j.completedAt:gw()};await Cs(it(Re,H),te)}catch(H){n(te=>te.map(J=>J.id===$?Y:J)),console.error("Error toggling task status:",H),h({title:"Failed to update task",variant:"destructive"})}},x=async $=>{if(!c)return;const B=e.find(F=>F.id===$);if(!B)return;const Y=B.priority==="high"?"medium":"high";n(F=>F.map(j=>j.id===$?{...j,priority:Y}:j));try{const F=B.teamId?`teams/${B.teamId}/tasks/${$}`:`users/${c.uid}/tasks/${$}`;await Cs(it(Re,F),{priority:Y})}catch(F){n(j=>j.map(H=>H.id===$?{...H,priority:B.priority}:H)),console.error("Error toggling task priority:",F),h({title:"Failed to update priority",variant:"destructive"})}},R=async($,B)=>{if(!c)return;const Y=e.find(H=>H.id===$);if(!Y)return;const F={...Y},j=(Y.timeSpent||0)+B;n(H=>H.map(te=>te.id===$?{...te,timeSpent:j}:te));try{const H=Y.teamId?`teams/${Y.teamId}/tasks/${$}`:`users/${c.uid}/tasks/${$}`;await Cs(it(Re,H),{timeSpent:j})}catch(H){throw n(te=>te.map(J=>J.id===$?F:J)),console.error("Error updating task time:",H),H}},O=($,B)=>e.filter(Y=>{const F=new Date(Y.createdAt);return F>=$&&F<=B}),L=$=>e.filter(B=>B.status===$),k=$=>e.filter(B=>B.priority===$),S=$=>{const B=new Date($);B.setHours(0,0,0,0);const Y=new Date($);return Y.setHours(23,59,59,999),e.filter(F=>{if(F.status!=="completed"||!F.completedAt)return!1;const j=new Date(F.completedAt);return j>=B&&j<=Y})},q={tasks:e,teamMembers:r,loading:i,isTaskFormActive:a,setTaskFormActive:l,addTask:y,updateTask:w,deleteTask:b,toggleTaskStatus:E,toggleTaskPriority:x,updateTaskTimeSpent:R,getTasksByDateRange:O,getTasksByStatus:L,getTasksByPriority:k,getTasksCompletedOnDate:S,getTotalTasksCount:()=>e.length,getCompletedTasksCount:()=>e.filter($=>$.status==="completed").length,getActiveTasksCount:()=>e.filter($=>$.status!=="completed").length,getCurrentStreak:()=>{if(e.length===0)return 0;let $=0,B=new Date;for(;S(B).length>0;)$++,B.setDate(B.getDate()-1);return $},getLongestStreak:()=>{if(e.length===0)return 0;const $=[...new Set(e.filter(F=>F.status==="completed"&&F.completedAt).map(F=>new Date(F.completedAt).setHours(0,0,0,0)))].sort((F,j)=>F-j);if($.length===0)return 0;let B=0,Y=0;$.length>0&&(B=1,Y=1);for(let F=1;F<$.length;F++)$[F]-$[F-1]===864e5?Y++:(B=Math.max(B,Y),Y=1);return Math.max(B,Y)}};return f.jsx(P4.Provider,{value:q,children:t})}function YS(){const t=g.useContext(P4);if(t===void 0)throw new Error("useTasks must be used within a TasksContextProvider");return t}const D4=g.createContext(void 0);function O4({children:t}){const{user:e}=ur(),{teamMembers:n}=YS(),[r,s]=g.useState({}),[i,o]=g.useState({}),[a,l]=g.useState({}),c=async y=>{if(e)try{const w=yc(vc,`presence/${e.uid}`);await QE(w,{online:y,lastSeen:Date.now()})}catch(w){console.error("Error updating online status:",w)}};g.useEffect(()=>{if(!e)return;c(!0);const y=()=>{c(!1)};window.addEventListener("beforeunload",y);const w=()=>{c(!document.hidden)};return document.addEventListener("visibilitychange",w),()=>{c(!1),window.removeEventListener("beforeunload",y),document.removeEventListener("visibilitychange",w)}},[e]),g.useEffect(()=>{if(!n.length)return;const y=[];return n.forEach(w=>{const b=yc(vc,`presence/${w.uid}`);kA(b,E=>{const x=E.val();x&&s(R=>({...R,[w.uid]:{online:x.online||!1,lastSeen:x.lastSeen||Date.now()}}))}),y.push(()=>ZF(b))}),()=>{y.forEach(w=>w())}},[n]);const u=Object.values(i).reduce((y,w)=>y+w,0),h=async(y,w)=>{if(e)try{const b=yc(vc,`messageStatus/${y}/${w}/${e.uid}`);await QE(b,{read:!0,readAt:Date.now()})}catch(b){console.error("Error marking message as read:",b)}},p=async(y,w)=>{if(!(!e||w.length===0))try{const b={},E={read:!0,readAt:Date.now()};w.forEach(x=>{b[`messageStatus/${y}/${x}/${e.uid}`]=E}),await rre(yc(vc),b)}catch(b){console.error("Error marking messages as read:",b)}},_={onlineStatus:r,unreadCounts:i,messageStatus:a,totalUnreadCount:u,markMessageAsRead:h,markChatAsRead:async y=>{if(e)try{o(b=>({...b,[y]:0}));const w=yc(vc,`chats/${y}/messages`);kA(w,async b=>{const E=b.val();if(E){const x=Object.keys(E);await p(y,x)}},{onlyOnce:!0})}catch(w){console.error("Error marking chat as read:",w)}},markMessagesAsReadBatch:p,updateOnlineStatus:c};return f.jsx(D4.Provider,{value:_,children:t})}function Cle(){const t=g.useContext(D4);if(t===void 0)throw new Error("useTeamChat must be used within a TeamChatProvider");return t}const Ile=[{title:"Dashboard",url:"/",icon:G0},{title:"Tasks",url:"/tasks",icon:du},{title:"Team Chat",url:"/team-chat",icon:cM},{title:"Meetly",url:"/meetly",icon:oM},{title:"Focus Timer",url:"/timer",icon:PW},{title:"AI Assistant",url:"/chat",icon:aW},{title:"Calendar",url:"/calendar",icon:nM},{title:"Notes",url:"/notes",icon:Zz},{title:"Analytics",url:"/analytics",icon:G0}],kle=t=>[{title:"Profile",url:"/profile",icon:zy,auth:!0}];function Rle({className:t}){const{state:e,toggleSidebar:n}=Zl(),{theme:r,setTheme:s}=wM(),{totalUnreadCount:i}=Cle(),a=Sa().pathname,l=e==="collapsed",c=_=>!!(_==="/"&&a==="/"||_!=="/"&&a.startsWith(_)),u=_=>{const y="transition-smooth hover-lift relative group rounded-lg font-medium";return c(_)?Z(y,"bg-gradient-to-r from-primary/10 to-primary/5 text-primary shadow-elegant border border-primary/20"):Z(y,"hover:bg-muted/60 hover:shadow-medium text-muted-foreground hover:text-foreground")},{user:h,signOutUser:p}=ur(),m=()=>{s(r==="dark"?"light":"dark")};return f.jsxs(C4,{className:Z("border-r border-border/50 bg-card/50 backdrop-blur-sm transition-smooth shadow-elegant",l?"w-16":"w-72",t),children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50 bg-gradient-to-r from-background to-muted/20",children:[!l&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"gradient-primary h-10 w-10 rounded-xl flex items-center justify-center shadow-glow animate-pulse-glow",children:f.jsx(du,{className:"h-5 w-5 text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl font-bold text-gradient tracking-tight",children:"Taskly"}),f.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Premium Task Management"})]})]}),l&&f.jsx("div",{className:"flex items-center justify-center",children:f.jsx("div",{className:"gradient-primary h-8 w-8 rounded-lg flex items-center justify-center shadow-glow",children:f.jsx(du,{className:"h-4 w-4 text-white"})})}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Qe,{variant:"ghost",size:"icon",onClick:m,className:"hover-scale h-8 w-8",title:`Switch to ${r==="dark"?"light":"dark"} mode`,children:r==="dark"?f.jsx(AW,{className:"h-4 w-4"}):f.jsx(hW,{className:"h-4 w-4"})}),f.jsx(Qe,{variant:"ghost",size:"icon",onClick:n,className:"hover-scale h-8 w-8",children:f.jsx(ql,{className:"h-4 w-4"})})]})]}),f.jsxs(R4,{className:"px-2",children:[f.jsxs(eb,{children:[f.jsx(tb,{className:l?"sr-only":"",children:"Main Navigation"}),f.jsx(nb,{children:f.jsx(rb,{children:Ile.map(_=>f.jsx(Fm,{children:f.jsx(Vm,{asChild:!0,children:f.jsxs(C1,{to:_.url,className:u(_.url),children:[f.jsx(_.icon,{className:"h-4 w-4"}),!l&&f.jsx("span",{children:_.title}),_.url==="/team-chat"&&i>0&&!l&&f.jsx(Br,{variant:"destructive",className:"ml-auto h-5 w-5 flex items-center justify-center p-0 text-xs",children:i>99?"99+":i})]})})},_.title))})})]}),f.jsxs(eb,{className:"mt-auto",children:[f.jsx(tb,{className:l?"sr-only":"",children:"Account"}),f.jsx(nb,{children:f.jsxs(rb,{children:[kle().map(_=>f.jsx(Fm,{children:f.jsx(Vm,{asChild:!0,children:f.jsxs(C1,{to:_.url,className:u(_.url),children:[f.jsx(_.icon,{className:"h-4 w-4"}),!l&&f.jsx("span",{children:_.title})]})})},_.title)),f.jsx(k4,{}),f.jsx(Fm,{children:f.jsxs(Vm,{onClick:p,className:Z("transition-smooth hover-scale","hover:bg-destructive/10 hover:text-destructive"),children:[f.jsx(iM,{className:"h-4 w-4"}),!l&&f.jsx("span",{children:"Sign Out"})]})})]})})]})]})]})}var M4={exports:{}},L4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ku=g;function Ale(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nle=typeof Object.is=="function"?Object.is:Ale,Ple=ku.useState,Dle=ku.useEffect,Ole=ku.useLayoutEffect,Mle=ku.useDebugValue;function Lle(t,e){var n=e(),r=Ple({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Ole(function(){s.value=n,s.getSnapshot=e,Ww(s)&&i({inst:s})},[t,n,e]),Dle(function(){return Ww(s)&&i({inst:s}),t(function(){Ww(s)&&i({inst:s})})},[t]),Mle(n),n}function Ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nle(t,n)}catch{return!0}}function jle(t,e){return e()}var Fle=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jle:Lle;L4.useSyncExternalStore=ku.useSyncExternalStore!==void 0?ku.useSyncExternalStore:Fle;M4.exports=L4;var Vle=M4.exports;function Ule(){return Vle.useSyncExternalStore($le,()=>!0,()=>!1)}function $le(){return()=>{}}var XS="Avatar",[Ble,Dfe]=Kr(XS),[zle,j4]=Ble(XS),F4=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return f.jsx(zle,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:f.jsx(Ae.span,{...r,ref:e})})});F4.displayName=XS;var V4="AvatarImage",U4=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=j4(V4,n),a=Wle(r,i),l=Qt(c=>{s(c),o.onImageLoadingStatusChange(c)});return Wr(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?f.jsx(Ae.img,{...i,ref:e,src:r}):null});U4.displayName=V4;var $4="AvatarFallback",B4=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=j4($4,n),[o,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?f.jsx(Ae.span,{...s,ref:e}):null});B4.displayName=$4;function fN(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Wle(t,{referrerPolicy:e,crossOrigin:n}){const r=Ule(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,a]=g.useState(()=>fN(i,t));return Wr(()=>{a(fN(i,t))},[i,t]),Wr(()=>{const l=h=>()=>{a(h)};if(!i)return;const c=l("loaded"),u=l("error");return i.addEventListener("load",c),i.addEventListener("error",u),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",c),i.removeEventListener("error",u)}},[i,n,e]),o}var z4=F4,W4=U4,q4=B4;const H4=g.forwardRef(({className:t,...e},n)=>f.jsx(z4,{ref:n,className:Z("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));H4.displayName=z4.displayName;const G4=g.forwardRef(({className:t,...e},n)=>f.jsx(W4,{ref:n,className:Z("aspect-square h-full w-full",t),...e}));G4.displayName=W4.displayName;const K4=g.forwardRef(({className:t,...e},n)=>f.jsx(q4,{ref:n,className:Z("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));K4.displayName=q4.displayName;var qle=g.createContext(void 0);function Jv(t){const e=g.useContext(qle);return t||e||"ltr"}var qw="rovingFocusGroup.onEntryFocus",Hle={bubbles:!1,cancelable:!0},op="RovingFocusGroup",[ib,Q4,Gle]=vT(op),[Kle,e_]=Kr(op,[Gle]),[Qle,Yle]=Kle(op),Y4=g.forwardRef((t,e)=>f.jsx(ib.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(ib.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Xle,{...t,ref:e})})}));Y4.displayName=op;var Xle=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,p=g.useRef(null),m=ut(e,p),_=Jv(i),[y,w]=Wl({prop:o,defaultProp:a??null,onChange:l,caller:op}),[b,E]=g.useState(!1),x=Qt(c),R=Q4(n),O=g.useRef(!1),[L,k]=g.useState(0);return g.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(qw,x),()=>S.removeEventListener(qw,x)},[x]),f.jsx(Qle,{scope:n,orientation:r,dir:_,loop:s,currentTabStopId:y,onItemFocus:g.useCallback(S=>w(S),[w]),onItemShiftTab:g.useCallback(()=>E(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(S=>S+1),[]),onFocusableItemRemove:g.useCallback(()=>k(S=>S-1),[]),children:f.jsx(Ae.div,{tabIndex:b||L===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:pe(t.onMouseDown,()=>{O.current=!0}),onFocus:pe(t.onFocus,S=>{const I=!O.current;if(S.target===S.currentTarget&&I&&!b){const C=new CustomEvent(qw,Hle);if(S.currentTarget.dispatchEvent(C),!C.defaultPrevented){const P=R().filter(B=>B.focusable),D=P.find(B=>B.active),A=P.find(B=>B.id===y),$=[D,A,...P].filter(Boolean).map(B=>B.ref.current);J4($,u)}}O.current=!1}),onBlur:pe(t.onBlur,()=>E(!1))})})}),X4="RovingFocusGroupItem",Z4=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=qi(),c=i||l,u=Yle(X4,n),h=u.currentTabStopId===c,p=Q4(n),{onFocusableItemAdd:m,onFocusableItemRemove:_,currentTabStopId:y}=u;return g.useEffect(()=>{if(r)return m(),()=>_()},[r,m,_]),f.jsx(ib.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:f.jsx(Ae.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:pe(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:pe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pe(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const b=ece(w,u.orientation,u.dir);if(b!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let x=p().filter(R=>R.focusable).map(R=>R.ref.current);if(b==="last")x.reverse();else if(b==="prev"||b==="next"){b==="prev"&&x.reverse();const R=x.indexOf(w.currentTarget);x=u.loop?tce(x,R+1):x.slice(R+1)}setTimeout(()=>J4(x))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});Z4.displayName=X4;var Zle={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Jle(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ece(t,e,n){const r=Jle(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Zle[r]}function J4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function tce(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var eU=Y4,tU=Z4,ob=["Enter"," "],nce=["ArrowDown","PageUp","Home"],nU=["ArrowUp","PageDown","End"],rce=[...nce,...nU],sce={ltr:[...ob,"ArrowRight"],rtl:[...ob,"ArrowLeft"]},ice={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ap="Menu",[yf,oce,ace]=vT(ap),[Jl,rU]=Kr(ap,[ace,qu,e_]),t_=qu(),sU=e_(),[lce,ec]=Jl(ap),[cce,lp]=Jl(ap),iU=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=t_(e),[l,c]=g.useState(null),u=g.useRef(!1),h=Qt(i),p=Jv(s);return g.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),f.jsx(LT,{...a,children:f.jsx(lce,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:c,children:f.jsx(cce,{scope:e,onClose:g.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})})};iU.displayName=ap;var uce="MenuAnchor",ZS=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=t_(n);return f.jsx(Gy,{...s,...r,ref:e})});ZS.displayName=uce;var JS="MenuPortal",[dce,oU]=Jl(JS,{forceMount:void 0}),aU=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=ec(JS,e);return f.jsx(dce,{scope:e,forceMount:n,children:f.jsx(On,{present:n||i.open,children:f.jsx(Of,{asChild:!0,container:s,children:r})})})};aU.displayName=JS;var is="MenuContent",[hce,eC]=Jl(is),lU=g.forwardRef((t,e)=>{const n=oU(is,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ec(is,t.__scopeMenu),o=lp(is,t.__scopeMenu);return f.jsx(yf.Provider,{scope:t.__scopeMenu,children:f.jsx(On,{present:r||i.open,children:f.jsx(yf.Slot,{scope:t.__scopeMenu,children:o.modal?f.jsx(fce,{...s,ref:e}):f.jsx(pce,{...s,ref:e})})})})}),fce=g.forwardRef((t,e)=>{const n=ec(is,t.__scopeMenu),r=g.useRef(null),s=ut(e,r);return g.useEffect(()=>{const i=r.current;if(i)return qS(i)},[]),f.jsx(tC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:pe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pce=g.forwardRef((t,e)=>{const n=ec(is,t.__scopeMenu);return f.jsx(tC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),mce=El("MenuContent.ScrollLock"),tC=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:m,disableOutsideScroll:_,...y}=t,w=ec(is,n),b=lp(is,n),E=t_(n),x=sU(n),R=oce(n),[O,L]=g.useState(null),k=g.useRef(null),S=ut(e,k,w.onContentChange),I=g.useRef(0),C=g.useRef(""),P=g.useRef(0),D=g.useRef(null),A=g.useRef("right"),q=g.useRef(0),$=_?Gv:g.Fragment,B=_?{as:mce,allowPinchZoom:!0}:void 0,Y=j=>{var ve,ht;const H=C.current+j,te=R().filter(ft=>!ft.disabled),J=document.activeElement,se=(ve=te.find(ft=>ft.ref.current===J))==null?void 0:ve.textValue,de=te.map(ft=>ft.textValue),be=Ice(de,H,se),Pe=(ht=te.find(ft=>ft.textValue===be))==null?void 0:ht.ref.current;(function ft(wt){C.current=wt,window.clearTimeout(I.current),wt!==""&&(I.current=window.setTimeout(()=>ft(""),1e3))})(H),Pe&&setTimeout(()=>Pe.focus())};g.useEffect(()=>()=>window.clearTimeout(I.current),[]),WS();const F=g.useCallback(j=>{var te,J;return A.current===((te=D.current)==null?void 0:te.side)&&Rce(j,(J=D.current)==null?void 0:J.area)},[]);return f.jsx(hce,{scope:n,searchRef:C,onItemEnter:g.useCallback(j=>{F(j)&&j.preventDefault()},[F]),onItemLeave:g.useCallback(j=>{var H;F(j)||((H=k.current)==null||H.focus(),L(null))},[F]),onTriggerLeave:g.useCallback(j=>{F(j)&&j.preventDefault()},[F]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(j=>{D.current=j},[]),children:f.jsx($,{...B,children:f.jsx(qv,{asChild:!0,trapped:s,onMountAutoFocus:pe(i,j=>{var H;j.preventDefault(),(H=k.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:f.jsx(Uu,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:m,children:f.jsx(eU,{asChild:!0,...x,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:L,onEntryFocus:pe(l,j=>{b.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(jT,{role:"menu","aria-orientation":"vertical","data-state":xU(w.open),"data-radix-menu-content":"",dir:b.dir,...E,...y,ref:S,style:{outline:"none",...y.style},onKeyDown:pe(y.onKeyDown,j=>{const te=j.target.closest("[data-radix-menu-content]")===j.currentTarget,J=j.ctrlKey||j.altKey||j.metaKey,se=j.key.length===1;te&&(j.key==="Tab"&&j.preventDefault(),!J&&se&&Y(j.key));const de=k.current;if(j.target!==de||!rce.includes(j.key))return;j.preventDefault();const Pe=R().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);nU.includes(j.key)&&Pe.reverse(),Sce(Pe)}),onBlur:pe(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(I.current),C.current="")}),onPointerMove:pe(t.onPointerMove,vf(j=>{const H=j.target,te=q.current!==j.clientX;if(j.currentTarget.contains(H)&&te){const J=j.clientX>q.current?"right":"left";A.current=J,q.current=j.clientX}}))})})})})})})});lU.displayName=is;var gce="MenuGroup",nC=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Ae.div,{role:"group",...r,ref:e})});nC.displayName=gce;var yce="MenuLabel",cU=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Ae.div,{...r,ref:e})});cU.displayName=yce;var sy="MenuItem",pN="menu.itemSelect",n_=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=g.useRef(null),o=lp(sy,t.__scopeMenu),a=eC(sy,t.__scopeMenu),l=ut(e,i),c=g.useRef(!1),u=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(pN,{bubbles:!0,cancelable:!0});h.addEventListener(pN,m=>r==null?void 0:r(m),{once:!0}),_T(h,p),p.defaultPrevented?c.current=!1:o.onClose()}};return f.jsx(uU,{...s,ref:l,disabled:n,onClick:pe(t.onClick,u),onPointerDown:h=>{var p;(p=t.onPointerDown)==null||p.call(t,h),c.current=!0},onPointerUp:pe(t.onPointerUp,h=>{var p;c.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:pe(t.onKeyDown,h=>{const p=a.searchRef.current!=="";n||p&&h.key===" "||ob.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});n_.displayName=sy;var uU=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=eC(sy,n),a=sU(n),l=g.useRef(null),c=ut(e,l),[u,h]=g.useState(!1),[p,m]=g.useState("");return g.useEffect(()=>{const _=l.current;_&&m((_.textContent??"").trim())},[i.children]),f.jsx(yf.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:f.jsx(tU,{asChild:!0,...a,focusable:!r,children:f.jsx(Ae.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:pe(t.onPointerMove,vf(_=>{r?o.onItemLeave(_):(o.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:pe(t.onPointerLeave,vf(_=>o.onItemLeave(_))),onFocus:pe(t.onFocus,()=>h(!0)),onBlur:pe(t.onBlur,()=>h(!1))})})})}),vce="MenuCheckboxItem",dU=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return f.jsx(gU,{scope:t.__scopeMenu,checked:n,children:f.jsx(n_,{role:"menuitemcheckbox","aria-checked":iy(n)?"mixed":n,...s,ref:e,"data-state":sC(n),onSelect:pe(s.onSelect,()=>r==null?void 0:r(iy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});dU.displayName=vce;var hU="MenuRadioGroup",[_ce,wce]=Jl(hU,{value:void 0,onValueChange:()=>{}}),fU=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Qt(r);return f.jsx(_ce,{scope:t.__scopeMenu,value:n,onValueChange:i,children:f.jsx(nC,{...s,ref:e})})});fU.displayName=hU;var pU="MenuRadioItem",mU=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=wce(pU,t.__scopeMenu),i=n===s.value;return f.jsx(gU,{scope:t.__scopeMenu,checked:i,children:f.jsx(n_,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":sC(i),onSelect:pe(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});mU.displayName=pU;var rC="MenuItemIndicator",[gU,Ece]=Jl(rC,{checked:!1}),yU=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=Ece(rC,n);return f.jsx(On,{present:r||iy(i.checked)||i.checked===!0,children:f.jsx(Ae.span,{...s,ref:e,"data-state":sC(i.checked)})})});yU.displayName=rC;var bce="MenuSeparator",vU=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});vU.displayName=bce;var Tce="MenuArrow",_U=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=t_(n);return f.jsx(FT,{...s,...r,ref:e})});_U.displayName=Tce;var xce="MenuSub",[Ofe,wU]=Jl(xce),Gd="MenuSubTrigger",EU=g.forwardRef((t,e)=>{const n=ec(Gd,t.__scopeMenu),r=lp(Gd,t.__scopeMenu),s=wU(Gd,t.__scopeMenu),i=eC(Gd,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),f.jsx(ZS,{asChild:!0,...c,children:f.jsx(uU,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":xU(n.open),...t,ref:Uy(e,s.onTriggerChange),onClick:h=>{var p;(p=t.onClick)==null||p.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:pe(t.onPointerMove,vf(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:pe(t.onPointerLeave,vf(h=>{var m,_;u();const p=(m=n.content)==null?void 0:m.getBoundingClientRect();if(p){const y=(_=n.content)==null?void 0:_.dataset.side,w=y==="right",b=w?-5:5,E=p[w?"left":"right"],x=p[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:E,y:p.top},{x,y:p.top},{x,y:p.bottom},{x:E,y:p.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:pe(t.onKeyDown,h=>{var m;const p=i.searchRef.current!=="";t.disabled||p&&h.key===" "||sce[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});EU.displayName=Gd;var bU="MenuSubContent",TU=g.forwardRef((t,e)=>{const n=oU(is,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ec(is,t.__scopeMenu),o=lp(is,t.__scopeMenu),a=wU(bU,t.__scopeMenu),l=g.useRef(null),c=ut(e,l);return f.jsx(yf.Provider,{scope:t.__scopeMenu,children:f.jsx(On,{present:r||i.open,children:f.jsx(yf.Slot,{scope:t.__scopeMenu,children:f.jsx(tC,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:pe(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:pe(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:pe(t.onKeyDown,u=>{var m;const h=u.currentTarget.contains(u.target),p=ice[o.dir].includes(u.key);h&&p&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});TU.displayName=bU;function xU(t){return t?"open":"closed"}function iy(t){return t==="indeterminate"}function sC(t){return iy(t)?"indeterminate":t?"checked":"unchecked"}function Sce(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Cce(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Ice(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Cce(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function kce(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,h=l.x,p=l.y;u>r!=p>r&&n<(h-c)*(r-u)/(p-u)+c&&(s=!s)}return s}function Rce(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return kce(n,e)}function vf(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Ace=iU,Nce=ZS,Pce=aU,Dce=lU,Oce=nC,Mce=cU,Lce=n_,jce=dU,Fce=fU,Vce=mU,Uce=yU,$ce=vU,Bce=_U,zce=EU,Wce=TU,r_="DropdownMenu",[qce,Mfe]=Kr(r_,[rU]),dr=rU(),[Hce,SU]=qce(r_),CU=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=dr(e),c=g.useRef(null),[u,h]=Wl({prop:s,defaultProp:i??!1,onChange:o,caller:r_});return f.jsx(Hce,{scope:e,triggerId:qi(),triggerRef:c,contentId:qi(),open:u,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(p=>!p),[h]),modal:a,children:f.jsx(Ace,{...l,open:u,onOpenChange:h,dir:r,modal:a,children:n})})};CU.displayName=r_;var IU="DropdownMenuTrigger",kU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=SU(IU,n),o=dr(n);return f.jsx(Nce,{asChild:!0,...o,children:f.jsx(Ae.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Uy(e,i.triggerRef),onPointerDown:pe(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:pe(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});kU.displayName=IU;var Gce="DropdownMenuPortal",RU=t=>{const{__scopeDropdownMenu:e,...n}=t,r=dr(e);return f.jsx(Pce,{...r,...n})};RU.displayName=Gce;var AU="DropdownMenuContent",NU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=SU(AU,n),i=dr(n),o=g.useRef(!1);return f.jsx(Dce,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:pe(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:pe(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});NU.displayName=AU;var Kce="DropdownMenuGroup",Qce=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Oce,{...s,...r,ref:e})});Qce.displayName=Kce;var Yce="DropdownMenuLabel",PU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Mce,{...s,...r,ref:e})});PU.displayName=Yce;var Xce="DropdownMenuItem",DU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Lce,{...s,...r,ref:e})});DU.displayName=Xce;var Zce="DropdownMenuCheckboxItem",OU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(jce,{...s,...r,ref:e})});OU.displayName=Zce;var Jce="DropdownMenuRadioGroup",eue=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Fce,{...s,...r,ref:e})});eue.displayName=Jce;var tue="DropdownMenuRadioItem",MU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Vce,{...s,...r,ref:e})});MU.displayName=tue;var nue="DropdownMenuItemIndicator",LU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Uce,{...s,...r,ref:e})});LU.displayName=nue;var rue="DropdownMenuSeparator",jU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx($ce,{...s,...r,ref:e})});jU.displayName=rue;var sue="DropdownMenuArrow",iue=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Bce,{...s,...r,ref:e})});iue.displayName=sue;var oue="DropdownMenuSubTrigger",FU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(zce,{...s,...r,ref:e})});FU.displayName=oue;var aue="DropdownMenuSubContent",VU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=dr(n);return f.jsx(Wce,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VU.displayName=aue;var lue=CU,cue=kU,uue=RU,UU=NU,$U=PU,BU=DU,zU=OU,WU=MU,qU=LU,HU=jU,GU=FU,KU=VU;const due=lue,hue=cue,fue=g.forwardRef(({className:t,inset:e,children:n,...r},s)=>f.jsxs(GU,{ref:s,className:Z("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,f.jsx(Fz,{className:"ml-auto h-4 w-4"})]}));fue.displayName=GU.displayName;const pue=g.forwardRef(({className:t,...e},n)=>f.jsx(KU,{ref:n,className:Z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));pue.displayName=KU.displayName;const QU=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(uue,{children:f.jsx(UU,{ref:r,sideOffset:e,className:Z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));QU.displayName=UU.displayName;const Um=g.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(BU,{ref:r,className:Z("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Um.displayName=BU.displayName;const mue=g.forwardRef(({className:t,children:e,checked:n,...r},s)=>f.jsxs(zU,{ref:s,className:Z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(qU,{children:f.jsx(rM,{className:"h-4 w-4"})})}),e]}));mue.displayName=zU.displayName;const gue=g.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(WU,{ref:r,className:Z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(qU,{children:f.jsx(zz,{className:"h-2 w-2 fill-current"})})}),e]}));gue.displayName=WU.displayName;const yue=g.forwardRef(({className:t,inset:e,...n},r)=>f.jsx($U,{ref:r,className:Z("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));yue.displayName=$U.displayName;const ab=g.forwardRef(({className:t,...e},n)=>f.jsx(HU,{ref:n,className:Z("-mx-1 my-1 h-px bg-muted",t),...e}));ab.displayName=HU.displayName;var s_="Popover",[YU,Lfe]=Kr(s_,[qu]),cp=qu(),[vue,Na]=YU(s_),XU=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=cp(e),l=g.useRef(null),[c,u]=g.useState(!1),[h,p]=Wl({prop:r,defaultProp:s??!1,onChange:i,caller:s_});return f.jsx(LT,{...a,children:f.jsx(vue,{scope:e,contentId:qi(),triggerRef:l,open:h,onOpenChange:p,onOpenToggle:g.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o,children:n})})};XU.displayName=s_;var ZU="PopoverAnchor",_ue=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Na(ZU,n),i=cp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return g.useEffect(()=>(o(),()=>a()),[o,a]),f.jsx(Gy,{...i,...r,ref:e})});_ue.displayName=ZU;var JU="PopoverTrigger",e$=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Na(JU,n),i=cp(n),o=ut(e,s.triggerRef),a=f.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":i$(s.open),...r,ref:o,onClick:pe(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:f.jsx(Gy,{asChild:!0,...i,children:a})});e$.displayName=JU;var iC="PopoverPortal",[wue,Eue]=YU(iC,{forceMount:void 0}),t$=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=Na(iC,e);return f.jsx(wue,{scope:e,forceMount:n,children:f.jsx(On,{present:n||i.open,children:f.jsx(Of,{asChild:!0,container:s,children:r})})})};t$.displayName=iC;var Ru="PopoverContent",n$=g.forwardRef((t,e)=>{const n=Eue(Ru,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=Na(Ru,t.__scopePopover);return f.jsx(On,{present:r||i.open,children:i.modal?f.jsx(Tue,{...s,ref:e}):f.jsx(xue,{...s,ref:e})})});n$.displayName=Ru;var bue=El("PopoverContent.RemoveScroll"),Tue=g.forwardRef((t,e)=>{const n=Na(Ru,t.__scopePopover),r=g.useRef(null),s=ut(e,r),i=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return qS(o)},[]),f.jsx(Gv,{as:bue,allowPinchZoom:!0,children:f.jsx(r$,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:pe(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),xue=g.forwardRef((t,e)=>{const n=Na(Ru,t.__scopePopover),r=g.useRef(!1),s=g.useRef(!1);return f.jsx(r$,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),r$=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...h}=t,p=Na(Ru,n),m=cp(n);return WS(),f.jsx(qv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:f.jsx(Uu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:f.jsx(jT,{"data-state":i$(p.open),role:"dialog",id:p.contentId,...m,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),s$="PopoverClose",Sue=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Na(s$,n);return f.jsx(Ae.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});Sue.displayName=s$;var Cue="PopoverArrow",Iue=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=cp(n);return f.jsx(FT,{...s,...r,ref:e})});Iue.displayName=Cue;function i$(t){return t?"open":"closed"}var kue=XU,Rue=e$,Aue=t$,o$=n$;const a$=kue,l$=Rue,oC=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>f.jsx(Aue,{children:f.jsx(o$,{ref:s,align:e,sideOffset:n,className:Z("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));oC.displayName=o$.displayName;function Nue(t,[e,n]){return Math.min(n,Math.max(e,t))}function Pue(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var aC="ScrollArea",[c$,jfe]=Kr(aC),[Due,ds]=c$(aC),u$=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,l]=g.useState(null),[c,u]=g.useState(null),[h,p]=g.useState(null),[m,_]=g.useState(null),[y,w]=g.useState(null),[b,E]=g.useState(0),[x,R]=g.useState(0),[O,L]=g.useState(!1),[k,S]=g.useState(!1),I=ut(e,P=>l(P)),C=Jv(s);return f.jsx(Due,{scope:n,type:r,dir:C,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:h,onContentChange:p,scrollbarX:m,onScrollbarXChange:_,scrollbarXEnabled:O,onScrollbarXEnabledChange:L,scrollbarY:y,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:S,onCornerWidthChange:E,onCornerHeightChange:R,children:f.jsx(Ae.div,{dir:C,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":x+"px",...t.style}})})});u$.displayName=aC;var d$="ScrollAreaViewport",h$=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=ds(d$,n),a=g.useRef(null),l=ut(e,a,o.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),f.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:f.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});h$.displayName=d$;var Ti="ScrollAreaScrollbar",lC=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ds(Ti,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return g.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?f.jsx(Oue,{...r,ref:e,forceMount:n}):s.type==="scroll"?f.jsx(Mue,{...r,ref:e,forceMount:n}):s.type==="auto"?f.jsx(f$,{...r,ref:e,forceMount:n}):s.type==="always"?f.jsx(cC,{...r,ref:e}):null});lC.displayName=Ti;var Oue=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ds(Ti,t.__scopeScrollArea),[i,o]=g.useState(!1);return g.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),f.jsx(On,{present:n||i,children:f.jsx(f$,{"data-state":i?"visible":"hidden",...r,ref:e})})}),Mue=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ds(Ti,t.__scopeScrollArea),i=t.orientation==="horizontal",o=o_(()=>l("SCROLL_END"),100),[a,l]=Pue("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),g.useEffect(()=>{const c=s.viewport,u=i?"scrollLeft":"scrollTop";if(c){let h=c[u];const p=()=>{const m=c[u];h!==m&&(l("SCROLL"),o()),h=m};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[s.viewport,i,l,o]),f.jsx(On,{present:n||a!=="hidden",children:f.jsx(cC,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:pe(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:pe(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),f$=g.forwardRef((t,e)=>{const n=ds(Ti,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=g.useState(!1),a=t.orientation==="horizontal",l=o_(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return Au(n.viewport,l),Au(n.content,l),f.jsx(On,{present:r||i,children:f.jsx(cC,{"data-state":i?"visible":"hidden",...s,ref:e})})}),cC=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=ds(Ti,t.__scopeScrollArea),i=g.useRef(null),o=g.useRef(0),[a,l]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=v$(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,m){return $ue(p,o.current,a,m)}return n==="horizontal"?f.jsx(Lue,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,m=mN(p,a,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=h(p,s.dir))}}):n==="vertical"?f.jsx(jue,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,m=mN(p,a);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=h(p))}}):null}),Lue=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ds(Ti,t.__scopeScrollArea),[o,a]=g.useState(),l=g.useRef(null),c=ut(e,l,i.onScrollbarXChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),f.jsx(m$,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":i_(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(p),w$(p,h)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:ay(o.paddingLeft),paddingEnd:ay(o.paddingRight)}})}})}),jue=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ds(Ti,t.__scopeScrollArea),[o,a]=g.useState(),l=g.useRef(null),c=ut(e,l,i.onScrollbarYChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),f.jsx(m$,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":i_(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const p=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(p),w$(p,h)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:ay(o.paddingTop),paddingEnd:ay(o.paddingBottom)}})}})}),[Fue,p$]=c$(Ti),m$=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:h,...p}=t,m=ds(Ti,n),[_,y]=g.useState(null),w=ut(e,I=>y(I)),b=g.useRef(null),E=g.useRef(""),x=m.viewport,R=r.content-r.viewport,O=Qt(u),L=Qt(l),k=o_(h,10);function S(I){if(b.current){const C=I.clientX-b.current.left,P=I.clientY-b.current.top;c({x:C,y:P})}}return g.useEffect(()=>{const I=C=>{const P=C.target;(_==null?void 0:_.contains(P))&&O(C,R)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[x,_,R,O]),g.useEffect(L,[r,L]),Au(_,k),Au(m.content,k),f.jsx(Fue,{scope:n,scrollbar:_,hasThumb:s,onThumbChange:Qt(i),onThumbPointerUp:Qt(o),onThumbPositionChange:L,onThumbPointerDown:Qt(a),children:f.jsx(Ae.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:pe(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),b.current=_.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),S(I))}),onPointerMove:pe(t.onPointerMove,S),onPointerUp:pe(t.onPointerUp,I=>{const C=I.target;C.hasPointerCapture(I.pointerId)&&C.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=E.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),oy="ScrollAreaThumb",g$=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=p$(oy,t.__scopeScrollArea);return f.jsx(On,{present:n||s.hasThumb,children:f.jsx(Vue,{ref:e,...r})})}),Vue=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=ds(oy,n),o=p$(oy,n),{onThumbPositionChange:a}=o,l=ut(e,h=>o.onThumbChange(h)),c=g.useRef(void 0),u=o_(()=>{c.current&&(c.current(),c.current=void 0)},100);return g.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(u(),!c.current){const m=Bue(h,a);c.current=m,a()}};return a(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,u,a]),f.jsx(Ae.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:pe(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),_=h.clientX-m.left,y=h.clientY-m.top;o.onThumbPointerDown({x:_,y})}),onPointerUp:pe(t.onPointerUp,o.onThumbPointerUp)})});g$.displayName=oy;var uC="ScrollAreaCorner",y$=g.forwardRef((t,e)=>{const n=ds(uC,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?f.jsx(Uue,{...t,ref:e}):null});y$.displayName=uC;var Uue=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=ds(uC,n),[i,o]=g.useState(0),[a,l]=g.useState(0),c=!!(i&&a);return Au(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),l(u)}),Au(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),c?f.jsx(Ae.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function ay(t){return t?parseInt(t,10):0}function v$(t,e){const n=t/e;return isNaN(n)?0:n}function i_(t){const e=v$(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function $ue(t,e,n,r="ltr"){const s=i_(n),i=s/2,o=e||i,a=s-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return _$([l,c],h)(t)}function mN(t,e,n="ltr"){const r=i_(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,l=n==="ltr"?[0,o]:[o*-1,0],c=Nue(t,l);return _$([0,o],[0,a])(c)}function _$(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function w$(t,e){return t>0&&t<e}var Bue=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function o_(t,e){const n=Qt(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Au(t,e){const n=Qt(e);Wr(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var E$=u$,zue=h$,Wue=y$;const b$=g.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(E$,{ref:r,className:Z("relative overflow-hidden",t),...n,children:[f.jsx(zue,{className:"h-full w-full rounded-[inherit] touch-pan-y scrollbar-hide",children:e}),f.jsx(T$,{}),f.jsx(Wue,{})]}));b$.displayName=E$.displayName;const T$=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>f.jsx(lC,{ref:r,orientation:e,className:Z("flex touch-none select-none transition-colors hidden md:flex",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:f.jsx(g$,{className:"relative flex-1 rounded-full bg-border"})}));T$.displayName=lC.displayName;function que(){const{notifications:t,unreadCount:e,markAsRead:n,markAllAsRead:r,deleteNotification:s,clearAllNotifications:i}=QS(),[o,a]=g.useState(!1),l=m=>{const _=new Date(m),w=Math.floor((new Date().getTime()-_.getTime())/(1e3*60));return w<1?"Just now":w<60?`${w}m ago`:w<1440?`${Math.floor(w/60)}h ago`:_.toLocaleDateString()},c=m=>{switch(m){case"task-assignment":return"";case"task-complete":return"";case"pomodoro-complete":return"";case"team-request":return"";default:return""}},u=async m=>{m.read||await n(m.id)},h=async()=>{await r()},p=async()=>{await i(),a(!1)};return f.jsxs(a$,{open:o,onOpenChange:a,children:[f.jsx(l$,{asChild:!0,children:f.jsxs(Qe,{variant:"ghost",size:"icon",className:Z("relative hover-scale transition-smooth h-9 w-9",e>0&&"text-primary"),children:[f.jsx(L1,{className:"h-4 w-4"}),e>0&&f.jsx(Br,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs font-bold animate-pulse",children:e>99?"99+":e})]})}),f.jsxs(oC,{className:"w-80 p-0 shadow-elegant",align:"end",children:[f.jsxs("div",{className:"p-4 border-b",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"font-semibold",children:"Notifications"}),f.jsxs("div",{className:"flex items-center gap-2",children:[e>0&&f.jsxs(Qe,{variant:"ghost",size:"sm",onClick:h,className:"text-xs hover-scale",children:[f.jsx(Mz,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),t.length>0&&f.jsx(Qe,{variant:"ghost",size:"sm",onClick:p,className:"text-xs hover-scale text-destructive hover:bg-destructive/10",children:f.jsx(OW,{className:"h-3 w-3"})})]})]}),e>0&&f.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e," unread notification",e!==1?"s":""]})]}),f.jsx(b$,{className:"h-[400px]",children:t.length===0?f.jsxs("div",{className:"text-center py-8 px-4",children:[f.jsx(L1,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll see updates about tasks and activities here"})]}):f.jsx("div",{className:"divide-y",children:t.map(m=>f.jsx("div",{className:Z("p-4 hover:bg-muted/30 transition-smooth cursor-pointer group",!m.read&&"bg-primary/5 border-l-2 border-l-primary"),onClick:()=>u(m),children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"text-lg shrink-0 mt-0.5",children:c(m.type)}),f.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsx("h4",{className:Z("text-sm font-medium leading-tight",!m.read&&"font-semibold"),children:m.title}),f.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!m.read&&f.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"}),f.jsx(Qe,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:_=>{_.stopPropagation(),s(m.id)},children:f.jsx(ql,{className:"h-3 w-3"})})]})]}),f.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed line-clamp-2",children:m.body}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:l(m.timestamp)}),!m.read&&f.jsxs(Qe,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),n(m.id)},className:"text-xs hover-scale opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx(rM,{className:"h-3 w-3 mr-1"}),"Mark read"]})]})]})]})},m.id))})})]})]})}const Hue=[{href:"/tasks",label:"Tasks",icon:f.jsx(du,{className:"h-5 w-5"})},{href:"/team-chat",label:"Team Chat",icon:f.jsx(cM,{className:"h-5 w-5"})},{href:"/meetly",label:"Meetly",icon:f.jsx(oM,{className:"h-5 w-5"})},{href:"/calendar",label:"Calendar",icon:f.jsx(nM,{className:"h-5 w-5"})},{href:"/notes",label:"Notes",icon:f.jsx(pW,{className:"h-5 w-5"})},{href:"/analytics",label:"Analytics",icon:f.jsx(G0,{className:"h-5 w-5"})}];function Gue(){const{user:t,userProfile:e,signOutUser:n}=ur(),{state:r}=Zl(),s=Sa(),i=Vu(),[o,a]=g.useState(!1),[l,c]=g.useState(""),u=()=>{const m=s.pathname;return{"/":"Dashboard","/tasks":"Tasks","/timer":"Timer","/chat":"AI Assistant","/team-chat":"Team Chat","/meetly":"Meetly","/calendar":"Calendar","/notes":"Notes","/analytics":"Analytics","/profile":"Profile"}[m]||"Dashboard"},h=m=>{m.preventDefault(),l.trim()&&console.log("Searching for:",l)},p=(m,_)=>m&&m.trim()?m.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):_?_.split("@")[0].slice(0,2).toUpperCase():"U";return f.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/80 backdrop-blur-md supports-[backdrop-filter]:bg-background/60 pt-safe",children:f.jsxs("div",{className:"flex h-14 items-center px-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(I4,{className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:r==="expanded"?f.jsx(ql,{className:"h-4 w-4"}):f.jsx(iW,{className:"h-4 w-4"})}),f.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[f.jsx(zh,{to:"/",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Workspace"}),f.jsx("span",{className:"text-muted-foreground",children:"/"}),f.jsx("span",{className:"font-medium",children:u()})]})]}),f.jsx(UT,{delayDuration:0,children:f.jsx("nav",{className:"hidden md:flex items-center gap-1 ml-6",children:Hue.map(m=>f.jsxs(YM,{children:[f.jsx(XM,{asChild:!0,children:f.jsx(zh,{to:m.href,"aria-label":m.label,className:Z("flex h-9 w-9 items-center justify-center rounded-lg transition-colors hover:bg-accent",s.pathname.startsWith(m.href)?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:m.icon})}),f.jsx($T,{children:f.jsx("p",{children:m.label})})]},m.href))})}),f.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[f.jsx("div",{className:"w-full max-w-xs",children:f.jsxs(a$,{open:o,onOpenChange:a,children:[f.jsx(l$,{asChild:!0,children:f.jsxs(Qe,{variant:"outline",className:"w-full justify-start text-sm text-muted-foreground hover:bg-muted",children:[f.jsx(F1,{className:"mr-2 h-4 w-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Search everything..."}),f.jsx("span",{className:"sm:hidden",children:"Search..."}),f.jsx("div",{className:"ml-auto hidden sm:flex items-center gap-1",children:f.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 text-[10px] font-medium text-muted-foreground opacity-100",children:[f.jsx(Kz,{className:"h-3 w-3"}),"K"]})})]})}),f.jsx(oC,{className:"w-96 p-0",align:"center",children:f.jsx("form",{onSubmit:h,className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(F1,{className:"h-4 w-4 text-muted-foreground"}),f.jsx(Rs,{value:l,onChange:m=>c(m.target.value),placeholder:"Search tasks, notes, messages...",className:"border-0 shadow-none focus-visible:ring-0",autoFocus:!0})]})})})]})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(que,{}),f.jsxs(due,{children:[f.jsx(hue,{asChild:!0,children:f.jsx(Qe,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:f.jsxs(H4,{className:"h-8 w-8",children:[f.jsx(G4,{src:(e==null?void 0:e.photoURL)||(t==null?void 0:t.photoURL)||""}),f.jsx(K4,{className:"text-xs bg-primary/10 text-primary",children:p(e==null?void 0:e.displayName,t==null?void 0:t.email)})]})})}),f.jsxs(QU,{className:"w-56",align:"end",forceMount:!0,children:[f.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:f.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[(e==null?void 0:e.displayName)&&f.jsx("p",{className:"font-medium",children:e.displayName}),(t==null?void 0:t.email)&&f.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:t.email})]})}),f.jsx(ab,{}),f.jsxs(Um,{onClick:()=>i("/profile"),children:[f.jsx(zy,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Profile"})]}),f.jsxs(Um,{onClick:()=>i("/profile"),children:[f.jsx(SW,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Settings"})]}),f.jsx(ab,{}),f.jsxs(Um,{onClick:n,className:"text-destructive focus:text-destructive",children:[f.jsx(iM,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Log out"})]})]})]})]})]})]})})}const x$=g.createContext(void 0);function Kue({children:t}){const[e,n]=g.useState(null),[r,s]=g.useState(!1),[i,o]=g.useState(!0),a=u=>{n(u),s(!0),o(!0)},l=()=>{n(null),s(!1),o(!1)},c=()=>{o(!i)};return f.jsx(x$.Provider,{value:{activeTask:e,isTimerRunning:r,isTimerExpanded:i,startTaskTimer:a,stopTimer:l,toggleTimerSize:c},children:t})}function S$(){const t=g.useContext(x$);if(t===void 0)throw new Error("useTimer must be used within a TimerProvider");return t}const yi=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:Z("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));yi.displayName="Card";const oo=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:Z("flex flex-col space-y-1.5 p-6",t),...e}));oo.displayName="CardHeader";const ao=g.forwardRef(({className:t,...e},n)=>f.jsx("h3",{ref:n,className:Z("text-2xl font-semibold leading-none tracking-tight",t),...e}));ao.displayName="CardTitle";const dC=g.forwardRef(({className:t,...e},n)=>f.jsx("p",{ref:n,className:Z("text-sm text-muted-foreground",t),...e}));dC.displayName="CardDescription";const vi=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:Z("p-6 pt-0",t),...e}));vi.displayName="CardContent";const Que=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:Z("flex items-center p-6 pt-0",t),...e}));Que.displayName="CardFooter";var hC="Progress",fC=100,[Yue,Ffe]=Kr(hC),[Xue,Zue]=Yue(hC),C$=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=Jue,...o}=t;(s||s===0)&&!gN(s)&&console.error(ede(`${s}`,"Progress"));const a=gN(s)?s:fC;r!==null&&!yN(r,a)&&console.error(tde(`${r}`,"Progress"));const l=yN(r,a)?r:null,c=ly(l)?i(l,a):void 0;return f.jsx(Xue,{scope:n,value:l,max:a,children:f.jsx(Ae.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":ly(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":R$(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});C$.displayName=hC;var I$="ProgressIndicator",k$=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Zue(I$,n);return f.jsx(Ae.div,{"data-state":R$(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});k$.displayName=I$;function Jue(t,e){return`${Math.round(t/e*100)}%`}function R$(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function ly(t){return typeof t=="number"}function gN(t){return ly(t)&&!isNaN(t)&&t>0}function yN(t,e){return ly(t)&&!isNaN(t)&&t<=e&&t>=0}function ede(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fC}\`.`}function tde(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var A$=C$,nde=k$;const pC=g.forwardRef(({className:t,value:e,...n},r)=>f.jsx(A$,{ref:r,className:Z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:f.jsx(nde,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));pC.displayName=A$.displayName;function rde(){const{activeTask:t,isTimerExpanded:e,toggleTimerSize:n,stopTimer:r}=S$(),[s,i]=g.useState("focus"),[o,a]=g.useState(0),[l,c]=g.useState(!1),[u,h]=g.useState(0),{toast:p}=Bl(),m=g.useRef(),_={shortBreak:5,longBreak:15,sessionsUntilLongBreak:4};g.useEffect(()=>{if(t&&s==="focus"){const O=t.estimatedTime||25;a(O*60)}else if(s==="break"){const O=u%_.sessionsUntilLongBreak===0&&u>0;a(O?_.longBreak*60:_.shortBreak*60)}},[t,s,u]);const y=s==="focus"?((t==null?void 0:t.estimatedTime)||25)*60:u%_.sessionsUntilLongBreak===0&&u>0?_.longBreak*60:_.shortBreak*60,w=(y-o)/y*100;g.useEffect(()=>(l&&o>0?m.current=setInterval(()=>{a(O=>O-1)},1e3):(clearInterval(m.current),o===0&&l&&(c(!1),s==="focus"?(h(O=>O+1),i("break"),B1($1),Ws.showPomodoroNotification("focus-complete",u+1),p({title:"Focus session completed! ",description:"Time for a break. Great work!"})):(i("focus"),B1($1),Ws.showPomodoroNotification("break-complete"),p({title:"Break time over! ",description:"Ready to focus again?"})))),()=>clearInterval(m.current)),[l,o,s,u,p]);const b=O=>{const L=Math.floor(O/60),k=O%60;return`${L.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`},E=()=>{c(!l)},x=()=>{c(!1);const O=(t==null?void 0:t.estimatedTime)||25;a(s==="focus"?O*60:_.shortBreak*60)},R=()=>{p({title:"Task completed! ",description:`"${t==null?void 0:t.title}" has been marked as complete.`}),r()};return t?f.jsx("div",{className:Z("fixed bottom-6 right-6 z-50 transition-all duration-300 ease-in-out",e?"w-96 h-auto":"w-72 h-20"),children:f.jsx(yi,{className:Z("shadow-elegant border-2 backdrop-blur-sm transition-all duration-300",s==="focus"?"border-focus/30 bg-card/95":"border-break/30 bg-card/95",e&&"shadow-glow"),children:f.jsx(vi,{className:"p-4",children:e?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(TT,{className:"h-4 w-4 text-focus"}),f.jsx(Br,{variant:s==="focus"?"default":"secondary",children:s==="focus"?"Focus":"Break"})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx(Qe,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:f.jsx(uW,{className:"h-3 w-3"})}),f.jsx(Qe,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",onClick:r,children:f.jsx(ql,{className:"h-3 w-3"})})]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"font-semibold text-sm mb-1",children:t.title}),f.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),f.jsxs("div",{className:"text-center space-y-3",children:[f.jsx("div",{className:Z("text-4xl font-mono font-bold transition-colors",s==="focus"?"text-focus":"text-break"),children:b(o)}),f.jsx(pC,{value:w,className:Z("h-2 transition-colors",s==="focus"?"[&>div]:bg-focus":"[&>div]:bg-break")})]}),f.jsxs("div",{className:"flex justify-center gap-2",children:[f.jsxs(Qe,{variant:s==="focus"?"focus":"break",size:"sm",onClick:E,className:"hover-scale flex-1",children:[l?f.jsx(K0,{className:"h-4 w-4 mr-2"}):f.jsx(Q0,{className:"h-4 w-4 mr-2"}),l?"Pause":"Start"]}),f.jsx(Qe,{variant:"outline",size:"sm",onClick:x,className:"hover-scale",children:f.jsx(bW,{className:"h-4 w-4"})}),s==="focus"&&f.jsx(Qe,{variant:"outline",size:"sm",onClick:R,className:"hover-scale text-success hover:text-success",children:f.jsx($z,{className:"h-4 w-4"})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center text-xs",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-focus",children:"Sessions"}),f.jsx("div",{className:"text-lg font-bold",children:u})]}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-break",children:"Next Break"}),f.jsx("div",{className:"text-lg font-bold",children:_.sessionsUntilLongBreak-u%_.sessionsUntilLongBreak})]})]})]}):f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:Z("text-lg font-mono font-bold",s==="focus"?"text-focus":"text-break"),children:b(o)}),f.jsxs(Br,{variant:"secondary",className:"text-xs",children:[t.title.slice(0,12),"..."]})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx(Qe,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:E,children:l?f.jsx(K0,{className:"h-3 w-3"}):f.jsx(Q0,{className:"h-3 w-3"})}),f.jsx(Qe,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:f.jsx(rW,{className:"h-3 w-3"})})]})]})})})}):null}const N$=g.createContext(void 0);function sde({children:t}){const[e,n]=g.useState(null),[r,s]=g.useState(0),[i,o]=g.useState(!1),{updateTaskTimeSpent:a}=YS(),{toast:l}=Bl();g.useEffect(()=>{let y;return i&&e&&(y=setInterval(()=>{s(w=>w+1)},1e3)),()=>{y&&clearInterval(y)}},[i,e]);const c=y=>{e&&e.id!==y.id&&p(),n(y),s(0),o(!0),l({title:"Time tracking started ",description:`Now tracking time for "${y.title}"`})},u=()=>{e&&(o(!1),l({title:"Time tracking paused ",description:`Paused tracking for "${e.title}"`}))},h=()=>{e&&(o(!0),l({title:"Time tracking resumed ",description:`Resumed tracking for "${e.title}"`}))},p=async()=>{if(!e||r===0){n(null),s(0),o(!1);return}try{await a(e.id,r);const y=m(r);l({title:"Time tracking stopped ",description:`Saved ${y} for "${e.title}"`})}catch(y){console.error("Error saving time tracking data:",y),l({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{n(null),s(0),o(!1)}},m=y=>{const w=Math.floor(y/3600),b=Math.floor(y%3600/60),E=y%60;return w>0?`${w}h ${b}m ${E}s`:b>0?`${b}m ${E}s`:`${E}s`},_={trackingTask:e,currentSessionElapsedSeconds:r,isTracking:i,startTracking:c,pauseTracking:u,resumeTracking:h,stopTracking:p,getFormattedTime:m};return f.jsx(N$.Provider,{value:_,children:t})}function ide(){const t=g.useContext(N$);if(t===void 0)throw new Error("useTaskTimeTracker must be used within a TaskTimeTrackerProvider");return t}function ode(){const{trackingTask:t,currentSessionElapsedSeconds:e,isTracking:n,pauseTracking:r,resumeTracking:s,stopTracking:i,getFormattedTime:o}=ide();if(!t)return null;const a=(t.estimatedTime||25)*60,l=Math.min(e/a*100,100),c=e>a;return f.jsxs(yi,{className:Z("fixed bottom-6 left-6 z-50 w-80 shadow-elegant border-2 backdrop-blur-sm transition-all duration-300","border-focus/30 bg-card/95 shadow-glow animate-slide-in-right"),children:[f.jsx(oo,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(ao,{className:"text-sm flex items-center gap-2",children:[f.jsx(TT,{className:"h-4 w-4 text-focus"}),"Time Tracking"]}),f.jsx(Br,{variant:n?"default":"secondary",className:"text-xs",children:n?"Active":"Paused"})]})}),f.jsxs(vi,{className:"space-y-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-1",children:t.title}),t.description&&f.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),f.jsxs("div",{className:"text-center space-y-3",children:[f.jsx("div",{className:Z("text-3xl font-mono font-bold transition-colors",c?"text-break":"text-focus"),children:o(e)}),t.estimatedTime&&f.jsxs("div",{className:"space-y-2",children:[f.jsx(pC,{value:l,className:Z("h-2 transition-colors",c?"[&>div]:bg-break":"[&>div]:bg-focus")}),f.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[f.jsx("span",{children:"0m"}),f.jsx("span",{className:Z("font-medium",c&&"text-break"),children:c?"Over estimate":`Target: ${t.estimatedTime}m`}),f.jsxs("span",{children:[t.estimatedTime,"m"]})]})]}),t.timeSpent&&t.timeSpent>0&&f.jsxs("div",{className:"text-center p-2 bg-muted/30 rounded-lg",children:[f.jsx("div",{className:"text-xs text-muted-foreground",children:"Total time spent"}),f.jsx("div",{className:"text-sm font-semibold text-success",children:o(t.timeSpent)})]})]}),f.jsxs("div",{className:"flex justify-center gap-2",children:[f.jsxs(Qe,{variant:n?"outline":"focus",size:"sm",onClick:n?r:s,className:"hover-scale flex-1",children:[n?f.jsx(K0,{className:"h-4 w-4 mr-2"}):f.jsx(Q0,{className:"h-4 w-4 mr-2"}),n?"Pause":"Resume"]}),f.jsx(Qe,{variant:"outline",size:"sm",onClick:i,className:"hover-scale text-destructive hover:text-destructive hover:bg-destructive/10",children:f.jsx(kW,{className:"h-4 w-4"})})]})]})]})}const za=class za{constructor(){Mt(this,"db",null);Mt(this,"dbName","TasklyOfflineDB");Mt(this,"version",1)}static getInstance(){return za.instance||(za.instance=new za),za.instance}async init(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{n(new Error("Failed to open IndexedDB"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=s=>{const i=s.target.result;if(!i.objectStoreNames.contains("tasks")){const o=i.createObjectStore("tasks",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("priority","priority",{unique:!1}),o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!i.objectStoreNames.contains("notes")){const o=i.createObjectStore("notes",{keyPath:"id"});o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!i.objectStoreNames.contains("offlineActions")){const o=i.createObjectStore("offlineActions",{keyPath:"id"});o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("type","type",{unique:!1})}if(i.objectStoreNames.contains("userData")||i.createObjectStore("userData",{keyPath:"key"}),!i.objectStoreNames.contains("scheduledNotifications")){const o=i.createObjectStore("scheduledNotifications",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("scheduledTime","scheduledTime",{unique:!1}),o.createIndex("createdAt","createdAt",{unique:!1})}}})}async getStore(e,n="readonly"){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize IndexedDB");if(!this.db.objectStoreNames.contains(e))throw new Error(`Object store '${e}' does not exist`);return this.db.transaction([e],n).objectStore(e)}async saveTasks(e){const n=await this.getStore("tasks","readwrite"),r=e.map(s=>new Promise((i,o)=>{const a=n.put({...s,lastModified:Date.now()});a.onsuccess=()=>i(),a.onerror=()=>o(a.error)}));await Promise.all(r)}async saveTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,s)=>{const i=n.put({...e,lastModified:Date.now()});i.onsuccess=()=>r(),i.onerror=()=>s(i.error)})}async getTasks(){const e=await this.getStore("tasks");return new Promise((n,r)=>{const s=e.getAll();s.onsuccess=()=>n(s.result),s.onerror=()=>r(s.error)})}async getTask(e){const n=await this.getStore("tasks");return new Promise((r,s)=>{const i=n.get(e);i.onsuccess=()=>r(i.result),i.onerror=()=>s(i.error)})}async deleteTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,s)=>{const i=n.delete(e);i.onsuccess=()=>r(),i.onerror=()=>s(i.error)})}async saveNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,s)=>{const i=n.put({...e,lastModified:Date.now()});i.onsuccess=()=>r(),i.onerror=()=>s(i.error)})}async getNotes(){const e=await this.getStore("notes");return new Promise((n,r)=>{const s=e.getAll();s.onsuccess=()=>n(s.result),s.onerror=()=>r(s.error)})}async deleteNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,s)=>{const i=n.delete(e);i.onsuccess=()=>r(),i.onerror=()=>s(i.error)})}async queueAction(e){const n=await this.getStore("offlineActions","readwrite"),r={...e,id:crypto.randomUUID(),retryCount:0};return new Promise((s,i)=>{const o=n.put(r);o.onsuccess=()=>s(),o.onerror=()=>i(o.error)})}async getQueuedActions(){const e=await this.getStore("offlineActions");return new Promise((n,r)=>{const s=e.getAll();s.onsuccess=()=>{const i=s.result.sort((o,a)=>o.timestamp-a.timestamp);n(i)},s.onerror=()=>r(s.error)})}async removeAction(e){const n=await this.getStore("offlineActions","readwrite");return new Promise((r,s)=>{const i=n.delete(e);i.onsuccess=()=>r(),i.onerror=()=>s(i.error)})}async updateActionRetryCount(e,n){const r=await this.getStore("offlineActions","readwrite");return new Promise((s,i)=>{const o=r.get(e);o.onsuccess=()=>{const a=o.result;if(a){a.retryCount=n;const l=r.put(a);l.onsuccess=()=>s(),l.onerror=()=>i(l.error)}else s()},o.onerror=()=>i(o.error)})}async clearAllActions(){const e=await this.getStore("offlineActions","readwrite");return new Promise((n,r)=>{const s=e.clear();s.onsuccess=()=>n(),s.onerror=()=>r(s.error)})}async setUserData(e,n){const r=await this.getStore("userData","readwrite");return new Promise((s,i)=>{const o=r.put({key:e,value:n,timestamp:Date.now()});o.onsuccess=()=>s(),o.onerror=()=>i(o.error)})}async getUserData(e){const n=await this.getStore("userData");return new Promise((r,s)=>{const i=n.get(e);i.onsuccess=()=>{var o;return r((o=i.result)==null?void 0:o.value)},i.onerror=()=>s(i.error)})}async getTasksByStatus(e){const r=(await this.getStore("tasks")).index("status");return new Promise((s,i)=>{const o=r.getAll(e);o.onsuccess=()=>s(o.result),o.onerror=()=>i(o.error)})}async getUnsyncedItems(){const[e,n,r]=await Promise.all([this.getTasks(),this.getNotes(),this.getQueuedActions()]);return{tasks:e.filter(s=>s.syncStatus!=="synced"),notes:n.filter(s=>s.syncStatus!=="synced"),actions:r}}async clearDatabase(){const n=["tasks","notes","offlineActions","userData"].map(async r=>{const s=await this.getStore(r,"readwrite");return new Promise((i,o)=>{const a=s.clear();a.onsuccess=()=>i(),a.onerror=()=>o(a.error)})});await Promise.all(n)}};Mt(za,"instance");let lb=za;const Ze=lb.getInstance(),vN="taskly_sync_status",ade=3,Wa=class Wa{constructor(){Mt(this,"syncInProgress",!1);Mt(this,"syncCallbacks",[])}static getInstance(){return Wa.instance||(Wa.instance=new Wa),Wa.instance}async initialize(){await Ze.init()}async queueAction(e){await Ze.queueAction({...e,timestamp:Date.now()}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{"sync"in n&&n.sync.register("background-sync").catch(r=>{console.log("Background sync registration failed:",r)})})}async storeTaskLocally(e,n="pending"){const r={...e,lastModified:Date.now(),syncStatus:n};await Ze.saveTask(r)}async getLocalTasks(){return Ze.getTasks()}async deleteTaskLocally(e){await Ze.deleteTask(e)}async getQueuedActions(){return Ze.getQueuedActions()}async clearQueuedActions(){await Ze.clearAllActions()}async getSyncStatus(){const e=localStorage.getItem(vN),n=e?JSON.parse(e):{lastSync:0,pending:0},r=await this.getQueuedActions(),s=await Ze.getUnsyncedItems();return{...n,pending:r.length+s.tasks.length+s.notes.length,conflicted:s.tasks.filter(i=>i.syncStatus==="conflict").length+s.notes.filter(i=>i.syncStatus==="conflict").length}}async updateSyncStatus(e){const n=await this.getQueuedActions(),r={lastSync:e,pending:n.length};localStorage.setItem(vN,JSON.stringify(r))}isOnline(){return navigator.onLine}async syncWhenOnline(){if(!this.isOnline()||this.syncInProgress)return{success:!1,syncedCount:0,failedCount:0};this.syncInProgress=!0;let e=0,n=0;try{const r=await this.getQueuedActions(),s=await Ze.getUnsyncedItems();if(r.length===0&&s.tasks.length===0&&s.notes.length===0)return this.syncInProgress=!1,{success:!0,syncedCount:0,failedCount:0};for(const i of r)try{await this.processAction(i),await Ze.removeAction(i.id),e++}catch(o){console.error("Failed to process action:",i,o);const a=i.retryCount+1;a>=ade?(await Ze.removeAction(i.id),n++):await Ze.updateActionRetryCount(i.id,a)}for(const i of s.tasks)try{await this.syncTask(i),e++}catch(o){console.error("Failed to sync task:",i,o),await Ze.saveTask({...i,syncStatus:"conflict"}),n++}for(const i of s.notes)try{await this.syncNote(i),e++}catch(o){console.error("Failed to sync note:",i,o),await Ze.saveNote({...i,syncStatus:"conflict"}),n++}return await this.updateSyncStatus(Date.now()),this.syncCallbacks.forEach(i=>i(n===0)),(e>0||n>0)&&this.showSyncNotification(n===0?"success":"warning",`Synced ${e} items${n>0?`, ${n} failed`:""}`),{success:n===0,syncedCount:e,failedCount:n}}catch(r){return console.error("Sync failed:",r),this.showSyncNotification("error","Sync failed - will retry later"),{success:!1,syncedCount:e,failedCount:n+1}}finally{this.syncInProgress=!1}}async processAction(e){switch(console.log("Processing offline action:",e),e.type){case"CREATE_TASK":break;case"UPDATE_TASK":break;case"DELETE_TASK":break;case"CREATE_NOTE":break;case"UPDATE_NOTE":break;case"DELETE_NOTE":break;default:throw new Error(`Unknown action type: ${e.type}`)}}async syncTask(e){console.log("Syncing task:",e),await Ze.saveTask({...e,syncStatus:"synced"})}async syncNote(e){console.log("Syncing note:",e),await Ze.saveNote({...e,syncStatus:"synced"})}showSyncNotification(e,n){"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly Sync",{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png"})}onSyncComplete(e){this.syncCallbacks.push(e)}async getConflicts(){const e=await Ze.getUnsyncedItems();return{tasks:e.tasks.filter(n=>n.syncStatus==="conflict"),notes:e.notes.filter(n=>n.syncStatus==="conflict")}}async resolveTaskConflict(e,n){const r=await Ze.getTask(e);r&&(n?await Ze.saveTask({...r,syncStatus:"pending"}):await Ze.saveTask({...r,syncStatus:"synced"}))}async init(){await this.initialize(),window.addEventListener("online",()=>{console.log("Back online - starting sync..."),this.syncWhenOnline()}),window.addEventListener("offline",()=>{console.log("Gone offline - actions will be queued")}),this.isOnline()&&this.syncWhenOnline()}};Mt(Wa,"instance");let cy=Wa;const Bs=cy.getInstance(),lde=Object.freeze(Object.defineProperty({__proto__:null,OfflineSync:cy,offlineSync:Bs},Symbol.toStringTag,{value:"Module"}));function P$(){const[t,e]=g.useState({isOnline:navigator.onLine,isSyncing:!1,lastSync:0,pending:0,conflicted:0}),n=g.useCallback(async()=>{const h=await Bs.getSyncStatus();e(p=>({...p,...h}))},[]);g.useEffect(()=>{let h=!0;const p=async()=>{h&&(e(y=>({...y,isOnline:!0})),await n())},m=()=>{h&&e(y=>({...y,isOnline:!1}))};n(),window.addEventListener("online",p),window.addEventListener("offline",m);const _=setInterval(n,5e3);return()=>{h=!1,window.removeEventListener("online",p),window.removeEventListener("offline",m),clearInterval(_)}},[n]);const r=g.useCallback(async()=>{if(!(!t.isOnline||t.isSyncing)){e(h=>({...h,isSyncing:!0}));try{const h=await Bs.syncWhenOnline();return await n(),h}finally{e(h=>({...h,isSyncing:!1}))}}},[t.isOnline,t.isSyncing,n]),s=g.useCallback(async(h,p)=>{const m={...h,id:crypto.randomUUID(),createdAt:new Date().toISOString()};return await Bs.storeTaskLocally(m,"pending"),t.isOnline||await Bs.queueAction({type:"CREATE_TASK",data:m,userId:p}),await n(),m},[t.isOnline,n]),i=g.useCallback(async(h,p,m)=>{const _=await Ze.getTask(h);if(!_)return null;const y={..._,...p,lastModified:Date.now(),syncStatus:"pending"};return await Ze.saveTask(y),t.isOnline||await Bs.queueAction({type:"UPDATE_TASK",data:{id:h,updates:p},userId:m}),await n(),y},[t.isOnline,n]),o=g.useCallback(async(h,p)=>{await Ze.deleteTask(h),t.isOnline||await Bs.queueAction({type:"DELETE_TASK",data:{id:h},userId:p}),await n()},[t.isOnline,n]),a=g.useCallback(async(h,p)=>{const m=await Ze.getTask(h);if(!m)return null;const _=m.status==="completed"?"todo":"completed",y={...m,status:_,completedAt:_==="completed"?new Date().toISOString():void 0,lastModified:Date.now(),syncStatus:"pending"};return await Ze.saveTask(y),t.isOnline||await Bs.queueAction({type:"TOGGLE_STATUS",data:{id:h,status:_},userId:p}),await n(),y},[t.isOnline,n]),l=g.useCallback(async()=>Ze.getTasks(),[]),c=g.useCallback(async()=>Bs.getConflicts(),[]),u=g.useCallback(async(h,p)=>{await Bs.resolveTaskConflict(h,p),await n()},[n]);return{syncStatus:t,manualSync:r,createTaskOffline:s,updateTaskOffline:i,deleteTaskOffline:o,toggleTaskStatusOffline:a,getLocalTasks:l,getConflicts:c,resolveConflict:u,updateSyncStatus:n}}const cde=_4,Vfe=Yae,ude=w4,D$=g.forwardRef(({className:t,...e},n)=>f.jsx(Qv,{ref:n,className:Z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));D$.displayName=Qv.displayName;const O$=g.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(ude,{children:[f.jsx(D$,{}),f.jsxs(Yv,{ref:r,className:Z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,f.jsxs(E4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(ql,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));O$.displayName=Yv.displayName;const M$=({className:t,...e})=>f.jsx("div",{className:Z("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});M$.displayName="DialogHeader";const L$=g.forwardRef(({className:t,...e},n)=>f.jsx(Xv,{ref:n,className:Z("text-lg font-semibold leading-none tracking-tight",t),...e}));L$.displayName=Xv.displayName;const j$=g.forwardRef(({className:t,...e},n)=>f.jsx(Zv,{ref:n,className:Z("text-sm text-muted-foreground",t),...e}));j$.displayName=Zv.displayName;function dde({open:t,onOpenChange:e,conflicts:n}){const{resolveConflict:r}=P$(),[s,i]=g.useState(null),o=async(l,c)=>{i(l);try{await r(l,c),n.tasks=n.tasks.filter(u=>u.id!==l),n.tasks.length===0&&n.notes.length===0&&e(!1)}finally{i(null)}},a=l=>new Date(l).toLocaleString();return f.jsx(cde,{open:t,onOpenChange:e,children:f.jsxs(O$,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[f.jsxs(M$,{children:[f.jsxs(L$,{className:"flex items-center gap-2",children:[f.jsx(ih,{className:"h-5 w-5 text-warning"}),"Sync Conflicts Detected"]}),f.jsx(j$,{children:"The following items have conflicts between your local changes and server data. Choose which version to keep."})]}),f.jsxs("div",{className:"space-y-4",children:[n.tasks.length>0&&f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Task Conflicts"}),f.jsx("div",{className:"space-y-3",children:n.tasks.map(l=>f.jsxs(yi,{className:"border-warning/20",children:[f.jsxs(oo,{className:"pb-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(ao,{className:"text-base",children:l.title}),f.jsx(Br,{variant:"outline",className:"text-warning border-warning",children:"Conflict"})]}),l.description&&f.jsx(dC,{children:l.description})]}),f.jsx(vi,{className:"space-y-4",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(zy,{className:"h-4 w-4"}),f.jsx("span",{className:"font-medium",children:"Your Changes"})]}),f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Status:"}),f.jsx(Br,{variant:l.status==="completed"?"default":"secondary",children:l.status})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Priority:"}),f.jsx(Br,{variant:l.priority==="high"?"destructive":"outline",children:l.priority})]}),f.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[f.jsx(TT,{className:"h-3 w-3"}),f.jsxs("span",{children:["Modified: ",a(new Date(l.lastModified).toISOString())]})]})]}),f.jsx(Qe,{onClick:()=>o(l.id,!0),disabled:s===l.id,className:"w-full mt-3",variant:"outline",children:s===l.id?"Resolving...":"Keep My Changes"})]}),f.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(ih,{className:"h-4 w-4"}),f.jsx("span",{className:"font-medium",children:"Server Version"})]}),f.jsx("div",{className:"space-y-2 text-sm",children:f.jsx("div",{className:"text-muted-foreground",children:"Server data would be displayed here in a real implementation"})}),f.jsx(Qe,{onClick:()=>o(l.id,!1),disabled:s===l.id,className:"w-full mt-3",variant:"outline",children:s===l.id?"Resolving...":"Use Server Version"})]})]})})]},l.id))})]}),n.notes.length>0&&f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Note Conflicts"}),f.jsx("div",{className:"text-muted-foreground",children:"Note conflict resolution would be implemented here"})]}),n.tasks.length===0&&n.notes.length===0&&f.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[f.jsx(ih,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),f.jsx("p",{children:"No conflicts to resolve"})]})]}),f.jsx("div",{className:"flex justify-end gap-2 mt-6",children:f.jsx(Qe,{variant:"outline",onClick:()=>e(!1),children:"Close"})})]})})}function hde(){const{syncStatus:t,manualSync:e,getConflicts:n}=P$(),[r,s]=g.useState(!1),[i,o]=g.useState({tasks:[],notes:[]}),a=async()=>{!t.isOnline||t.isSyncing||await e()},l=async()=>{const c=await n();o(c),s(!0)};return t.isOnline&&t.pending===0&&t.conflicted===0?null:f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2",children:[f.jsx(Br,{variant:t.isOnline?"default":"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:a,children:t.isOnline?f.jsxs(f.Fragment,{children:[t.isSyncing?f.jsx(lM,{className:"h-3 w-3 animate-spin"}):f.jsx($W,{className:"h-3 w-3"}),t.pending>0&&f.jsxs("span",{children:["Syncing ",t.pending," items"]})]}):f.jsxs(f.Fragment,{children:[f.jsx(VW,{className:"h-3 w-3"}),f.jsx("span",{children:"Offline"}),t.pending>0&&f.jsxs(f.Fragment,{children:[f.jsx(Hz,{className:"h-3 w-3"}),f.jsxs("span",{children:[t.pending," pending"]})]})]})}),t.conflicted>0&&f.jsxs(Br,{variant:"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:l,children:[f.jsx(ih,{className:"h-3 w-3"}),f.jsxs("span",{children:[t.conflicted," conflicts"]})]})]}),f.jsx(dde,{open:r,onOpenChange:s,conflicts:i})]})}function fde(){const t=g.useRef(Date.now()),e=g.useRef(0);g.useEffect(()=>{e.current+=1});const n=g.useCallback(s=>{const i=Date.now(),o=i-t.current;o>16&&console.warn(`${s} render time: ${o}ms (render #${e.current})`),t.current=i},[]),r=g.useCallback((s,i)=>{const o=performance.now();s();const a=performance.now();console.log(`${i} took ${a-o} milliseconds`)},[]);return{logRenderTime:n,measurePerformance:r,renderCount:e.current}}function pde(){const[t,e]=g.useState({fps:0,memoryUsage:0,loadTime:0,renderTime:0}),[n,r]=g.useState(!1);if(fde(),g.useEffect(()=>{let o=0,a=performance.now(),l;const c=()=>{o++;const u=performance.now();if(u>=a+1e3){const h=Math.round(o*1e3/(u-a));e(p=>{var m;return{...p,fps:h,loadTime:Math.round(performance.now()),memoryUsage:((m=performance.memory)==null?void 0:m.usedJSHeapSize)||0}}),o=0,a=u}l=requestAnimationFrame(c)};return n&&(l=requestAnimationFrame(c)),()=>{l&&cancelAnimationFrame(l)}},[n]),!n)return null;const s=o=>{if(o===0)return"0 Bytes";const a=1024,l=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(o)/Math.log(a));return parseFloat((o/Math.pow(a,c)).toFixed(2))+" "+l[c]},i=o=>o>=55?"bg-green-500":o>=45?"bg-yellow-500":"bg-red-500";return f.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:f.jsxs(yi,{className:"w-64 bg-background/90 backdrop-blur-sm border shadow-lg",children:[f.jsx(oo,{className:"pb-2",children:f.jsx(ao,{className:"text-sm font-medium",children:"Performance"})}),f.jsxs(vi,{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS:"}),f.jsx(Br,{variant:"outline",className:`${i(t.fps)} text-white border-none`,children:t.fps})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Memory:"}),f.jsx(Br,{variant:"outline",children:s(t.memoryUsage)})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Load:"}),f.jsxs(Br,{variant:"outline",children:[t.loadTime,"ms"]})]})]})]})})}function mde({children:t}){const{isTimerRunning:e}=S$(),{isChatOpenMobile:n}=Zl(),r=Sa(),s=Wv();return console.log("AppLayout - isChatOpenMobile:",n,"isMobile:",s),f.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[f.jsx(Gue,{}),f.jsx(hde,{}),f.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[f.jsx(Rle,{className:Z("transition-all duration-300",e&&"hidden md:flex",!s&&n&&"hidden lg:flex")}),f.jsx("main",{className:Z("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0","pt-0",e&&"md:ml-0",s&&r.pathname==="/"&&"scrollbar-hide"),children:t})]}),f.jsx(rde,{}),f.jsx(ode,{}),f.jsx(pde,{})]})}function gde({children:t}){return f.jsx(Kue,{children:f.jsx(O4,{children:f.jsx(S4,{children:f.jsx(mde,{children:t})})})})}class F$ extends g.Component{constructor(){super(...arguments);Mt(this,"state",{hasError:!1});Mt(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:f.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:f.jsxs(yi,{className:"w-full max-w-md",children:[f.jsxs(oo,{className:"text-center",children:[f.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center",children:f.jsx(ih,{className:"w-6 h-6 text-destructive"})}),f.jsx(ao,{children:"Something went wrong"}),f.jsx(dC,{children:"We're sorry, but something unexpected happened. Please try again."})]}),f.jsxs(vi,{className:"text-center space-y-4",children:[this.state.error&&f.jsxs("details",{className:"text-sm text-muted-foreground",children:[f.jsx("summary",{className:"cursor-pointer",children:"Error details"}),f.jsx("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-auto",children:this.state.error.message})]}),f.jsxs("div",{className:"flex gap-2 justify-center",children:[f.jsxs(Qe,{onClick:this.handleRetry,className:"gap-2",children:[f.jsx(lM,{className:"w-4 h-4"}),"Try Again"]}),f.jsx(Qe,{variant:"outline",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})]})}):this.props.children}}function yde({size:t="default",className:e}){const n={sm:"w-4 h-4",default:"w-6 h-6",lg:"w-8 h-8"};return f.jsx("div",{className:Z("animate-spin rounded-full border-2 border-primary border-t-transparent",n[t],e)})}function vde(){return f.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx(yde,{size:"lg"}),f.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}var up=t=>t.type==="checkbox",tl=t=>t instanceof Date,er=t=>t==null;const V$=t=>typeof t=="object";var Yt=t=>!er(t)&&!Array.isArray(t)&&V$(t)&&!tl(t),U$=t=>Yt(t)&&t.target?up(t.target)?t.target.checked:t.target.value:t,_de=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,$$=(t,e)=>t.has(_de(e)),wde=t=>{const e=t.constructor&&t.constructor.prototype;return Yt(e)&&e.hasOwnProperty("isPrototypeOf")},mC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(mC&&(t instanceof Blob||r))&&(n||Yt(t)))if(e=n?[]:{},!n&&!wde(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=cn(t[s]));else return t;return e}var a_=t=>/^\w*$/.test(t),Gt=t=>t===void 0,gC=t=>Array.isArray(t)?t.filter(Boolean):[],yC=t=>gC(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ue=(t,e,n)=>{if(!e||!Yt(t))return n;const r=(a_(e)?[e]:yC(e)).reduce((s,i)=>er(s)?s:s[i],t);return Gt(r)||r===t?Gt(t[e])?n:t[e]:r},Or=t=>typeof t=="boolean",lt=(t,e,n)=>{let r=-1;const s=a_(e)?[e]:yC(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const c=t[a];l=Yt(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const uy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ki={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vC=G.createContext(null);vC.displayName="HookFormContext";const l_=()=>G.useContext(vC),Ede=t=>{const{children:e,...n}=t;return G.createElement(vC.Provider,{value:n},e)};var B$=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==xs.all&&(e._proxyFormState[o]=!r||xs.all),n&&(n[o]=!0),t[o]}});return s};const _C=typeof window<"u"?G.useLayoutEffect:G.useEffect;function bde(t){const e=l_(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,a]=G.useState(n._formState),l=G.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return _C(()=>n._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!r&&a({...n._formState,...c})}}),[s,r,i]),G.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),G.useMemo(()=>B$(o,n,l.current,!1),[o,n])}var Js=t=>typeof t=="string",z$=(t,e,n,r,s)=>Js(t)?(r&&e.watch.add(t),ue(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),ue(n,i))):(r&&(e.watchAll=!0),n),cb=t=>er(t)||!V$(t);function Li(t,e,n=new WeakSet){if(cb(t)||cb(e))return t===e;if(tl(t)&&tl(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(tl(o)&&tl(a)||Yt(o)&&Yt(a)||Array.isArray(o)&&Array.isArray(a)?!Li(o,a,n):o!==a)return!1}}return!0}function Tde(t){const e=l_(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o,compute:a}=t||{},l=G.useRef(s),c=G.useRef(a),u=G.useRef(void 0);c.current=a;const h=G.useMemo(()=>n._getWatch(r,l.current),[n,r]),[p,m]=G.useState(c.current?c.current(h):h);return _C(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:_=>{if(!i){const y=z$(r,n._names,_.values||n._formValues,!1,l.current);if(c.current){const w=c.current(y);Li(w,u.current)||(m(w),u.current=w)}else m(y)}}}),[n,i,r,o]),G.useEffect(()=>n._removeUnmounted()),p}function xde(t){const e=l_(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i,defaultValue:o}=t,a=$$(s._names.array,n),l=G.useMemo(()=>ue(s._formValues,n,ue(s._defaultValues,n,o)),[s,n,o]),c=Tde({control:s,name:n,defaultValue:l,exact:!0}),u=bde({control:s,name:n,exact:!0}),h=G.useRef(t),p=G.useRef(s.register(n,{...t.rules,value:c,...Or(t.disabled)?{disabled:t.disabled}:{}}));h.current=t;const m=G.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ue(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!ue(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ue(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ue(u.validatingFields,n)},error:{enumerable:!0,get:()=>ue(u.errors,n)}}),[u,n]),_=G.useCallback(E=>p.current.onChange({target:{value:U$(E),name:n},type:uy.CHANGE}),[n]),y=G.useCallback(()=>p.current.onBlur({target:{value:ue(s._formValues,n),name:n},type:uy.BLUR}),[n,s._formValues]),w=G.useCallback(E=>{const x=ue(s._fields,n);x&&E&&(x._f.ref={focus:()=>E.focus&&E.focus(),select:()=>E.select&&E.select(),setCustomValidity:R=>E.setCustomValidity(R),reportValidity:()=>E.reportValidity()})},[s._fields,n]),b=G.useMemo(()=>({name:n,value:c,...Or(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:_,onBlur:y,ref:w}),[n,r,u.disabled,_,y,w,c]);return G.useEffect(()=>{const E=s._options.shouldUnregister||i;s.register(n,{...h.current.rules,...Or(h.current.disabled)?{disabled:h.current.disabled}:{}});const x=(R,O)=>{const L=ue(s._fields,R);L&&L._f&&(L._f.mount=O)};if(x(n,!0),E){const R=cn(ue(s._options.defaultValues,n));lt(s._defaultValues,n,R),Gt(ue(s._formValues,n))&&lt(s._formValues,n,R)}return!a&&s.register(n),()=>{(a?E&&!s._state.action:E)?s.unregister(n):x(n,!1)}},[n,s,a,i]),G.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),G.useMemo(()=>({field:b,formState:u,fieldState:m}),[b,u,m])}const Sde=t=>t.render(xde(t));var W$=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},bh=t=>Array.isArray(t)?t:[t],_N=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},gr=t=>Yt(t)&&!Object.keys(t).length,wC=t=>t.type==="file",Ss=t=>typeof t=="function",dy=t=>{if(!mC)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},q$=t=>t.type==="select-multiple",EC=t=>t.type==="radio",Cde=t=>EC(t)||up(t),Hw=t=>dy(t)&&t.isConnected;function Ide(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Gt(t)?r++:t[e[r++]];return t}function kde(t){for(const e in t)if(t.hasOwnProperty(e)&&!Gt(t[e]))return!1;return!0}function en(t,e){const n=Array.isArray(e)?e:a_(e)?[e]:yC(e),r=n.length===1?t:Ide(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Yt(r)&&gr(r)||Array.isArray(r)&&kde(r))&&en(t,n.slice(0,-1)),t}var H$=t=>{for(const e in t)if(Ss(t[e]))return!0;return!1};function hy(t,e={}){const n=Array.isArray(t);if(Yt(t)||n)for(const r in t)Array.isArray(t[r])||Yt(t[r])&&!H$(t[r])?(e[r]=Array.isArray(t[r])?[]:{},hy(t[r],e[r])):er(t[r])||(e[r]=!0);return e}function G$(t,e,n){const r=Array.isArray(t);if(Yt(t)||r)for(const s in t)Array.isArray(t[s])||Yt(t[s])&&!H$(t[s])?Gt(e)||cb(n[s])?n[s]=Array.isArray(t[s])?hy(t[s],[]):{...hy(t[s])}:G$(t[s],er(e)?{}:e[s],n[s]):n[s]=!Li(t[s],e[s]);return n}var Pd=(t,e)=>G$(t,e,hy(e));const wN={value:!1,isValid:!1},EN={value:!0,isValid:!0};var K$=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Gt(t[0].attributes.value)?Gt(t[0].value)||t[0].value===""?EN:{value:t[0].value,isValid:!0}:EN:wN}return wN},Q$=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Gt(t)?t:e?t===""?NaN:t&&+t:n&&Js(t)?new Date(t):r?r(t):t;const bN={isValid:!1,value:null};var Y$=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,bN):bN;function TN(t){const e=t.ref;return wC(e)?e.files:EC(e)?Y$(t.refs).value:q$(e)?[...e.selectedOptions].map(({value:n})=>n):up(e)?K$(t.refs).value:Q$(Gt(e.value)?t.ref.value:e.value,t)}var Rde=(t,e,n,r)=>{const s={};for(const i of t){const o=ue(e,i);o&&lt(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},fy=t=>t instanceof RegExp,Dd=t=>Gt(t)?t:fy(t)?t.source:Yt(t)?fy(t.value)?t.value.source:t.value:t,xN=t=>({isOnSubmit:!t||t===xs.onSubmit,isOnBlur:t===xs.onBlur,isOnChange:t===xs.onChange,isOnAll:t===xs.all,isOnTouch:t===xs.onTouched});const SN="AsyncFunction";var Ade=t=>!!t&&!!t.validate&&!!(Ss(t.validate)&&t.validate.constructor.name===SN||Yt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===SN)),Nde=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),CN=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Th=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=ue(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Th(a,e))break}else if(Yt(a)&&Th(a,e))break}}};function IN(t,e,n){const r=ue(t,n);if(r||a_(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=ue(e,i),a=ue(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:n}}var Pde=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return gr(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||xs.all))},Dde=(t,e,n)=>!t||!e||t===e||bh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Ode=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Mde=(t,e)=>!gC(ue(t,e)).length&&en(t,e),Lde=(t,e,n)=>{const r=bh(ue(t,n));return lt(r,"root",e[n]),lt(t,n,r),t},$m=t=>Js(t);function kN(t,e,n="validate"){if($m(t)||Array.isArray(t)&&t.every($m)||Or(t)&&!t)return{type:n,message:$m(t)?t:"",ref:e}}var dc=t=>Yt(t)&&!fy(t)?t:{value:t,message:""},RN=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:h,max:p,pattern:m,validate:_,name:y,valueAsNumber:w,mount:b}=t._f,E=ue(n,y);if(!b||e.has(y))return{};const x=a?a[0]:o,R=D=>{s&&x.reportValidity&&(x.setCustomValidity(Or(D)?"":D||""),x.reportValidity())},O={},L=EC(o),k=up(o),S=L||k,I=(w||wC(o))&&Gt(o.value)&&Gt(E)||dy(o)&&o.value===""||E===""||Array.isArray(E)&&!E.length,C=W$.bind(null,y,r,O),P=(D,A,q,$=ki.maxLength,B=ki.minLength)=>{const Y=D?A:q;O[y]={type:D?$:B,message:Y,ref:o,...C(D?$:B,Y)}};if(i?!Array.isArray(E)||!E.length:l&&(!S&&(I||er(E))||Or(E)&&!E||k&&!K$(a).isValid||L&&!Y$(a).isValid)){const{value:D,message:A}=$m(l)?{value:!!l,message:l}:dc(l);if(D&&(O[y]={type:ki.required,message:A,ref:x,...C(ki.required,A)},!r))return R(A),O}if(!I&&(!er(h)||!er(p))){let D,A;const q=dc(p),$=dc(h);if(!er(E)&&!isNaN(E)){const B=o.valueAsNumber||E&&+E;er(q.value)||(D=B>q.value),er($.value)||(A=B<$.value)}else{const B=o.valueAsDate||new Date(E),Y=H=>new Date(new Date().toDateString()+" "+H),F=o.type=="time",j=o.type=="week";Js(q.value)&&E&&(D=F?Y(E)>Y(q.value):j?E>q.value:B>new Date(q.value)),Js($.value)&&E&&(A=F?Y(E)<Y($.value):j?E<$.value:B<new Date($.value))}if((D||A)&&(P(!!D,q.message,$.message,ki.max,ki.min),!r))return R(O[y].message),O}if((c||u)&&!I&&(Js(E)||i&&Array.isArray(E))){const D=dc(c),A=dc(u),q=!er(D.value)&&E.length>+D.value,$=!er(A.value)&&E.length<+A.value;if((q||$)&&(P(q,D.message,A.message),!r))return R(O[y].message),O}if(m&&!I&&Js(E)){const{value:D,message:A}=dc(m);if(fy(D)&&!E.match(D)&&(O[y]={type:ki.pattern,message:A,ref:o,...C(ki.pattern,A)},!r))return R(A),O}if(_){if(Ss(_)){const D=await _(E,n),A=kN(D,x);if(A&&(O[y]={...A,...C(ki.validate,A.message)},!r))return R(A.message),O}else if(Yt(_)){let D={};for(const A in _){if(!gr(D)&&!r)break;const q=kN(await _[A](E,n),x,A);q&&(D={...q,...C(A,q.message)},R(q.message),r&&(O[y]=D))}if(!gr(D)&&(O[y]={ref:x,...D},!r))return O}}return R(!0),O};const jde={mode:xs.onSubmit,reValidateMode:xs.onChange,shouldFocusError:!0};function Fde(t={}){let e={...jde,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ss(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Yt(e.defaultValues)||Yt(e.values)?cn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:cn(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const p={array:_N(),state:_N()},m=e.criteriaMode===xs.all,_=M=>U=>{clearTimeout(c),c=setTimeout(M,U)},y=async M=>{if(!e.disabled&&(u.isValid||h.isValid||M)){const U=e.resolver?gr((await k()).errors):await I(r,!0);U!==n.isValid&&p.state.next({isValid:U})}},w=(M,U)=>{!e.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((M||Array.from(a.mount)).forEach(z=>{z&&(U?lt(n.validatingFields,z,U):en(n.validatingFields,z))}),p.state.next({validatingFields:n.validatingFields,isValidating:!gr(n.validatingFields)}))},b=(M,U=[],z,oe,ie=!0,ee=!0)=>{if(oe&&z&&!e.disabled){if(o.action=!0,ee&&Array.isArray(ue(r,M))){const ne=z(ue(r,M),oe.argA,oe.argB);ie&&lt(r,M,ne)}if(ee&&Array.isArray(ue(n.errors,M))){const ne=z(ue(n.errors,M),oe.argA,oe.argB);ie&&lt(n.errors,M,ne),Mde(n.errors,M)}if((u.touchedFields||h.touchedFields)&&ee&&Array.isArray(ue(n.touchedFields,M))){const ne=z(ue(n.touchedFields,M),oe.argA,oe.argB);ie&&lt(n.touchedFields,M,ne)}(u.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Pd(s,i)),p.state.next({name:M,isDirty:P(M,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else lt(i,M,U)},E=(M,U)=>{lt(n.errors,M,U),p.state.next({errors:n.errors})},x=M=>{n.errors=M,p.state.next({errors:n.errors,isValid:!1})},R=(M,U,z,oe)=>{const ie=ue(r,M);if(ie){const ee=ue(i,M,Gt(z)?ue(s,M):z);Gt(ee)||oe&&oe.defaultChecked||U?lt(i,M,U?ee:TN(ie._f)):q(M,ee),o.mount&&y()}},O=(M,U,z,oe,ie)=>{let ee=!1,ne=!1;const we={name:M};if(!e.disabled){if(!z||oe){(u.isDirty||h.isDirty)&&(ne=n.isDirty,n.isDirty=we.isDirty=P(),ee=ne!==we.isDirty);const Ge=Li(ue(s,M),U);ne=!!ue(n.dirtyFields,M),Ge?en(n.dirtyFields,M):lt(n.dirtyFields,M,!0),we.dirtyFields=n.dirtyFields,ee=ee||(u.dirtyFields||h.dirtyFields)&&ne!==!Ge}if(z){const Ge=ue(n.touchedFields,M);Ge||(lt(n.touchedFields,M,z),we.touchedFields=n.touchedFields,ee=ee||(u.touchedFields||h.touchedFields)&&Ge!==z)}ee&&ie&&p.state.next(we)}return ee?we:{}},L=(M,U,z,oe)=>{const ie=ue(n.errors,M),ee=(u.isValid||h.isValid)&&Or(U)&&n.isValid!==U;if(e.delayError&&z?(l=_(()=>E(M,z)),l(e.delayError)):(clearTimeout(c),l=null,z?lt(n.errors,M,z):en(n.errors,M)),(z?!Li(ie,z):ie)||!gr(oe)||ee){const ne={...oe,...ee&&Or(U)?{isValid:U}:{},errors:n.errors,name:M};n={...n,...ne},p.state.next(ne)}},k=async M=>{w(M,!0);const U=await e.resolver(i,e.context,Rde(M||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(M),U},S=async M=>{const{errors:U}=await k(M);if(M)for(const z of M){const oe=ue(U,z);oe?lt(n.errors,z,oe):en(n.errors,z)}else n.errors=U;return U},I=async(M,U,z={valid:!0})=>{for(const oe in M){const ie=M[oe];if(ie){const{_f:ee,...ne}=ie;if(ee){const we=a.array.has(ee.name),Ge=ie._f&&Ade(ie._f);Ge&&u.validatingFields&&w([oe],!0);const Jt=await RN(ie,a.disabled,i,m,e.shouldUseNativeValidation&&!U,we);if(Ge&&u.validatingFields&&w([oe]),Jt[ee.name]&&(z.valid=!1,U))break;!U&&(ue(Jt,ee.name)?we?Lde(n.errors,Jt,ee.name):lt(n.errors,ee.name,Jt[ee.name]):en(n.errors,ee.name))}!gr(ne)&&await I(ne,U,z)}}return z.valid},C=()=>{for(const M of a.unMount){const U=ue(r,M);U&&(U._f.refs?U._f.refs.every(z=>!Hw(z)):!Hw(U._f.ref))&&ve(M)}a.unMount=new Set},P=(M,U)=>!e.disabled&&(M&&U&&lt(i,M,U),!Li(H(),s)),D=(M,U,z)=>z$(M,a,{...o.mount?i:Gt(U)?s:Js(M)?{[M]:U}:U},z,U),A=M=>gC(ue(o.mount?i:s,M,e.shouldUnregister?ue(s,M,[]):[])),q=(M,U,z={})=>{const oe=ue(r,M);let ie=U;if(oe){const ee=oe._f;ee&&(!ee.disabled&&lt(i,M,Q$(U,ee)),ie=dy(ee.ref)&&er(U)?"":U,q$(ee.ref)?[...ee.ref.options].forEach(ne=>ne.selected=ie.includes(ne.value)):ee.refs?up(ee.ref)?ee.refs.forEach(ne=>{(!ne.defaultChecked||!ne.disabled)&&(Array.isArray(ie)?ne.checked=!!ie.find(we=>we===ne.value):ne.checked=ie===ne.value||!!ie)}):ee.refs.forEach(ne=>ne.checked=ne.value===ie):wC(ee.ref)?ee.ref.value="":(ee.ref.value=ie,ee.ref.type||p.state.next({name:M,values:cn(i)})))}(z.shouldDirty||z.shouldTouch)&&O(M,ie,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&j(M)},$=(M,U,z)=>{for(const oe in U){if(!U.hasOwnProperty(oe))return;const ie=U[oe],ee=M+"."+oe,ne=ue(r,ee);(a.array.has(M)||Yt(ie)||ne&&!ne._f)&&!tl(ie)?$(ee,ie,z):q(ee,ie,z)}},B=(M,U,z={})=>{const oe=ue(r,M),ie=a.array.has(M),ee=cn(U);lt(i,M,ee),ie?(p.array.next({name:M,values:cn(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&z.shouldDirty&&p.state.next({name:M,dirtyFields:Pd(s,i),isDirty:P(M,ee)})):oe&&!oe._f&&!er(ee)?$(M,ee,z):q(M,ee,z),CN(M,a)&&p.state.next({...n,name:M}),p.state.next({name:o.mount?M:void 0,values:cn(i)})},Y=async M=>{o.mount=!0;const U=M.target;let z=U.name,oe=!0;const ie=ue(r,z),ee=Ge=>{oe=Number.isNaN(Ge)||tl(Ge)&&isNaN(Ge.getTime())||Li(Ge,ue(i,z,Ge))},ne=xN(e.mode),we=xN(e.reValidateMode);if(ie){let Ge,Jt;const hr=U.type?TN(ie._f):U$(M),fr=M.type===uy.BLUR||M.type===uy.FOCUS_OUT,Qr=!Nde(ie._f)&&!e.resolver&&!ue(n.errors,z)&&!ie._f.deps||Ode(fr,ue(n.touchedFields,z),n.isSubmitted,we,ne),fn=CN(z,a,fr);lt(i,z,hr),fr?(ie._f.onBlur&&ie._f.onBlur(M),l&&l(0)):ie._f.onChange&&ie._f.onChange(M);const Tn=O(z,hr,fr),Vs=!gr(Tn)||fn;if(!fr&&p.state.next({name:z,type:M.type,values:cn(i)}),Qr)return(u.isValid||h.isValid)&&(e.mode==="onBlur"?fr&&y():fr||y()),Vs&&p.state.next({name:z,...fn?{}:Tn});if(!fr&&fn&&p.state.next({...n}),e.resolver){const{errors:fs}=await k([z]);if(ee(hr),oe){const id=IN(n.errors,r,z),fo=IN(fs,r,id.name||z);Ge=fo.error,z=fo.name,Jt=gr(fs)}}else w([z],!0),Ge=(await RN(ie,a.disabled,i,m,e.shouldUseNativeValidation))[z],w([z]),ee(hr),oe&&(Ge?Jt=!1:(u.isValid||h.isValid)&&(Jt=await I(r,!0)));oe&&(ie._f.deps&&j(ie._f.deps),L(z,Jt,Ge,Tn))}},F=(M,U)=>{if(ue(n.errors,U)&&M.focus)return M.focus(),1},j=async(M,U={})=>{let z,oe;const ie=bh(M);if(e.resolver){const ee=await S(Gt(M)?M:ie);z=gr(ee),oe=M?!ie.some(ne=>ue(ee,ne)):z}else M?(oe=(await Promise.all(ie.map(async ee=>{const ne=ue(r,ee);return await I(ne&&ne._f?{[ee]:ne}:ne)}))).every(Boolean),!(!oe&&!n.isValid)&&y()):oe=z=await I(r);return p.state.next({...!Js(M)||(u.isValid||h.isValid)&&z!==n.isValid?{}:{name:M},...e.resolver||!M?{isValid:z}:{},errors:n.errors}),U.shouldFocus&&!oe&&Th(r,F,M?ie:a.mount),oe},H=M=>{const U={...o.mount?i:s};return Gt(M)?U:Js(M)?ue(U,M):M.map(z=>ue(U,z))},te=(M,U)=>({invalid:!!ue((U||n).errors,M),isDirty:!!ue((U||n).dirtyFields,M),error:ue((U||n).errors,M),isValidating:!!ue(n.validatingFields,M),isTouched:!!ue((U||n).touchedFields,M)}),J=M=>{M&&bh(M).forEach(U=>en(n.errors,U)),p.state.next({errors:M?n.errors:{}})},se=(M,U,z)=>{const oe=(ue(r,M,{_f:{}})._f||{}).ref,ie=ue(n.errors,M)||{},{ref:ee,message:ne,type:we,...Ge}=ie;lt(n.errors,M,{...Ge,...U,ref:oe}),p.state.next({name:M,errors:n.errors,isValid:!1}),z&&z.shouldFocus&&oe&&oe.focus&&oe.focus()},de=(M,U)=>Ss(M)?p.state.subscribe({next:z=>"values"in z&&M(D(void 0,U),z)}):D(M,U,!0),be=M=>p.state.subscribe({next:U=>{Dde(M.name,U.name,M.exact)&&Pde(U,M.formState||u,Zt,M.reRenderRoot)&&M.callback({values:{...i},...n,...U,defaultValues:s})}}).unsubscribe,Pe=M=>(o.mount=!0,h={...h,...M.formState},be({...M,formState:h})),ve=(M,U={})=>{for(const z of M?bh(M):a.mount)a.mount.delete(z),a.array.delete(z),U.keepValue||(en(r,z),en(i,z)),!U.keepError&&en(n.errors,z),!U.keepDirty&&en(n.dirtyFields,z),!U.keepTouched&&en(n.touchedFields,z),!U.keepIsValidating&&en(n.validatingFields,z),!e.shouldUnregister&&!U.keepDefaultValue&&en(s,z);p.state.next({values:cn(i)}),p.state.next({...n,...U.keepDirty?{isDirty:P()}:{}}),!U.keepIsValid&&y()},ht=({disabled:M,name:U})=>{(Or(M)&&o.mount||M||a.disabled.has(U))&&(M?a.disabled.add(U):a.disabled.delete(U))},ft=(M,U={})=>{let z=ue(r,M);const oe=Or(U.disabled)||Or(e.disabled);return lt(r,M,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:M}},name:M,mount:!0,...U}}),a.mount.add(M),z?ht({disabled:Or(U.disabled)?U.disabled:e.disabled,name:M}):R(M,!0,U.value),{...oe?{disabled:U.disabled||e.disabled}:{},...e.progressive?{required:!!U.required,min:Dd(U.min),max:Dd(U.max),minLength:Dd(U.minLength),maxLength:Dd(U.maxLength),pattern:Dd(U.pattern)}:{},name:M,onChange:Y,onBlur:Y,ref:ie=>{if(ie){ft(M,U),z=ue(r,M);const ee=Gt(ie.value)&&ie.querySelectorAll&&ie.querySelectorAll("input,select,textarea")[0]||ie,ne=Cde(ee),we=z._f.refs||[];if(ne?we.find(Ge=>Ge===ee):ee===z._f.ref)return;lt(r,M,{_f:{...z._f,...ne?{refs:[...we.filter(Hw),ee,...Array.isArray(ue(s,M))?[{}]:[]],ref:{type:ee.type,name:M}}:{ref:ee}}}),R(M,!1,void 0,ee)}else z=ue(r,M,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!($$(a.array,M)&&o.action)&&a.unMount.add(M)}}},wt=()=>e.shouldFocusError&&Th(r,F,a.mount),ln=M=>{Or(M)&&(p.state.next({disabled:M}),Th(r,(U,z)=>{const oe=ue(r,z);oe&&(U.disabled=oe._f.disabled||M,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(ie=>{ie.disabled=oe._f.disabled||M}))},0,!1))},Xt=(M,U)=>async z=>{let oe;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let ie=cn(i);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:ee,values:ne}=await k();n.errors=ee,ie=cn(ne)}else await I(r);if(a.disabled.size)for(const ee of a.disabled)en(ie,ee);if(en(n.errors,"root"),gr(n.errors)){p.state.next({errors:{}});try{await M(ie,z)}catch(ee){oe=ee}}else U&&await U({...n.errors},z),wt(),setTimeout(wt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gr(n.errors)&&!oe,submitCount:n.submitCount+1,errors:n.errors}),oe)throw oe},Mn=(M,U={})=>{ue(r,M)&&(Gt(U.defaultValue)?B(M,cn(ue(s,M))):(B(M,U.defaultValue),lt(s,M,cn(U.defaultValue))),U.keepTouched||en(n.touchedFields,M),U.keepDirty||(en(n.dirtyFields,M),n.isDirty=U.defaultValue?P(M,cn(ue(s,M))):P()),U.keepError||(en(n.errors,M),u.isValid&&y()),p.state.next({...n}))},Te=(M,U={})=>{const z=M?cn(M):s,oe=cn(z),ie=gr(M),ee=ie?s:oe;if(U.keepDefaultValues||(s=z),!U.keepValues){if(U.keepDirtyValues){const ne=new Set([...a.mount,...Object.keys(Pd(s,i))]);for(const we of Array.from(ne))ue(n.dirtyFields,we)?lt(ee,we,ue(i,we)):B(we,ue(ee,we))}else{if(mC&&Gt(M))for(const ne of a.mount){const we=ue(r,ne);if(we&&we._f){const Ge=Array.isArray(we._f.refs)?we._f.refs[0]:we._f.ref;if(dy(Ge)){const Jt=Ge.closest("form");if(Jt){Jt.reset();break}}}}if(U.keepFieldsRef)for(const ne of a.mount)B(ne,ue(ee,ne));else r={}}i=e.shouldUnregister?U.keepDefaultValues?cn(s):{}:cn(ee),p.array.next({values:{...ee}}),p.state.next({values:{...ee}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:ie?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Li(M,s)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ie?{}:U.keepDirtyValues?U.keepDefaultValues&&i?Pd(s,i):n.dirtyFields:U.keepDefaultValues&&M?Pd(s,M):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Se=(M,U)=>Te(Ss(M)?M(i):M,U),Et=(M,U={})=>{const z=ue(r,M),oe=z&&z._f;if(oe){const ie=oe.refs?oe.refs[0]:oe.ref;ie.focus&&(ie.focus(),U.shouldSelect&&Ss(ie.select)&&ie.select())}},Zt=M=>{n={...n,...M}},He={control:{register:ft,unregister:ve,getFieldState:te,handleSubmit:Xt,setError:se,_subscribe:be,_runSchema:k,_focusError:wt,_getWatch:D,_getDirty:P,_setValid:y,_setFieldArray:b,_setDisabledField:ht,_setErrors:x,_getFieldArray:A,_reset:Te,_resetDefaultValues:()=>Ss(e.defaultValues)&&e.defaultValues().then(M=>{Se(M,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:ln,_subjects:p,_proxyFormState:u,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return a},set _names(M){a=M},get _formState(){return n},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:Pe,trigger:j,register:ft,handleSubmit:Xt,watch:de,setValue:B,getValues:H,reset:Se,resetField:Mn,clearErrors:J,unregister:ve,setError:se,setFocus:Et,getFieldState:te};return{...He,formControl:He}}function _f(t={}){const e=G.useRef(void 0),n=G.useRef(void 0),[r,s]=G.useState({isDirty:!1,isValidating:!1,isLoading:Ss(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ss(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ss(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=Fde(t);e.current={...a,formState:r}}const i=e.current.control;return i._options=t,_C(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),G.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),G.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),G.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),G.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),G.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),G.useEffect(()=>{t.values&&!Li(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),G.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=B$(r,i),e.current}const AN=(t,e,n)=>{if(t&&"reportValidity"in t){const r=ue(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},X$=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?AN(r.ref,n,t):r.refs&&r.refs.forEach(s=>AN(s,n,t))}},Vde=(t,e)=>{e.shouldUseNativeValidation&&X$(t,e);const n={};for(const r in t){const s=ue(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(Ude(e.names||Object.keys(t),r)){const o=Object.assign({},ue(n,r));lt(o,"root",i),lt(n,r,o)}else lt(n,r,i)}return n},Ude=(t,e)=>t.some(n=>n.startsWith(e+"."));var $de=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return t.push(h)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=W$(o,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},wf=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&X$({},i),{errors:{},values:n.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:Vde($de(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},st;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(st||(st={}));var NN;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(NN||(NN={}));const _e=st.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Co=t=>{switch(typeof t){case"undefined":return _e.undefined;case"string":return _e.string;case"number":return Number.isNaN(t)?_e.nan:_e.number;case"boolean":return _e.boolean;case"function":return _e.function;case"bigint":return _e.bigint;case"symbol":return _e.symbol;case"object":return Array.isArray(t)?_e.array:t===null?_e.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?_e.promise:typeof Map<"u"&&t instanceof Map?_e.map:typeof Set<"u"&&t instanceof Set?_e.set:typeof Date<"u"&&t instanceof Date?_e.date:_e.object;default:return _e.unknown}},le=st.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class lo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof lo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,st.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}lo.create=t=>new lo(t);const ub=(t,e)=>{let n;switch(t.code){case le.invalid_type:t.received===_e.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,st.jsonStringifyReplacer)}`;break;case le.unrecognized_keys:n=`Unrecognized key(s) in object: ${st.joinValues(t.keys,", ")}`;break;case le.invalid_union:n="Invalid input";break;case le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${st.joinValues(t.options)}`;break;case le.invalid_enum_value:n=`Invalid enum value. Expected ${st.joinValues(t.options)}, received '${t.received}'`;break;case le.invalid_arguments:n="Invalid function arguments";break;case le.invalid_return_type:n="Invalid function return type";break;case le.invalid_date:n="Invalid date";break;case le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:st.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case le.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case le.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case le.custom:n="Invalid input";break;case le.invalid_intersection_types:n="Intersection results could not be merged";break;case le.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case le.not_finite:n="Number must be finite";break;default:n=e.defaultError,st.assertNever(t)}return{message:n}};let Bde=ub;function zde(){return Bde}const Wde=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function fe(t,e){const n=zde(),r=Wde({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ub?void 0:ub].filter(s=>!!s)});t.common.issues.push(r)}class qr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return De;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return qr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return De;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const De=Object.freeze({status:"aborted"}),Kd=t=>({status:"dirty",value:t}),hs=t=>({status:"valid",value:t}),PN=t=>t.status==="aborted",DN=t=>t.status==="dirty",Nu=t=>t.status==="valid",py=t=>typeof Promise<"u"&&t instanceof Promise;var Ee;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ee||(Ee={}));class _a{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ON=(t,e)=>{if(Nu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new lo(t.common.issues);return this._error=n,this._error}}};function ze(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}class tt{get description(){return this._def.description}_getType(e){return Co(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qr,ctx:{common:e.parent.common,data:e.data,parsedType:Co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(py(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Co(e)},s=this._parseSync({data:e,path:r.path,parent:r});return ON(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Co(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Nu(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Nu(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Co(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(py(s)?s:Promise.resolve(s));return ON(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:le.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Du({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ia.create(this,this._def)}nullable(){return Ou.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hi.create(this)}promise(){return vy.create(this,this._def)}or(e){return gy.create([this,e],this._def)}and(e){return yy.create(this,e,this._def)}transform(e){return new Du({...ze(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new fb({...ze(this._def),innerType:this,defaultValue:n,typeName:Oe.ZodDefault})}brand(){return new fhe({typeName:Oe.ZodBranded,type:this,...ze(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new pb({...ze(this._def),innerType:this,catchValue:n,typeName:Oe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return bC.create(this,e)}readonly(){return mb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qde=/^c[^\s-]{8,}$/i,Hde=/^[0-9a-z]+$/,Gde=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Kde=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Qde=/^[a-z0-9_-]{21}$/i,Yde=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Xde=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zde=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Jde="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gw;const ehe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,the=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,rhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,she=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ihe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Z$="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ohe=new RegExp(`^${Z$}$`);function J$(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ahe(t){return new RegExp(`^${J$(t)}$`)}function lhe(t){let e=`${Z$}T${J$(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function che(t,e){return!!((e==="v4"||!e)&&ehe.test(t)||(e==="v6"||!e)&&nhe.test(t))}function uhe(t,e){if(!Yde.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function dhe(t,e){return!!((e==="v4"||!e)&&the.test(t)||(e==="v6"||!e)&&rhe.test(t))}class zo extends tt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==_e.string){const i=this._getOrReturnCtx(e);return fe(i,{code:le.invalid_type,expected:_e.string,received:i.parsedType}),De}const r=new qr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),fe(s,{code:le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),fe(s,{code:le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?fe(s,{code:le.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&fe(s,{code:le.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Zde.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"email",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Gw||(Gw=new RegExp(Jde,"u")),Gw.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"emoji",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Kde.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"uuid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Qde.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"nanoid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")qde.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"cuid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Hde.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"cuid2",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Gde.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"ulid",code:le.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),fe(s,{validation:"url",code:le.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"regex",code:le.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),fe(s,{code:le.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),fe(s,{code:le.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),fe(s,{code:le.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?lhe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{code:le.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?ohe.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{code:le.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?ahe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{code:le.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Xde.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"duration",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?che(e.data,i.version)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"ip",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?uhe(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"jwt",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?dhe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"cidr",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?she.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"base64",code:le.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?ihe.test(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{validation:"base64url",code:le.invalid_string,message:i.message}),r.dirty()):st.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:le.invalid_string,...Ee.errToObj(r)})}_addCheck(e){return new zo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ee.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ee.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ee.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ee.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ee.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ee.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ee.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ee.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ee.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ee.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ee.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ee.errToObj(n)})}nonempty(e){return this.min(1,Ee.errToObj(e))}trim(){return new zo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zo.create=t=>new zo({checks:[],typeName:Oe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ze(t)});function hhe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Ef extends tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==_e.number){const i=this._getOrReturnCtx(e);return fe(i,{code:le.invalid_type,expected:_e.number,received:i.parsedType}),De}let r;const s=new qr;for(const i of this._def.checks)i.kind==="int"?st.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{code:le.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:le.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:le.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?hhe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),fe(r,{code:le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{code:le.not_finite,message:i.message}),s.dirty()):st.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,r,s){return new Ef({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new Ef({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&st.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ef.create=t=>new Ef({checks:[],typeName:Oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ze(t)});class bf extends tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==_e.bigint)return this._getInvalidInput(e);let r;const s=new qr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:le.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:le.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:le.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):st.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return fe(n,{code:le.invalid_type,expected:_e.bigint,received:n.parsedType}),De}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,r,s){return new bf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new bf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}bf.create=t=>new bf({checks:[],typeName:Oe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ze(t)});class db extends tt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==_e.boolean){const r=this._getOrReturnCtx(e);return fe(r,{code:le.invalid_type,expected:_e.boolean,received:r.parsedType}),De}return hs(e.data)}}db.create=t=>new db({typeName:Oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ze(t)});class my extends tt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==_e.date){const i=this._getOrReturnCtx(e);return fe(i,{code:le.invalid_type,expected:_e.date,received:i.parsedType}),De}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return fe(i,{code:le.invalid_date}),De}const r=new qr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),fe(s,{code:le.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),fe(s,{code:le.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):st.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new my({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}my.create=t=>new my({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Oe.ZodDate,...ze(t)});class MN extends tt{_parse(e){if(this._getType(e)!==_e.symbol){const r=this._getOrReturnCtx(e);return fe(r,{code:le.invalid_type,expected:_e.symbol,received:r.parsedType}),De}return hs(e.data)}}MN.create=t=>new MN({typeName:Oe.ZodSymbol,...ze(t)});class LN extends tt{_parse(e){if(this._getType(e)!==_e.undefined){const r=this._getOrReturnCtx(e);return fe(r,{code:le.invalid_type,expected:_e.undefined,received:r.parsedType}),De}return hs(e.data)}}LN.create=t=>new LN({typeName:Oe.ZodUndefined,...ze(t)});class jN extends tt{_parse(e){if(this._getType(e)!==_e.null){const r=this._getOrReturnCtx(e);return fe(r,{code:le.invalid_type,expected:_e.null,received:r.parsedType}),De}return hs(e.data)}}jN.create=t=>new jN({typeName:Oe.ZodNull,...ze(t)});class FN extends tt{constructor(){super(...arguments),this._any=!0}_parse(e){return hs(e.data)}}FN.create=t=>new FN({typeName:Oe.ZodAny,...ze(t)});class VN extends tt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return hs(e.data)}}VN.create=t=>new VN({typeName:Oe.ZodUnknown,...ze(t)});class wa extends tt{_parse(e){const n=this._getOrReturnCtx(e);return fe(n,{code:le.invalid_type,expected:_e.never,received:n.parsedType}),De}}wa.create=t=>new wa({typeName:Oe.ZodNever,...ze(t)});class UN extends tt{_parse(e){if(this._getType(e)!==_e.undefined){const r=this._getOrReturnCtx(e);return fe(r,{code:le.invalid_type,expected:_e.void,received:r.parsedType}),De}return hs(e.data)}}UN.create=t=>new UN({typeName:Oe.ZodVoid,...ze(t)});class hi extends tt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==_e.array)return fe(n,{code:le.invalid_type,expected:_e.array,received:n.parsedType}),De;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(fe(n,{code:o?le.too_big:le.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(fe(n,{code:le.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(fe(n,{code:le.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new _a(n,o,n.path,a)))).then(o=>qr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new _a(n,o,n.path,a)));return qr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new hi({...this._def,minLength:{value:e,message:Ee.toString(n)}})}max(e,n){return new hi({...this._def,maxLength:{value:e,message:Ee.toString(n)}})}length(e,n){return new hi({...this._def,exactLength:{value:e,message:Ee.toString(n)}})}nonempty(e){return this.min(1,e)}}hi.create=(t,e)=>new hi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...ze(e)});function _c(t){if(t instanceof Ft){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ia.create(_c(r))}return new Ft({...t._def,shape:()=>e})}else return t instanceof hi?new hi({...t._def,type:_c(t.element)}):t instanceof ia?ia.create(_c(t.unwrap())):t instanceof Ou?Ou.create(_c(t.unwrap())):t instanceof Fl?Fl.create(t.items.map(e=>_c(e))):t}class Ft extends tt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=st.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==_e.object){const c=this._getOrReturnCtx(e);return fe(c,{code:le.invalid_type,expected:_e.object,received:c.parsedType}),De}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof wa&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new _a(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof wa){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(fe(s,{code:le.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const h=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new _a(s,h,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const h=await u.key,p=await u.value;c.push({key:h,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>qr.mergeObjectSync(r,c)):qr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new Ft({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Ee.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Ft({...this._def,unknownKeys:"strip"})}passthrough(){return new Ft({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ft({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ft({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ft({...this._def,catchall:e})}pick(e){const n={};for(const r of st.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Ft({...this._def,shape:()=>n})}omit(e){const n={};for(const r of st.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Ft({...this._def,shape:()=>n})}deepPartial(){return _c(this)}partial(e){const n={};for(const r of st.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Ft({...this._def,shape:()=>n})}required(e){const n={};for(const r of st.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ia;)i=i._def.innerType;n[r]=i}return new Ft({...this._def,shape:()=>n})}keyof(){return e3(st.objectKeys(this.shape))}}Ft.create=(t,e)=>new Ft({shape:()=>t,unknownKeys:"strip",catchall:wa.create(),typeName:Oe.ZodObject,...ze(e)});Ft.strictCreate=(t,e)=>new Ft({shape:()=>t,unknownKeys:"strict",catchall:wa.create(),typeName:Oe.ZodObject,...ze(e)});Ft.lazycreate=(t,e)=>new Ft({shape:t,unknownKeys:"strip",catchall:wa.create(),typeName:Oe.ZodObject,...ze(e)});class gy extends tt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new lo(a.ctx.common.issues));return fe(n,{code:le.invalid_union,unionErrors:o}),De}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new lo(l));return fe(n,{code:le.invalid_union,unionErrors:a}),De}}get options(){return this._def.options}}gy.create=(t,e)=>new gy({options:t,typeName:Oe.ZodUnion,...ze(e)});function hb(t,e){const n=Co(t),r=Co(e);if(t===e)return{valid:!0,data:t};if(n===_e.object&&r===_e.object){const s=st.objectKeys(e),i=st.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=hb(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===_e.array&&r===_e.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=hb(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===_e.date&&r===_e.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class yy extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(PN(i)||PN(o))return De;const a=hb(i.value,o.value);return a.valid?((DN(i)||DN(o))&&n.dirty(),{status:n.value,value:a.data}):(fe(r,{code:le.invalid_intersection_types}),De)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}yy.create=(t,e,n)=>new yy({left:t,right:e,typeName:Oe.ZodIntersection,...ze(n)});class Fl extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.array)return fe(r,{code:le.invalid_type,expected:_e.array,received:r.parsedType}),De;if(r.data.length<this._def.items.length)return fe(r,{code:le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),De;!this._def.rest&&r.data.length>this._def.items.length&&(fe(r,{code:le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new _a(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>qr.mergeArray(n,o)):qr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Fl({...this._def,rest:e})}}Fl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fl({items:t,typeName:Oe.ZodTuple,rest:null,...ze(e)})};class $N extends tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.map)return fe(r,{code:le.invalid_type,expected:_e.map,received:r.parsedType}),De;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new _a(r,a,r.path,[c,"key"])),value:i._parse(new _a(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return De;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return De;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}$N.create=(t,e,n)=>new $N({valueType:e,keyType:t,typeName:Oe.ZodMap,...ze(n)});class Tf extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.set)return fe(r,{code:le.invalid_type,expected:_e.set,received:r.parsedType}),De;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(fe(r,{code:le.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(fe(r,{code:le.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return De;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new _a(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Tf({...this._def,minSize:{value:e,message:Ee.toString(n)}})}max(e,n){return new Tf({...this._def,maxSize:{value:e,message:Ee.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Tf.create=(t,e)=>new Tf({valueType:t,minSize:null,maxSize:null,typeName:Oe.ZodSet,...ze(e)});class BN extends tt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}BN.create=(t,e)=>new BN({getter:t,typeName:Oe.ZodLazy,...ze(e)});class zN extends tt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return fe(n,{received:n.data,code:le.invalid_literal,expected:this._def.value}),De}return{status:"valid",value:e.data}}get value(){return this._def.value}}zN.create=(t,e)=>new zN({value:t,typeName:Oe.ZodLiteral,...ze(e)});function e3(t,e){return new Pu({values:t,typeName:Oe.ZodEnum,...ze(e)})}class Pu extends tt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return fe(n,{expected:st.joinValues(r),received:n.parsedType,code:le.invalid_type}),De}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return fe(n,{received:n.data,code:le.invalid_enum_value,options:r}),De}return hs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Pu.create(e,{...this._def,...n})}exclude(e,n=this._def){return Pu.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Pu.create=e3;class WN extends tt{_parse(e){const n=st.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==_e.string&&r.parsedType!==_e.number){const s=st.objectValues(n);return fe(r,{expected:st.joinValues(s),received:r.parsedType,code:le.invalid_type}),De}if(this._cache||(this._cache=new Set(st.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=st.objectValues(n);return fe(r,{received:r.data,code:le.invalid_enum_value,options:s}),De}return hs(e.data)}get enum(){return this._def.values}}WN.create=(t,e)=>new WN({values:t,typeName:Oe.ZodNativeEnum,...ze(e)});class vy extends tt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.promise&&n.common.async===!1)return fe(n,{code:le.invalid_type,expected:_e.promise,received:n.parsedType}),De;const r=n.parsedType===_e.promise?n.data:Promise.resolve(n.data);return hs(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}vy.create=(t,e)=>new vy({type:t,typeName:Oe.ZodPromise,...ze(e)});class Du extends tt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{fe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return De;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?De:l.status==="dirty"||n.value==="dirty"?Kd(l.value):l});{if(n.value==="aborted")return De;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?De:a.status==="dirty"||n.value==="dirty"?Kd(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?De:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?De:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Nu(o))return De;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Nu(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):De);st.assertNever(s)}}Du.create=(t,e,n)=>new Du({schema:t,typeName:Oe.ZodEffects,effect:e,...ze(n)});Du.createWithPreprocess=(t,e,n)=>new Du({schema:e,effect:{type:"preprocess",transform:t},typeName:Oe.ZodEffects,...ze(n)});class ia extends tt{_parse(e){return this._getType(e)===_e.undefined?hs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ia.create=(t,e)=>new ia({innerType:t,typeName:Oe.ZodOptional,...ze(e)});class Ou extends tt{_parse(e){return this._getType(e)===_e.null?hs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ou.create=(t,e)=>new Ou({innerType:t,typeName:Oe.ZodNullable,...ze(e)});class fb extends tt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===_e.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}fb.create=(t,e)=>new fb({innerType:t,typeName:Oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ze(e)});class pb extends tt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return py(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new lo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new lo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}pb.create=(t,e)=>new pb({innerType:t,typeName:Oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ze(e)});class qN extends tt{_parse(e){if(this._getType(e)!==_e.nan){const r=this._getOrReturnCtx(e);return fe(r,{code:le.invalid_type,expected:_e.nan,received:r.parsedType}),De}return{status:"valid",value:e.data}}}qN.create=t=>new qN({typeName:Oe.ZodNaN,...ze(t)});class fhe extends tt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class bC extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?De:i.status==="dirty"?(n.dirty(),Kd(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?De:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new bC({in:e,out:n,typeName:Oe.ZodPipeline})}}class mb extends tt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Nu(s)&&(s.value=Object.freeze(s.value)),s);return py(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}mb.create=(t,e)=>new mb({innerType:t,typeName:Oe.ZodReadonly,...ze(e)});Ft.lazycreate;var Oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Oe||(Oe={}));const Bi=zo.create,Ufe=db.create;wa.create;hi.create;const dp=Ft.create;Ft.strictCreate;gy.create;yy.create;Fl.create;const $fe=Pu.create;vy.create;ia.create;Ou.create;var phe=Object.defineProperty,mhe=Object.defineProperties,ghe=Object.getOwnPropertyDescriptors,_y=Object.getOwnPropertySymbols,t3=Object.prototype.hasOwnProperty,n3=Object.prototype.propertyIsEnumerable,HN=(t,e,n)=>e in t?phe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yhe=(t,e)=>{for(var n in e||(e={}))t3.call(e,n)&&HN(t,n,e[n]);if(_y)for(var n of _y(e))n3.call(e,n)&&HN(t,n,e[n]);return t},vhe=(t,e)=>mhe(t,ghe(e)),_he=(t,e)=>{var n={};for(var r in t)t3.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&_y)for(var r of _y(t))e.indexOf(r)<0&&n3.call(t,r)&&(n[r]=t[r]);return n};function whe(t){let e=setTimeout(t,0),n=setTimeout(t,10),r=setTimeout(t,50);return[e,n,r]}function Ehe(t){let e=g.useRef();return g.useEffect(()=>{e.current=t}),e.current}var bhe=18,r3=40,The=`${r3}px`,xhe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function She({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:r}){let[s,i]=g.useState(!1),[o,a]=g.useState(!1),[l,c]=g.useState(!1),u=g.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&s&&o,[s,o,n]),h=g.useCallback(()=>{let p=t.current,m=e.current;if(!p||!m||l||n==="none")return;let _=p,y=_.getBoundingClientRect().left+_.offsetWidth,w=_.getBoundingClientRect().top+_.offsetHeight/2,b=y-bhe,E=w;document.querySelectorAll(xhe).length===0&&document.elementFromPoint(b,E)===p||(i(!0),c(!0))},[t,e,l,n]);return g.useEffect(()=>{let p=t.current;if(!p||n==="none")return;function m(){let y=window.innerWidth-p.getBoundingClientRect().right;a(y>=r3)}m();let _=setInterval(m,1e3);return()=>{clearInterval(_)}},[t,n]),g.useEffect(()=>{let p=r||document.activeElement===e.current;if(n==="none"||!p)return;let m=setTimeout(h,0),_=setTimeout(h,2e3),y=setTimeout(h,5e3),w=setTimeout(()=>{c(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(_),clearTimeout(y),clearTimeout(w)}},[e,r,n,h]),{hasPWMBadge:s,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:The}}var s3=g.createContext({}),i3=g.forwardRef((t,e)=>{var n=t,{value:r,onChange:s,maxLength:i,textAlign:o="left",pattern:a,placeholder:l,inputMode:c="numeric",onComplete:u,pushPasswordManagerStrategy:h="increase-width",pasteTransformer:p,containerClassName:m,noScriptCSSFallback:_=Che,render:y,children:w}=n,b=_he(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),E,x,R,O,L;let[k,S]=g.useState(typeof b.defaultValue=="string"?b.defaultValue:""),I=r??k,C=Ehe(I),P=g.useCallback(Te=>{s==null||s(Te),S(Te)},[s]),D=g.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),A=g.useRef(null),q=g.useRef(null),$=g.useRef({value:I,onChange:P,isIOS:typeof window<"u"&&((x=(E=window==null?void 0:window.CSS)==null?void 0:E.supports)==null?void 0:x.call(E,"-webkit-touch-callout","none"))}),B=g.useRef({prev:[(R=A.current)==null?void 0:R.selectionStart,(O=A.current)==null?void 0:O.selectionEnd,(L=A.current)==null?void 0:L.selectionDirection]});g.useImperativeHandle(e,()=>A.current,[]),g.useEffect(()=>{let Te=A.current,Se=q.current;if(!Te||!Se)return;$.current.value!==Te.value&&$.current.onChange(Te.value),B.current.prev=[Te.selectionStart,Te.selectionEnd,Te.selectionDirection];function Et(){if(document.activeElement!==Te){J(null),de(null);return}let He=Te.selectionStart,M=Te.selectionEnd,U=Te.selectionDirection,z=Te.maxLength,oe=Te.value,ie=B.current.prev,ee=-1,ne=-1,we;if(oe.length!==0&&He!==null&&M!==null){let fr=He===M,Qr=He===oe.length&&oe.length<z;if(fr&&!Qr){let fn=He;if(fn===0)ee=0,ne=1,we="forward";else if(fn===z)ee=fn-1,ne=fn,we="backward";else if(z>1&&oe.length>1){let Tn=0;if(ie[0]!==null&&ie[1]!==null){we=fn<ie[1]?"backward":"forward";let Vs=ie[0]===ie[1]&&ie[0]<z;we==="backward"&&!Vs&&(Tn=-1)}ee=Tn+fn,ne=Tn+fn+1}}ee!==-1&&ne!==-1&&ee!==ne&&A.current.setSelectionRange(ee,ne,we)}let Ge=ee!==-1?ee:He,Jt=ne!==-1?ne:M,hr=we??U;J(Ge),de(Jt),B.current.prev=[Ge,Jt,hr]}if(document.addEventListener("selectionchange",Et,{capture:!0}),Et(),document.activeElement===Te&&H(!0),!document.getElementById("input-otp-style")){let He=document.createElement("style");if(He.id="input-otp-style",document.head.appendChild(He),He.sheet){let M="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Od(He.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Od(He.sheet,`[data-input-otp]:autofill { ${M} }`),Od(He.sheet,`[data-input-otp]:-webkit-autofill { ${M} }`),Od(He.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Od(He.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Zt=()=>{Se&&Se.style.setProperty("--root-height",`${Te.clientHeight}px`)};Zt();let qt=new ResizeObserver(Zt);return qt.observe(Te),()=>{document.removeEventListener("selectionchange",Et,{capture:!0}),qt.disconnect()}},[]);let[Y,F]=g.useState(!1),[j,H]=g.useState(!1),[te,J]=g.useState(null),[se,de]=g.useState(null);g.useEffect(()=>{whe(()=>{var Te,Se,Et,Zt;(Te=A.current)==null||Te.dispatchEvent(new Event("input"));let qt=(Se=A.current)==null?void 0:Se.selectionStart,He=(Et=A.current)==null?void 0:Et.selectionEnd,M=(Zt=A.current)==null?void 0:Zt.selectionDirection;qt!==null&&He!==null&&(J(qt),de(He),B.current.prev=[qt,He,M])})},[I,j]),g.useEffect(()=>{C!==void 0&&I!==C&&C.length<i&&I.length===i&&(u==null||u(I))},[i,u,C,I]);let be=She({containerRef:q,inputRef:A,pushPasswordManagerStrategy:h,isFocused:j}),Pe=g.useCallback(Te=>{let Se=Te.currentTarget.value.slice(0,i);if(Se.length>0&&D&&!D.test(Se)){Te.preventDefault();return}typeof C=="string"&&Se.length<C.length&&document.dispatchEvent(new Event("selectionchange")),P(Se)},[i,P,C,D]),ve=g.useCallback(()=>{var Te;if(A.current){let Se=Math.min(A.current.value.length,i-1),Et=A.current.value.length;(Te=A.current)==null||Te.setSelectionRange(Se,Et),J(Se),de(Et)}H(!0)},[i]),ht=g.useCallback(Te=>{var Se,Et;let Zt=A.current;if(!p&&(!$.current.isIOS||!Te.clipboardData||!Zt))return;let qt=Te.clipboardData.getData("text/plain"),He=p?p(qt):qt;Te.preventDefault();let M=(Se=A.current)==null?void 0:Se.selectionStart,U=(Et=A.current)==null?void 0:Et.selectionEnd,z=(M!==U?I.slice(0,M)+He+I.slice(U):I.slice(0,M)+He+I.slice(M)).slice(0,i);if(z.length>0&&D&&!D.test(z))return;Zt.value=z,P(z);let oe=Math.min(z.length,i-1),ie=z.length;Zt.setSelectionRange(oe,ie),J(oe),de(ie)},[i,P,D,I]),ft=g.useMemo(()=>({position:"relative",cursor:b.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[b.disabled]),wt=g.useMemo(()=>({position:"absolute",inset:0,width:be.willPushPWMBadge?`calc(100% + ${be.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:be.willPushPWMBadge?`inset(0 ${be.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[be.PWM_BADGE_SPACE_WIDTH,be.willPushPWMBadge,o]),ln=g.useMemo(()=>g.createElement("input",vhe(yhe({autoComplete:b.autoComplete||"one-time-code"},b),{"data-input-otp":!0,"data-input-otp-placeholder-shown":I.length===0||void 0,"data-input-otp-mss":te,"data-input-otp-mse":se,inputMode:c,pattern:D==null?void 0:D.source,"aria-placeholder":l,style:wt,maxLength:i,value:I,ref:A,onPaste:Te=>{var Se;ht(Te),(Se=b.onPaste)==null||Se.call(b,Te)},onChange:Pe,onMouseOver:Te=>{var Se;F(!0),(Se=b.onMouseOver)==null||Se.call(b,Te)},onMouseLeave:Te=>{var Se;F(!1),(Se=b.onMouseLeave)==null||Se.call(b,Te)},onFocus:Te=>{var Se;ve(),(Se=b.onFocus)==null||Se.call(b,Te)},onBlur:Te=>{var Se;H(!1),(Se=b.onBlur)==null||Se.call(b,Te)}})),[Pe,ve,ht,c,wt,i,se,te,b,D==null?void 0:D.source,I]),Xt=g.useMemo(()=>({slots:Array.from({length:i}).map((Te,Se)=>{var Et;let Zt=j&&te!==null&&se!==null&&(te===se&&Se===te||Se>=te&&Se<se),qt=I[Se]!==void 0?I[Se]:null,He=I[0]!==void 0?null:(Et=l==null?void 0:l[Se])!=null?Et:null;return{char:qt,placeholderChar:He,isActive:Zt,hasFakeCaret:Zt&&qt===null}}),isFocused:j,isHovering:!b.disabled&&Y}),[j,Y,i,se,te,b.disabled,I]),Mn=g.useMemo(()=>y?y(Xt):g.createElement(s3.Provider,{value:Xt},w),[w,Xt,y]);return g.createElement(g.Fragment,null,_!==null&&g.createElement("noscript",null,g.createElement("style",null,_)),g.createElement("div",{ref:q,"data-input-otp-container":!0,style:ft,className:m},Mn,g.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ln)))});i3.displayName="Input";function Od(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var Che=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const o3=g.forwardRef(({className:t,containerClassName:e,...n},r)=>f.jsx(i3,{ref:r,containerClassName:Z("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:Z("disabled:cursor-not-allowed",t),...n}));o3.displayName="InputOTP";const a3=g.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:Z("flex items-center",t),...e}));a3.displayName="InputOTPGroup";const $a=g.forwardRef(({index:t,className:e,...n},r)=>{const s=g.useContext(s3),{char:i,hasFakeCaret:o,isActive:a}=s.slots[t];return f.jsxs("div",{ref:r,className:Z("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",a&&"z-10 ring-2 ring-ring ring-offset-background",e),...n,children:[i,o&&f.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:f.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});$a.displayName="InputOTPSlot";const Ihe=g.forwardRef(({...t},e)=>f.jsx("div",{ref:e,role:"separator",...t,children:f.jsx(Yz,{})}));Ihe.displayName="InputOTPSeparator";var khe="Label",l3=g.forwardRef((t,e)=>f.jsx(Ae.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));l3.displayName=khe;var c3=l3;const Rhe=$u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u3=g.forwardRef(({className:t,...e},n)=>f.jsx(c3,{ref:n,className:Z(Rhe(),t),...e}));u3.displayName=c3.displayName;const xf=Ede,d3=g.createContext({}),zi=({...t})=>f.jsx(d3.Provider,{value:{name:t.name},children:f.jsx(Sde,{...t})}),c_=()=>{const t=g.useContext(d3),e=g.useContext(h3),{getFieldState:n,formState:r}=l_(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},h3=g.createContext({}),ei=g.forwardRef(({className:t,...e},n)=>{const r=g.useId();return f.jsx(h3.Provider,{value:{id:r},children:f.jsx("div",{ref:n,className:Z("space-y-2",t),...e})})});ei.displayName="FormItem";const ti=g.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=c_();return f.jsx(u3,{ref:n,className:Z(r&&"text-destructive",t),htmlFor:s,...e})});ti.displayName="FormLabel";const ni=g.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=c_();return f.jsx(zl,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});ni.displayName="FormControl";const Ahe=g.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=c_();return f.jsx("p",{ref:n,id:r,className:Z("text-sm text-muted-foreground",t),...e})});Ahe.displayName="FormDescription";const ri=g.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=c_(),o=s?String(s==null?void 0:s.message):e;return o?f.jsx("p",{ref:r,id:i,className:Z("text-sm font-medium text-destructive",t),...n,children:o}):null});ri.displayName="FormMessage";const Nhe=dp({phoneNumber:Bi().min(10,"Phone number must be at least 10 digits").regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number with country code")}),Phe=dp({otp:Bi().min(6,"OTP must be 6 digits").max(6,"OTP must be 6 digits")});function Dhe({onBack:t,className:e}){const{signInWithPhone:n,verifyPhoneOTP:r,loading:s}=ur(),[i,o]=g.useState("phone"),[a,l]=g.useState(null),[c,u]=g.useState(""),h=_f({resolver:wf(Nhe),defaultValues:{phoneNumber:""}}),p=_f({resolver:wf(Phe),defaultValues:{otp:""}}),m=async b=>{try{const E=b.phoneNumber.startsWith("+")?b.phoneNumber:`+${b.phoneNumber}`,x=await n(E);l(x),u(E),o("otp")}catch(E){console.error("Error sending OTP:",E)}},_=async b=>{if(a)try{await r(a,b.otp)}catch(E){console.error("Error verifying OTP:",E),p.setError("otp",{message:"Invalid OTP. Please try again."})}},y=async()=>{if(c)try{const b=await n(c);l(b)}catch(b){console.error("Error resending OTP:",b)}},w=()=>{o("phone"),l(null),p.reset()};return f.jsxs(yi,{className:Z("w-full max-w-md animate-fade-in",e),children:[f.jsx(oo,{children:f.jsxs("div",{className:"flex items-center gap-3",children:[(i==="otp"||t)&&f.jsx(Qe,{variant:"ghost",size:"icon",onClick:i==="otp"?w:t,className:"h-8 w-8",children:f.jsx(Az,{className:"h-4 w-4"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(aM,{className:"h-5 w-5 text-primary"}),f.jsx(ao,{className:"text-xl",children:i==="phone"?"Sign in with Phone":"Enter Verification Code"})]})]})}),f.jsx(vi,{className:"space-y-6",children:i==="phone"?f.jsxs(f.Fragment,{children:[f.jsx("div",{id:"recaptcha-container",className:"flex justify-center"}),f.jsx(xf,{...h,children:f.jsxs("form",{onSubmit:h.handleSubmit(m),className:"space-y-4",children:[f.jsx(zi,{control:h.control,name:"phoneNumber",render:({field:b})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Phone Number"}),f.jsx(ni,{children:f.jsx(Rs,{placeholder:"+1234567890",...b,className:"text-center font-mono"})}),f.jsx(ri,{}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Include country code (e.g., +1 for US, +91 for India)"})]})}),f.jsx(Qe,{type:"submit",className:"w-full",disabled:s,variant:"focus",children:s?f.jsxs(f.Fragment,{children:[f.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]})})]}):f.jsx(xf,{...p,children:f.jsxs("form",{onSubmit:p.handleSubmit(_),className:"space-y-6",children:[f.jsxs("div",{className:"text-center space-y-2",children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"We've sent a 6-digit code to"}),f.jsx("p",{className:"font-medium",children:c})]}),f.jsx(zi,{control:p.control,name:"otp",render:({field:b})=>f.jsxs(ei,{children:[f.jsx(ti,{className:"sr-only",children:"Verification Code"}),f.jsx(ni,{children:f.jsx("div",{className:"flex justify-center",children:f.jsx(o3,{maxLength:6,value:b.value,onChange:b.onChange,children:f.jsxs(a3,{children:[f.jsx($a,{index:0}),f.jsx($a,{index:1}),f.jsx($a,{index:2}),f.jsx($a,{index:3}),f.jsx($a,{index:4}),f.jsx($a,{index:5})]})})})}),f.jsx(ri,{})]})}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(Qe,{type:"submit",className:"w-full",disabled:s||p.watch("otp").length!==6,variant:"focus",children:s?f.jsxs(f.Fragment,{children:[f.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Sign In"}),f.jsx(Qe,{type:"button",variant:"ghost",className:"w-full",onClick:y,disabled:s,children:"Resend OTP"})]})]})})})]})}var u_="Tabs",[Ohe,Bfe]=Kr(u_,[e_]),f3=e_(),[Mhe,TC]=Ohe(u_),p3=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Jv(a),[h,p]=Wl({prop:r,onChange:s,defaultProp:i??"",caller:u_});return f.jsx(Mhe,{scope:n,baseId:qi(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:l,children:f.jsx(Ae.div,{dir:u,"data-orientation":o,...c,ref:e})})});p3.displayName=u_;var m3="TabsList",g3=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=TC(m3,n),o=f3(n);return f.jsx(eU,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:f.jsx(Ae.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});g3.displayName=m3;var y3="TabsTrigger",v3=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=TC(y3,n),a=f3(n),l=E3(o.baseId,r),c=b3(o.baseId,r),u=r===o.value;return f.jsx(tU,{asChild:!0,...a,focusable:!s,active:u,children:f.jsx(Ae.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:pe(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:pe(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:pe(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!s&&h&&o.onValueChange(r)})})})});v3.displayName=y3;var _3="TabsContent",w3=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=TC(_3,n),l=E3(a.baseId,r),c=b3(a.baseId,r),u=r===a.value,h=g.useRef(u);return g.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),f.jsx(On,{present:s||u,children:({present:p})=>f.jsx(Ae.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});w3.displayName=_3;function E3(t,e){return`${t}-trigger-${e}`}function b3(t,e){return`${t}-content-${e}`}var Lhe=p3,T3=g3,x3=v3,S3=w3;const jhe=Lhe,C3=g.forwardRef(({className:t,...e},n)=>f.jsx(T3,{ref:n,className:Z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));C3.displayName=T3.displayName;const gb=g.forwardRef(({className:t,...e},n)=>f.jsx(x3,{ref:n,className:Z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));gb.displayName=x3.displayName;const yb=g.forwardRef(({className:t,...e},n)=>f.jsx(S3,{ref:n,className:Z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));yb.displayName=S3.displayName;const Fhe=dp({email:Bi().email({message:"Invalid email address."}),password:Bi().min(6,{message:"Password must be at least 6 characters."})}),Vhe=dp({email:Bi().email({message:"Invalid email address."})});function Uhe(){const{signIn:t,signInWithGoogle:e,resetPassword:n,loading:r}=ur(),s=Vu(),[i,o]=g.useState(!1),a=Wv(),l=_f({resolver:wf(Fhe),defaultValues:{email:"",password:""}}),c=_f({resolver:wf(Vhe),defaultValues:{email:""}});async function u(m){try{await t(m.email,m.password),s("/")}catch{}}async function h(){try{await e(),s("/")}catch{}}async function p(m){try{await n(m.email),o(!1),c.reset()}catch{}}return i?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:f.jsxs(yi,{className:"w-full max-w-md shadow-elegant animate-scale-in",children:[f.jsx(oo,{children:f.jsxs(ao,{className:"text-center text-2xl flex items-center justify-center gap-2",children:[f.jsx(j1,{className:"h-6 w-6 text-primary"}),"Reset Password"]})}),f.jsx(vi,{children:f.jsx(xf,{...c,children:f.jsxs("form",{onSubmit:c.handleSubmit(p),className:"space-y-4",children:[f.jsx(zi,{control:c.control,name:"email",render:({field:m})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Email Address"}),f.jsx(ni,{children:f.jsx(Rs,{placeholder:"m@example.com",...m})}),f.jsx(ri,{})]})}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(Qe,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?f.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}):"Send Reset Email"}),f.jsx(Qe,{type:"button",variant:"ghost",className:"w-full",onClick:()=>o(!1),children:"Back to Sign In"})]})]})})})]})}):f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:f.jsxs("div",{className:"w-full max-w-md space-y-6",children:[f.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:f.jsx(du,{className:"h-8 w-8 text-white"})})}),f.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),f.jsx("p",{className:"text-muted-foreground",children:"Smart Task Management"})]}),f.jsxs(yi,{className:"shadow-elegant animate-scale-in",children:[f.jsx(oo,{children:f.jsx(ao,{className:"text-center text-xl",children:"Welcome Back"})}),f.jsxs(vi,{children:[f.jsxs(jhe,{defaultValue:"email",className:"w-full",children:[a?f.jsx("div",{className:"mb-6"}):f.jsxs(C3,{className:"grid w-full grid-cols-2 mb-6",children:[f.jsxs(gb,{value:"email",className:"flex items-center gap-2",children:[f.jsx(j1,{className:"h-4 w-4"}),"Email"]}),f.jsxs(gb,{value:"phone",className:"flex items-center gap-2",children:[f.jsx(aM,{className:"h-4 w-4"}),"Phone"]})]}),f.jsx(yb,{value:"email",className:"space-y-4",children:f.jsx(xf,{...l,children:f.jsxs("form",{onSubmit:l.handleSubmit(u),className:"space-y-4",children:[f.jsx(zi,{control:l.control,name:"email",render:({field:m})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Email"}),f.jsx(ni,{children:f.jsx(Rs,{placeholder:"m@example.com",...m})}),f.jsx(ri,{})]})}),f.jsx(zi,{control:l.control,name:"password",render:({field:m})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Password"}),f.jsx(ni,{children:f.jsx(Rs,{type:"password",placeholder:"",...m})}),f.jsx(ri,{})]})}),f.jsx("div",{className:"flex justify-end",children:f.jsx(Qe,{type:"button",variant:"link",className:"px-0 text-sm",onClick:()=>o(!0),children:"Forgot password?"})}),f.jsx(Qe,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?f.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}):"Sign In"})]})})}),!a&&f.jsx(yb,{value:"phone",children:f.jsx(Dhe,{})})]}),!a&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative my-6",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("span",{className:"w-full border-t"})}),f.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:f.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),f.jsxs(Qe,{variant:"outline",className:"w-full hover-scale",onClick:h,disabled:r,children:[r?f.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}):f.jsx(sM,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),f.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",f.jsx(zh,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign Up"})]})]})]})]})})}const $he=dp({displayName:Bi().min(2,{message:"Name must be at least 2 characters."}),email:Bi().email({message:"Invalid email address."}),password:Bi().min(8,{message:"Password must be at least 8 characters."}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,{message:"Password must contain at least one uppercase letter, one lowercase letter, and one number."}),confirmPassword:Bi()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Bhe(){const{signUp:t,signInWithGoogle:e,loading:n}=ur(),r=Vu(),s=Wv(),i=_f({resolver:wf($he),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""}});async function o(l){try{await t(l.email,l.password,l.displayName),r("/")}catch{}}async function a(){try{await e(),r("/")}catch{}}return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:f.jsxs("div",{className:"w-full max-w-md space-y-6",children:[f.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:f.jsx(du,{className:"h-8 w-8 text-white"})})}),f.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),f.jsx("p",{className:"text-muted-foreground",children:"Start your Taskly journey"})]}),f.jsxs(yi,{className:"shadow-elegant animate-scale-in",children:[f.jsx(oo,{children:f.jsxs(ao,{className:"text-center text-xl flex items-center justify-center gap-2",children:[f.jsx(zy,{className:"h-5 w-5 text-primary"}),"Create Your Account"]})}),f.jsxs(vi,{children:[f.jsx(xf,{...i,children:f.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-4",children:[f.jsx(zi,{control:i.control,name:"displayName",render:({field:l})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Full Name"}),f.jsx(ni,{children:f.jsx(Rs,{placeholder:"John Doe",...l})}),f.jsx(ri,{})]})}),f.jsx(zi,{control:i.control,name:"email",render:({field:l})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Email"}),f.jsx(ni,{children:f.jsx(Rs,{placeholder:"m@example.com",...l})}),f.jsx(ri,{})]})}),f.jsx(zi,{control:i.control,name:"password",render:({field:l})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Password"}),f.jsx(ni,{children:f.jsx(Rs,{type:"password",placeholder:"",...l})}),f.jsx(ri,{})]})}),f.jsx(zi,{control:i.control,name:"confirmPassword",render:({field:l})=>f.jsxs(ei,{children:[f.jsx(ti,{children:"Confirm Password"}),f.jsx(ni,{children:f.jsx(Rs,{type:"password",placeholder:"",...l})}),f.jsx(ri,{})]})}),f.jsx(Qe,{type:"submit",className:"w-full",disabled:n,variant:"focus",children:n?f.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}):"Create Account"})]})}),!s&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative my-6",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("span",{className:"w-full border-t"})}),f.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:f.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),f.jsxs(Qe,{variant:"outline",className:"w-full hover-scale",onClick:a,disabled:n,children:[n?f.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}):f.jsx(sM,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),f.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",f.jsx(zh,{to:"/signin",className:"text-primary hover:underline font-medium",children:"Sign In"})]}),f.jsx("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:f.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]})]})]})})}const zhe=({children:t})=>{const{user:e,loading:n}=ur(),r=Vu();return g.useEffect(()=>{!n&&!e&&r("/signin")},[e,n,r]),n?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx(Jo,{className:"h-10 w-10 animate-spin text-primary"})}):e?f.jsx(f.Fragment,{children:t}):null};function Whe(){const{tasks:t}=YS(),{user:e}=ur(),[n,r]=g.useState(new Set);return g.useEffect(()=>{(async()=>{if(!e)return;if(At.isNativePlatform()&&(await jt.checkPermissions()).display!=="granted"){console.log("Native notification permission not granted, skipping native assignment check.");return}const i=t.filter(o=>{var u;const a=(u=o.assignedTo)==null?void 0:u.includes(e.uid),l=o.createdAt&&Date.now()-new Date(o.createdAt).getTime()<3e5,c=!n.has(o.id);return a&&l&&c});if(i.length!==0){if(console.log(`Found ${i.length} new task(s) to notify about.`),At.isNativePlatform()){const o=i.map(a=>({id:Math.floor(Math.random()*1e6),title:"New Task Assigned",body:`You have been assigned: "${a.title}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{taskId:a.id,type:"task_assignment"}}));try{await jt.schedule({notifications:o}),console.log("Native task assignment notifications scheduled successfully")}catch(a){console.error("Failed to schedule native notifications:",a)}}else for(const o of i)try{"Notification"in window&&Notification.permission==="granted"&&new Notification("New Task Assigned",{body:`You have been assigned: "${o.title}"`,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`task-assignment-${o.id}`,data:{taskId:o.id,type:"task_assignment"},requireInteraction:!0,vibrate:[200,100,200]})}catch(a){console.error("Failed to show web notification:",a)}r(o=>{const a=new Set(o);return i.forEach(l=>a.add(l.id)),a})}})()},[t,e,n]),null}class qhe{constructor(){Mt(this,"messaging",null);Mt(this,"vapidKey")}async init(){try{if(!("serviceWorker"in navigator)||!("Notification"in window)){console.warn("FCM not supported in this browser");return}this.messaging=WV,await this.requestPermission(),this.setupMessageListener()}catch(e){console.error("Failed to initialize FCM:",e)}}async requestPermission(){try{if(await Notification.requestPermission()==="granted"){const n=await navigator.serviceWorker.ready,r=await XA(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:n});return r?(console.log("FCM token received:",r),r):(console.warn("No FCM token available"),null)}else return console.warn("Notification permission denied"),null}catch(e){throw console.error("Failed to get FCM token:",e),e}}setupMessageListener(){this.messaging&&$oe(this.messaging,e=>{if(console.log("Message received:",e),e.notification){const{title:n,body:r,icon:s}=e.notification;"serviceWorker"in navigator&&"showNotification"in ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(i=>{i.showNotification(n||"New Message",{body:r||"",icon:s||"/icon-192x192.png",badge:"/icon-192x192.png",tag:"fcm-message",requireInteraction:!1,silent:!1})})}})}async getToken(){this.messaging||await this.init();try{const e=await navigator.serviceWorker.ready;return await XA(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e})}catch(e){return console.error("Failed to get FCM token:",e),null}}}const Hhe=new qhe,Ghe=Hu("App",{web:()=>wn(()=>import("./web-DQpoStib.js"),[]).then(t=>new t.AppWeb)}),qa=class qa{constructor(){Mt(this,"isInitialized",!1)}static getInstance(){return qa.instance||(qa.instance=new qa),qa.instance}async init(){if(!At.isNativePlatform()){console.log("Not running on native platform, skipping Capacitor notifications");return}try{if((await jt.requestPermissions()).display!=="granted"){console.warn("Notification permissions not granted");return}At.getPlatform()==="android"&&(await jt.createChannel({id:"task-reminders",name:"Task Reminders",description:"Notifications for task reminders",importance:4,visibility:1,sound:"beep.wav",vibration:!0,lights:!0,lightColor:"#488AFF"}),await jt.createChannel({id:"pomodoro",name:"Pomodoro Timer",description:"Notifications for pomodoro sessions",importance:4,visibility:1,sound:"ding.wav",vibration:!0,lights:!0,lightColor:"#FF6B6B"})),await jt.addListener("localNotificationActionPerformed",n=>{this.handleNotificationAction(n)}),await jt.addListener("localNotificationReceived",n=>{console.log("Notification received:",n)}),Ghe.addListener("appStateChange",({isActive:n})=>{n&&this.handleAppResumed()}),this.isInitialized=!0,console.log("Capacitor notifications initialized")}catch(e){console.error("Failed to initialize Capacitor notifications:",e)}}handleNotificationAction(e){const{actionId:n,notification:r}=e;console.log("Notification action:",n,r),window.dispatchEvent(new CustomEvent("capacitor-notification-action",{detail:{actionId:n,notificationId:r.id,data:r.extra}}))}async handleAppResumed(){try{const e=await jt.getPending();console.log("Pending notifications:",e.notifications.length);const n=await jt.getDeliveredNotifications();console.log("Delivered notifications:",n.notifications.length)}catch(e){console.error("Error checking notifications on resume:",e)}}async scheduleNotification(e){if(!this.isInitialized||!At.isNativePlatform()){console.warn("Capacitor notifications not available, falling back to web notifications");return}try{await jt.schedule({notifications:[e]}),console.log("Notification scheduled:",e.id)}catch(n){console.error("Failed to schedule notification:",n)}}async cancelNotification(e){if(!(!this.isInitialized||!At.isNativePlatform()))try{await jt.cancel({notifications:[{id:e}]}),console.log("Notification cancelled:",e)}catch(n){console.error("Failed to cancel notification:",n)}}async cancelAllNotifications(){if(!(!this.isInitialized||!At.isNativePlatform()))try{const e=await jt.getPending();e.notifications.length>0&&await jt.cancel({notifications:e.notifications.map(n=>({id:n.id}))}),console.log("All notifications cancelled")}catch(e){console.error("Failed to cancel all notifications:",e)}}async getPendingNotifications(){if(!this.isInitialized||!At.isNativePlatform())return[];try{return(await jt.getPending()).notifications}catch(e){return console.error("Failed to get pending notifications:",e),[]}}async scheduleTaskReminder(e,n,r,s){const i=this.generateNotificationId(e);await this.scheduleNotification({id:i,title:n,body:r,schedule:{at:s,allowWhileIdle:!0},channelId:"task-reminders",iconColor:"#488AFF",extra:{taskId:e,type:"task-reminder"}})}async schedulePomodoroComplete(e){const n=Date.now();await this.scheduleNotification({id:n,title:`${e==="work"?"Work":"Break"} Session Complete`,body:`Great job! Time for your ${e==="work"?"break":"next work session"}.`,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"pomodoro",iconColor:"#FF6B6B",extra:{type:"pomodoro-complete",sessionType:e}})}async cancelTaskReminder(e){const n=this.generateNotificationId(e);await this.cancelNotification(n)}generateNotificationId(e){let n=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n)}isNativeNotificationsAvailable(){return this.isInitialized&&At.isNativePlatform()}};Mt(qa,"instance");let vb=qa;const GN=vb.getInstance(),Ha=class Ha{constructor(){Mt(this,"checkInterval",null)}static getInstance(){return Ha.instance||(Ha.instance=new Ha),Ha.instance}async init(){await Ze.init(),this.startScheduleChecker(),await this.checkMissedNotifications()}async scheduleNotification(e){const n={...e,id:crypto.randomUUID(),createdAt:Date.now(),status:"pending"};await this.saveScheduledNotification(n);const r=e.scheduledTime-Date.now();return r<=5*60*1e3&&r>0&&setTimeout(()=>this.deliverNotification(n.id),r),n.id}async cancelNotification(e){const n=await this.getScheduledNotification(e);n&&(n.status="expired",await this.saveScheduledNotification(n))}async saveScheduledNotification(e){const n=await Ze.getStore("scheduledNotifications","readwrite");return new Promise((r,s)=>{const i=n.put(e);i.onsuccess=()=>r(),i.onerror=()=>s(i.error)})}async getScheduledNotification(e){const n=await Ze.getStore("scheduledNotifications");return new Promise((r,s)=>{const i=n.get(e);i.onsuccess=()=>r(i.result||null),i.onerror=()=>s(i.error)})}async getAllPendingNotifications(){const n=(await Ze.getStore("scheduledNotifications")).index("status");return new Promise((r,s)=>{const i=n.getAll("pending");i.onsuccess=()=>r(i.result),i.onerror=()=>s(i.error)})}startScheduleChecker(){this.checkInterval=window.setInterval(()=>this.checkDueNotifications(),3e4)}async checkDueNotifications(){if(!this.isDatabaseReady())return;const e=await this.getAllPendingNotifications(),n=Date.now();for(const r of e)r.scheduledTime<=n&&await this.deliverNotification(r.id)}isDatabaseReady(){try{return Ze&&typeof Ze.getStore=="function"}catch{return!1}}async checkMissedNotifications(){const e=await this.getAllPendingNotifications(),n=Date.now();let r=0;for(const s of e)s.scheduledTime<=n&&(await this.deliverNotification(s.id),r++);r>0&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly - Missed Notifications",{body:`You had ${r} missed notification${r>1?"s":""} while the app was closed.`,icon:"/icon-192x192.png",tag:"missed-notifications"})}async deliverNotification(e){const n=await this.getScheduledNotification(e);if(!n||n.status!=="pending")return;if(Date.now()-n.scheduledTime>60*60*1e3){n.status="expired",await this.saveScheduledNotification(n);return}"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",options:{title:n.title,body:n.body,icon:n.icon||"/icon-192x192.png",badge:n.badge||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent,vibrate:n.vibrate||[200,100,200],actions:n.actions}}):"Notification"in window&&Notification.permission==="granted"&&new Notification(n.title,{body:n.body,icon:n.icon||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent}),n.status="delivered",await this.saveScheduledNotification(n)}async getNotificationHistory(){const e=await Ze.getStore("scheduledNotifications");return new Promise((n,r)=>{const s=e.getAll();s.onsuccess=()=>n(s.result.sort((i,o)=>o.createdAt-i.createdAt)),s.onerror=()=>r(s.error)})}async clearExpiredNotifications(){const n=(await this.getNotificationHistory()).filter(s=>s.status==="expired"||s.status==="delivered"),r=await Ze.getStore("scheduledNotifications","readwrite");for(const s of n)Date.now()-s.createdAt>7*24*60*60*1e3&&r.delete(s.id)}destroy(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}};Mt(Ha,"instance");let _b=Ha;const wb=_b.getInstance(),Khe=Object.freeze(Object.defineProperty({__proto__:null,unifiedNotifications:wb},Symbol.toStringTag,{value:"Module"})),Ga=class Ga{constructor(){Mt(this,"initialized",!1)}static getInstance(){return Ga.instance||(Ga.instance=new Ga),Ga.instance}async init(){if(!this.initialized)try{At.isNativePlatform()?(await GN.init(),console.log("Capacitor notifications initialized for native platform")):(await Promise.all([Hhe.init(),wb.init()]),console.log("Web notifications initialized for PWA")),this.initialized=!0,console.log("Unified notification service initialized for platform:",At.getPlatform())}catch(e){console.error("Failed to initialize unified notification service:",e)}}async sendNotification(e){this.initialized||await this.init();try{At.isNativePlatform()?(await this.sendCapacitorNotification(e),console.log("Sent native notification:",e.title)):(await this.sendWebNotification(e),console.log("Sent web notification:",e.title)),!At.isNativePlatform()&&(e.type==="chat"||e.type==="task")&&await this.sendBackgroundNotification(e)}catch(n){console.error("Failed to send notification:",n)}}async scheduleNotification(e,n){return await wb.scheduleNotification({...e,scheduledTime:n})}async sendCapacitorNotification(e){try{await GN.scheduleNotification({id:Date.now(),title:e.title,body:e.body,sound:"default",channelId:"app_main_channel",extra:{...e.data,type:e.type},schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0}})}catch(n){throw console.error("Failed to send Capacitor notification:",n),n}}async sendWebNotification(e){try{if("Notification"in window){if(Notification.permission==="default"&&await Notification.requestPermission()!=="granted"){console.warn("Web notification permission denied");return}Notification.permission==="granted"&&new Notification(e.title,{body:e.body,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`${e.type}-${Date.now()}`,data:{...e.data,type:e.type},requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,vibrate:[200,100,200]})}}catch(n){throw console.error("Failed to send web notification:",n),n}}async sendBackgroundNotification(e){e.scheduledTime&&await this.scheduleNotification(e,e.scheduledTime)}async sendChatNotification(e,n,r,s){return this.sendNotification({title:`New message from ${n}`,body:r.length>100?`${r.substring(0,100)}...`:r,type:"chat",data:{senderId:e,chatId:s,messagePreview:r.substring(0,50)},requireInteraction:!1})}async sendTaskAssignmentNotification(e,n,r){return this.sendNotification({title:"New Task Assignment",body:`${n} assigned you "${e}"`,type:"assignment",data:{taskId:r,assignerName:n,taskTitle:e},requireInteraction:!0})}async sendCommentNotification(e,n,r,s){return this.sendNotification({title:`New comment on "${e}"`,body:`${n}: ${r.length>80?`${r.substring(0,80)}...`:r}`,type:"comment",data:{taskId:s,commenterName:n,commentPreview:r.substring(0,50)}})}async sendPomodoroNotification(e,n){const r=e==="work_complete";return this.sendNotification({title:r?"Work Session Complete!":"Break Time Over!",body:r?`Great focus! Time for a break. Session ${n||1} completed.`:"Ready to get back to work? Your break is over.",type:"pomodoro",data:{pomodoroType:e,sessionCount:n},requireInteraction:!0})}};Mt(Ga,"instance");let Eb=Ga;const wy=Eb.getInstance();function bb(t){const e=t??Date.now();return Math.floor(e%2e9)}function Qhe(){const{user:t}=ur(),e=g.useRef(new Map),n=g.useRef(new Map),r=g.useRef(null);g.useEffect(()=>{if(!t){s(),e.current.clear();return}wy.init();const i=RA(br(Re,"chatRooms"),Bc("participants","array-contains",t.uid));return r.current=hl(i,o=>{const a=new Set;o.forEach(l=>{a.add(l.id)}),n.current.forEach((l,c)=>{a.has(c)||(l(),n.current.delete(c),e.current.delete(c))}),a.forEach(l=>{if(!n.current.has(l)){const c=RA(yc(vc,`chats/${l}/messages`),lre("timestamp"),ore(10)),u=sre(c,h=>{const p=h.val(),m=h.key;if(!m||!p)return;const _={id:m,...p};if(_.senderId===t.uid){e.current.set(l,_.timestamp);return}const y=e.current.get(l)||0;if(_.timestamp<=y)return;e.current.set(l,_.timestamp);const w=`New message from ${_.senderName}`,b=_.content.length>100?`${_.content.substring(0,100)}...`:_.content,E=bb(_.timestamp);At.isNativePlatform()?wn(async()=>{const{LocalNotifications:x}=await Promise.resolve().then(()=>C7);return{LocalNotifications:x}},void 0).then(({LocalNotifications:x})=>{x.schedule({notifications:[{id:E,title:w,body:b,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"chat_message",senderId:_.senderId,chatRoomId:l}}]}).catch(R=>{console.error("Failed to schedule native chat notification:",R)})}):"Notification"in window&&Notification.permission==="granted"&&new Notification(w,{body:b,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`chat-message-${_.id}`,data:{type:"chat_message",senderId:_.senderId,chatRoomId:l},requireInteraction:!1,vibrate:[100,50,100]})});n.current.set(l,()=>ZF(c,"child_added",u))}})}),()=>{s()}},[t]);const s=()=>{r.current&&(r.current(),r.current=null),n.current.forEach(i=>i()),n.current.clear()};return null}function Yhe(){const{user:t}=ur(),[e,n]=g.useState(new Set),[r,s]=g.useState([]);return g.useEffect(()=>{(async()=>{if(!At.isNativePlatform()||!t)return;if((await jt.checkPermissions()).display!=="granted"){console.log("Notification permission not granted, skipping team invite check.");return}const a=r.filter(c=>{const u=c.inviteeId===t.uid,h=c.status==="pending",p=c.createdAt&&Date.now()-new Date(c.createdAt).getTime()<3e5,m=!e.has(c.id);return u&&h&&p&&m});if(a.length===0)return;console.log(`Found ${a.length} new team invite(s) to notify about.`);const l=a.map(c=>({id:Math.floor(Math.random()*1e6),title:"New Team Invitation",body:`${c.inviterName} invited you to join "${c.teamName}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"team_invite",inviteId:c.id,teamName:c.teamName,inviterId:c.inviterId}}));try{await jt.schedule({notifications:l}),n(c=>{const u=new Set(c);return a.forEach(h=>u.add(h.id)),u})}catch(c){console.error("Failed to schedule team invite notifications:",c)}})()},[r,t,e]),g.useEffect(()=>{},[t]),null}const I3=g.createContext(null);function Xhe({children:t}){const{user:e}=ur(),[n,r]=g.useState({}),[s,i]=g.useState({}),[o,a]=g.useState({}),[l,c]=g.useState({}),u=async(y,w,b)=>{if(!(!e||!w.trim()))try{const E=br(Re,"taskComments",y,"comments");await Qf(E,{taskId:y,userId:e.uid,userDisplayName:e.displayName||e.email,userPhotoURL:e.photoURL,content:w.trim(),createdAt:of(),isEdited:!1}),b&&await wy.sendCommentNotification(b,e.displayName||e.email||"Anonymous",w.trim(),y),oc.success("Comment added successfully")}catch(E){console.error("Error adding comment:",E),oc.error("Failed to add comment")}},h=async(y,w,b)=>{if(!(!e||!b.trim()))try{const E=it(Re,"taskComments",w,"comments",y);await Cs(E,{content:b.trim(),updatedAt:of(),isEdited:!0}),oc.success("Comment updated successfully")}catch(E){console.error("Error updating comment:",E),oc.error("Failed to update comment")}},p=async(y,w)=>{if(e)try{const b=it(Re,"taskComments",w,"comments",y);await Il(b),oc.success("Comment deleted successfully")}catch(b){console.error("Error deleting comment:",b),oc.error("Failed to delete comment")}},m=y=>{if(!y||l[y])return null;a(x=>({...x,[y]:!0}));const w=br(Re,"taskComments",y,"comments"),b=Cl(w,Tv("createdAt","desc"),pX(50)),E=hl(b,x=>{const R=x.docs.map(O=>({id:O.id,...O.data()}));r(O=>({...O,[y]:R})),i(O=>({...O,[y]:R.length})),a(O=>({...O,[y]:!1}))},x=>{console.error("Error fetching comments:",x),a(R=>({...R,[y]:!1}))});return c(x=>({...x,[y]:E})),E},_=y=>{l[y]&&(l[y](),c(w=>{const b={...w};return delete b[y],b}))};return f.jsx(I3.Provider,{value:{comments:n,commentCounts:s,loading:o,addComment:u,updateComment:h,deleteComment:p,subscribeToTaskComments:m,unsubscribeFromTaskComments:_},children:t})}function zfe(){const t=g.useContext(I3);if(!t)throw new Error("useComments must be used within a CommentsContextProvider");return t}const k3=g.createContext(void 0);function Zhe({children:t}){const[e,n]=g.useState([]),[r,s]=g.useState(!1),[i,o]=g.useState(!1),[a,l]=g.useState(0),[c,u]=g.useState(null),[h,p]=g.useState(0),[m,_]=g.useState(null),{user:y}=ur(),{toast:w}=Bl();g.useEffect(()=>{if(!y){n([]);return}s(!0);const k=Cl(br(Re,"meetingRecordings"),Bc("createdBy","==",y.uid),Tv("createdAt","desc")),S=hl(k,I=>{const C=[];I.forEach(P=>{C.push({id:P.id,...P.data()})}),n(C),s(!1)},I=>{console.error("Error fetching recordings:",I),w({title:"Connection error",description:"Failed to load recordings. Please try again.",variant:"destructive"}),s(!1)});return()=>S()},[y,w]),g.useEffect(()=>{let k;return i&&(k=setInterval(()=>{l(Math.floor((Date.now()-h)/1e3))},1e3)),()=>{k&&clearInterval(k)}},[i,h]);const b=async()=>{if(!y){w({title:"Authentication required",description:"Please sign in to start recording.",variant:"destructive"});return}m&&_(null);try{const k=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),S=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",I=new MediaRecorder(k,{mimeType:S}),C=[];I.ondataavailable=P=>{P.data.size>0&&C.push(P.data)},I.onstop=()=>{const P=new Blob(C,{type:S});_(P),k.getTracks().forEach(D=>D.stop())},I.start(1e3),u(I),o(!0),p(Date.now()),l(0),w({title:"Recording started ",description:"Your meeting is being recorded."})}catch(k){console.error("Error starting recording:",k),w({title:"Recording failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},E=async()=>{!c||!i||(c.stop(),o(!1),u(null),w({title:"Recording stopped ",description:"Ready to save your recording"}))},x=g.useCallback(()=>{_(null)},[]),L={recordings:e,loading:r,isRecording:i,recordingDuration:a,recordedAudio:m,startRecording:b,stopRecording:E,deleteRecording:async k=>{if(y)try{const S=e.find(I=>I.id===k);if(!S)return;await Il(it(Re,"meetingRecordings",k));try{const I=MA(ZA,S.audioUrl);await Ase(I)}catch(I){I.code!=="storage/object-not-found"&&console.warn("Could not delete audio file from storage:",I)}w({title:"Recording deleted",description:"The recording has been permanently removed.",variant:"destructive"})}catch(S){console.error("Error deleting recording:",S),w({title:"Delete failed",description:"Could not delete recording. Please try again.",variant:"destructive"})}},uploadRecording:async(k,S,I)=>{if(!y)return;const C=new Date().toISOString(),P=await Qf(br(Re,"meetingRecordings"),{title:S,audioUrl:"",duration:I,status:"uploading",createdAt:C,createdBy:y.uid,fileSize:k.size}),D=P.id;try{const A=`meetly-audio/${y.uid}/${C}-${S.replace(/[^a-zA-Z0-9]/g,"_")}.webm`,q=MA(ZA,A),B=await kse(q,k,{customMetadata:{firestoreId:D}}),Y=await Rse(B.ref);await Cs(P,{audioUrl:Y,status:"processing"}),x(),w({title:"Recording uploaded! ",description:"Your recording is being processed for transcription."})}catch(A){console.error("Error uploading recording:",A),await Il(it(Re,"meetingRecordings",D)),w({title:"Upload failed",description:"Could not upload recording. Please try again.",variant:"destructive"})}},clearRecordedAudio:x};return f.jsx(k3.Provider,{value:L,children:t})}function Wfe(){const t=g.useContext(k3);if(t===void 0)throw new Error("useMeetly must be used within a MeetlyContextProvider");return t}const KN=async()=>{At.getPlatform()==="android"&&(await jt.createChannel({id:"app_main_channel",name:"Primary Notifications",description:"General app notifications and reminders",importance:4,vibration:!0,visibility:1}),console.log('Android notification channel "app_main_channel" created or already exists.'))},Jhe=g.lazy(()=>wn(()=>import("./TasksPage-IAvqk8t1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),efe=g.lazy(()=>wn(()=>import("./DashboardPage-BiOWOiV7.js"),__vite__mapDeps([9,6,7,10,11,4,5,1,2,3,8,12,13,14]))),tfe=g.lazy(()=>wn(()=>import("./TeamChatPage-CwYU8xjR.js"),__vite__mapDeps([15,2,8,16]))),nfe=g.lazy(()=>wn(()=>import("./MeetlyPage-kqU1neT9.js"),__vite__mapDeps([17,18,11,4,7,19,16,8,20,21,22]))),rfe=g.lazy(()=>wn(()=>import("./TimerPage-B00c81lW.js"),__vite__mapDeps([23,12]))),sfe=g.lazy(()=>wn(()=>import("./CalendarPage-BYzD1iI9.js"),__vite__mapDeps([24,10,11,4,5,3,6,7,8,20,18,22]))),ife=g.lazy(()=>wn(()=>import("./NotesPage-HeIcGQMA.js"),__vite__mapDeps([25,3,8]))),ofe=g.lazy(()=>wn(()=>import("./AnalyticsPage-BGRkCECW.js"),__vite__mapDeps([26,12,13,22]))),afe=g.lazy(()=>wn(()=>import("./ChatPage-BINNPgw0.js"),__vite__mapDeps([27,19]))),lfe=g.lazy(()=>wn(()=>import("./ProfilePage-DfpXoPo_.js"),__vite__mapDeps([28,7,6,18,21,14]))),cfe=g.lazy(()=>wn(()=>import("./NotFound-B1WUXxUV.js"),[])),ufe=new m7({defaultOptions:{queries:{retry:3,staleTime:5*60*1e3}}});function dfe(){const{addNotification:t}=QS();return g.useEffect(()=>(hN(t),()=>hN(null)),[t]),null}const hfe=async(t,e)=>{if(!t||!e){console.error("updateUserFCMToken failed: userId or token is missing.");return}try{console.log(`Attempting to save FCM token for user ${t}...`);const n=it(Re,"users",t);await Cs(n,{fcmToken:e,lastUpdated:of()}),console.log("SUCCESSFULLY saved FCM token to Firestore.")}catch(n){console.error("CRITICAL ERROR saving FCM token to Firestore:",n)}};function ffe(){const{user:t}=ur(),e=Vu(),[n,r]=g.useState(null);g.useEffect(()=>{t&&n&&(console.log("User and FCM token are both available. Saving to Firestore."),hfe(t.uid,n.value))},[t,n]),g.useEffect(()=>{(async()=>{At.isNativePlatform()?await s():await i()})()},[e]);const s=async()=>{try{KN();const o=[];return await Xr.requestPermissions(),await Xr.register(),o.push(await Xr.addListener("registration",a=>{console.log("Push registration success. Received token."),r(a)})),o.push(await Xr.addListener("registrationError",a=>{console.error("Push registration FAILED:",a)})),o.push(await Xr.addListener("pushNotificationReceived",a=>{var u,h,p,m,_,y;console.log("SILENT/DATA-ONLY Push received:",a),((u=a.data)==null?void 0:u.type)==="chat_message"&&console.log("Chat message push data:",a.data);let l=((h=a.data)==null?void 0:h.title)||"New Notification",c=((p=a.data)==null?void 0:p.body)||"Check the app for details.";if(((m=a.data)==null?void 0:m.type)==="chat_message"){const w=((_=a.data)==null?void 0:_.senderName)||"Someone",b=((y=a.data)==null?void 0:y.message)||"New chat message.";l=`New message from ${w}`,c=b,console.log(`Constructed local notification: Title='${l}', Body='${c}'`)}jt.schedule({notifications:[{id:bb(),title:l,body:c,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:a.data}]})})),o.push(await Xr.addListener("pushNotificationActionPerformed",a=>{var c;console.log("Push notification action performed:",a);const l=(c=a.notification.data)==null?void 0:c.taskId;l&&e(`/tasks?taskId=${l}`)})),o.push(await jt.addListener("localNotificationActionPerformed",a=>{console.log("Local notification action performed:",a);const l=a.notification.extra;l!=null&&l.taskId?e("/tasks"):(l==null?void 0:l.type)==="chat_message"?e("/team-chat"):(l==null?void 0:l.type)==="team_invite"&&e("/dashboard")})),()=>{console.log("Removing all push notification listeners..."),o.forEach(a=>{try{a.remove()}catch(l){console.warn("Failed to remove listener handle:",l)}})}}catch(o){console.error("Failed to setup native notifications:",o)}},i=async()=>{try{if(await wy.init(),"Notification"in window&&Notification.permission==="default"){const o=await Notification.requestPermission();console.log("Web notification permission:",o)}"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o=>{if(o.data.type==="NOTIFICATION_ACTION"){const{action:a,notificationData:l}=o.data;l!=null&&l.taskId?e("/tasks"):(l==null?void 0:l.type)==="chat_message"&&e("/team-chat")}})}catch(o){console.error("Failed to setup web notifications:",o)}};return g.useEffect(()=>{if(!At.isNativePlatform())return;KN();const o=[];return(async()=>{try{await Xr.requestPermissions(),await Xr.register(),o.push(await Xr.addListener("registration",l=>{console.log("Push registration success. Received token."),r(l)})),o.push(await Xr.addListener("registrationError",l=>{console.error("Push registration FAILED:",l)})),o.push(await Xr.addListener("pushNotificationReceived",l=>{var h,p;console.log("SILENT/DATA-ONLY Push received:",l);const c=((h=l.data)==null?void 0:h.title)||"New Notification",u=((p=l.data)==null?void 0:p.body)||"Check the app for details.";jt.schedule({notifications:[{id:bb(),title:c,body:u,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:l.data}]})})),o.push(await Xr.addListener("pushNotificationActionPerformed",l=>{var u;console.log("Push notification action performed:",l);const c=(u=l.notification.data)==null?void 0:u.taskId;c&&e(`/tasks?taskId=${c}`)})),o.push(await jt.addListener("localNotificationActionPerformed",l=>{console.log("Local notification action performed:",l);const c=l.notification.extra;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"?e("/chat"):(c==null?void 0:c.type)==="team_invite"&&e("/dashboard")}))}catch(l){console.error("Failed to setup push notifications:",l)}})(),wy.init(),()=>{console.log("Removing all push notification listeners..."),o.forEach(l=>{try{l.remove()}catch(c){console.warn("Failed to remove listener handle:",c)}})}},[e]),f.jsxs(f.Fragment,{children:[f.jsx(dfe,{}),f.jsx(Whe,{}),f.jsx(Qhe,{}),f.jsx(Yhe,{}),f.jsxs(x1,{children:[f.jsx(Xn,{path:"/signin",element:f.jsx(Uhe,{})}),f.jsx(Xn,{path:"/signup",element:f.jsx(Bhe,{})}),f.jsx(Xn,{path:"/*",element:f.jsx(zhe,{children:f.jsx(F$,{children:f.jsx(gde,{children:f.jsx(g.Suspense,{fallback:f.jsx(vde,{}),children:f.jsxs(x1,{children:[f.jsx(Xn,{path:"/",element:f.jsx(efe,{})}),f.jsx(Xn,{path:"/tasks",element:f.jsx(Jhe,{})}),f.jsx(Xn,{path:"/team-chat",element:f.jsx(tfe,{})}),f.jsx(Xn,{path:"/meetly",element:f.jsx(nfe,{})}),f.jsx(Xn,{path:"/timer",element:f.jsx(rfe,{})}),f.jsx(Xn,{path:"/calendar",element:f.jsx(sfe,{})}),f.jsx(Xn,{path:"/notes",element:f.jsx(ife,{})}),f.jsx(Xn,{path:"/analytics",element:f.jsx(ofe,{})}),f.jsx(Xn,{path:"/chat",element:f.jsx(afe,{})}),f.jsx(Xn,{path:"/profile",element:f.jsx(lfe,{})}),f.jsx(Xn,{path:"*",element:f.jsx(cfe,{})})]})})})})})})]})]})}function pfe(){return f.jsx(F$,{children:f.jsx(y7,{client:ufe,children:f.jsx(k8,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:f.jsxs(UT,{children:[f.jsx(S8,{}),f.jsx(oq,{}),f.jsx(ble,{children:f.jsx(xle,{children:f.jsx(Sle,{children:f.jsx(O4,{children:f.jsx(Xhe,{children:f.jsx(sde,{children:f.jsx(Zhe,{children:f.jsx(bB,{children:f.jsx(ffe,{})})})})})})})})})]})})})})}const mfe=At.isNativePlatform();yO(document.getElementById("root")).render(f.jsx(pfe,{}));const gfe=async()=>{mfe?console.log("Running in native Capacitor environment"):"serviceWorker"in navigator&&(window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",t);const[e,n,r]=await Promise.all([wn(()=>Promise.resolve().then(()=>lde),void 0),wn(()=>import("./notificationScheduler-CN0CzxbQ.js"),[]),wn(()=>Promise.resolve().then(()=>Khe),void 0)]);await e.offlineSync.init(),navigator.serviceWorker.addEventListener("message",s=>{s.data.type==="NOTIFICATION_ACTION"&&window.dispatchEvent(new CustomEvent("notification-action",{detail:{action:s.data.action,data:s.data.notificationData}}))})}catch(t){console.log("SW registration failed: ",t)}}),["click","keydown","scroll","touchstart"].forEach(t=>{document.addEventListener(t,()=>{},{passive:!0})}))};gfe();export{ide as $,G0 as A,Qe as B,TT as C,cde as D,H4 as E,G4 as F,K4 as G,Br as H,Rs as I,F1 as J,a$ as K,l$ as L,nM as M,oC as N,Qv as O,w4 as P,zfe as Q,G as R,du as S,Yae as T,cM as U,due as V,hue as W,ql as X,QU as Y,Um as Z,OW as _,O$ as a,zy as a$,UT as a0,YM as a1,XM as a2,$T as a3,Q0 as a4,Kr as a5,Nfe as a6,ut as a7,Pfe as a8,pe as a9,Wfe as aA,oM as aB,pC as aC,kW as aD,Zz as aE,Kz as aF,On as aG,EH as aH,Wl as aI,jhe as aJ,C3 as aK,gb as aL,yb as aM,B1 as aN,SW as aO,bW as aP,$1 as aQ,j1 as aR,Vfe as aS,lM as aT,Fz as aU,PW as aV,dC as aW,wM as aX,_f as aY,wf as aZ,GV as a_,LB as aa,qoe as ab,zz as ac,K0 as ad,qi as ae,Ae as af,Uy as ag,rM as ah,u3 as ai,Cle as aj,Bl as ak,Zl as al,ZF as am,RA as an,ore as ao,lre as ap,yc as aq,kA as ar,Az as as,Jo as at,aW as au,vc as av,Rfe as aw,Afe as ax,Ws as ay,Mz as az,M$ as b,xf as b0,zi as b1,ei as b2,ti as b3,ni as b4,ri as b5,L1 as b6,dp as b7,Bi as b8,Ufe as b9,So as bA,dJ as bB,zv as bC,wn as bD,xfe as bE,$fe as ba,PB as bb,vT as bc,qu as bd,Gy as be,Wr as bf,Pf as bg,qS as bh,WS as bi,Gv as bj,qv as bk,Uu as bl,jT as bm,FT as bn,rz as bo,Qt as bp,Jv as bq,LT as br,Of as bs,El as bt,Nue as bu,Sa as bv,WT as bw,At as bx,Mi as by,Cj as bz,L$ as c,j$ as d,Z as e,S$ as f,ur as g,P$ as h,Ze as i,f as j,Wv as k,b$ as l,Le as m,Yv as n,E4 as o,Xv as p,Zv as q,g as r,_4 as s,yi as t,YS as u,oo as v,ao as w,vi as x,Vu as y,$z as z};
