import{m as R,aA as Ne,ak as ye,r as n,j as e,t as q,e as X,v as V,w as K,aB as ie,x as U,B as P,H as B,aC as Ue,aD as Be,ad as ve,a4 as be,D as ke,a as we,b as Ce,c as Se,ai as He,I as Me,C as oe,J as Ge,l as Q,at as W,_ as Oe,M as Pe,aE as Z,aF as Ve,z as Ke,a5 as Ze,a7 as Te,af as de,a9 as he,aG as Xe,aH as Je,aI as We,ah as Ye,u as Qe,g as es,aJ as ss,aK as ts,aL as te,aM as ae,S as xe}from"./index-CmPV5CT1.js";import{C as Re}from"./circle-alert-B94dV94b.js";import{f as ce}from"./format-BmZa2Fkx.js";import{u as as}from"./index-BVtwpD2P.js";import{S as Y}from"./sparkles-Ck2RKWx7.js";import{C as rs}from"./copy-jnsvgMHH.js";import{P as ns}from"./plus-lxv2YYA4.js";import{B as pe}from"./brain-CHZvHF1T.js";import{G as is,S as fe}from"./shield-BP7UPRXv.js";import{Z as cs}from"./zap-BVQ1LK7P.js";import"./en-US-DSSwd-Ay.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],os=R("clipboard-list",ls);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],je=R("clipboard",ds);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],us=R("cloud",ms);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ae=R("download",hs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]],re=R("file-audio",xs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],ne=R("file-down",ps);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],js=R("gavel",fs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],ee=R("languages",gs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],ys=R("list-checks",Ns);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ge=R("upload",vs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],le=R("volume-2",bs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ws=R("volume-x",ks);function Cs({className:s}){const{isRecording:o,recordingDuration:l,startRecording:g,stopRecording:u,uploadRecording:i,recordedAudio:f,clearRecordedAudio:N}=Ne(),{toast:h}=ye(),[x,b]=n.useState(null),[d,S]=n.useState(0),[T,y]=n.useState(!1),[t,k]=n.useState(!1),[p,j]=n.useState(""),[A,$]=n.useState(!1),I=n.useRef(null),D=n.useRef(null),L=n.useRef(null),z=n.useRef();n.useEffect(()=>{a()},[]),n.useEffect(()=>()=>{I.current&&I.current.close(),z.current&&cancelAnimationFrame(z.current),L.current&&URL.revokeObjectURL(L.current.src)},[]),n.useEffect(()=>{f&&k(!0)},[f]);const a=async()=>{try{const r=await navigator.permissions.query({name:"microphone"});console.log("Microphone permission query result:",r.state),b(r.state==="granted"),r.onchange=()=>{console.log("Microphone permission state changed to:",r.state),b(r.state==="granted")}}catch(r){console.warn("Permission API not supported or error querying permission:",r),b(null)}},c=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(w=>w.stop()),b(!0),h({title:"Microphone access granted! 🎙️",description:"You can now start recording meetings."}),console.log("Microphone access successfully granted via getUserMedia.")}catch(r){b(!1),h({title:"Microphone access denied",description:"Please allow microphone access to record meetings.",variant:"destructive"}),console.error("Microphone access denied via getUserMedia:",r)}},m=r=>{try{const w=new(window.AudioContext||window.webkitAudioContext),F=w.createAnalyser(),O=w.createMediaStreamSource(r);F.fftSize=256,O.connect(F),I.current=w,D.current=F,C()}catch(w){console.warn("Could not set up audio analyser:",w)}},C=()=>{if(!D.current)return;const r=new Uint8Array(D.current.frequencyBinCount),w=()=>{if(!D.current||!o)return;D.current.getByteFrequencyData(r);const F=r.reduce((O,qe)=>O+qe,0)/r.length;S(Math.min(100,F/255*100)),z.current=requestAnimationFrame(w)};w()},E=async()=>{if(x===!1&&(await c(),!x)){console.log("Permission was false, requested, but still not granted. Aborting start recording.");return}try{await g();const r=await navigator.mediaDevices.getUserMedia({audio:!0});m(r)}catch(r){console.error("Failed to start recording after permission check:",r),h({title:"Recording failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},H=async()=>{try{await u(),z.current&&cancelAnimationFrame(z.current),I.current&&(I.current.close(),I.current=null),S(0)}catch(r){console.error("Failed to stop recording:",r)}},_=async()=>{if(!f||!p.trim()){h({title:"Missing information",description:"Please provide a meeting title.",variant:"destructive"});return}$(!0);try{await i(f,p.trim(),l),k(!1),j("")}catch(r){console.error("Upload failed:",r)}finally{$(!1)}},v=r=>{k(r),r||(N(),j(""))},M=r=>{const w=Math.floor(r/3600),F=Math.floor(r%3600/60),O=r%60;return w>0?`${w}:${F.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`:`${F}:${O.toString().padStart(2,"0")}`},J=()=>{if(f)if(L.current)T?(L.current.pause(),y(!1)):(L.current.play(),y(!0));else{const r=new Audio(URL.createObjectURL(f));L.current=r,r.onended=()=>y(!1),r.play(),y(!0)}};return e.jsxs(e.Fragment,{children:[e.jsxs(q,{className:X("shadow-elegant",s),children:[e.jsx(V,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Audio Recorder"]})}),e.jsxs(U,{className:"space-y-6",children:[x===!1&&e.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Re,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"font-medium text-destructive",children:"Microphone Access Required"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Please allow microphone access to record meetings."}),e.jsx(P,{onClick:c,size:"sm",variant:"outline",children:"Grant Permission"})]}),e.jsxs("div",{className:"text-center space-y-4",children:[o&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(B,{variant:"destructive",className:"animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"}),"Recording"]}),e.jsx("div",{className:"text-3xl font-mono font-bold text-primary",children:M(l)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d>10?e.jsx(le,{className:"h-4 w-4 text-success"}):e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Audio Level"})]}),e.jsx(Ue,{value:d,className:"h-2 w-32 mx-auto"})]})]}),e.jsx("div",{className:"flex justify-center",children:o?e.jsx(P,{onClick:H,size:"lg",variant:"outline",className:"rounded-full h-16 w-16 border-red-500 text-red-500 hover:bg-red-50 shadow-lg hover:shadow-xl transition-all",children:e.jsx(Be,{className:"h-6 w-6"})}):e.jsx(P,{onClick:E,disabled:x===!1,size:"lg",className:"rounded-full h-16 w-16 bg-red-500 hover:bg-red-600 text-white shadow-lg hover:shadow-xl transition-all",children:e.jsx(ie,{className:"h-6 w-6"})})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:o?e.jsx("p",{children:"Click the stop button when your meeting is finished"}):e.jsx("p",{children:"Click the microphone to start recording your meeting"})})]}),f&&!o&&e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Recording Preview"}),e.jsx(B,{variant:"secondary",children:M(l)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{onClick:J,size:"sm",variant:"outline",className:"rounded-full",children:T?e.jsx(ve,{className:"h-4 w-4"}):e.jsx(be,{className:"h-4 w-4"})}),e.jsxs(P,{onClick:()=>k(!0),size:"sm",variant:"default",className:"flex-1",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Save Recording"]})]})]})]})]}),e.jsx(ke,{open:t,onOpenChange:v,children:e.jsxs(we,{className:"sm:max-w-md",children:[e.jsx(Ce,{children:e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Save Meeting Recording"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{htmlFor:"meetingTitle",children:"Meeting Title *"}),e.jsx(Me,{id:"meetingTitle",value:p,onChange:r=>j(r.target.value),placeholder:"e.g., Weekly Team Standup",autoFocus:!0})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Duration: ",M(l)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Audio: ",f?Math.round(f.size/1024):0," KB"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(P,{variant:"outline",onClick:()=>v(!1),className:"flex-1",disabled:A,children:"Cancel"}),e.jsx(P,{onClick:_,disabled:!p.trim()||A,className:"flex-1",children:A?"Uploading...":"Save & Process"})]})]})]})})]})}function Ss({onViewRecording:s,className:o}){const{recordings:l,loading:g,deleteRecording:u}=Ne(),[i,f]=n.useState(""),[N,h]=n.useState(null),x=l.filter(t=>t.title.toLowerCase().includes(i.toLowerCase())),b=t=>{const k=Math.floor(t/3600),p=Math.floor(t%3600/60),j=t%60;return k>0?`${k}:${p.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`:`${p}:${j.toString().padStart(2,"0")}`},d=t=>`${(t/1048576).toFixed(1)} MB`,S=t=>{switch(t){case"uploading":return e.jsx(W,{className:"h-4 w-4 animate-spin text-blue-500"});case"processing":return e.jsx(W,{className:"h-4 w-4 animate-spin text-orange-500"});case"completed":return e.jsx(Ke,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(Re,{className:"h-4 w-4 text-red-500"});default:return e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})}},T=t=>{switch(t){case"uploading":return e.jsx(B,{variant:"secondary",className:"text-blue-600 bg-blue-50",children:"Uploading"});case"processing":return e.jsx(B,{variant:"secondary",className:"text-orange-600 bg-orange-50",children:"Processing"});case"completed":return e.jsx(B,{variant:"secondary",className:"text-green-600 bg-green-50",children:"Completed"});case"failed":return e.jsx(B,{variant:"destructive",children:"Failed"});default:return e.jsx(B,{variant:"outline",children:"Unknown"})}},y=async t=>{if(confirm("Are you sure you want to delete this recording? This action cannot be undone.")){h(t);try{await u(t)}finally{h(null)}}};return e.jsxs(q,{className:X("shadow-elegant",o),children:[e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Meeting Recordings"]}),e.jsxs(B,{variant:"outline",children:[l.length," recording",l.length!==1?"s":""]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Me,{placeholder:"Search recordings...",value:i,onChange:t=>f(t.target.value),className:"pl-10"})]})]}),e.jsx(U,{className:"p-0",children:e.jsx(Q,{className:"h-[500px]",children:g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(W,{className:"h-8 w-8 animate-spin text-primary"})}):x.length===0?e.jsxs("div",{className:"text-center py-12 px-6",children:[e.jsx(re,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"font-medium text-muted-foreground mb-2",children:l.length===0?"No recordings yet":"No recordings found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.length===0?"Start recording your first meeting to see it here":"Try adjusting your search terms"})]}):e.jsx("div",{className:"divide-y",children:x.map(t=>e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors cursor-pointer group",onClick:()=>t.status==="completed"&&s(t),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:S(t.status)}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"font-medium text-sm leading-tight line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[T(t.status),e.jsx(P,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:k=>{k.stopPropagation(),y(t.id)},disabled:N===t.id,children:N===t.id?e.jsx(W,{className:"h-3 w-3 animate-spin"}):e.jsx(Oe,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-3 w-3"}),e.jsx("span",{children:b(t.duration)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"h-3 w-3"}),e.jsx("span",{children:ce(new Date(t.createdAt),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ae,{className:"h-3 w-3"}),e.jsx("span",{children:d(t.fileSize)})]})]}),t.status==="processing"&&e.jsx("div",{className:"text-xs text-muted-foreground",children:e.jsx("p",{children:"🤖 AI is generating transcript and summary..."})}),t.status==="completed"&&e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[t.transcript&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("span",{children:"Transcript"})]}),t.translatedTranscript&&e.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Translation"})]}),t.summary&&e.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[e.jsx(Ve,{className:"h-3 w-3"}),e.jsx("span",{children:"Summary"})]})]}),t.status==="failed"&&e.jsx("div",{className:"text-xs text-red-600",children:e.jsx("p",{children:"❌ Processing failed. Please try re-uploading."})})]})]})},t.id))})})})]})}var se="Checkbox",[Ms,Hs]=Ze(se),[Ps,me]=Ms(se);function Ts(s){const{__scopeCheckbox:o,checked:l,children:g,defaultChecked:u,disabled:i,form:f,name:N,onCheckedChange:h,required:x,value:b="on",internal_do_not_use_render:d}=s,[S,T]=We({prop:l,defaultProp:u??!1,onChange:h,caller:se}),[y,t]=n.useState(null),[k,p]=n.useState(null),j=n.useRef(!1),A=y?!!f||!!y.closest("form"):!0,$={checked:S,disabled:i,setChecked:T,control:y,setControl:t,name:N,form:f,value:b,hasConsumerStoppedPropagationRef:j,required:x,defaultChecked:G(u)?!1:u,isFormControl:A,bubbleInput:k,setBubbleInput:p};return e.jsx(Ps,{scope:o,...$,children:Rs(d)?d($):g})}var Ie="CheckboxTrigger",_e=n.forwardRef(({__scopeCheckbox:s,onKeyDown:o,onClick:l,...g},u)=>{const{control:i,value:f,disabled:N,checked:h,required:x,setControl:b,setChecked:d,hasConsumerStoppedPropagationRef:S,isFormControl:T,bubbleInput:y}=me(Ie,s),t=Te(u,b),k=n.useRef(h);return n.useEffect(()=>{const p=i==null?void 0:i.form;if(p){const j=()=>d(k.current);return p.addEventListener("reset",j),()=>p.removeEventListener("reset",j)}},[i,d]),e.jsx(de.button,{type:"button",role:"checkbox","aria-checked":G(h)?"mixed":h,"aria-required":x,"data-state":Ee(h),"data-disabled":N?"":void 0,disabled:N,value:f,...g,ref:t,onKeyDown:he(o,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:he(l,p=>{d(j=>G(j)?!0:!j),y&&T&&(S.current=p.isPropagationStopped(),S.current||p.stopPropagation())})})});_e.displayName=Ie;var ue=n.forwardRef((s,o)=>{const{__scopeCheckbox:l,name:g,checked:u,defaultChecked:i,required:f,disabled:N,value:h,onCheckedChange:x,form:b,...d}=s;return e.jsx(Ts,{__scopeCheckbox:l,checked:u,defaultChecked:i,disabled:N,required:f,onCheckedChange:x,name:g,form:b,value:h,internal_do_not_use_render:({isFormControl:S})=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{...d,ref:o,__scopeCheckbox:l}),S&&e.jsx(ze,{__scopeCheckbox:l})]})})});ue.displayName=se;var $e="CheckboxIndicator",De=n.forwardRef((s,o)=>{const{__scopeCheckbox:l,forceMount:g,...u}=s,i=me($e,l);return e.jsx(Xe,{present:g||G(i.checked)||i.checked===!0,children:e.jsx(de.span,{"data-state":Ee(i.checked),"data-disabled":i.disabled?"":void 0,...u,ref:o,style:{pointerEvents:"none",...s.style}})})});De.displayName=$e;var Le="CheckboxBubbleInput",ze=n.forwardRef(({__scopeCheckbox:s,...o},l)=>{const{control:g,hasConsumerStoppedPropagationRef:u,checked:i,defaultChecked:f,required:N,disabled:h,name:x,value:b,form:d,bubbleInput:S,setBubbleInput:T}=me(Le,s),y=Te(l,T),t=as(i),k=Je(g);n.useEffect(()=>{const j=S;if(!j)return;const A=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(A,"checked").set,D=!u.current;if(t!==i&&I){const L=new Event("click",{bubbles:D});j.indeterminate=G(i),I.call(j,G(i)?!1:i),j.dispatchEvent(L)}},[S,t,i,u]);const p=n.useRef(G(i)?!1:i);return e.jsx(de.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??p.current,required:N,disabled:h,name:x,value:b,form:d,...o,tabIndex:-1,ref:y,style:{...o.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ze.displayName=Le;function Rs(s){return typeof s=="function"}function G(s){return s==="indeterminate"}function Ee(s){return G(s)?"indeterminate":s?"checked":"unchecked"}const Fe=n.forwardRef(({className:s,...o},l)=>e.jsx(ue,{ref:l,className:X("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...o,children:e.jsx(De,{className:X("flex items-center justify-center text-current"),children:e.jsx(Ye,{className:"h-4 w-4"})})}));Fe.displayName=ue.displayName;function As({recording:s,open:o,onOpenChange:l}){const[g,u]=n.useState(!1),[i,f]=n.useState("summary"),[N,h]=n.useState([]),[x,b]=n.useState(null),{toast:d}=ye(),{addTask:S}=Qe(),{user:T}=es(),y=n.useRef(null),t=a=>{const c={keyPoints:[],decisions:[],actionItems:[]},m=a.split(`
`).filter(H=>H.trim()!=="");let C=null;const E={"key discussion points":"keyPoints","discussion points":"keyPoints","decisions made":"decisions","key decisions":"decisions","action items":"actionItems",tasks:"actionItems","next steps":"actionItems"};return m.forEach(H=>{const _=H.replace(/^(###|\*\*|\*|-|\d+\.)\s*/,"").replace(/:\**$/,"").trim().toLowerCase();let v=!1;for(const M in E)if(_===M){C=E[M],v=!0;break}if(!v){const M=H.replace(/^(\*|-|\+|•|\d+\.)\s*/,"").trim();M&&(C?c[C].push(M):c.keyPoints.push(M))}}),c.keyPoints.length===0&&c.decisions.length===0&&c.actionItems.length===0?{keyPoints:m,decisions:[],actionItems:[]}:c},k=a=>{const c=[],m=a.split(`
`);let C=1;const E=["action:","action item:","follow-up:","follow up:","decision:","task:","todo:","to do:","next step:","next steps:","assign:","assigned:","deliverable:","deliverables:","deadline:","due:","complete:","finish:"];m.forEach(H=>{const _=H.trim();if(!_)return;let v="",M=!1;const J=_.match(/^(\*|-|\+|•|\d+\.)\s*(.+)/);if(J)v=J[2].trim(),M=!0;else{const r=_.toLowerCase();for(const w of E)if(r.startsWith(w)){v=_.substring(w.length).trim(),M=!0;break}}if(!M&&_.length>10){const r=["need to","should","must","will","plan to","going to","schedule","arrange","contact","send","create","update","review","check","verify","confirm","prepare","draft"],w=_.toLowerCase();r.some(F=>w.includes(F))&&(v=_,M=!0)}M&&v&&v.length>5&&(v=v.replace(/\*\*([^*]+)\*\*/g,"$1"),v=v.replace(/[.!?]+$/,""),v=v.charAt(0).toUpperCase()+v.slice(1),c.push({id:`suggested-task-${C++}`,title:v,description:`From meeting: "${s.title}" on ${ce(new Date(s.createdAt),"MMM dd, yyyy")}`,checked:!1}))}),h(c)};if(n.useEffect(()=>{s!=null&&s.summary?(b(t(s.summary)),k(s.summary)):(b(null),h([]))},[s==null?void 0:s.summary]),!s)return null;const p=a=>{const c=Math.floor(a/3600),m=Math.floor(a%3600/60),C=Math.round(a%60);return c>0?`${c}:${m.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`:`${m}:${C.toString().padStart(2,"0")}`},j=a=>`${(a/(1024*1024)).toFixed(1)} MB`,A=async(a,c)=>{try{await navigator.clipboard.writeText(a),d({title:"Copied to clipboard! 📋",description:`${c} has been copied.`})}catch{d({title:"Copy failed",variant:"destructive"})}},$=(a,c)=>{const m=new Blob([a],{type:"text/plain"}),C=URL.createObjectURL(m),E=document.createElement("a");E.href=C,E.download=`${s.title}_${c}.txt`,E.click(),URL.revokeObjectURL(C),d({title:"Download started! 📥"})},I=()=>{if(y.current)g?y.current.pause():y.current.play();else{const a=new Audio(s.audioUrl);y.current=a,a.onplay=()=>u(!0),a.onpause=()=>u(!1),a.onended=()=>u(!1),a.onerror=()=>{u(!1),d({title:"Playback failed",variant:"destructive"})},a.play()}},D=a=>{h(c=>c.map(m=>m.id===a?{...m,checked:!m.checked}:m))},L=async()=>{if(!T){d({title:"Authentication required",variant:"destructive"});return}const a=N.filter(m=>m.checked);if(a.length===0){d({title:"No tasks selected"});return}let c=0;for(const m of a)try{await S({title:m.title,description:m.description,status:"todo",priority:"medium",createdBy:T.uid}),c++}catch(C){console.error("Failed to create task:",C)}c>0?(d({title:"Tasks created! 🎯",description:`Successfully added ${c} task(s) to your list.`}),h(m=>m.filter(C=>!C.checked))):d({title:"Task creation failed",variant:"destructive"})},z=N.filter(a=>a.checked).length;return e.jsx(ke,{open:o,onOpenChange:l,children:e.jsxs(we,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx(Ce,{children:e.jsxs(Se,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Z,{className:"h-6 w-6"}),s.title]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(q,{children:[e.jsx(V,{className:"pb-3",children:e.jsx(K,{className:"text-base",children:"Recording Details"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Duration"}),e.jsx("p",{className:"text-muted-foreground",children:p(s.duration)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Date"}),e.jsx("p",{className:"text-muted-foreground",children:ce(new Date(s.createdAt),"MMM dd, yyyy")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"File Size"}),e.jsx("p",{className:"text-muted-foreground",children:j(s.fileSize)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Audio"}),e.jsxs(P,{onClick:I,size:"sm",variant:"outline",className:"mt-1 h-7",children:[g?e.jsx(ve,{className:"h-3 w-3 mr-1"}):e.jsx(be,{className:"h-3 w-3 mr-1"}),g?"Pause":"Play"]})]})]})]})})]}),e.jsxs(ss,{value:i,onValueChange:f,className:"flex-1 mt-4",children:[e.jsxs(ts,{className:"grid w-full grid-cols-3",children:[e.jsxs(te,{value:"summary",className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Summary"]}),e.jsxs(te,{value:"transcript",className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Transcript"]}),e.jsxs(te,{value:"translation",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Translation"]})]}),e.jsx(ae,{value:"transcript",className:"mt-4",children:e.jsxs(q,{children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(K,{className:"text-base flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Transcript"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:()=>s.transcript&&A(s.transcript,"Transcript"),size:"sm",variant:"outline",disabled:!s.transcript,children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(P,{onClick:()=>s.transcript&&$(s.transcript,"transcript"),size:"sm",variant:"outline",disabled:!s.transcript,children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})}),e.jsx(U,{children:e.jsx(Q,{className:"h-[300px] pr-4",children:s.transcript?e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.transcript}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Transcript not available yet"}),s.status==="processing"&&e.jsx("p",{className:"text-xs mt-1",children:"AI is generating transcript..."}),s.status==="failed"&&e.jsx("p",{className:"text-xs mt-1 text-destructive",children:"Processing failed. Please try re-uploading."})]})})})]})}),e.jsx(ae,{value:"translation",className:"mt-4",children:e.jsxs(q,{children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(K,{className:"text-base flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Translation"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:()=>s.translatedTranscript&&A(s.translatedTranscript,"Translation"),size:"sm",variant:"outline",disabled:!s.translatedTranscript,children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(P,{onClick:()=>s.translatedTranscript&&$(s.translatedTranscript,"translation"),size:"sm",variant:"outline",disabled:!s.translatedTranscript,children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})}),e.jsx(U,{children:e.jsx(Q,{className:"h-[300px] pr-4",children:s.translatedTranscript?e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.translatedTranscript}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ee,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Translation not available yet"}),s.status==="processing"&&e.jsx("p",{className:"text-xs mt-1",children:"AI is generating translation..."}),s.status==="failed"&&e.jsx("p",{className:"text-xs mt-1 text-destructive",children:"Processing failed. Please try re-uploading."})]})})})]})}),e.jsx(ae,{value:"summary",className:"mt-4",children:e.jsxs(q,{children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(K,{className:"text-base flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"AI Summary"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:()=>s.summary&&A(s.summary,"Summary"),size:"sm",variant:"outline",disabled:!s.summary,children:[e.jsx(rs,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(P,{onClick:()=>s.summary&&$(s.summary,"summary"),size:"sm",variant:"outline",disabled:!s.summary,children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})}),e.jsx(U,{children:e.jsx(Q,{className:"h-[300px] pr-4",children:s.summary?e.jsxs("div",{className:"prose prose-sm max-w-none space-y-6",children:[x&&e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border",children:[e.jsxs("h3",{className:"font-semibold text-base mb-4 flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-primary"}),"Minutes of Meeting"]}),x.keyPoints.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[e.jsx(ys,{className:"h-4 w-4 text-muted-foreground"}),"Key Discussion Points"]}),e.jsx("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted-foreground",children:x.keyPoints.map((a,c)=>e.jsx("li",{children:a},`kp-${c}`))})]}),x.decisions.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[e.jsx(js,{className:"h-4 w-4 text-muted-foreground"}),"Decisions Made"]}),e.jsx("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted-foreground",children:x.decisions.map((a,c)=>e.jsx("li",{children:a},`d-${c}`))})]}),x.actionItems.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[e.jsx(os,{className:"h-4 w-4 text-muted-foreground"}),"Action Items"]}),e.jsx("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted-foreground",children:x.actionItems.map((a,c)=>e.jsx("li",{children:a},`ai-${c}`))})]})]}),N.length>0&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-dashed border-muted-foreground/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-base flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-primary"}),"AI Task Suggestions",e.jsxs(B,{variant:"secondary",className:"ml-2",children:[N.length," found"]})]}),z>0&&e.jsxs(P,{onClick:L,variant:"focus",size:"sm",className:"hover-scale",children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Create ",z," Task",z>1?"s":""]})]}),e.jsx("div",{className:"space-y-3",children:N.map(a=>e.jsxs("div",{className:X("flex items-start gap-3 p-3 rounded-lg border transition-all cursor-pointer hover:bg-muted/50",a.checked?"bg-primary/5 border-primary/30":"bg-muted/20 border-border"),onClick:()=>D(a.id),children:[e.jsx(Fe,{checked:a.checked,onCheckedChange:()=>D(a.id),className:"mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm leading-tight",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.description})]})]},a.id))}),z===0&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select tasks above to create them in your task list"})})]}),N.length===0&&s.summary&&e.jsx("div",{className:"mt-6 pt-4 border-t border-dashed border-muted-foreground/30",children:e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(xe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No actionable items detected"}),e.jsx("p",{className:"text-xs mt-1",children:"The AI didn't find any clear action points in this summary"})]})})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Y,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Summary not available yet"}),s.status==="processing"&&e.jsx("p",{className:"text-xs mt-1",children:"AI is generating summary..."})]})})})]})})]})]})]})})}function Gs(){const[s,o]=n.useState(null),[l,g]=n.useState(!1),u=i=>{o(i),g(!0)};return e.jsxs("div",{className:"container max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-purple-500/10 to-blue-500/10 rounded-2xl flex items-center justify-center shadow-elegant",children:e.jsx(ie,{className:"h-8 w-8 text-purple-600"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Meetly"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"AI-Powered Meeting Recordings & Transcription"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(q,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/20 dark:to-purple-900/20",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(pe,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),e.jsx("h3",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"AI Transcription"}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-300",children:"Powered by Google Gemini"})]})}),e.jsx(q,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(is,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Auto Translation"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:"Translate to English"})]})}),e.jsx(q,{className:"border-green-200 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(cs,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-200",children:"Smart Summary"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300",children:"Key points & action items"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx(Cs,{}),e.jsx(q,{className:"mt-4 border-muted",children:e.jsxs(U,{className:"p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Privacy & Security"]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx(us,{className:"h-3 w-3 mt-0.5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Secure Storage"}),e.jsx("p",{className:"text-muted-foreground",children:"Recordings stored in Firebase"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx(pe,{className:"h-3 w-3 mt-0.5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"AI Processing"}),e.jsx("p",{className:"text-muted-foreground",children:"Processed via Google Gemini API"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx(fe,{className:"h-3 w-3 mt-0.5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Private Access"}),e.jsx("p",{className:"text-muted-foreground",children:"Only you can access your recordings"})]})]})]})})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ss,{onViewRecording:u})})]}),e.jsx(As,{recording:s,open:l,onOpenChange:g})]})}export{Gs as default};
