import{r as u,j as e,D as B,a as z,b as K,c as I,d as U,B as b,X as V,e as y,u as Y,f as Z,g as _,h as $,k as ee,S as j,C as E,l as M,I as se}from"./index-CmPV5CT1.js";import{m as L,M as O,T as Q,a as te}from"./proxy-NI_uQqll.js";import{S as ae,u as q}from"./useTouchGestures-DTPpf8I6.js";import{T as re}from"./textarea-CLYlbfuL.js";import{P as S}from"./plus-lxv2YYA4.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./select-DWoYBqYA.js";import"./index-BVtwpD2P.js";function ie({open:i,onOpenChange:l,onCreateTask:a}){const[r,d]=u.useState(""),{notification:g}=q(),m=()=>{if(!r.trim())return;const n={title:r.trim()};a==null||a(n),l(!1),d(""),g("success")},p=n=>{n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),m())};return e.jsx(B,{open:i,onOpenChange:l,children:e.jsxs(z,{className:"max-w-md mx-4 sm:mx-auto rounded-2xl border-2 border-primary/20 shadow-2xl",children:[e.jsxs(K,{children:[e.jsxs(I,{className:"flex items-center gap-3 text-xl font-bold",children:[e.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(S,{className:"h-5 w-5 text-primary"})}),"Add Quick Task"]}),e.jsx(U,{children:"What would you like to accomplish?"})]}),e.jsxs("div",{className:"space-y-6 py-2",children:[e.jsx(re,{placeholder:"Describe your task...",value:r,onChange:n=>d(n.target.value),onKeyPress:p,className:"min-h-[120px] text-base leading-relaxed border-2 border-muted focus:border-primary/50 rounded-xl resize-none",autoFocus:!0}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(b,{onClick:()=>l(!1),variant:"outline",className:"flex-1 h-12 rounded-xl border-2 hover:bg-muted/50 transition-all",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(b,{onClick:m,disabled:!r.trim(),variant:"focus",className:"flex-1 h-12 rounded-xl shadow-lg hover:shadow-xl transition-all",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Create Task"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Press Enter to create â€¢ Swipe to dismiss"})]})]})})}function le({onCreateTask:i,className:l}){const[a,r]=u.useState(!1),{impact:d}=q(),g=()=>{r(!0),d("medium")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:y("fixed bottom-6 right-6 z-50",l),children:e.jsx(b,{onClick:g,className:y("h-16 w-16 rounded-full shadow-2xl bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary","transition-all duration-300 hover:scale-110 active:scale-95 border-2 border-white/20","shadow-glow hover:shadow-xl"),children:e.jsx(S,{className:"h-7 w-7 text-white drop-shadow-sm"})})}),e.jsx(ie,{open:a,onOpenChange:r,onCreateTask:i})]})}const ne={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},oe={duration:.2};function de({children:i,className:l,staggerDelay:a=.1}){return e.jsx(L.div,{className:l,initial:"initial",animate:"animate",variants:{initial:{},animate:{transition:{staggerChildren:a}}},children:i.map((r,d)=>e.jsx(L.div,{variants:ne,transition:oe,children:r},d))})}function be(){const{tasks:i,teamMembers:l,addTask:a,updateTask:r,deleteTask:d,toggleTaskStatus:g,toggleTaskPriority:m,setTaskFormActive:p}=Y(),{startTaskTimer:n}=Z(),{user:t,userProfile:ce}=_(),{createTaskOffline:C,updateTaskOffline:H,deleteTaskOffline:R,toggleTaskStatusOffline:W}=$(),D=ee(),[c,x]=u.useState(null),[N,F]=u.useState("");u.useEffect(()=>(p(!!c),()=>{p(!1)}),[c,p]);const{todoTasks:h,completedTasks:f}=u.useMemo(()=>({todoTasks:i.filter(s=>s.status!=="completed"),completedTasks:i.filter(s=>s.status==="completed")}),[i]),X=async s=>{!c||!(t!=null&&t.uid)||(navigator.onLine?r(c.id,s):await H(c.id,s,t.uid),x(null))},P=async()=>{if(!N.trim()||!(t!=null&&t.uid))return;const s={title:N.trim(),priority:"medium",status:"todo",createdBy:t.uid};navigator.onLine?a(s):await C(s,t.uid),F("")},v=s=>{const o=i.find(A=>A.id===s);o&&n(o)},w=async s=>{t!=null&&t.uid&&(navigator.onLine?d(s):await R(s,t.uid))},k=async s=>{t!=null&&t.uid&&(navigator.onLine?g(s):await W(s,t.uid))},G=s=>{s.key==="Enter"&&P()},T=s=>!s||s.length===0?[]:s.map(o=>l.find(A=>A.uid===o)).filter(o=>o!==void 0),J=u.useCallback(async s=>{if(!(t!=null&&t.uid))return;const o={...s,status:"todo",createdBy:t.uid};navigator.onLine?a({...o,createdAt:new Date().toISOString()}):await C(o,t.uid)},[t==null?void 0:t.uid,a,C]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-full flex flex-col",children:[e.jsx("div",{className:"h-full overflow-y-auto scrollbar-hide touch-pan-y",children:e.jsx("div",{className:"container max-w-7xl mx-auto p-0 md:p-6 flex flex-col flex-1 min-h-0",children:D?e.jsxs("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900/50",children:[e.jsxs("header",{className:"text-center pt-6 pb-4 px-4 bg-background",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"My Day"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1.5",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),e.jsx("main",{className:"flex-1 min-h-0 overflow-y-auto scrollbar-hide",children:e.jsxs("div",{className:"space-y-8 px-4 py-4 pb-28",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-card rounded-xl border shadow-sm mb-4",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-base font-semibold text-foreground",children:"Active Tasks"}),e.jsx("div",{className:"ml-auto bg-primary/10 text-primary text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full",children:h.length})]}),h.length===0?e.jsxs("div",{className:"text-center py-12 px-4 space-y-4 bg-background rounded-2xl border border-dashed",children:[e.jsx("div",{className:"h-24 w-24 bg-gradient-to-br from-primary/5 to-primary/10 rounded-full flex items-center justify-center mx-auto shadow-inner",children:e.jsx(j,{className:"h-12 w-12 text-muted-foreground/30"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:"All clear for today!"}),e.jsxs("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:["Tap the ",e.jsx(S,{className:"inline h-3.5 w-3.5"})," button below to add a new task."]})]})]}):e.jsx(de,{className:"space-y-3",children:h.map(s=>e.jsx(O,{task:s,onEdit:x,onDelete:w,onToggleStatus:k,onTogglePriority:m,onStartTimer:v,assignedProfiles:T(s.assignedTo)},s.id))})]}),f.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-card rounded-xl border shadow-sm mb-4",children:[e.jsx(E,{className:"h-5 w-5 text-success"}),e.jsx("h2",{className:"text-base font-semibold text-foreground",children:"Completed"}),e.jsx("div",{className:"ml-auto bg-success/10 text-success text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full",children:f.length})]}),e.jsx("div",{className:"space-y-3",children:f.map(s=>e.jsx(O,{task:s,onEdit:x,onDelete:w,onToggleStatus:k,onTogglePriority:m,onStartTimer:v,assignedProfiles:T(s.assignedTo)},s.id))})]})]})})]}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:y("text-center space-y-2 mb-6"),children:[e.jsx("h1",{className:y("font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent text-3xl md:text-4xl"),children:"My Day"}),e.jsx("p",{className:y("text-muted-foreground text-base md:text-lg"),children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 flex-1 min-h-0",children:[e.jsxs("div",{className:"flex flex-col space-y-4 flex-1 min-h-0 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"My Tasks"}),e.jsx("div",{className:"ml-auto bg-primary/10 text-primary px-2 py-1 rounded-full text-sm font-medium",children:h.length})]}),e.jsx(M,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"space-y-2 pr-2",children:h.length===0?e.jsxs("div",{className:"text-center py-12 space-y-3 mx-2",children:[e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-primary/10 to-focus/10 rounded-2xl flex items-center justify-center mx-auto shadow-elegant",children:e.jsx(j,{className:"h-10 w-10 text-muted-foreground/50"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No tasks yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your first task below to get started"})]})]}):h.map(s=>e.jsx(Q,{task:s,onEdit:x,onDelete:w,onToggleStatus:k,onTogglePriority:m,onStartTimer:v,assignedProfiles:T(s.assignedTo)},s.id))})})]}),e.jsxs("div",{className:"flex flex-col space-y-4 flex-1 min-h-0 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx(E,{className:"h-5 w-5 text-success"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Completed"}),e.jsx("div",{className:"ml-auto bg-success/10 text-success px-2 py-1 rounded-full text-sm font-medium",children:f.length})]}),e.jsx(M,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"space-y-2 pr-2",children:f.length===0?e.jsxs("div",{className:"text-center py-16 space-y-4",children:[e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-success/10 to-success/20 rounded-2xl flex items-center justify-center mx-auto shadow-elegant",children:e.jsx(E,{className:"h-10 w-10 text-muted-foreground/50"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No completed tasks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed tasks will appear here"})]})]}):f.map(s=>e.jsx(Q,{task:s,onEdit:x,onDelete:w,onToggleStatus:k,onTogglePriority:m,onStartTimer:v,assignedProfiles:T(s.assignedTo)},s.id))})})]})]})]})})}),!D&&e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-40 w-full max-w-2xl px-6",children:e.jsxs("div",{className:"flex items-center gap-3 bg-card/90 backdrop-blur-lg rounded-xl border-2 border-primary/20 shadow-elegant shadow-glow p-4 transition-smooth ring-2 ring-primary/30 hover:ring-primary/40",children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full bg-primary/10 hover:bg-primary/20 text-primary transition-smooth hover:scale-110 shrink-0",onClick:P,children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx(se,{value:N,onChange:s=>F(s.target.value),onKeyPress:G,placeholder:"Add a task",className:"border-none shadow-none focus-visible:ring-0 bg-transparent text-base placeholder:text-muted-foreground/70 flex-1 focus:placeholder:text-muted-foreground/50"}),N.trim()&&e.jsx(b,{onClick:P,variant:"focus",size:"sm",className:"hover-scale shadow-md",children:"Add"})]})}),D&&e.jsx(le,{onCreateTask:J})]}),e.jsx(B,{open:!!c,onOpenChange:()=>x(null),children:e.jsxs(z,{className:"sm:max-w-[500px] shadow-elegant",children:[e.jsx(K,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),"Edit Task"]})}),c&&e.jsx(te,{task:c,onSubmit:X,onCancel:()=>x(null),teamMembers:l})]})})]})}export{be as default};
